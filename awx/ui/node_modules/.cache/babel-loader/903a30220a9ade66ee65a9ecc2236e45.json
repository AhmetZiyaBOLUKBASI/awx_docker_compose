{"ast":null,"code":"import _styled from\"styled-components\";import{i18n}from\"@lingui/core\";import React from'react';import{Link}from'react-router-dom';import{Button,Tooltip}from'@patternfly/react-core';import{Tr,Td}from'@patternfly/react-table';import{PencilAltIcon,ExclamationTriangleIcon as PFExclamationTriangleIcon}from'@patternfly/react-icons';import styled from'styled-components';import{Schedule}from'types';import{formatDateString}from'util/dates';import{DetailList,Detail}from'../../DetailList';import{ActionsTd,ActionItem,TdBreakWord}from'../../PaginatedTable';import{ScheduleToggle}from'..';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ExclamationTriangleIcon=styled(PFExclamationTriangleIcon).withConfig({displayName:\"ScheduleListItem__ExclamationTriangleIcon\",componentId:\"kujov-0\"})([\"color:#c9190b;margin-left:20px;\"]);var _StyledButton=styled(Button).withConfig({displayName:\"ScheduleListItem___StyledButton\",componentId:\"kujov-1\"})([\"grid-column:2\"]);function ScheduleListItem(_ref){var rowIndex=_ref.rowIndex,isSelected=_ref.isSelected,onSelect=_ref.onSelect,schedule=_ref.schedule,isMissingInventory=_ref.isMissingInventory,isMissingSurvey=_ref.isMissingSurvey;var labelId=\"check-action-\".concat(schedule.id);var jobTypeLabels={inventory_update:/*i18n*/i18n._(\"Inventory Sync\"),job:/*i18n*/i18n._(\"Playbook Run\"),project_update:/*i18n*/i18n._(\"Source Control Update\"),system_job:/*i18n*/i18n._(\"Management Job\"),workflow_job:/*i18n*/i18n._(\"Workflow Job\")};var scheduleBaseUrl;var relatedResourceUrl;switch(schedule.summary_fields.unified_job_template.unified_job_type){case'inventory_update':scheduleBaseUrl=\"/inventories/inventory/\".concat(schedule.summary_fields.inventory.id,\"/sources/\").concat(schedule.summary_fields.unified_job_template.id,\"/schedules/\").concat(schedule.id);relatedResourceUrl=\"/inventories/inventory/\".concat(schedule.summary_fields.inventory.id,\"/sources/\").concat(schedule.summary_fields.unified_job_template.id,\"/details\");break;case'job':scheduleBaseUrl=\"/templates/job_template/\".concat(schedule.summary_fields.unified_job_template.id,\"/schedules/\").concat(schedule.id);relatedResourceUrl=\"/templates/job_template/\".concat(schedule.summary_fields.unified_job_template.id,\"/details\");break;case'project_update':scheduleBaseUrl=\"/projects/\".concat(schedule.summary_fields.unified_job_template.id,\"/schedules/\").concat(schedule.id);relatedResourceUrl=\"/projects/\".concat(schedule.summary_fields.unified_job_template.id,\"/details\");break;case'system_job':scheduleBaseUrl=\"/management_jobs/\".concat(schedule.summary_fields.unified_job_template.id,\"/schedules/\").concat(schedule.id);relatedResourceUrl=\"/management_jobs\";break;case'workflow_job':scheduleBaseUrl=\"/templates/workflow_job_template/\".concat(schedule.summary_fields.unified_job_template.id,\"/schedules/\").concat(schedule.id);relatedResourceUrl=\"/templates/workflow_job_template/\".concat(schedule.summary_fields.unified_job_template.id,\"/details\");break;default:break;}var isDisabled=Boolean(isMissingInventory||isMissingSurvey);return/*#__PURE__*/_jsxs(Tr,{id:\"schedule-row-\".concat(schedule.id),ouiaId:\"schedule-row-\".concat(schedule.id),children:[/*#__PURE__*/_jsx(Td,{select:{rowIndex:rowIndex,isSelected:isSelected,onSelect:onSelect,disable:false},dataLabel:/*i18n*/i18n._(\"Selected\")}),/*#__PURE__*/_jsxs(TdBreakWord,{id:labelId,dataLabel:/*i18n*/i18n._(\"Name\"),children:[/*#__PURE__*/_jsx(Link,{to:\"\".concat(scheduleBaseUrl,\"/details\"),children:/*#__PURE__*/_jsx(\"b\",{children:schedule.name})}),Boolean(isMissingInventory||isMissingSurvey)&&/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(Tooltip,{content:[isMissingInventory,isMissingSurvey].map(function(message){return message?/*#__PURE__*/_jsx(\"div\",{children:message},message):null;}),position:\"right\",children:/*#__PURE__*/_jsx(ExclamationTriangleIcon,{})})})]}),/*#__PURE__*/_jsx(TdBreakWord,{id:\"related-resource-\".concat(schedule.id),dataLabel:/*i18n*/i18n._(\"Related resource\"),children:/*#__PURE__*/_jsx(Link,{to:\"\".concat(relatedResourceUrl),children:/*#__PURE__*/_jsx(\"b\",{children:schedule.summary_fields.unified_job_template.name})})}),/*#__PURE__*/_jsx(Td,{dataLabel:/*i18n*/i18n._(\"Resource type\"),children:jobTypeLabels[schedule.summary_fields.unified_job_template.unified_job_type]}),/*#__PURE__*/_jsx(Td,{dataLabel:/*i18n*/i18n._(\"Next Run\"),children:schedule.next_run&&/*#__PURE__*/_jsx(DetailList,{stacked:true,children:/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Next Run\"),value:formatDateString(schedule.next_run,schedule.timezone)})})}),/*#__PURE__*/_jsxs(ActionsTd,{dataLabel:/*i18n*/i18n._(\"Actions\"),gridColumns:\"auto 40px\",children:[/*#__PURE__*/_jsx(ScheduleToggle,{schedule:schedule,isDisabled:isDisabled}),/*#__PURE__*/_jsx(ActionItem,{visible:schedule.summary_fields.user_capabilities.edit,tooltip:/*i18n*/i18n._(\"Edit Schedule\"),children:/*#__PURE__*/_jsx(_StyledButton,{ouiaId:\"\".concat(schedule.id,\"-edit-button\"),\"aria-label\":/*i18n*/i18n._(\"Edit Schedule\"),variant:\"plain\",component:Link,to:\"\".concat(scheduleBaseUrl,\"/edit\"),children:/*#__PURE__*/_jsx(PencilAltIcon,{})})})]})]});}export default ScheduleListItem;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/components/Schedule/ScheduleList/ScheduleListItem.js"],"names":["React","Link","Button","Tooltip","Tr","Td","PencilAltIcon","ExclamationTriangleIcon","PFExclamationTriangleIcon","styled","Schedule","formatDateString","DetailList","Detail","ActionsTd","ActionItem","TdBreakWord","ScheduleToggle","ScheduleListItem","rowIndex","isSelected","onSelect","schedule","isMissingInventory","isMissingSurvey","labelId","id","jobTypeLabels","inventory_update","job","project_update","system_job","workflow_job","scheduleBaseUrl","relatedResourceUrl","summary_fields","unified_job_template","unified_job_type","inventory","isDisabled","Boolean","disable","name","map","message","next_run","timezone","user_capabilities","edit"],"mappings":"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","sourcesContent":["import 'styled-components/macro';\nimport React from 'react';\nimport { bool, func } from 'prop-types';\n\nimport { t } from '@lingui/macro';\nimport { Link } from 'react-router-dom';\nimport { Button, Tooltip } from '@patternfly/react-core';\nimport { Tr, Td } from '@patternfly/react-table';\nimport {\n  PencilAltIcon,\n  ExclamationTriangleIcon as PFExclamationTriangleIcon,\n} from '@patternfly/react-icons';\nimport styled from 'styled-components';\nimport { Schedule } from 'types';\nimport { formatDateString } from 'util/dates';\nimport { DetailList, Detail } from '../../DetailList';\nimport { ActionsTd, ActionItem, TdBreakWord } from '../../PaginatedTable';\nimport { ScheduleToggle } from '..';\n\nconst ExclamationTriangleIcon = styled(PFExclamationTriangleIcon)`\n  color: #c9190b;\n  margin-left: 20px;\n`;\n\nfunction ScheduleListItem({\n  rowIndex,\n  isSelected,\n  onSelect,\n  schedule,\n  isMissingInventory,\n  isMissingSurvey,\n}) {\n  const labelId = `check-action-${schedule.id}`;\n\n  const jobTypeLabels = {\n    inventory_update: t`Inventory Sync`,\n    job: t`Playbook Run`,\n    project_update: t`Source Control Update`,\n    system_job: t`Management Job`,\n    workflow_job: t`Workflow Job`,\n  };\n\n  let scheduleBaseUrl;\n  let relatedResourceUrl;\n\n  switch (schedule.summary_fields.unified_job_template.unified_job_type) {\n    case 'inventory_update':\n      scheduleBaseUrl = `/inventories/inventory/${schedule.summary_fields.inventory.id}/sources/${schedule.summary_fields.unified_job_template.id}/schedules/${schedule.id}`;\n      relatedResourceUrl = `/inventories/inventory/${schedule.summary_fields.inventory.id}/sources/${schedule.summary_fields.unified_job_template.id}/details`;\n      break;\n    case 'job':\n      scheduleBaseUrl = `/templates/job_template/${schedule.summary_fields.unified_job_template.id}/schedules/${schedule.id}`;\n      relatedResourceUrl = `/templates/job_template/${schedule.summary_fields.unified_job_template.id}/details`;\n      break;\n    case 'project_update':\n      scheduleBaseUrl = `/projects/${schedule.summary_fields.unified_job_template.id}/schedules/${schedule.id}`;\n      relatedResourceUrl = `/projects/${schedule.summary_fields.unified_job_template.id}/details`;\n      break;\n    case 'system_job':\n      scheduleBaseUrl = `/management_jobs/${schedule.summary_fields.unified_job_template.id}/schedules/${schedule.id}`;\n      relatedResourceUrl = `/management_jobs`;\n      break;\n    case 'workflow_job':\n      scheduleBaseUrl = `/templates/workflow_job_template/${schedule.summary_fields.unified_job_template.id}/schedules/${schedule.id}`;\n      relatedResourceUrl = `/templates/workflow_job_template/${schedule.summary_fields.unified_job_template.id}/details`;\n      break;\n    default:\n      break;\n  }\n  const isDisabled = Boolean(isMissingInventory || isMissingSurvey);\n\n  return (\n    <Tr\n      id={`schedule-row-${schedule.id}`}\n      ouiaId={`schedule-row-${schedule.id}`}\n    >\n      <Td\n        select={{\n          rowIndex,\n          isSelected,\n          onSelect,\n          disable: false,\n        }}\n        dataLabel={t`Selected`}\n      />\n      <TdBreakWord id={labelId} dataLabel={t`Name`}>\n        <Link to={`${scheduleBaseUrl}/details`}>\n          <b>{schedule.name}</b>\n        </Link>\n        {Boolean(isMissingInventory || isMissingSurvey) && (\n          <span>\n            <Tooltip\n              content={[isMissingInventory, isMissingSurvey].map((message) =>\n                message ? <div key={message}>{message}</div> : null\n              )}\n              position=\"right\"\n            >\n              <ExclamationTriangleIcon />\n            </Tooltip>\n          </span>\n        )}\n      </TdBreakWord>\n      <TdBreakWord\n        id={`related-resource-${schedule.id}`}\n        dataLabel={t`Related resource`}\n      >\n        <Link to={`${relatedResourceUrl}`}>\n          <b>{schedule.summary_fields.unified_job_template.name}</b>\n        </Link>\n      </TdBreakWord>\n      <Td dataLabel={t`Resource type`}>\n        {\n          jobTypeLabels[\n            schedule.summary_fields.unified_job_template.unified_job_type\n          ]\n        }\n      </Td>\n      <Td dataLabel={t`Next Run`}>\n        {schedule.next_run && (\n          <DetailList stacked>\n            <Detail\n              label={t`Next Run`}\n              value={formatDateString(schedule.next_run, schedule.timezone)}\n            />\n          </DetailList>\n        )}\n      </Td>\n      <ActionsTd dataLabel={t`Actions`} gridColumns=\"auto 40px\">\n        <ScheduleToggle schedule={schedule} isDisabled={isDisabled} />\n        <ActionItem\n          visible={schedule.summary_fields.user_capabilities.edit}\n          tooltip={t`Edit Schedule`}\n        >\n          <Button\n            ouiaId={`${schedule.id}-edit-button`}\n            aria-label={t`Edit Schedule`}\n            css=\"grid-column: 2\"\n            variant=\"plain\"\n            component={Link}\n            to={`${scheduleBaseUrl}/edit`}\n          >\n            <PencilAltIcon />\n          </Button>\n        </ActionItem>\n      </ActionsTd>\n    </Tr>\n  );\n}\n\nScheduleListItem.propTypes = {\n  isSelected: bool.isRequired,\n  onSelect: func.isRequired,\n  schedule: Schedule.isRequired,\n};\n\nexport default ScheduleListItem;\n"]},"metadata":{},"sourceType":"module"}