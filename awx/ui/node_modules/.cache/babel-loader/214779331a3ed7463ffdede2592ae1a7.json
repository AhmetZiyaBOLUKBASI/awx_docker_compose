{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _classCallCheck from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{i18n}from\"@lingui/core\";import*as d3 from'd3';var Tooltip=/*#__PURE__*/function(){function Tooltip(opts){var _this=this;_classCallCheck(this,Tooltip);this.handleMouseOver=function(event,data){var success=0;var fail=0;var total=0;var _d3$pointer=d3.pointer(event),_d3$pointer2=_slicedToArray(_d3$pointer,2),x=_d3$pointer2[0],y=_d3$pointer2[1];var tooltipPointerX=x+75;var formatTooltipDate=d3.timeFormat('%m/%d');if(!event){return;}var toolTipWidth=_this.toolTipBase.node().getBoundingClientRect().width;var chartWidth=d3.select(\"\".concat(_this.svg,\"> svg\")).node().getBoundingClientRect().width;var overflow=100-toolTipWidth/chartWidth*100;var flipped=overflow<tooltipPointerX/chartWidth*100;if(data){success=data.RAN||0;fail=data.FAIL||0;total=data.TOTAL||0;_this.date.text(formatTooltipDate(data.DATE||null));}if(data){success=data.RAN||0;fail=data.FAIL||0;total=data.TOTAL||0;_this.date.text(formatTooltipDate(data.DATE||null));}_this.jobs.text(\"\".concat(total,\" \").concat(_this.label));_this.jobsWidth=_this.jobs.node().getComputedTextLength();_this.failed.text(\"\".concat(fail));_this.successful.text(\"\".concat(success));_this.successTextWidth=_this.successful.node().getComputedTextLength();_this.failTextWidth=_this.failed.node().getComputedTextLength();var maxTextPerc=_this.jobsWidth/_this.boxWidth*100;var threshold=40;var overage=maxTextPerc/threshold;var adjustedWidth;if(maxTextPerc>threshold){adjustedWidth=_this.boxWidth*overage;}else{adjustedWidth=_this.boxWidth;}_this.boundingBox.attr('width',adjustedWidth);_this.toolTipBase.attr('transform',\"translate(\".concat(tooltipPointerX,\", \").concat(y,\")\"));if(flipped){_this.toolTipPoint.attr('transform','translate(-20, -10) rotate(45)');_this.boundingBox.attr('x',-adjustedWidth-20);_this.circleGreen.attr('cx',-adjustedWidth);_this.circleRed.attr('cx',-adjustedWidth);_this.icon.attr('x',-adjustedWidth-2);_this.successText.attr('x',-adjustedWidth+17);_this.failText.attr('x',-adjustedWidth+17);_this.successful.attr('x',-_this.successTextWidth-20-12);_this.failed.attr('x',-_this.failTextWidth-20-12);_this.date.attr('x',-adjustedWidth-5);_this.jobs.attr('x',-_this.jobsWidth/2-14);}else{_this.toolTipPoint.attr('transform','translate(10, -10) rotate(45)');_this.boundingBox.attr('x',10);_this.circleGreen.attr('cx',26);_this.circleRed.attr('cx',26);_this.icon.attr('x',24);_this.successText.attr('x',43);_this.failText.attr('x',43);_this.successful.attr('x',adjustedWidth-_this.successTextWidth);_this.failed.attr('x',adjustedWidth-_this.failTextWidth);_this.date.attr('x',20);_this.jobs.attr('x',adjustedWidth);}_this.toolTipBase.style('opacity',1);_this.toolTipBase.interrupt();};this.handleMouseOut=function(){_this.toolTipBase.transition().delay(15).style('opacity',0).style('pointer-events','none');};this.label=opts.label;this.svg=opts.svg;this.colors=opts.colors;this.draw();}_createClass(Tooltip,[{key:\"draw\",value:function draw(){this.toolTipBase=d3.select(\"\".concat(this.svg,\" > svg\")).append('g');this.toolTipBase.attr('id','chart-tooltip');this.toolTipBase.attr('overflow','visible');this.toolTipBase.style('opacity',0);this.toolTipBase.style('pointer-events','none');this.toolTipBase.attr('transform','translate(100, 100)');this.boxWidth=145;this.textWidthThreshold=20;this.toolTipPoint=this.toolTipBase.append('rect').attr('transform','translate(10, -10) rotate(45)').attr('x',0).attr('y',0).attr('height',20).attr('width',20).attr('fill','#393f44');this.boundingBox=this.toolTipBase.append('rect').attr('x',10).attr('y',-41).attr('rx',2).attr('height',82).attr('width',this.boxWidth).attr('fill','#393f44');this.circleGreen=this.toolTipBase.append('circle').attr('cx',26).attr('cy',0).attr('r',7).attr('stroke','white').attr('fill',this.colors(1));this.circleRed=this.toolTipBase.append('circle').attr('cx',26).attr('cy',26).attr('r',7).attr('stroke','white').attr('fill',this.colors(0));this.successText=this.toolTipBase.append('text').attr('x',43).attr('y',4).attr('font-size',12).attr('fill','white').text(/*i18n*/i18n._(\"Successful\"));this.failText=this.toolTipBase.append('text').attr('x',43).attr('y',28).attr('font-size',12).attr('fill','white').text(/*i18n*/i18n._(\"Failed\"));this.icon=this.toolTipBase.append('text').attr('fill','white').attr('stroke','white').attr('x',24).attr('y',30).attr('font-size',12).text('!');this.jobs=this.toolTipBase.append('text').attr('fill','white').attr('x',137).attr('y',-21).attr('font-size',12).attr('text-anchor','end').text(/*i18n*/i18n._(\"No Jobs\"));this.successful=this.toolTipBase.append('text').attr('fill','white').attr('font-size',12).attr('x',122).attr('y',4).attr('id','successful-count').text('0');this.failed=this.toolTipBase.append('text').attr('fill','white').attr('font-size',12).attr('x',122).attr('y',28).attr('id','failed-count').text('0');this.date=this.toolTipBase.append('text').attr('fill','white').attr('stroke','white').attr('x',20).attr('y',-21).attr('font-size',12).text(/*i18n*/i18n._(\"Never\"));}}]);return Tooltip;}();export default Tooltip;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/Dashboard/shared/ChartTooltip.js"],"names":["d3","Tooltip","opts","handleMouseOver","event","data","success","fail","total","pointer","x","y","tooltipPointerX","formatTooltipDate","timeFormat","toolTipWidth","toolTipBase","node","getBoundingClientRect","width","chartWidth","select","svg","overflow","flipped","RAN","FAIL","TOTAL","date","text","DATE","jobs","label","jobsWidth","getComputedTextLength","failed","successful","successTextWidth","failTextWidth","maxTextPerc","boxWidth","threshold","overage","adjustedWidth","boundingBox","attr","toolTipPoint","circleGreen","circleRed","icon","successText","failText","style","interrupt","handleMouseOut","transition","delay","colors","draw","append","textWidthThreshold"],"mappings":"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","sourcesContent":["import * as d3 from 'd3';\nimport { t } from '@lingui/macro';\n\nclass Tooltip {\n  constructor(opts) {\n    this.label = opts.label;\n    this.svg = opts.svg;\n    this.colors = opts.colors;\n\n    this.draw();\n  }\n\n  draw() {\n    this.toolTipBase = d3.select(`${this.svg} > svg`).append('g');\n    this.toolTipBase.attr('id', 'chart-tooltip');\n    this.toolTipBase.attr('overflow', 'visible');\n    this.toolTipBase.style('opacity', 0);\n    this.toolTipBase.style('pointer-events', 'none');\n    this.toolTipBase.attr('transform', 'translate(100, 100)');\n    this.boxWidth = 145;\n    this.textWidthThreshold = 20;\n\n    this.toolTipPoint = this.toolTipBase\n      .append('rect')\n      .attr('transform', 'translate(10, -10) rotate(45)')\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('height', 20)\n      .attr('width', 20)\n      .attr('fill', '#393f44');\n    this.boundingBox = this.toolTipBase\n      .append('rect')\n      .attr('x', 10)\n      .attr('y', -41)\n      .attr('rx', 2)\n      .attr('height', 82)\n      .attr('width', this.boxWidth)\n      .attr('fill', '#393f44');\n    this.circleGreen = this.toolTipBase\n      .append('circle')\n      .attr('cx', 26)\n      .attr('cy', 0)\n      .attr('r', 7)\n      .attr('stroke', 'white')\n      .attr('fill', this.colors(1));\n    this.circleRed = this.toolTipBase\n      .append('circle')\n      .attr('cx', 26)\n      .attr('cy', 26)\n      .attr('r', 7)\n      .attr('stroke', 'white')\n      .attr('fill', this.colors(0));\n    this.successText = this.toolTipBase\n      .append('text')\n      .attr('x', 43)\n      .attr('y', 4)\n      .attr('font-size', 12)\n      .attr('fill', 'white')\n      .text(t`Successful`);\n    this.failText = this.toolTipBase\n      .append('text')\n      .attr('x', 43)\n      .attr('y', 28)\n      .attr('font-size', 12)\n      .attr('fill', 'white')\n      .text(t`Failed`);\n    this.icon = this.toolTipBase\n      .append('text')\n      .attr('fill', 'white')\n      .attr('stroke', 'white')\n      .attr('x', 24)\n      .attr('y', 30)\n      .attr('font-size', 12)\n      .text('!');\n    this.jobs = this.toolTipBase\n      .append('text')\n      .attr('fill', 'white')\n      .attr('x', 137)\n      .attr('y', -21)\n      .attr('font-size', 12)\n      .attr('text-anchor', 'end')\n      .text(t`No Jobs`);\n    this.successful = this.toolTipBase\n      .append('text')\n      .attr('fill', 'white')\n      .attr('font-size', 12)\n      .attr('x', 122)\n      .attr('y', 4)\n      .attr('id', 'successful-count')\n      .text('0');\n    this.failed = this.toolTipBase\n      .append('text')\n      .attr('fill', 'white')\n      .attr('font-size', 12)\n      .attr('x', 122)\n      .attr('y', 28)\n      .attr('id', 'failed-count')\n      .text('0');\n    this.date = this.toolTipBase\n      .append('text')\n      .attr('fill', 'white')\n      .attr('stroke', 'white')\n      .attr('x', 20)\n      .attr('y', -21)\n      .attr('font-size', 12)\n      .text(t`Never`);\n  }\n\n  handleMouseOver = (event, data) => {\n    let success = 0;\n    let fail = 0;\n    let total = 0;\n    const [x, y] = d3.pointer(event);\n    const tooltipPointerX = x + 75;\n\n    const formatTooltipDate = d3.timeFormat('%m/%d');\n    if (!event) {\n      return;\n    }\n\n    const toolTipWidth = this.toolTipBase.node().getBoundingClientRect().width;\n    const chartWidth = d3\n      .select(`${this.svg}> svg`)\n      .node()\n      .getBoundingClientRect().width;\n    const overflow = 100 - (toolTipWidth / chartWidth) * 100;\n    const flipped = overflow < (tooltipPointerX / chartWidth) * 100;\n    if (data) {\n      success = data.RAN || 0;\n      fail = data.FAIL || 0;\n      total = data.TOTAL || 0;\n      this.date.text(formatTooltipDate(data.DATE || null));\n    }\n\n    if (data) {\n      success = data.RAN || 0;\n      fail = data.FAIL || 0;\n      total = data.TOTAL || 0;\n      this.date.text(formatTooltipDate(data.DATE || null));\n    }\n\n    this.jobs.text(`${total} ${this.label}`);\n    this.jobsWidth = this.jobs.node().getComputedTextLength();\n    this.failed.text(`${fail}`);\n    this.successful.text(`${success}`);\n    this.successTextWidth = this.successful.node().getComputedTextLength();\n    this.failTextWidth = this.failed.node().getComputedTextLength();\n\n    const maxTextPerc = (this.jobsWidth / this.boxWidth) * 100;\n    const threshold = 40;\n    const overage = maxTextPerc / threshold;\n    let adjustedWidth;\n    if (maxTextPerc > threshold) {\n      adjustedWidth = this.boxWidth * overage;\n    } else {\n      adjustedWidth = this.boxWidth;\n    }\n\n    this.boundingBox.attr('width', adjustedWidth);\n    this.toolTipBase.attr('transform', `translate(${tooltipPointerX}, ${y})`);\n    if (flipped) {\n      this.toolTipPoint.attr('transform', 'translate(-20, -10) rotate(45)');\n      this.boundingBox.attr('x', -adjustedWidth - 20);\n      this.circleGreen.attr('cx', -adjustedWidth);\n      this.circleRed.attr('cx', -adjustedWidth);\n      this.icon.attr('x', -adjustedWidth - 2);\n      this.successText.attr('x', -adjustedWidth + 17);\n      this.failText.attr('x', -adjustedWidth + 17);\n      this.successful.attr('x', -this.successTextWidth - 20 - 12);\n      this.failed.attr('x', -this.failTextWidth - 20 - 12);\n      this.date.attr('x', -adjustedWidth - 5);\n      this.jobs.attr('x', -this.jobsWidth / 2 - 14);\n    } else {\n      this.toolTipPoint.attr('transform', 'translate(10, -10) rotate(45)');\n      this.boundingBox.attr('x', 10);\n      this.circleGreen.attr('cx', 26);\n      this.circleRed.attr('cx', 26);\n      this.icon.attr('x', 24);\n      this.successText.attr('x', 43);\n      this.failText.attr('x', 43);\n      this.successful.attr('x', adjustedWidth - this.successTextWidth);\n      this.failed.attr('x', adjustedWidth - this.failTextWidth);\n      this.date.attr('x', 20);\n      this.jobs.attr('x', adjustedWidth);\n    }\n\n    this.toolTipBase.style('opacity', 1);\n    this.toolTipBase.interrupt();\n  };\n\n  handleMouseOut = () => {\n    this.toolTipBase\n      .transition()\n      .delay(15)\n      .style('opacity', 0)\n      .style('pointer-events', 'none');\n  };\n}\n\nexport default Tooltip;\n"]},"metadata":{},"sourceType":"module"}