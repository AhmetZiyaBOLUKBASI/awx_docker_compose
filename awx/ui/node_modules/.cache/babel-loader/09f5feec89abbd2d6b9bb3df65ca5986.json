{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";/* eslint-disable react/jsx-no-useless-fragment */import React,{useState,useEffect}from'react';import{Link,Redirect,Route,Switch,useLocation,useParams}from'react-router-dom';import{CaretLeftIcon}from'@patternfly/react-icons';import{Card,PageSection}from'@patternfly/react-core';import{Config}from'contexts/Config';import RoutedTabs from'components/RoutedTabs';import ContentError from'components/ContentError';import{TeamsAPI}from'api';import{ResourceAccessList}from'components/ResourceAccessList';import TeamDetail from'./TeamDetail';import TeamEdit from'./TeamEdit';import TeamRolesList from'./TeamRoles';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Team(_ref){var setBreadcrumb=_ref.setBreadcrumb;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),team=_useState2[0],setTeam=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),contentError=_useState4[0],setContentError=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),hasContentLoading=_useState6[0],setHasContentLoading=_useState6[1];var location=useLocation();var _useParams=useParams(),id=_useParams.id;useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$TeamsAPI$readD,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return TeamsAPI.readDetail(id);case 3:_yield$TeamsAPI$readD=_context.sent;data=_yield$TeamsAPI$readD.data;setBreadcrumb(data);setTeam(data);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);setContentError(_context.t0);case 12:_context.prev=12;setHasContentLoading(false);return _context.finish(12);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,9,12,15]]);}))();},[id,setBreadcrumb,location]);var tabsArray=[{name:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CaretLeftIcon,{}),/*i18n*/i18n._(\"Back to Teams\")]}),link:\"/teams\",id:99,isBackButton:true},{name:/*i18n*/i18n._(\"Details\"),link:\"/teams/\".concat(id,\"/details\"),id:0},{name:/*i18n*/i18n._(\"Access\"),link:\"/teams/\".concat(id,\"/access\"),id:1},{name:/*i18n*/i18n._(\"Roles\"),link:\"/teams/\".concat(id,\"/roles\"),id:2}];var showCardHeader=true;if(location.pathname.endsWith('edit')){showCardHeader=false;}if(!hasContentLoading&&contentError){return/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(ContentError,{error:contentError,children:contentError.response.status===404&&/*#__PURE__*/_jsxs(\"span\",{children:[/*i18n*/i18n._(\"Team not found.\"),' ',/*#__PURE__*/_jsx(Link,{to:\"/teams\",children:/*i18n*/i18n._(\"View all Teams.\")})]})})})});}return/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsxs(Card,{children:[showCardHeader&&/*#__PURE__*/_jsx(RoutedTabs,{tabsArray:tabsArray}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Redirect,{from:\"/teams/:id\",to:\"/teams/:id/details\",exact:true}),team&&/*#__PURE__*/_jsx(Route,{path:\"/teams/:id/details\",children:/*#__PURE__*/_jsx(TeamDetail,{team:team})}),team&&/*#__PURE__*/_jsx(Route,{path:\"/teams/:id/edit\",children:/*#__PURE__*/_jsx(TeamEdit,{team:team})}),team&&/*#__PURE__*/_jsx(Route,{path:\"/teams/:id/access\",children:/*#__PURE__*/_jsx(ResourceAccessList,{resource:team,apiModel:TeamsAPI})}),team&&/*#__PURE__*/_jsx(Route,{path:\"/teams/:id/roles\",children:/*#__PURE__*/_jsx(Config,{children:function children(_ref3){var me=_ref3.me;return/*#__PURE__*/_jsx(_Fragment,{children:me&&/*#__PURE__*/_jsx(TeamRolesList,{me:me,team:team})});}})}),/*#__PURE__*/_jsx(Route,{path:\"*\",children:!hasContentLoading&&/*#__PURE__*/_jsx(ContentError,{isNotFound:true,children:id&&/*#__PURE__*/_jsx(Link,{to:\"/teams/\".concat(id,\"/details\"),children:/*i18n*/i18n._(\"View Team Details\")})})},\"not-found\")]})]})});}export default Team;export{Team as _Team};","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/Team/Team.js"],"names":["React","useState","useEffect","Link","Redirect","Route","Switch","useLocation","useParams","CaretLeftIcon","Card","PageSection","Config","RoutedTabs","ContentError","TeamsAPI","ResourceAccessList","TeamDetail","TeamEdit","TeamRolesList","Team","setBreadcrumb","team","setTeam","contentError","setContentError","hasContentLoading","setHasContentLoading","location","id","readDetail","data","tabsArray","name","link","isBackButton","showCardHeader","pathname","endsWith","response","status","me","_Team"],"mappings":"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","sourcesContent":["/* eslint-disable react/jsx-no-useless-fragment */\nimport React, { useState, useEffect } from 'react';\n\nimport { t } from '@lingui/macro';\nimport {\n  Link,\n  Redirect,\n  Route,\n  Switch,\n  useLocation,\n  useParams,\n} from 'react-router-dom';\nimport { CaretLeftIcon } from '@patternfly/react-icons';\nimport { Card, PageSection } from '@patternfly/react-core';\nimport { Config } from 'contexts/Config';\nimport RoutedTabs from 'components/RoutedTabs';\nimport ContentError from 'components/ContentError';\nimport { TeamsAPI } from 'api';\nimport { ResourceAccessList } from 'components/ResourceAccessList';\nimport TeamDetail from './TeamDetail';\nimport TeamEdit from './TeamEdit';\nimport TeamRolesList from './TeamRoles';\n\nfunction Team({ setBreadcrumb }) {\n  const [team, setTeam] = useState(null);\n  const [contentError, setContentError] = useState(null);\n  const [hasContentLoading, setHasContentLoading] = useState(true);\n  const location = useLocation();\n  const { id } = useParams();\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const { data } = await TeamsAPI.readDetail(id);\n        setBreadcrumb(data);\n        setTeam(data);\n      } catch (error) {\n        setContentError(error);\n      } finally {\n        setHasContentLoading(false);\n      }\n    })();\n  }, [id, setBreadcrumb, location]);\n\n  const tabsArray = [\n    {\n      name: (\n        <>\n          <CaretLeftIcon />\n          {t`Back to Teams`}\n        </>\n      ),\n      link: `/teams`,\n      id: 99,\n      isBackButton: true,\n    },\n    { name: t`Details`, link: `/teams/${id}/details`, id: 0 },\n    { name: t`Access`, link: `/teams/${id}/access`, id: 1 },\n    { name: t`Roles`, link: `/teams/${id}/roles`, id: 2 },\n  ];\n\n  let showCardHeader = true;\n\n  if (location.pathname.endsWith('edit')) {\n    showCardHeader = false;\n  }\n\n  if (!hasContentLoading && contentError) {\n    return (\n      <PageSection>\n        <Card>\n          <ContentError error={contentError}>\n            {contentError.response.status === 404 && (\n              <span>\n                {t`Team not found.`}{' '}\n                <Link to=\"/teams\">{t`View all Teams.`}</Link>\n              </span>\n            )}\n          </ContentError>\n        </Card>\n      </PageSection>\n    );\n  }\n\n  return (\n    <PageSection>\n      <Card>\n        {showCardHeader && <RoutedTabs tabsArray={tabsArray} />}\n        <Switch>\n          <Redirect from=\"/teams/:id\" to=\"/teams/:id/details\" exact />\n          {team && (\n            <Route path=\"/teams/:id/details\">\n              <TeamDetail team={team} />\n            </Route>\n          )}\n          {team && (\n            <Route path=\"/teams/:id/edit\">\n              <TeamEdit team={team} />\n            </Route>\n          )}\n          {team && (\n            <Route path=\"/teams/:id/access\">\n              <ResourceAccessList resource={team} apiModel={TeamsAPI} />\n            </Route>\n          )}\n          {team && (\n            <Route path=\"/teams/:id/roles\">\n              <Config>\n                {({ me }) => <>{me && <TeamRolesList me={me} team={team} />}</>}\n              </Config>\n            </Route>\n          )}\n          <Route key=\"not-found\" path=\"*\">\n            {!hasContentLoading && (\n              <ContentError isNotFound>\n                {id && (\n                  <Link to={`/teams/${id}/details`}>\n                    {t`View Team Details`}\n                  </Link>\n                )}\n              </ContentError>\n            )}\n          </Route>\n        </Switch>\n      </Card>\n    </PageSection>\n  );\n}\n\nexport default Team;\nexport { Team as _Team };\n"]},"metadata":{},"sourceType":"module"}