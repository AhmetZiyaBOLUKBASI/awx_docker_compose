{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _styled3 from\"styled-components\";import _styled2 from\"styled-components\";import _styled from\"styled-components\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{Trans}from\"@lingui/react\";import{i18n}from\"@lingui/core\";import React,{useState,useCallback}from'react';import{Link,useParams}from'react-router-dom';import{bool,func}from'prop-types';import styled from'styled-components';import{Progress,ProgressMeasureLocation,ProgressSize,Slider,Tooltip}from'@patternfly/react-core';import{Tr,Td,ExpandableRowContent}from'@patternfly/react-table';import{formatDateString}from'util/dates';import{ActionsTd,ActionItem}from'components/PaginatedTable';import InstanceToggle from'components/InstanceToggle';import StatusLabel from'components/StatusLabel';import{Instance}from'types';import useRequest,{useDismissableError}from'hooks/useRequest';import useDebounce from'hooks/useDebounce';import computeForks from'util/computeForks';import{InstancesAPI}from'api';import{useConfig}from'contexts/Config';import AlertModal from'components/AlertModal';import ErrorDetail from'components/ErrorDetail';import{Detail,DetailList}from'components/DetailList';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Unavailable=styled.span.withConfig({displayName:\"InstanceListItem__Unavailable\",componentId:\"sc-1fxl88o-0\"})([\"color:var(--pf-global--danger-color--200);\"]);var SliderHolder=styled.div.withConfig({displayName:\"InstanceListItem__SliderHolder\",componentId:\"sc-1fxl88o-1\"})([\"display:flex;align-items:center;justify-content:space-between;\"]);var SliderForks=styled.div.withConfig({displayName:\"InstanceListItem__SliderForks\",componentId:\"sc-1fxl88o-2\"})([\"flex-grow:1;margin-right:8px;margin-left:8px;text-align:center;\"]);var _StyledTd=styled(Td).withConfig({displayName:\"InstanceListItem___StyledTd\",componentId:\"sc-1fxl88o-3\"})([\"--pf-c-table--cell--MinWidth:175px;\"]);var _StyledActionsTd=styled(ActionsTd).withConfig({displayName:\"InstanceListItem___StyledActionsTd\",componentId:\"sc-1fxl88o-4\"})([\"--pf-c-table--cell--Width:125px\"]);var _StyledInstanceToggle=styled(InstanceToggle).withConfig({displayName:\"InstanceListItem___StyledInstanceToggle\",componentId:\"sc-1fxl88o-5\"})([\"display:inline-flex;\"]);function InstanceListItem(_ref){var instance=_ref.instance,isExpanded=_ref.isExpanded,onExpand=_ref.onExpand,isSelected=_ref.isSelected,onSelect=_ref.onSelect,fetchInstances=_ref.fetchInstances,rowIndex=_ref.rowIndex;var _useConfig=useConfig(),_useConfig$me=_useConfig.me,me=_useConfig$me===void 0?{}:_useConfig$me;var _useParams=useParams(),id=_useParams.id;var _useState=useState(computeForks(instance.mem_capacity,instance.cpu_capacity,instance.capacity_adjustment)),_useState2=_slicedToArray(_useState,2),forks=_useState2[0],setForks=_useState2[1];var labelId=\"check-action-\".concat(instance.id);function usedCapacity(item){if(item.enabled){return/*#__PURE__*/_jsx(Progress,{value:Math.round(100-item.percent_capacity_remaining),measureLocation:ProgressMeasureLocation.top,size:ProgressSize.sm,title:/*i18n*/i18n._(\"Used capacity\")});}return/*#__PURE__*/_jsx(Unavailable,{children:/*i18n*/i18n._(\"Unavailable\")});}var _useRequest=useRequest(useCallback(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return InstancesAPI.update(instance.id,values);case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}(),[instance])),updateInstanceError=_useRequest.error,updateInstance=_useRequest.request;var _useDismissableError=useDismissableError(updateInstanceError),updateError=_useDismissableError.error,dismissUpdateError=_useDismissableError.dismissError;var debounceUpdateInstance=useDebounce(updateInstance,200);var handleChangeValue=function handleChangeValue(value){var roundedValue=Math.round(value*100)/100;setForks(computeForks(instance.mem_capacity,instance.cpu_capacity,roundedValue));debounceUpdateInstance({capacity_adjustment:roundedValue});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Tr,{id:\"instance-row-\".concat(instance.id),ouiaId:\"instance-row-\".concat(instance.id),children:[/*#__PURE__*/_jsx(Td,{expand:{rowIndex:rowIndex,isExpanded:isExpanded,onToggle:onExpand}}),/*#__PURE__*/_jsx(Td,{select:{rowIndex:rowIndex,isSelected:isSelected,onSelect:onSelect},dataLabel:/*i18n*/i18n._(\"Selected\")}),/*#__PURE__*/_jsx(Td,{id:labelId,dataLabel:/*i18n*/i18n._(\"Name\"),children:/*#__PURE__*/_jsx(Link,{to:\"/instance_groups/\".concat(id,\"/instances/\").concat(instance.id,\"/details\"),children:/*#__PURE__*/_jsx(\"b\",{children:instance.hostname})})}),/*#__PURE__*/_jsx(Td,{dataLabel:/*i18n*/i18n._(\"Status\"),children:/*#__PURE__*/_jsx(Tooltip,{content:/*#__PURE__*/_jsxs(\"div\",{children:[/*i18n*/i18n._(\"Last Health Check\"),\"\\xA0\",formatDateString(instance.last_health_check)]}),children:/*#__PURE__*/_jsx(StatusLabel,{status:instance.errors?'error':'healthy'})})}),/*#__PURE__*/_jsx(Td,{dataLabel:/*i18n*/i18n._(\"Node Type\"),children:instance.node_type}),/*#__PURE__*/_jsx(Td,{dataLabel:/*i18n*/i18n._(\"Capacity Adjustment\"),children:/*#__PURE__*/_jsxs(SliderHolder,{\"data-cy\":\"slider-holder\",children:[/*#__PURE__*/_jsx(\"div\",{\"data-cy\":\"cpu-capacity\",children:/*i18n*/i18n._(\"CPU {0}\",{0:instance.cpu_capacity})}),/*#__PURE__*/_jsxs(SliderForks,{\"data-cy\":\"slider-forks\",children:[/*#__PURE__*/_jsx(\"div\",{\"data-cy\":\"number-forks\",children:/*#__PURE__*/_jsx(Trans,{id:\"{forks, plural, one {# fork} other {# forks}}\",values:{forks:forks}})}),/*#__PURE__*/_jsx(Slider,{areCustomStepsContinuous:true,max:1,min:0,step:0.1,value:instance.capacity_adjustment,onChange:handleChangeValue,isDisabled:!(me!==null&&me!==void 0&&me.is_superuser)||!instance.enabled,\"data-cy\":\"slider\"})]}),/*#__PURE__*/_jsx(\"div\",{\"data-cy\":\"mem-capacity\",children:/*i18n*/i18n._(\"RAM {0}\",{0:instance.mem_capacity})})]})}),/*#__PURE__*/_jsx(_StyledTd,{dataLabel:/*i18n*/i18n._(\"Instance group used capacity\"),children:usedCapacity(instance)}),/*#__PURE__*/_jsx(_StyledActionsTd,{dataLabel:/*i18n*/i18n._(\"Actions\"),children:/*#__PURE__*/_jsx(ActionItem,{visible:true,children:/*#__PURE__*/_jsx(_StyledInstanceToggle,{fetchInstances:fetchInstances,instance:instance})})})]}),/*#__PURE__*/_jsxs(Tr,{ouiaId:\"instance-row-\".concat(instance.id,\"-expanded\"),isExpanded:isExpanded,children:[/*#__PURE__*/_jsx(Td,{colSpan:2}),/*#__PURE__*/_jsx(Td,{colSpan:7,children:/*#__PURE__*/_jsx(ExpandableRowContent,{children:/*#__PURE__*/_jsxs(DetailList,{children:[/*#__PURE__*/_jsx(Detail,{\"data-cy\":\"running-jobs\",value:instance.jobs_running,label:/*i18n*/i18n._(\"Running Jobs\")}),/*#__PURE__*/_jsx(Detail,{\"data-cy\":\"total-jobs\",value:instance.jobs_total,label:/*i18n*/i18n._(\"Total Jobs\")}),/*#__PURE__*/_jsx(Detail,{\"data-cy\":\"policy-type\",label:/*i18n*/i18n._(\"Policy Type\"),value:instance.managed_by_policy?/*i18n*/i18n._(\"Auto\"):/*i18n*/i18n._(\"Manual\")}),/*#__PURE__*/_jsx(Detail,{\"data-cy\":\"last-health-check\",label:/*i18n*/i18n._(\"Last Health Check\"),value:formatDateString(instance.last_health_check)})]})})})]}),updateError&&/*#__PURE__*/_jsxs(AlertModal,{variant:\"error\",title:/*i18n*/i18n._(\"Error!\"),isOpen:true,onClose:dismissUpdateError,children:[/*i18n*/i18n._(\"Failed to update capacity adjustment.\"),/*#__PURE__*/_jsx(ErrorDetail,{error:updateError})]})]});}InstanceListItem.prototype={instance:Instance.isRequired,isSelected:bool.isRequired,onSelect:func.isRequired};export default InstanceListItem;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/InstanceGroup/Instances/InstanceListItem.js"],"names":["React","useState","useCallback","Link","useParams","bool","func","styled","Progress","ProgressMeasureLocation","ProgressSize","Slider","Tooltip","Tr","Td","ExpandableRowContent","formatDateString","ActionsTd","ActionItem","InstanceToggle","StatusLabel","Instance","useRequest","useDismissableError","useDebounce","computeForks","InstancesAPI","useConfig","AlertModal","ErrorDetail","Detail","DetailList","Unavailable","span","SliderHolder","div","SliderForks","InstanceListItem","instance","isExpanded","onExpand","isSelected","onSelect","fetchInstances","rowIndex","me","id","mem_capacity","cpu_capacity","capacity_adjustment","forks","setForks","labelId","usedCapacity","item","enabled","Math","round","percent_capacity_remaining","top","sm","values","update","updateInstanceError","error","updateInstance","request","updateError","dismissUpdateError","dismissError","debounceUpdateInstance","handleChangeValue","value","roundedValue","onToggle","hostname","last_health_check","errors","node_type","is_superuser","jobs_running","jobs_total","managed_by_policy","prototype","isRequired"],"mappings":"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","sourcesContent":["import React, { useState, useCallback } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport { bool, func } from 'prop-types';\nimport { t, Plural } from '@lingui/macro';\nimport styled from 'styled-components';\nimport 'styled-components/macro';\nimport {\n  Progress,\n  ProgressMeasureLocation,\n  ProgressSize,\n  Slider,\n  Tooltip,\n} from '@patternfly/react-core';\nimport { Tr, Td, ExpandableRowContent } from '@patternfly/react-table';\nimport { formatDateString } from 'util/dates';\nimport { ActionsTd, ActionItem } from 'components/PaginatedTable';\nimport InstanceToggle from 'components/InstanceToggle';\nimport StatusLabel from 'components/StatusLabel';\nimport { Instance } from 'types';\nimport useRequest, { useDismissableError } from 'hooks/useRequest';\nimport useDebounce from 'hooks/useDebounce';\nimport computeForks from 'util/computeForks';\nimport { InstancesAPI } from 'api';\nimport { useConfig } from 'contexts/Config';\nimport AlertModal from 'components/AlertModal';\nimport ErrorDetail from 'components/ErrorDetail';\nimport { Detail, DetailList } from 'components/DetailList';\n\nconst Unavailable = styled.span`\n  color: var(--pf-global--danger-color--200);\n`;\n\nconst SliderHolder = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n`;\n\nconst SliderForks = styled.div`\n  flex-grow: 1;\n  margin-right: 8px;\n  margin-left: 8px;\n  text-align: center;\n`;\n\nfunction InstanceListItem({\n  instance,\n  isExpanded,\n  onExpand,\n  isSelected,\n  onSelect,\n  fetchInstances,\n  rowIndex,\n}) {\n  const { me = {} } = useConfig();\n  const { id } = useParams();\n  const [forks, setForks] = useState(\n    computeForks(\n      instance.mem_capacity,\n      instance.cpu_capacity,\n      instance.capacity_adjustment\n    )\n  );\n\n  const labelId = `check-action-${instance.id}`;\n\n  function usedCapacity(item) {\n    if (item.enabled) {\n      return (\n        <Progress\n          value={Math.round(100 - item.percent_capacity_remaining)}\n          measureLocation={ProgressMeasureLocation.top}\n          size={ProgressSize.sm}\n          title={t`Used capacity`}\n        />\n      );\n    }\n    return <Unavailable>{t`Unavailable`}</Unavailable>;\n  }\n\n  const { error: updateInstanceError, request: updateInstance } = useRequest(\n    useCallback(\n      async (values) => {\n        await InstancesAPI.update(instance.id, values);\n      },\n      [instance]\n    )\n  );\n\n  const { error: updateError, dismissError: dismissUpdateError } =\n    useDismissableError(updateInstanceError);\n\n  const debounceUpdateInstance = useDebounce(updateInstance, 200);\n\n  const handleChangeValue = (value) => {\n    const roundedValue = Math.round(value * 100) / 100;\n    setForks(\n      computeForks(instance.mem_capacity, instance.cpu_capacity, roundedValue)\n    );\n    debounceUpdateInstance({ capacity_adjustment: roundedValue });\n  };\n\n  return (\n    <>\n      <Tr\n        id={`instance-row-${instance.id}`}\n        ouiaId={`instance-row-${instance.id}`}\n      >\n        <Td\n          expand={{\n            rowIndex,\n            isExpanded,\n            onToggle: onExpand,\n          }}\n        />\n        <Td\n          select={{\n            rowIndex,\n            isSelected,\n            onSelect,\n          }}\n          dataLabel={t`Selected`}\n        />\n        <Td id={labelId} dataLabel={t`Name`}>\n          <Link to={`/instance_groups/${id}/instances/${instance.id}/details`}>\n            <b>{instance.hostname}</b>\n          </Link>\n        </Td>\n        <Td dataLabel={t`Status`}>\n          <Tooltip\n            content={\n              <div>\n                {t`Last Health Check`}\n                &nbsp;\n                {formatDateString(instance.last_health_check)}\n              </div>\n            }\n          >\n            <StatusLabel status={instance.errors ? 'error' : 'healthy'} />\n          </Tooltip>\n        </Td>\n        <Td dataLabel={t`Node Type`}>{instance.node_type}</Td>\n        <Td dataLabel={t`Capacity Adjustment`}>\n          <SliderHolder data-cy=\"slider-holder\">\n            <div data-cy=\"cpu-capacity\">{t`CPU ${instance.cpu_capacity}`}</div>\n            <SliderForks data-cy=\"slider-forks\">\n              <div data-cy=\"number-forks\">\n                <Plural value={forks} one=\"# fork\" other=\"# forks\" />\n              </div>\n              <Slider\n                areCustomStepsContinuous\n                max={1}\n                min={0}\n                step={0.1}\n                value={instance.capacity_adjustment}\n                onChange={handleChangeValue}\n                isDisabled={!me?.is_superuser || !instance.enabled}\n                data-cy=\"slider\"\n              />\n            </SliderForks>\n            <div data-cy=\"mem-capacity\">{t`RAM ${instance.mem_capacity}`}</div>\n          </SliderHolder>\n        </Td>\n        <Td\n          dataLabel={t`Instance group used capacity`}\n          css=\"--pf-c-table--cell--MinWidth: 175px;\"\n        >\n          {usedCapacity(instance)}\n        </Td>\n        <ActionsTd\n          dataLabel={t`Actions`}\n          css=\"--pf-c-table--cell--Width: 125px\"\n        >\n          <ActionItem visible>\n            <InstanceToggle\n              css=\"display: inline-flex;\"\n              fetchInstances={fetchInstances}\n              instance={instance}\n            />\n          </ActionItem>\n        </ActionsTd>\n      </Tr>\n      <Tr\n        ouiaId={`instance-row-${instance.id}-expanded`}\n        isExpanded={isExpanded}\n      >\n        <Td colSpan={2} />\n        <Td colSpan={7}>\n          <ExpandableRowContent>\n            <DetailList>\n              <Detail\n                data-cy=\"running-jobs\"\n                value={instance.jobs_running}\n                label={t`Running Jobs`}\n              />\n              <Detail\n                data-cy=\"total-jobs\"\n                value={instance.jobs_total}\n                label={t`Total Jobs`}\n              />\n              <Detail\n                data-cy=\"policy-type\"\n                label={t`Policy Type`}\n                value={instance.managed_by_policy ? t`Auto` : t`Manual`}\n              />\n              <Detail\n                data-cy=\"last-health-check\"\n                label={t`Last Health Check`}\n                value={formatDateString(instance.last_health_check)}\n              />\n            </DetailList>\n          </ExpandableRowContent>\n        </Td>\n      </Tr>\n      {updateError && (\n        <AlertModal\n          variant=\"error\"\n          title={t`Error!`}\n          isOpen\n          onClose={dismissUpdateError}\n        >\n          {t`Failed to update capacity adjustment.`}\n          <ErrorDetail error={updateError} />\n        </AlertModal>\n      )}\n    </>\n  );\n}\n\nInstanceListItem.prototype = {\n  instance: Instance.isRequired,\n  isSelected: bool.isRequired,\n  onSelect: func.isRequired,\n};\n\nexport default InstanceListItem;\n"]},"metadata":{},"sourceType":"module"}