{"ast":null,"code":"import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useState,useEffect,useCallback}from'react';import{withFormik,useField}from'formik';import{Form,FormGroup,Switch,Checkbox,TextInput,Title}from'@patternfly/react-core';import ContentError from'components/ContentError';import ContentLoading from'components/ContentLoading';import AnsibleSelect from'components/AnsibleSelect';import{TagMultiSelect}from'components/MultiSelect';import useRequest from'hooks/useRequest';import useBrandName from'hooks/useBrandName';import FormActionGroup from'components/FormActionGroup';import FormField,{CheckboxField,FormSubmitError}from'components/FormField';import FieldWithPrompt from'components/FieldWithPrompt';import{FormColumnLayout,FormFullWidthLayout,FormCheckboxLayout,SubFormLayout}from'components/FormLayout';import{VariablesField}from'components/CodeEditor';import{required,combine,maxLength}from'util/validators';import{JobTemplate}from'types';import{InventoryLookup,InstanceGroupsLookup,ProjectLookup,MultiCredentialsLookup,ExecutionEnvironmentLookup}from'components/Lookup';import Popover from'components/Popover';import{JobTemplatesAPI}from'api';import useIsMounted from'hooks/useIsMounted';import LabelSelect from'components/LabelSelect';import{VerbositySelectField}from'components/VerbositySelectField';import PlaybookSelect from'./PlaybookSelect';import WebhookSubForm from'./WebhookSubForm';import helpText from'./JobTemplate.helptext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var origin=document.location.origin;function JobTemplateForm(_ref){var _projectField$value,_projectField$value2,_projectField$value3,_projectField$value4;var template=_ref.template,handleCancel=_ref.handleCancel,handleSubmit=_ref.handleSubmit,setFieldValue=_ref.setFieldValue,setFieldTouched=_ref.setFieldTouched,submitError=_ref.submitError,validateField=_ref.validateField,isOverrideDisabledLookup=_ref.isOverrideDisabledLookup;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),contentError=_useState2[0],setContentError=_useState2[1];var _useState3=useState(Boolean(template===null||template===void 0?void 0:template.host_config_key)),_useState4=_slicedToArray(_useState3,2),allowCallbacks=_useState4[0],setAllowCallbacks=_useState4[1];var _useState5=useState(Boolean(template===null||template===void 0?void 0:template.webhook_service)),_useState6=_slicedToArray(_useState5,2),enableWebhooks=_useState6[0],setEnableWebhooks=_useState6[1];var isMounted=useIsMounted();var brandName=useBrandName();var _useField=useField('ask_inventory_on_launch'),_useField2=_slicedToArray(_useField,1),askInventoryOnLaunchField=_useField2[0];var _useField3=useField({name:'job_type',validate:required(null)}),_useField4=_slicedToArray(_useField3,3),jobTypeField=_useField4[0],jobTypeMeta=_useField4[1],jobTypeHelpers=_useField4[2];var _useField5=useField('inventory'),_useField6=_slicedToArray(_useField5,3),inventoryField=_useField6[0],inventoryMeta=_useField6[1],inventoryHelpers=_useField6[2];var _useField7=useField('project'),_useField8=_slicedToArray(_useField7,3),projectField=_useField8[0],projectMeta=_useField8[1],projectHelpers=_useField8[2];var _useField9=useField('scm_branch'),_useField10=_slicedToArray(_useField9,3),scmField=_useField10[0],scmHelpers=_useField10[2];var _useField11=useField({name:'playbook',validate:required(null)}),_useField12=_slicedToArray(_useField11,3),playbookField=_useField12[0],playbookMeta=_useField12[1],playbookHelpers=_useField12[2];var _useField13=useField('credentials'),_useField14=_slicedToArray(_useField13,3),credentialField=_useField14[0],credentialHelpers=_useField14[2];var _useField15=useField('labels'),_useField16=_slicedToArray(_useField15,3),labelsField=_useField16[0],labelsHelpers=_useField16[2];var _useField17=useField('limit'),_useField18=_slicedToArray(_useField17,3),limitField=_useField18[0],limitMeta=_useField18[1],limitHelpers=_useField18[2];var _useField19=useField('diff_mode'),_useField20=_slicedToArray(_useField19,3),diffModeField=_useField20[0],diffModeHelpers=_useField20[2];var _useField21=useField('instanceGroups'),_useField22=_slicedToArray(_useField21,3),instanceGroupsField=_useField22[0],instanceGroupsHelpers=_useField22[2];var _useField23=useField('job_tags'),_useField24=_slicedToArray(_useField23,3),jobTagsField=_useField24[0],jobTagsHelpers=_useField24[2];var _useField25=useField('skip_tags'),_useField26=_slicedToArray(_useField25,3),skipTagsField=_useField26[0],skipTagsHelpers=_useField26[2];var _useField27=useField('webhook_service'),_useField28=_slicedToArray(_useField27,3),webhookServiceMeta=_useField28[1],webhookServiceHelpers=_useField28[2];var _useField29=useField('webhook_url'),_useField30=_slicedToArray(_useField29,3),webhookUrlMeta=_useField30[1],webhookUrlHelpers=_useField30[2];var _useField31=useField('webhook_key'),_useField32=_slicedToArray(_useField31,3),webhookKeyMeta=_useField32[1],webhookKeyHelpers=_useField32[2];var _useField33=useField('webhook_credential'),_useField34=_slicedToArray(_useField33,3),webhookCredentialMeta=_useField34[1],webhookCredentialHelpers=_useField34[2];var _useField35=useField('execution_environment'),_useField36=_slicedToArray(_useField35,3),executionEnvironmentField=_useField36[0],executionEnvironmentMeta=_useField36[1],executionEnvironmentHelpers=_useField36[2];var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$JobTemplatesAP,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(template!==null&&template!==void 0&&template.id){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return JobTemplatesAPI.readInstanceGroups(template.id);case 4:_yield$JobTemplatesAP=_context.sent;data=_yield$JobTemplatesAP.data;if(isMounted.current){setFieldValue('initialInstanceGroups',data.results);setFieldValue('instanceGroups',_toConsumableArray(data.results));}// eslint-disable-next-line react-hooks/exhaustive-deps\ncase 7:case\"end\":return _context.stop();}}},_callee);})),[setFieldValue,template]),{isLoading:true}),loadRelatedInstanceGroups=_useRequest.request,instanceGroupError=_useRequest.error,instanceGroupLoading=_useRequest.isLoading;useEffect(function(){loadRelatedInstanceGroups();},[loadRelatedInstanceGroups]);useEffect(function(){if(enableWebhooks){webhookServiceHelpers.setValue(webhookServiceMeta.initialValue);webhookUrlHelpers.setValue(webhookUrlMeta.initialValue);webhookKeyHelpers.setValue(webhookKeyMeta.initialValue);webhookCredentialHelpers.setValue(webhookCredentialMeta.initialValue);}else{webhookServiceHelpers.setValue('');webhookUrlHelpers.setValue('');webhookKeyHelpers.setValue('');webhookCredentialHelpers.setValue(null);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[enableWebhooks]);var handleProjectValidation=function handleProjectValidation(project){if(!project){return(/*i18n*/i18n._(\"This field must not be blank\"));}if((project===null||project===void 0?void 0:project.status)==='never updated'){return(/*i18n*/i18n._(\"This Project needs to be updated\"));}return undefined;};var handleProjectUpdate=useCallback(function(value){setFieldValue('project',value);setFieldValue('playbook','',false);setFieldValue('scm_branch','',false);setFieldTouched('project',true,false);},[setFieldValue,setFieldTouched]);var handleInventoryValidation=function handleInventoryValidation(inventory){if(!inventory&&!askInventoryOnLaunchField.value){return(/*i18n*/i18n._(\"Please select an Inventory or check the Prompt on Launch option\"));}return undefined;};var handleInventoryUpdate=useCallback(function(value){setFieldValue('inventory',value);setFieldTouched('inventory',true,false);},[setFieldValue,setFieldTouched]);var handleExecutionEnvironmentUpdate=useCallback(function(value){setFieldValue('execution_environment',value);setFieldTouched('execution_environment',true,false);},[setFieldValue,setFieldTouched]);var handlePlaybookUpdate=useCallback(function(value){setFieldValue('playbook',value);setFieldTouched('playbook',true,false);},[setFieldValue,setFieldTouched]);useEffect(function(){validateField('inventory');},[askInventoryOnLaunchField.value,validateField]);var jobTypeOptions=[{value:'',key:'',label:/*i18n*/i18n._(\"Choose a job type\"),isDisabled:true},{value:'run',key:'run',label:/*i18n*/i18n._(\"Run\"),isDisabled:false},{value:'check',key:'check',label:/*i18n*/i18n._(\"Check\"),isDisabled:false}];var callbackUrl;if(template!==null&&template!==void 0&&template.related){var path=template.related.callback||\"\".concat(template.url,\"callback\");callbackUrl=\"\".concat(origin).concat(path);}if(instanceGroupLoading){return/*#__PURE__*/_jsx(ContentLoading,{});}if(contentError||instanceGroupError){return/*#__PURE__*/_jsx(ContentError,{error:contentError||instanceGroupError});}return/*#__PURE__*/_jsx(Form,{autoComplete:\"off\",onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(FormColumnLayout,{children:[/*#__PURE__*/_jsx(FormField,{id:\"template-name\",name:\"name\",type:\"text\",label:/*i18n*/i18n._(\"Name\"),validate:combine([required(null),maxLength(512)]),isRequired:true}),/*#__PURE__*/_jsx(FormField,{id:\"template-description\",name:\"description\",type:\"text\",label:/*i18n*/i18n._(\"Description\")}),/*#__PURE__*/_jsx(FieldWithPrompt,{fieldId:\"template-job-type\",isRequired:true,label:/*i18n*/i18n._(\"Job Type\"),promptId:\"template-ask-job-type-on-launch\",promptName:\"ask_job_type_on_launch\",tooltip:helpText.jobType,children:/*#__PURE__*/_jsx(AnsibleSelect,_objectSpread(_objectSpread({},jobTypeField),{},{isValid:!jobTypeMeta.touched||!jobTypeMeta.error,id:\"template-job-type\",data:jobTypeOptions,onChange:function onChange(event,value){jobTypeHelpers.setValue(value);}}))}),/*#__PURE__*/_jsx(FormGroup,{fieldId:\"template-inventory\",validated:!(inventoryMeta.touched||askInventoryOnLaunchField.value)||!inventoryMeta.error?'default':'error',helperTextInvalid:inventoryMeta.error,isRequired:!askInventoryOnLaunchField.value,children:/*#__PURE__*/_jsx(InventoryLookup,{fieldId:\"template-inventory\",value:inventoryField.value,promptId:\"template-ask-inventory-on-launch\",promptName:\"ask_inventory_on_launch\",isPromptableField:true,tooltip:helpText.inventory,onBlur:function onBlur(){return inventoryHelpers.setTouched();},onChange:handleInventoryUpdate,required:!askInventoryOnLaunchField.value,touched:inventoryMeta.touched,error:inventoryMeta.error,isOverrideDisabled:isOverrideDisabledLookup,validate:handleInventoryValidation})}),/*#__PURE__*/_jsx(ProjectLookup,{value:projectField.value,onBlur:function onBlur(){return projectHelpers.setTouched();},tooltip:helpText.project,isValid:Boolean(!projectMeta.touched||!projectMeta.error&&projectField.value),helperTextInvalid:projectMeta.error,onChange:handleProjectUpdate,required:true,autoPopulate:!(template!==null&&template!==void 0&&template.id),isOverrideDisabled:isOverrideDisabledLookup,validate:handleProjectValidation}),/*#__PURE__*/_jsx(ExecutionEnvironmentLookup,{helperTextInvalid:executionEnvironmentMeta.error,isValid:!executionEnvironmentMeta.touched||!executionEnvironmentMeta.error,onBlur:function onBlur(){return executionEnvironmentHelpers.setTouched();},value:executionEnvironmentField.value,onChange:handleExecutionEnvironmentUpdate,popoverContent:helpText.executionEnvironmentForm,tooltip:/*i18n*/i18n._(\"Select a project before editing the execution environment.\"),globallyAvailable:true,isDisabled:!((_projectField$value=projectField.value)!==null&&_projectField$value!==void 0&&_projectField$value.id),projectId:(_projectField$value2=projectField.value)===null||_projectField$value2===void 0?void 0:_projectField$value2.id}),((_projectField$value3=projectField.value)===null||_projectField$value3===void 0?void 0:_projectField$value3.allow_override)&&/*#__PURE__*/_jsx(FieldWithPrompt,{fieldId:\"template-scm-branch\",label:/*i18n*/i18n._(\"Source Control Branch\"),promptId:\"template-ask-scm-branch-on-launch\",promptName:\"ask_scm_branch_on_launch\",tooltip:helpText.sourceControlBranch,children:/*#__PURE__*/_jsx(TextInput,{id:\"template-scm-branch\",onChange:function onChange(value){scmHelpers.setValue(value);},value:scmField.value,\"aria-label\":/*i18n*/i18n._(\"source control branch\")})}),/*#__PURE__*/_jsx(FormGroup,{fieldId:\"template-playbook\",helperTextInvalid:playbookMeta.error,validated:!playbookMeta.touched||!playbookMeta.error?'default':'error',isRequired:true,label:/*i18n*/i18n._(\"Playbook\"),labelIcon:/*#__PURE__*/_jsx(Popover,{content:helpText.playbook}),children:/*#__PURE__*/_jsx(PlaybookSelect,{onChange:handlePlaybookUpdate,projectId:(_projectField$value4=projectField.value)===null||_projectField$value4===void 0?void 0:_projectField$value4.id,isValid:!playbookMeta.touched||!playbookMeta.error,selected:playbookField.value,onBlur:function onBlur(){return playbookHelpers.setTouched();},onError:setContentError})}),/*#__PURE__*/_jsxs(FormFullWidthLayout,{children:[/*#__PURE__*/_jsx(FieldWithPrompt,{fieldId:\"template-credentials\",label:/*i18n*/i18n._(\"Credentials\"),promptId:\"template-ask-credential-on-launch\",promptName:\"ask_credential_on_launch\",tooltip:helpText.credentials,children:/*#__PURE__*/_jsx(MultiCredentialsLookup,{value:credentialField.value,onChange:function onChange(newCredentials){return credentialHelpers.setValue(newCredentials);},onError:setContentError})}),/*#__PURE__*/_jsx(FormGroup,{label:/*i18n*/i18n._(\"Labels\"),labelIcon:/*#__PURE__*/_jsx(Popover,{content:helpText.labels}),fieldId:\"template-labels\",children:/*#__PURE__*/_jsx(LabelSelect,{value:labelsField.value,onChange:function onChange(labels){return labelsHelpers.setValue(labels);},onError:setContentError,createText:/*i18n*/i18n._(\"Create\")})}),/*#__PURE__*/_jsx(VariablesField,{id:\"template-variables\",name:\"extra_vars\",label:/*i18n*/i18n._(\"Variables\"),promptId:\"template-ask-variables-on-launch\",tooltip:helpText.variables}),/*#__PURE__*/_jsxs(FormColumnLayout,{children:[/*#__PURE__*/_jsx(FormField,{id:\"template-forks\",name:\"forks\",type:\"number\",min:\"0\",label:/*i18n*/i18n._(\"Forks\"),tooltip:helpText.forks}),/*#__PURE__*/_jsx(FieldWithPrompt,{fieldId:\"template-limit\",label:/*i18n*/i18n._(\"Limit\"),promptId:\"template-ask-limit-on-launch\",promptName:\"ask_limit_on_launch\",tooltip:helpText.limit,children:/*#__PURE__*/_jsx(TextInput,_objectSpread(_objectSpread({id:\"template-limit\"},limitField),{},{validated:!limitMeta.touched||!limitMeta.error?'default':'error',onChange:function onChange(value){limitHelpers.setValue(value);}}))}),/*#__PURE__*/_jsx(VerbositySelectField,{fieldId:\"template-verbosity\",promptId:\"template-ask-verbosity-on-launch\",promptName:\"ask_verbosity_on_launch\",tooltip:helpText.verbosity}),/*#__PURE__*/_jsx(FormField,{id:\"template-job-slicing\",name:\"job_slice_count\",type:\"number\",min:\"1\",label:/*i18n*/i18n._(\"Job Slicing\"),tooltip:helpText.jobSlicing}),/*#__PURE__*/_jsx(FormField,{id:\"template-timeout\",name:\"timeout\",type:\"number\",min:\"0\",label:/*i18n*/i18n._(\"Timeout\"),tooltip:helpText.timeout}),/*#__PURE__*/_jsx(FieldWithPrompt,{fieldId:\"template-diff-mode\",label:/*i18n*/i18n._(\"Show Changes\"),promptId:\"template-ask-diff-mode-on-launch\",promptName:\"ask_diff_mode_on_launch\",tooltip:helpText.showChanges,children:/*#__PURE__*/_jsx(Switch,{id:\"template-show-changes\",label:diffModeField.value?/*i18n*/i18n._(\"On\"):/*i18n*/i18n._(\"Off\"),isChecked:diffModeField.value,onChange:function onChange(checked){return diffModeHelpers.setValue(checked);}})}),/*#__PURE__*/_jsxs(FormFullWidthLayout,{children:[/*#__PURE__*/_jsx(InstanceGroupsLookup,{value:instanceGroupsField.value,onChange:function onChange(value){return instanceGroupsHelpers.setValue(value);},tooltip:helpText.instanceGroups,fieldName:\"instanceGroups\"}),/*#__PURE__*/_jsx(FieldWithPrompt,{fieldId:\"template-tags\",label:/*i18n*/i18n._(\"Job Tags\"),promptId:\"template-ask-tags-on-launch\",promptName:\"ask_tags_on_launch\",tooltip:helpText.jobTags,children:/*#__PURE__*/_jsx(TagMultiSelect,{value:jobTagsField.value,onChange:function onChange(value){return jobTagsHelpers.setValue(value);}})}),/*#__PURE__*/_jsx(FieldWithPrompt,{fieldId:\"template-skip-tags\",label:/*i18n*/i18n._(\"Skip Tags\"),promptId:\"template-ask-skip-tags-on-launch\",promptName:\"ask_skip_tags_on_launch\",tooltip:helpText.skipTags,children:/*#__PURE__*/_jsx(TagMultiSelect,{value:skipTagsField.value,onChange:function onChange(value){return skipTagsHelpers.setValue(value);}})}),/*#__PURE__*/_jsx(FormGroup,{fieldId:\"template-option-checkboxes\",label:/*i18n*/i18n._(\"Options\"),children:/*#__PURE__*/_jsxs(FormCheckboxLayout,{children:[/*#__PURE__*/_jsx(CheckboxField,{id:\"option-privilege-escalation\",name:\"become_enabled\",label:/*i18n*/i18n._(\"Privilege Escalation\"),tooltip:helpText.privilegeEscalation}),/*#__PURE__*/_jsx(Checkbox,{\"aria-label\":/*i18n*/i18n._(\"Provisioning Callbacks\"),label:/*#__PURE__*/_jsxs(\"span\",{children:[/*i18n*/i18n._(\"Provisioning Callbacks\"),\"\\xA0\",/*#__PURE__*/_jsx(Popover,{content:helpText.provisioningCallbacks(brandName)})]}),id:\"option-callbacks\",ouiaId:\"option-callbacks\",isChecked:allowCallbacks,onChange:function onChange(checked){setAllowCallbacks(checked);}}),/*#__PURE__*/_jsx(Checkbox,{\"aria-label\":/*i18n*/i18n._(\"Enable Webhook\"),label:/*#__PURE__*/_jsxs(\"span\",{children:[/*i18n*/i18n._(\"Enable Webhook\"),\"\\xA0\",/*#__PURE__*/_jsx(Popover,{content:helpText.enableWebhook})]}),id:\"wfjt-enabled-webhooks\",ouiaId:\"wfjt-enabled-webhooks\",isChecked:enableWebhooks,onChange:function onChange(checked){setEnableWebhooks(checked);}}),/*#__PURE__*/_jsx(CheckboxField,{id:\"option-concurrent\",name:\"allow_simultaneous\",label:/*i18n*/i18n._(\"Concurrent Jobs\"),tooltip:helpText.concurrentJobs}),/*#__PURE__*/_jsx(CheckboxField,{id:\"option-fact-cache\",name:\"use_fact_cache\",label:/*i18n*/i18n._(\"Enable Fact Storage\"),tooltip:helpText.enableFactStorage})]})})]}),(allowCallbacks||enableWebhooks)&&/*#__PURE__*/_jsxs(SubFormLayout,{children:[allowCallbacks&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Title,{size:\"md\",headingLevel:\"h4\",children:/*i18n*/i18n._(\"Provisioning Callback details\")}),/*#__PURE__*/_jsxs(FormColumnLayout,{children:[callbackUrl&&/*#__PURE__*/_jsx(FormGroup,{label:/*i18n*/i18n._(\"Provisioning Callback URL\"),fieldId:\"template-callback-url\",children:/*#__PURE__*/_jsx(TextInput,{id:\"template-callback-url\",isDisabled:true,value:callbackUrl})}),/*#__PURE__*/_jsx(FormField,{id:\"template-host-config-key\",name:\"host_config_key\",label:/*i18n*/i18n._(\"Host Config Key\"),validate:allowCallbacks?required(null):null,isRequired:allowCallbacks})]})]}),allowCallbacks&&enableWebhooks&&/*#__PURE__*/_jsx(\"br\",{}),enableWebhooks&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Title,{size:\"md\",headingLevel:\"h4\",children:/*i18n*/i18n._(\"Webhook details\")}),/*#__PURE__*/_jsx(FormColumnLayout,{children:/*#__PURE__*/_jsx(WebhookSubForm,{templateType:template.type})})]})]})]})]}),/*#__PURE__*/_jsx(FormSubmitError,{error:submitError}),/*#__PURE__*/_jsx(FormActionGroup,{onCancel:handleCancel,onSubmit:handleSubmit})]})});}JobTemplateForm.defaultProps={template:{name:'',description:'',job_type:'run',inventory:undefined,project:undefined,playbook:'',scm_branch:'',summary_fields:{inventory:null,labels:{results:[]},project:null,credentials:[]},isNew:true},submitError:null,isOverrideDisabledLookup:false};var FormikApp=withFormik({mapPropsToValues:function mapPropsToValues(_ref3){var _template$related,_template$summary_fie2,_template$summary_fie3;var _ref3$projectValues=_ref3.projectValues,projectValues=_ref3$projectValues===void 0?{}:_ref3$projectValues,_ref3$template=_ref3.template,template=_ref3$template===void 0?{}:_ref3$template;var _template$summary_fie=template.summary_fields,summary_fields=_template$summary_fie===void 0?{labels:{results:[]},inventory:null}:_template$summary_fie;return{allow_callbacks:template.allow_callbacks||false,allow_simultaneous:template.allow_simultaneous||false,ask_credential_on_launch:template.ask_credential_on_launch||false,ask_diff_mode_on_launch:template.ask_diff_mode_on_launch||false,ask_inventory_on_launch:template.ask_inventory_on_launch||false,ask_job_type_on_launch:template.ask_job_type_on_launch||false,ask_limit_on_launch:template.ask_limit_on_launch||false,ask_scm_branch_on_launch:template.ask_scm_branch_on_launch||false,ask_skip_tags_on_launch:template.ask_skip_tags_on_launch||false,ask_tags_on_launch:template.ask_tags_on_launch||false,ask_variables_on_launch:template.ask_variables_on_launch||false,ask_verbosity_on_launch:template.ask_verbosity_on_launch||false,become_enabled:template.become_enabled||false,credentials:summary_fields.credentials||[],description:template.description||'',diff_mode:template.diff_mode||false,extra_vars:template.extra_vars||'---\\n',forks:template.forks||0,host_config_key:template.host_config_key||'',initialInstanceGroups:[],instanceGroups:[],inventory:(summary_fields===null||summary_fields===void 0?void 0:summary_fields.inventory)||null,job_slice_count:template.job_slice_count||1,job_tags:template.job_tags||'',job_type:template.job_type||'run',labels:summary_fields.labels.results||[],limit:template.limit||'',name:template.name||'',playbook:template.playbook||'',project:(summary_fields===null||summary_fields===void 0?void 0:summary_fields.project)||projectValues||null,scm_branch:template.scm_branch||'',skip_tags:template.skip_tags||'',timeout:template.timeout||0,use_fact_cache:template.use_fact_cache||false,verbosity:template.verbosity||'0',webhook_service:template.webhook_service||'',webhook_url:template!==null&&template!==void 0&&(_template$related=template.related)!==null&&_template$related!==void 0&&_template$related.webhook_receiver?\"\".concat(origin).concat(template.related.webhook_receiver):/*i18n*/i18n._(\"a new webhook url will be generated on save.\").toUpperCase(),webhook_key:template.webhook_key||/*i18n*/i18n._(\"a new webhook key will be generated on save.\").toUpperCase(),webhook_credential:(template===null||template===void 0?void 0:(_template$summary_fie2=template.summary_fields)===null||_template$summary_fie2===void 0?void 0:_template$summary_fie2.webhook_credential)||null,execution_environment:((_template$summary_fie3=template.summary_fields)===null||_template$summary_fie3===void 0?void 0:_template$summary_fie3.execution_environment)||null};},handleSubmit:function(){var _handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(values,_ref4){var props,setErrors;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:props=_ref4.props,setErrors=_ref4.setErrors;_context2.prev=1;_context2.next=4;return props.handleSubmit(values);case 4:_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](1);setErrors(_context2.t0);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[1,6]]);}));function handleSubmit(_x,_x2){return _handleSubmit.apply(this,arguments);}return handleSubmit;}()})(JobTemplateForm);export{JobTemplateForm as _JobTemplateForm};export default FormikApp;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/Template/shared/JobTemplateForm.js"],"names":["React","useState","useEffect","useCallback","withFormik","useField","Form","FormGroup","Switch","Checkbox","TextInput","Title","ContentError","ContentLoading","AnsibleSelect","TagMultiSelect","useRequest","useBrandName","FormActionGroup","FormField","CheckboxField","FormSubmitError","FieldWithPrompt","FormColumnLayout","FormFullWidthLayout","FormCheckboxLayout","SubFormLayout","VariablesField","required","combine","maxLength","JobTemplate","InventoryLookup","InstanceGroupsLookup","ProjectLookup","MultiCredentialsLookup","ExecutionEnvironmentLookup","Popover","JobTemplatesAPI","useIsMounted","LabelSelect","VerbositySelectField","PlaybookSelect","WebhookSubForm","helpText","origin","document","location","JobTemplateForm","template","handleCancel","handleSubmit","setFieldValue","setFieldTouched","submitError","validateField","isOverrideDisabledLookup","contentError","setContentError","Boolean","host_config_key","allowCallbacks","setAllowCallbacks","webhook_service","enableWebhooks","setEnableWebhooks","isMounted","brandName","askInventoryOnLaunchField","name","validate","jobTypeField","jobTypeMeta","jobTypeHelpers","inventoryField","inventoryMeta","inventoryHelpers","projectField","projectMeta","projectHelpers","scmField","scmHelpers","playbookField","playbookMeta","playbookHelpers","credentialField","credentialHelpers","labelsField","labelsHelpers","limitField","limitMeta","limitHelpers","diffModeField","diffModeHelpers","instanceGroupsField","instanceGroupsHelpers","jobTagsField","jobTagsHelpers","skipTagsField","skipTagsHelpers","webhookServiceMeta","webhookServiceHelpers","webhookUrlMeta","webhookUrlHelpers","webhookKeyMeta","webhookKeyHelpers","webhookCredentialMeta","webhookCredentialHelpers","executionEnvironmentField","executionEnvironmentMeta","executionEnvironmentHelpers","id","readInstanceGroups","data","current","results","isLoading","loadRelatedInstanceGroups","request","instanceGroupError","error","instanceGroupLoading","setValue","initialValue","handleProjectValidation","project","status","undefined","handleProjectUpdate","value","handleInventoryValidation","inventory","handleInventoryUpdate","handleExecutionEnvironmentUpdate","handlePlaybookUpdate","jobTypeOptions","key","label","isDisabled","callbackUrl","related","path","callback","url","jobType","touched","event","setTouched","executionEnvironmentForm","allow_override","sourceControlBranch","playbook","credentials","newCredentials","labels","variables","forks","limit","verbosity","jobSlicing","timeout","showChanges","checked","instanceGroups","jobTags","skipTags","privilegeEscalation","provisioningCallbacks","enableWebhook","concurrentJobs","enableFactStorage","type","defaultProps","description","job_type","scm_branch","summary_fields","isNew","FormikApp","mapPropsToValues","projectValues","allow_callbacks","allow_simultaneous","ask_credential_on_launch","ask_diff_mode_on_launch","ask_inventory_on_launch","ask_job_type_on_launch","ask_limit_on_launch","ask_scm_branch_on_launch","ask_skip_tags_on_launch","ask_tags_on_launch","ask_variables_on_launch","ask_verbosity_on_launch","become_enabled","diff_mode","extra_vars","initialInstanceGroups","job_slice_count","job_tags","skip_tags","use_fact_cache","webhook_url","webhook_receiver","toUpperCase","webhook_key","webhook_credential","execution_environment","values","props","setErrors","_JobTemplateForm"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { t } from '@lingui/macro';\nimport { withFormik, useField } from 'formik';\nimport {\n  Form,\n  FormGroup,\n  Switch,\n  Checkbox,\n  TextInput,\n  Title,\n} from '@patternfly/react-core';\nimport ContentError from 'components/ContentError';\nimport ContentLoading from 'components/ContentLoading';\nimport AnsibleSelect from 'components/AnsibleSelect';\nimport { TagMultiSelect } from 'components/MultiSelect';\nimport useRequest from 'hooks/useRequest';\nimport useBrandName from 'hooks/useBrandName';\nimport FormActionGroup from 'components/FormActionGroup';\nimport FormField, {\n  CheckboxField,\n  FormSubmitError,\n} from 'components/FormField';\nimport FieldWithPrompt from 'components/FieldWithPrompt';\nimport {\n  FormColumnLayout,\n  FormFullWidthLayout,\n  FormCheckboxLayout,\n  SubFormLayout,\n} from 'components/FormLayout';\nimport { VariablesField } from 'components/CodeEditor';\nimport { required, combine, maxLength } from 'util/validators';\nimport { JobTemplate } from 'types';\nimport {\n  InventoryLookup,\n  InstanceGroupsLookup,\n  ProjectLookup,\n  MultiCredentialsLookup,\n  ExecutionEnvironmentLookup,\n} from 'components/Lookup';\nimport Popover from 'components/Popover';\nimport { JobTemplatesAPI } from 'api';\nimport useIsMounted from 'hooks/useIsMounted';\nimport LabelSelect from 'components/LabelSelect';\nimport { VerbositySelectField } from 'components/VerbositySelectField';\nimport PlaybookSelect from './PlaybookSelect';\nimport WebhookSubForm from './WebhookSubForm';\nimport helpText from './JobTemplate.helptext';\n\nconst { origin } = document.location;\n\nfunction JobTemplateForm({\n  template,\n  handleCancel,\n  handleSubmit,\n  setFieldValue,\n  setFieldTouched,\n  submitError,\n  validateField,\n  isOverrideDisabledLookup, // TODO: this is a confusing variable name\n}) {\n  const [contentError, setContentError] = useState(false);\n  const [allowCallbacks, setAllowCallbacks] = useState(\n    Boolean(template?.host_config_key)\n  );\n  const [enableWebhooks, setEnableWebhooks] = useState(\n    Boolean(template?.webhook_service)\n  );\n  const isMounted = useIsMounted();\n  const brandName = useBrandName();\n\n  const [askInventoryOnLaunchField] = useField('ask_inventory_on_launch');\n  const [jobTypeField, jobTypeMeta, jobTypeHelpers] = useField({\n    name: 'job_type',\n    validate: required(null),\n  });\n  const [inventoryField, inventoryMeta, inventoryHelpers] =\n    useField('inventory');\n  const [projectField, projectMeta, projectHelpers] = useField('project');\n  const [scmField, , scmHelpers] = useField('scm_branch');\n  const [playbookField, playbookMeta, playbookHelpers] = useField({\n    name: 'playbook',\n    validate: required(null),\n  });\n  const [credentialField, , credentialHelpers] = useField('credentials');\n  const [labelsField, , labelsHelpers] = useField('labels');\n  const [limitField, limitMeta, limitHelpers] = useField('limit');\n  const [diffModeField, , diffModeHelpers] = useField('diff_mode');\n  const [instanceGroupsField, , instanceGroupsHelpers] =\n    useField('instanceGroups');\n  const [jobTagsField, , jobTagsHelpers] = useField('job_tags');\n  const [skipTagsField, , skipTagsHelpers] = useField('skip_tags');\n\n  const [, webhookServiceMeta, webhookServiceHelpers] =\n    useField('webhook_service');\n  const [, webhookUrlMeta, webhookUrlHelpers] = useField('webhook_url');\n  const [, webhookKeyMeta, webhookKeyHelpers] = useField('webhook_key');\n  const [, webhookCredentialMeta, webhookCredentialHelpers] =\n    useField('webhook_credential');\n\n  const [\n    executionEnvironmentField,\n    executionEnvironmentMeta,\n    executionEnvironmentHelpers,\n  ] = useField('execution_environment');\n\n  const {\n    request: loadRelatedInstanceGroups,\n    error: instanceGroupError,\n    isLoading: instanceGroupLoading,\n  } = useRequest(\n    useCallback(async () => {\n      if (!template?.id) {\n        return;\n      }\n      const { data } = await JobTemplatesAPI.readInstanceGroups(template.id);\n      if (isMounted.current) {\n        setFieldValue('initialInstanceGroups', data.results);\n        setFieldValue('instanceGroups', [...data.results]);\n      }\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [setFieldValue, template]),\n    {\n      isLoading: true,\n    }\n  );\n\n  useEffect(() => {\n    loadRelatedInstanceGroups();\n  }, [loadRelatedInstanceGroups]);\n\n  useEffect(() => {\n    if (enableWebhooks) {\n      webhookServiceHelpers.setValue(webhookServiceMeta.initialValue);\n      webhookUrlHelpers.setValue(webhookUrlMeta.initialValue);\n      webhookKeyHelpers.setValue(webhookKeyMeta.initialValue);\n      webhookCredentialHelpers.setValue(webhookCredentialMeta.initialValue);\n    } else {\n      webhookServiceHelpers.setValue('');\n      webhookUrlHelpers.setValue('');\n      webhookKeyHelpers.setValue('');\n      webhookCredentialHelpers.setValue(null);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [enableWebhooks]);\n\n  const handleProjectValidation = (project) => {\n    if (!project) {\n      return t`This field must not be blank`;\n    }\n    if (project?.status === 'never updated') {\n      return t`This Project needs to be updated`;\n    }\n    return undefined;\n  };\n\n  const handleProjectUpdate = useCallback(\n    (value) => {\n      setFieldValue('project', value);\n      setFieldValue('playbook', '', false);\n      setFieldValue('scm_branch', '', false);\n      setFieldTouched('project', true, false);\n    },\n    [setFieldValue, setFieldTouched]\n  );\n\n  const handleInventoryValidation = (inventory) => {\n    if (!inventory && !askInventoryOnLaunchField.value) {\n      return t`Please select an Inventory or check the Prompt on Launch option`;\n    }\n    return undefined;\n  };\n\n  const handleInventoryUpdate = useCallback(\n    (value) => {\n      setFieldValue('inventory', value);\n      setFieldTouched('inventory', true, false);\n    },\n    [setFieldValue, setFieldTouched]\n  );\n\n  const handleExecutionEnvironmentUpdate = useCallback(\n    (value) => {\n      setFieldValue('execution_environment', value);\n      setFieldTouched('execution_environment', true, false);\n    },\n    [setFieldValue, setFieldTouched]\n  );\n\n  const handlePlaybookUpdate = useCallback(\n    (value) => {\n      setFieldValue('playbook', value);\n      setFieldTouched('playbook', true, false);\n    },\n    [setFieldValue, setFieldTouched]\n  );\n\n  useEffect(() => {\n    validateField('inventory');\n  }, [askInventoryOnLaunchField.value, validateField]);\n\n  const jobTypeOptions = [\n    {\n      value: '',\n      key: '',\n      label: t`Choose a job type`,\n      isDisabled: true,\n    },\n    { value: 'run', key: 'run', label: t`Run`, isDisabled: false },\n    {\n      value: 'check',\n      key: 'check',\n      label: t`Check`,\n      isDisabled: false,\n    },\n  ];\n  let callbackUrl;\n  if (template?.related) {\n    const path = template.related.callback || `${template.url}callback`;\n    callbackUrl = `${origin}${path}`;\n  }\n\n  if (instanceGroupLoading) {\n    return <ContentLoading />;\n  }\n\n  if (contentError || instanceGroupError) {\n    return <ContentError error={contentError || instanceGroupError} />;\n  }\n\n  return (\n    <Form autoComplete=\"off\" onSubmit={handleSubmit}>\n      <FormColumnLayout>\n        <FormField\n          id=\"template-name\"\n          name=\"name\"\n          type=\"text\"\n          label={t`Name`}\n          validate={combine([required(null), maxLength(512)])}\n          isRequired\n        />\n        <FormField\n          id=\"template-description\"\n          name=\"description\"\n          type=\"text\"\n          label={t`Description`}\n        />\n        <FieldWithPrompt\n          fieldId=\"template-job-type\"\n          isRequired\n          label={t`Job Type`}\n          promptId=\"template-ask-job-type-on-launch\"\n          promptName=\"ask_job_type_on_launch\"\n          tooltip={helpText.jobType}\n        >\n          <AnsibleSelect\n            {...jobTypeField}\n            isValid={!jobTypeMeta.touched || !jobTypeMeta.error}\n            id=\"template-job-type\"\n            data={jobTypeOptions}\n            onChange={(event, value) => {\n              jobTypeHelpers.setValue(value);\n            }}\n          />\n        </FieldWithPrompt>\n        <FormGroup\n          fieldId=\"template-inventory\"\n          validated={\n            !(inventoryMeta.touched || askInventoryOnLaunchField.value) ||\n            !inventoryMeta.error\n              ? 'default'\n              : 'error'\n          }\n          helperTextInvalid={inventoryMeta.error}\n          isRequired={!askInventoryOnLaunchField.value}\n        >\n          <InventoryLookup\n            fieldId=\"template-inventory\"\n            value={inventoryField.value}\n            promptId=\"template-ask-inventory-on-launch\"\n            promptName=\"ask_inventory_on_launch\"\n            isPromptableField\n            tooltip={helpText.inventory}\n            onBlur={() => inventoryHelpers.setTouched()}\n            onChange={handleInventoryUpdate}\n            required={!askInventoryOnLaunchField.value}\n            touched={inventoryMeta.touched}\n            error={inventoryMeta.error}\n            isOverrideDisabled={isOverrideDisabledLookup}\n            validate={handleInventoryValidation}\n          />\n        </FormGroup>\n\n        <ProjectLookup\n          value={projectField.value}\n          onBlur={() => projectHelpers.setTouched()}\n          tooltip={helpText.project}\n          isValid={Boolean(\n            !projectMeta.touched || (!projectMeta.error && projectField.value)\n          )}\n          helperTextInvalid={projectMeta.error}\n          onChange={handleProjectUpdate}\n          required\n          autoPopulate={!template?.id}\n          isOverrideDisabled={isOverrideDisabledLookup}\n          validate={handleProjectValidation}\n        />\n\n        <ExecutionEnvironmentLookup\n          helperTextInvalid={executionEnvironmentMeta.error}\n          isValid={\n            !executionEnvironmentMeta.touched || !executionEnvironmentMeta.error\n          }\n          onBlur={() => executionEnvironmentHelpers.setTouched()}\n          value={executionEnvironmentField.value}\n          onChange={handleExecutionEnvironmentUpdate}\n          popoverContent={helpText.executionEnvironmentForm}\n          tooltip={t`Select a project before editing the execution environment.`}\n          globallyAvailable\n          isDisabled={!projectField.value?.id}\n          projectId={projectField.value?.id}\n        />\n\n        {projectField.value?.allow_override && (\n          <FieldWithPrompt\n            fieldId=\"template-scm-branch\"\n            label={t`Source Control Branch`}\n            promptId=\"template-ask-scm-branch-on-launch\"\n            promptName=\"ask_scm_branch_on_launch\"\n            tooltip={helpText.sourceControlBranch}\n          >\n            <TextInput\n              id=\"template-scm-branch\"\n              onChange={(value) => {\n                scmHelpers.setValue(value);\n              }}\n              value={scmField.value}\n              aria-label={t`source control branch`}\n            />\n          </FieldWithPrompt>\n        )}\n        <FormGroup\n          fieldId=\"template-playbook\"\n          helperTextInvalid={playbookMeta.error}\n          validated={\n            !playbookMeta.touched || !playbookMeta.error ? 'default' : 'error'\n          }\n          isRequired\n          label={t`Playbook`}\n          labelIcon={<Popover content={helpText.playbook} />}\n        >\n          <PlaybookSelect\n            onChange={handlePlaybookUpdate}\n            projectId={projectField.value?.id}\n            isValid={!playbookMeta.touched || !playbookMeta.error}\n            selected={playbookField.value}\n            onBlur={() => playbookHelpers.setTouched()}\n            onError={setContentError}\n          />\n        </FormGroup>\n        <FormFullWidthLayout>\n          <FieldWithPrompt\n            fieldId=\"template-credentials\"\n            label={t`Credentials`}\n            promptId=\"template-ask-credential-on-launch\"\n            promptName=\"ask_credential_on_launch\"\n            tooltip={helpText.credentials}\n          >\n            <MultiCredentialsLookup\n              value={credentialField.value}\n              onChange={(newCredentials) =>\n                credentialHelpers.setValue(newCredentials)\n              }\n              onError={setContentError}\n            />\n          </FieldWithPrompt>\n          <FormGroup\n            label={t`Labels`}\n            labelIcon={<Popover content={helpText.labels} />}\n            fieldId=\"template-labels\"\n          >\n            <LabelSelect\n              value={labelsField.value}\n              onChange={(labels) => labelsHelpers.setValue(labels)}\n              onError={setContentError}\n              createText={t`Create`}\n            />\n          </FormGroup>\n          <VariablesField\n            id=\"template-variables\"\n            name=\"extra_vars\"\n            label={t`Variables`}\n            promptId=\"template-ask-variables-on-launch\"\n            tooltip={helpText.variables}\n          />\n          <FormColumnLayout>\n            <FormField\n              id=\"template-forks\"\n              name=\"forks\"\n              type=\"number\"\n              min=\"0\"\n              label={t`Forks`}\n              tooltip={helpText.forks}\n            />\n            <FieldWithPrompt\n              fieldId=\"template-limit\"\n              label={t`Limit`}\n              promptId=\"template-ask-limit-on-launch\"\n              promptName=\"ask_limit_on_launch\"\n              tooltip={helpText.limit}\n            >\n              <TextInput\n                id=\"template-limit\"\n                {...limitField}\n                validated={\n                  !limitMeta.touched || !limitMeta.error ? 'default' : 'error'\n                }\n                onChange={(value) => {\n                  limitHelpers.setValue(value);\n                }}\n              />\n            </FieldWithPrompt>\n            <VerbositySelectField\n              fieldId=\"template-verbosity\"\n              promptId=\"template-ask-verbosity-on-launch\"\n              promptName=\"ask_verbosity_on_launch\"\n              tooltip={helpText.verbosity}\n            />\n            <FormField\n              id=\"template-job-slicing\"\n              name=\"job_slice_count\"\n              type=\"number\"\n              min=\"1\"\n              label={t`Job Slicing`}\n              tooltip={helpText.jobSlicing}\n            />\n            <FormField\n              id=\"template-timeout\"\n              name=\"timeout\"\n              type=\"number\"\n              min=\"0\"\n              label={t`Timeout`}\n              tooltip={helpText.timeout}\n            />\n            <FieldWithPrompt\n              fieldId=\"template-diff-mode\"\n              label={t`Show Changes`}\n              promptId=\"template-ask-diff-mode-on-launch\"\n              promptName=\"ask_diff_mode_on_launch\"\n              tooltip={helpText.showChanges}\n            >\n              <Switch\n                id=\"template-show-changes\"\n                label={diffModeField.value ? t`On` : t`Off`}\n                isChecked={diffModeField.value}\n                onChange={(checked) => diffModeHelpers.setValue(checked)}\n              />\n            </FieldWithPrompt>\n            <FormFullWidthLayout>\n              <InstanceGroupsLookup\n                value={instanceGroupsField.value}\n                onChange={(value) => instanceGroupsHelpers.setValue(value)}\n                tooltip={helpText.instanceGroups}\n                fieldName=\"instanceGroups\"\n              />\n              <FieldWithPrompt\n                fieldId=\"template-tags\"\n                label={t`Job Tags`}\n                promptId=\"template-ask-tags-on-launch\"\n                promptName=\"ask_tags_on_launch\"\n                tooltip={helpText.jobTags}\n              >\n                <TagMultiSelect\n                  value={jobTagsField.value}\n                  onChange={(value) => jobTagsHelpers.setValue(value)}\n                />\n              </FieldWithPrompt>\n              <FieldWithPrompt\n                fieldId=\"template-skip-tags\"\n                label={t`Skip Tags`}\n                promptId=\"template-ask-skip-tags-on-launch\"\n                promptName=\"ask_skip_tags_on_launch\"\n                tooltip={helpText.skipTags}\n              >\n                <TagMultiSelect\n                  value={skipTagsField.value}\n                  onChange={(value) => skipTagsHelpers.setValue(value)}\n                />\n              </FieldWithPrompt>\n              <FormGroup\n                fieldId=\"template-option-checkboxes\"\n                label={t`Options`}\n              >\n                <FormCheckboxLayout>\n                  <CheckboxField\n                    id=\"option-privilege-escalation\"\n                    name=\"become_enabled\"\n                    label={t`Privilege Escalation`}\n                    tooltip={helpText.privilegeEscalation}\n                  />\n                  <Checkbox\n                    aria-label={t`Provisioning Callbacks`}\n                    label={\n                      <span>\n                        {t`Provisioning Callbacks`}\n                        &nbsp;\n                        <Popover\n                          content={helpText.provisioningCallbacks(brandName)}\n                        />\n                      </span>\n                    }\n                    id=\"option-callbacks\"\n                    ouiaId=\"option-callbacks\"\n                    isChecked={allowCallbacks}\n                    onChange={(checked) => {\n                      setAllowCallbacks(checked);\n                    }}\n                  />\n                  <Checkbox\n                    aria-label={t`Enable Webhook`}\n                    label={\n                      <span>\n                        {t`Enable Webhook`}\n                        &nbsp;\n                        <Popover content={helpText.enableWebhook} />\n                      </span>\n                    }\n                    id=\"wfjt-enabled-webhooks\"\n                    ouiaId=\"wfjt-enabled-webhooks\"\n                    isChecked={enableWebhooks}\n                    onChange={(checked) => {\n                      setEnableWebhooks(checked);\n                    }}\n                  />\n                  <CheckboxField\n                    id=\"option-concurrent\"\n                    name=\"allow_simultaneous\"\n                    label={t`Concurrent Jobs`}\n                    tooltip={helpText.concurrentJobs}\n                  />\n                  <CheckboxField\n                    id=\"option-fact-cache\"\n                    name=\"use_fact_cache\"\n                    label={t`Enable Fact Storage`}\n                    tooltip={helpText.enableFactStorage}\n                  />\n                </FormCheckboxLayout>\n              </FormGroup>\n            </FormFullWidthLayout>\n\n            {(allowCallbacks || enableWebhooks) && (\n              <SubFormLayout>\n                {allowCallbacks && (\n                  <>\n                    <Title size=\"md\" headingLevel=\"h4\">\n                      {t`Provisioning Callback details`}\n                    </Title>\n                    <FormColumnLayout>\n                      {callbackUrl && (\n                        <FormGroup\n                          label={t`Provisioning Callback URL`}\n                          fieldId=\"template-callback-url\"\n                        >\n                          <TextInput\n                            id=\"template-callback-url\"\n                            isDisabled\n                            value={callbackUrl}\n                          />\n                        </FormGroup>\n                      )}\n                      <FormField\n                        id=\"template-host-config-key\"\n                        name=\"host_config_key\"\n                        label={t`Host Config Key`}\n                        validate={allowCallbacks ? required(null) : null}\n                        isRequired={allowCallbacks}\n                      />\n                    </FormColumnLayout>\n                  </>\n                )}\n\n                {allowCallbacks && enableWebhooks && <br />}\n\n                {enableWebhooks && (\n                  <>\n                    <Title size=\"md\" headingLevel=\"h4\">\n                      {t`Webhook details`}\n                    </Title>\n                    <FormColumnLayout>\n                      <WebhookSubForm templateType={template.type} />\n                    </FormColumnLayout>\n                  </>\n                )}\n              </SubFormLayout>\n            )}\n          </FormColumnLayout>\n        </FormFullWidthLayout>\n        <FormSubmitError error={submitError} />\n        <FormActionGroup onCancel={handleCancel} onSubmit={handleSubmit} />\n      </FormColumnLayout>\n    </Form>\n  );\n}\nJobTemplateForm.propTypes = {\n  template: JobTemplate,\n  handleCancel: PropTypes.func.isRequired,\n  handleSubmit: PropTypes.func.isRequired,\n  submitError: PropTypes.shape({}),\n  isOverrideDisabledLookup: PropTypes.bool,\n};\n\nJobTemplateForm.defaultProps = {\n  template: {\n    name: '',\n    description: '',\n    job_type: 'run',\n    inventory: undefined,\n    project: undefined,\n    playbook: '',\n    scm_branch: '',\n    summary_fields: {\n      inventory: null,\n      labels: { results: [] },\n      project: null,\n      credentials: [],\n    },\n    isNew: true,\n  },\n  submitError: null,\n  isOverrideDisabledLookup: false,\n};\n\nconst FormikApp = withFormik({\n  mapPropsToValues({ projectValues = {}, template = {} }) {\n    const {\n      summary_fields = {\n        labels: { results: [] },\n        inventory: null,\n      },\n    } = template;\n\n    return {\n      allow_callbacks: template.allow_callbacks || false,\n      allow_simultaneous: template.allow_simultaneous || false,\n      ask_credential_on_launch: template.ask_credential_on_launch || false,\n      ask_diff_mode_on_launch: template.ask_diff_mode_on_launch || false,\n      ask_inventory_on_launch: template.ask_inventory_on_launch || false,\n      ask_job_type_on_launch: template.ask_job_type_on_launch || false,\n      ask_limit_on_launch: template.ask_limit_on_launch || false,\n      ask_scm_branch_on_launch: template.ask_scm_branch_on_launch || false,\n      ask_skip_tags_on_launch: template.ask_skip_tags_on_launch || false,\n      ask_tags_on_launch: template.ask_tags_on_launch || false,\n      ask_variables_on_launch: template.ask_variables_on_launch || false,\n      ask_verbosity_on_launch: template.ask_verbosity_on_launch || false,\n      become_enabled: template.become_enabled || false,\n      credentials: summary_fields.credentials || [],\n      description: template.description || '',\n      diff_mode: template.diff_mode || false,\n      extra_vars: template.extra_vars || '---\\n',\n      forks: template.forks || 0,\n      host_config_key: template.host_config_key || '',\n      initialInstanceGroups: [],\n      instanceGroups: [],\n      inventory: summary_fields?.inventory || null,\n      job_slice_count: template.job_slice_count || 1,\n      job_tags: template.job_tags || '',\n      job_type: template.job_type || 'run',\n      labels: summary_fields.labels.results || [],\n      limit: template.limit || '',\n      name: template.name || '',\n      playbook: template.playbook || '',\n      project: summary_fields?.project || projectValues || null,\n      scm_branch: template.scm_branch || '',\n      skip_tags: template.skip_tags || '',\n      timeout: template.timeout || 0,\n      use_fact_cache: template.use_fact_cache || false,\n      verbosity: template.verbosity || '0',\n      webhook_service: template.webhook_service || '',\n      webhook_url: template?.related?.webhook_receiver\n        ? `${origin}${template.related.webhook_receiver}`\n        : t`a new webhook url will be generated on save.`.toUpperCase(),\n      webhook_key:\n        template.webhook_key ||\n        t`a new webhook key will be generated on save.`.toUpperCase(),\n      webhook_credential: template?.summary_fields?.webhook_credential || null,\n      execution_environment:\n        template.summary_fields?.execution_environment || null,\n    };\n  },\n  handleSubmit: async (values, { props, setErrors }) => {\n    try {\n      await props.handleSubmit(values);\n    } catch (errors) {\n      setErrors(errors);\n    }\n  },\n})(JobTemplateForm);\n\nexport { JobTemplateForm as _JobTemplateForm };\nexport default FormikApp;\n"]},"metadata":{},"sourceType":"module"}