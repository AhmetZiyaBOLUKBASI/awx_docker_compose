{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _styled2 from\"styled-components\";import _styled from\"styled-components\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useState}from'react';import{Link,useHistory}from'react-router-dom';import{Button,Chip}from'@patternfly/react-core';import styled from'styled-components';import{useConfig}from'contexts/Config';import AlertModal from'components/AlertModal';import{DeletedDetail,DetailList,Detail,UserDateDetail,LaunchedByDetail}from'components/DetailList';import{CardBody,CardActionsRow}from'components/Card';import ChipGroup from'components/ChipGroup';import CredentialChip from'components/CredentialChip';import{VariablesDetail}from'components/CodeEditor';import DeleteButton from'components/DeleteButton';import ErrorDetail from'components/ErrorDetail';import{LaunchButton,ReLaunchDropDown}from'components/LaunchButton';import StatusLabel from'components/StatusLabel';import JobCancelButton from'components/JobCancelButton';import ExecutionEnvironmentDetail from'components/ExecutionEnvironmentDetail';import{VERBOSITY}from'components/VerbositySelectField';import{getJobModel,isJobRunning}from'util/jobs';import{formatDateString}from'util/dates';import{Job}from'types';import jobHelpText from'../Job.helptext';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var StatusDetailValue=styled.div.withConfig({displayName:\"JobDetail__StatusDetailValue\",componentId:\"sc-1sln772-0\"})([\"align-items:center;display:inline-grid;grid-gap:10px;grid-template-columns:auto auto;\"]);var _StyledVariablesDetail=styled(VariablesDetail).withConfig({displayName:\"JobDetail___StyledVariablesDetail\",componentId:\"sc-1sln772-1\"})([\"margin:20px 0\"]);var _StyledVariablesDetail2=styled(VariablesDetail).withConfig({displayName:\"JobDetail___StyledVariablesDetail2\",componentId:\"sc-1sln772-2\"})([\"margin:20px 0\"]);function JobDetail(_ref){var _job$summary_fields2,_job$summary_fields2$,_job$summary_fields3,_job$summary_fields3$;var job=_ref.job,inventorySourceLabels=_ref.inventorySourceLabels;var _useConfig=useConfig(),me=_useConfig.me;var _job$summary_fields=job.summary_fields,created_by=_job$summary_fields.created_by,credential=_job$summary_fields.credential,credentials=_job$summary_fields.credentials,instanceGroup=_job$summary_fields.instance_group,inventory=_job$summary_fields.inventory,inventory_source=_job$summary_fields.inventory_source,source_project=_job$summary_fields.source_project,jobTemplate=_job$summary_fields.job_template,workflowJobTemplate=_job$summary_fields.workflow_job_template,labels=_job$summary_fields.labels,project=_job$summary_fields.project,projectUpdate=_job$summary_fields.project_update,source_workflow_job=_job$summary_fields.source_workflow_job,executionEnvironment=_job$summary_fields.execution_environment;var scmBranch=job.scm_branch;var _useState=useState(),_useState2=_slicedToArray(_useState,2),errorMsg=_useState2[0],setErrorMsg=_useState2[1];var history=useHistory();var jobTypes={project_update:/*i18n*/i18n._(\"Source Control Update\"),inventory_update:/*i18n*/i18n._(\"Inventory Sync\"),job:job.job_type==='check'?/*i18n*/i18n._(\"Playbook Check\"):/*i18n*/i18n._(\"Playbook Run\"),ad_hoc_command:/*i18n*/i18n._(\"Run Command\"),system_job:/*i18n*/i18n._(\"Management Job\"),workflow_job:/*i18n*/i18n._(\"Workflow Job\")};var scmTypes={'':/*i18n*/i18n._(\"Manual\"),git:/*i18n*/i18n._(\"Git\"),svn:/*i18n*/i18n._(\"Subversion\"),insights:/*i18n*/i18n._(\"Red Hat Insights\"),archive:/*i18n*/i18n._(\"Remote Archive\")};var deleteJob=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getJobModel(job.type).destroy(job.id);case 3:history.push('/jobs');_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);setErrorMsg(_context.t0);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));return function deleteJob(){return _ref2.apply(this,arguments);};}();var buildInstanceGroupLink=function buildInstanceGroupLink(item){return/*#__PURE__*/_jsx(Link,{to:\"/instance_groups/\".concat(item.id),children:item.name});};var buildContainerGroupLink=function buildContainerGroupLink(item){return/*#__PURE__*/_jsx(Link,{to:\"/instance_groups/container_group/\".concat(item.id),children:item.name});};var renderInventoryDetail=function renderInventoryDetail(){if(job.type!=='project_update'&&job.type!=='system_job'&&job.type!=='workflow_job'){return inventory?/*#__PURE__*/_jsx(Detail,{dataCy:\"job-inventory\",label:/*i18n*/i18n._(\"Inventory\"),helpText:jobHelpText.inventory,value:/*#__PURE__*/_jsx(Link,{to:inventory.kind==='smart'?\"/inventories/smart_inventory/\".concat(inventory.id):\"/inventories/inventory/\".concat(inventory.id),children:inventory.name})}):/*#__PURE__*/_jsx(DeletedDetail,{label:/*i18n*/i18n._(\"Inventory\"),helpText:jobHelpText.inventory});}if(job.type==='workflow_job'){return inventory?/*#__PURE__*/_jsx(Detail,{dataCy:\"job-inventory\",label:/*i18n*/i18n._(\"Inventory\"),helpText:jobHelpText.inventory,value:/*#__PURE__*/_jsx(Link,{to:inventory.kind==='smart'?\"/inventories/smart_inventory/\".concat(inventory.id):\"/inventories/inventory/\".concat(inventory.id),children:inventory.name})}):null;}return null;};var renderProjectDetail=function renderProjectDetail(){if(job.type!=='ad_hoc_command'&&job.type!=='inventory_update'&&job.type!=='system_job'&&job.type!=='workflow_job'){return project?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Detail,{dataCy:\"job-project\",label:/*i18n*/i18n._(\"Project\"),helpText:jobHelpText.project,value:/*#__PURE__*/_jsx(Link,{to:\"/projects/\".concat(project.id),children:project.name})}),/*#__PURE__*/_jsx(Detail,{dataCy:\"job-project-status\",label:/*i18n*/i18n._(\"Project Update Status\"),helpText:jobHelpText.projectUpdate,value:projectUpdate?/*#__PURE__*/_jsx(Link,{to:\"/jobs/project/\".concat(projectUpdate.id),children:/*#__PURE__*/_jsx(StatusLabel,{status:projectUpdate.status})}):null})]}):/*#__PURE__*/_jsx(DeletedDetail,{label:/*i18n*/i18n._(\"Project\")});}return null;};return/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsxs(DetailList,{children:[/*#__PURE__*/_jsx(Detail,{dataCy:\"job-id\",label:/*i18n*/i18n._(\"Job ID\"),value:job.id}),/*#__PURE__*/_jsx(Detail,{dataCy:\"job-status\",fullWidth:Boolean(job.job_explanation),label:/*i18n*/i18n._(\"Status\"),value:/*#__PURE__*/_jsxs(StatusDetailValue,{children:[job.status&&/*#__PURE__*/_jsx(StatusLabel,{status:job.status}),job.job_explanation&&job.job_explanation!==job.status?job.job_explanation:null]})}),/*#__PURE__*/_jsx(Detail,{dataCy:\"job-started-date\",label:/*i18n*/i18n._(\"Started\"),value:formatDateString(job.started)}),(job===null||job===void 0?void 0:job.finished)&&/*#__PURE__*/_jsx(Detail,{dataCy:\"job-finished-date\",label:/*i18n*/i18n._(\"Finished\"),value:formatDateString(job.finished)}),jobTemplate&&/*#__PURE__*/_jsx(Detail,{dataCy:\"job-template\",label:/*i18n*/i18n._(\"Job Template\"),value:/*#__PURE__*/_jsx(Link,{to:\"/templates/job_template/\".concat(jobTemplate.id),children:jobTemplate.name})}),workflowJobTemplate&&/*#__PURE__*/_jsx(Detail,{dataCy:\"workflow-job-template\",label:/*i18n*/i18n._(\"Workflow Job Template\"),value:/*#__PURE__*/_jsx(Link,{to:\"/templates/workflow_job_template/\".concat(workflowJobTemplate.id),children:workflowJobTemplate.name})}),source_workflow_job&&/*#__PURE__*/_jsx(Detail,{dataCy:\"source-workflow-job\",label:/*i18n*/i18n._(\"Source Workflow Job\"),value:/*#__PURE__*/_jsxs(Link,{to:\"/jobs/workflow/\".concat(source_workflow_job.id),children:[source_workflow_job.id,\" - \",source_workflow_job.name]})}),/*#__PURE__*/_jsx(Detail,{dataCy:\"job-type\",label:/*i18n*/i18n._(\"Job Type\"),helpText:jobHelpText.jobType,value:jobTypes[job.type]}),/*#__PURE__*/_jsx(Detail,{dataCy:\"source-control-type\",label:/*i18n*/i18n._(\"Source Control Type\"),value:scmTypes[job.scm_type]}),/*#__PURE__*/_jsx(LaunchedByDetail,{dataCy:\"job-launched-by\",job:job}),renderInventoryDetail(),inventory_source&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Detail,{dataCy:\"job-inventory-source\",label:/*i18n*/i18n._(\"Inventory Source\"),value:/*#__PURE__*/_jsx(Link,{to:\"/inventories/inventory/\".concat(inventory.id,\"/sources/\").concat(inventory_source.id),children:inventory_source.name})}),/*#__PURE__*/_jsx(Detail,{dataCy:\"job-inventory-source-type\",label:/*i18n*/i18n._(\"Source\"),value:inventorySourceLabels.map(function(_ref3){var _ref4=_slicedToArray(_ref3,2),string=_ref4[0],label=_ref4[1];return string===job.source?label:null;}),isEmpty:inventorySourceLabels.length===0})]}),inventory_source&&inventory_source.source==='scm'&&/*#__PURE__*/_jsx(Detail,{dataCy:\"job-inventory-source-project\",label:/*i18n*/i18n._(\"Inventory Source Project\"),value:/*#__PURE__*/_jsxs(StatusDetailValue,{children:[source_project.status&&/*#__PURE__*/_jsx(StatusLabel,{status:source_project.status}),/*#__PURE__*/_jsx(Link,{to:\"/projects/\".concat(source_project.id),children:source_project.name})]})}),renderProjectDetail(),scmBranch&&/*#__PURE__*/_jsx(Detail,{dataCy:\"source-control-branch\",label:/*i18n*/i18n._(\"Source Control Branch\"),helpText:jobHelpText.sourceControlBranch,value:scmBranch}),/*#__PURE__*/_jsx(Detail,{dataCy:\"job-scm-revision\",label:/*i18n*/i18n._(\"Revision\"),value:job.scm_revision}),/*#__PURE__*/_jsx(Detail,{dataCy:\"job-playbook\",label:/*i18n*/i18n._(\"Playbook\"),helpText:jobHelpText.playbook,value:job.playbook}),/*#__PURE__*/_jsx(Detail,{dataCy:\"job-limit\",label:/*i18n*/i18n._(\"Limit\"),helpText:jobHelpText.limit,value:job.limit}),/*#__PURE__*/_jsx(Detail,{dataCy:\"job-verbosity\",label:/*i18n*/i18n._(\"Verbosity\"),helpText:jobHelpText.verbosity,value:VERBOSITY()[job.verbosity]}),job.type!=='workflow_job'&&!isJobRunning(job.status)&&/*#__PURE__*/_jsx(ExecutionEnvironmentDetail,{dataCy:\"job-execution-environment\",executionEnvironment:executionEnvironment,helpText:jobHelpText.executionEnvironment,verifyMissingVirtualEnv:false}),/*#__PURE__*/_jsx(Detail,{dataCy:\"job-execution-node\",label:/*i18n*/i18n._(\"Execution Node\"),value:job.execution_node}),job!==null&&job!==void 0&&job.controller_node?/*#__PURE__*/_jsx(Detail,{dataCy:\"job-controller-node\",label:/*i18n*/i18n._(\"Controller Node\"),value:job.controller_node}):null,instanceGroup&&!(instanceGroup!==null&&instanceGroup!==void 0&&instanceGroup.is_container_group)&&/*#__PURE__*/_jsx(Detail,{dataCy:\"job-instance-group\",label:/*i18n*/i18n._(\"Instance Group\"),helpText:jobHelpText.instanceGroups,value:buildInstanceGroupLink(instanceGroup)}),instanceGroup&&(instanceGroup===null||instanceGroup===void 0?void 0:instanceGroup.is_container_group)&&/*#__PURE__*/_jsx(Detail,{dataCy:\"job-container-group\",label:/*i18n*/i18n._(\"Container Group\"),value:buildContainerGroupLink(instanceGroup)}),typeof job.job_slice_number==='number'&&typeof job.job_slice_count==='number'&&/*#__PURE__*/_jsx(Detail,{dataCy:\"job-slice\",label:/*i18n*/i18n._(\"Job Slice\"),helpText:jobHelpText.jobSlicing,value:\"\".concat(job.job_slice_number,\"/\").concat(job.job_slice_count)}),job.type==='workflow_job'&&job.is_sliced_job&&/*#__PURE__*/_jsx(Detail,{dataCy:\"job-slice-parent\",label:/*i18n*/i18n._(\"Job Slice Parent\"),value:/*i18n*/i18n._(\"True\")}),typeof job.forks==='number'&&/*#__PURE__*/_jsx(Detail,{dataCy:\"forks\",label:/*i18n*/i18n._(\"Forks\"),value:\"\".concat(job.forks),helpText:jobHelpText.forks}),credential&&/*#__PURE__*/_jsx(Detail,{dataCy:\"job-machine-credential\",label:/*i18n*/i18n._(\"Machine Credential\"),value:/*#__PURE__*/_jsx(ChipGroup,{numChips:5,totalChips:1,ouiaId:\"job-machine-credential-chips\",children:/*#__PURE__*/_jsx(CredentialChip,{credential:credential,isReadOnly:true,ouiaId:\"job-machine-credential-\".concat(credential.id,\"-chip\")},credential.id)})}),credentials&&/*#__PURE__*/_jsx(Detail,{dataCy:\"job-credentials\",fullWidth:true,helpText:jobHelpText.credentials,label:/*i18n*/i18n._(\"Credentials\"),value:/*#__PURE__*/_jsx(ChipGroup,{numChips:5,totalChips:credentials.length,ouiaId:\"job-credential-chips\",children:credentials.map(function(c){return/*#__PURE__*/_jsx(CredentialChip,{credential:c,isReadOnly:true,ouiaId:\"job-credential-\".concat(c.id,\"-chip\")},c.id);})}),isEmpty:credentials.length===0}),labels&&labels.count>0&&/*#__PURE__*/_jsx(Detail,{dataCy:\"job-labels\",fullWidth:true,label:/*i18n*/i18n._(\"Labels\"),helpText:jobHelpText.labels,value:/*#__PURE__*/_jsx(ChipGroup,{numChips:5,totalChips:labels.results.length,ouiaId:\"job-label-chips\",children:labels.results.map(function(l){return/*#__PURE__*/_jsx(Chip,{isReadOnly:true,ouiaId:\"job-label-\".concat(l.id,\"-chip\"),children:l.name},l.id);})})}),job.job_tags&&/*#__PURE__*/_jsx(Detail,{dataCy:\"job-tags\",fullWidth:true,label:/*i18n*/i18n._(\"Job Tags\"),helpText:jobHelpText.jobTags,value:/*#__PURE__*/_jsx(ChipGroup,{numChips:5,totalChips:job.job_tags.split(',').length,ouiaId:\"job-tag-chips\",children:job.job_tags.split(',').map(function(jobTag){return/*#__PURE__*/_jsx(Chip,{isReadOnly:true,ouiaId:\"job-tag-\".concat(jobTag,\"-chip\"),children:jobTag},jobTag);})}),isEmpty:job.job_tags.length===0}),job.skip_tags&&/*#__PURE__*/_jsx(Detail,{dataCy:\"job-skip-tags\",fullWidth:true,label:/*i18n*/i18n._(\"Skip Tags\"),helpText:jobHelpText.skipTags,value:/*#__PURE__*/_jsx(ChipGroup,{numChips:5,totalChips:job.skip_tags.split(',').length,ouiaId:\"job-skip-tag-chips\",children:job.skip_tags.split(',').map(function(skipTag){return/*#__PURE__*/_jsx(Chip,{isReadOnly:true,ouiaId:\"job-skip-tag-\".concat(skipTag,\"-chip\"),children:skipTag},skipTag);})}),isEmpty:job.skip_tags.length===0}),/*#__PURE__*/_jsx(Detail,{dataCy:\"job-module-name\",label:/*i18n*/i18n._(\"Module Name\"),value:job.module_name,helpText:jobHelpText.module(job.module_name)}),/*#__PURE__*/_jsx(Detail,{dataCy:\"job-module-arguments\",label:/*i18n*/i18n._(\"Module Arguments\"),value:job.module_args}),/*#__PURE__*/_jsx(UserDateDetail,{label:/*i18n*/i18n._(\"Created\"),date:job.created,user:created_by}),/*#__PURE__*/_jsx(UserDateDetail,{label:/*i18n*/i18n._(\"Last Modified\"),date:job.modified}),job.extra_vars&&/*#__PURE__*/_jsx(_StyledVariablesDetail,{id:\"job-variables\",readOnly:true,value:job.extra_vars,rows:4,label:/*i18n*/i18n._(\"Variables\"),name:\"extra_vars\",dataCy:\"job-detail-extra-variables\",helpText:jobHelpText.variables}),job.artifacts&&/*#__PURE__*/_jsx(_StyledVariablesDetail2,{id:\"job-artifacts\",readOnly:true,value:JSON.stringify(job.artifacts),rows:4,label:/*i18n*/i18n._(\"Artifacts\"),name:\"artifacts\",dataCy:\"job-detail-artifacts\"})]}),/*#__PURE__*/_jsxs(CardActionsRow,{children:[job.type!=='system_job'&&job.summary_fields.user_capabilities.start&&(job.status==='failed'&&job.type==='job'?/*#__PURE__*/_jsx(LaunchButton,{resource:job,children:function children(_ref5){var handleRelaunch=_ref5.handleRelaunch,isLaunching=_ref5.isLaunching;return/*#__PURE__*/_jsx(ReLaunchDropDown,{ouiaId:\"job-detail-relaunch-dropdown\",isPrimary:true,handleRelaunch:handleRelaunch,isLaunching:isLaunching});}}):/*#__PURE__*/_jsx(LaunchButton,{resource:job,\"aria-label\":/*i18n*/i18n._(\"Relaunch\"),children:function children(_ref6){var handleRelaunch=_ref6.handleRelaunch,isLaunching=_ref6.isLaunching;return/*#__PURE__*/_jsx(Button,{ouiaId:\"job-detail-relaunch-button\",type:\"submit\",onClick:function onClick(){return handleRelaunch();},isDisabled:isLaunching,children:/*i18n*/i18n._(\"Relaunch\")});}})),isJobRunning(job.status)&&(job.type==='system_job'?me.is_superuser:job===null||job===void 0?void 0:(_job$summary_fields2=job.summary_fields)===null||_job$summary_fields2===void 0?void 0:(_job$summary_fields2$=_job$summary_fields2.user_capabilities)===null||_job$summary_fields2$===void 0?void 0:_job$summary_fields2$.start)&&/*#__PURE__*/_jsx(JobCancelButton,{job:job,errorTitle:/*i18n*/i18n._(\"Job Cancel Error\"),title:/*i18n*/i18n._(\"Cancel {0}\",{0:job.name}),errorMessage:/*i18n*/i18n._(\"Failed to cancel {0}\",{0:job.name})}),!isJobRunning(job.status)&&(job===null||job===void 0?void 0:(_job$summary_fields3=job.summary_fields)===null||_job$summary_fields3===void 0?void 0:(_job$summary_fields3$=_job$summary_fields3.user_capabilities)===null||_job$summary_fields3$===void 0?void 0:_job$summary_fields3$.delete)&&/*#__PURE__*/_jsx(DeleteButton,{name:job.name,modalTitle:/*i18n*/i18n._(\"Delete Job\"),onConfirm:deleteJob,ouiaId:\"job-detail-delete-button\",children:/*i18n*/i18n._(\"Delete\")})]}),errorMsg&&/*#__PURE__*/_jsx(AlertModal,{isOpen:errorMsg,variant:\"error\",onClose:function onClose(){return setErrorMsg();},title:/*i18n*/i18n._(\"Job Delete Error\"),children:/*#__PURE__*/_jsx(ErrorDetail,{error:errorMsg})})]});}export default JobDetail;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/Job/JobDetail/JobDetail.js"],"names":["React","useState","Link","useHistory","Button","Chip","styled","useConfig","AlertModal","DeletedDetail","DetailList","Detail","UserDateDetail","LaunchedByDetail","CardBody","CardActionsRow","ChipGroup","CredentialChip","VariablesDetail","DeleteButton","ErrorDetail","LaunchButton","ReLaunchDropDown","StatusLabel","JobCancelButton","ExecutionEnvironmentDetail","VERBOSITY","getJobModel","isJobRunning","formatDateString","Job","jobHelpText","StatusDetailValue","div","JobDetail","job","inventorySourceLabels","me","summary_fields","created_by","credential","credentials","instanceGroup","instance_group","inventory","inventory_source","source_project","jobTemplate","job_template","workflowJobTemplate","workflow_job_template","labels","project","projectUpdate","project_update","source_workflow_job","executionEnvironment","execution_environment","scmBranch","scm_branch","errorMsg","setErrorMsg","history","jobTypes","inventory_update","job_type","ad_hoc_command","system_job","workflow_job","scmTypes","git","svn","insights","archive","deleteJob","type","destroy","id","push","buildInstanceGroupLink","item","name","buildContainerGroupLink","renderInventoryDetail","kind","renderProjectDetail","status","Boolean","job_explanation","started","finished","jobType","scm_type","map","string","label","source","length","sourceControlBranch","scm_revision","playbook","limit","verbosity","execution_node","controller_node","is_container_group","instanceGroups","job_slice_number","job_slice_count","jobSlicing","is_sliced_job","forks","c","count","results","l","job_tags","jobTags","split","jobTag","skip_tags","skipTags","skipTag","module_name","module","module_args","created","modified","extra_vars","variables","artifacts","JSON","stringify","user_capabilities","start","handleRelaunch","isLaunching","is_superuser","delete"],"mappings":"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","sourcesContent":["import 'styled-components/macro';\nimport React, { useState } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\n\nimport { t } from '@lingui/macro';\nimport { Button, Chip } from '@patternfly/react-core';\nimport styled from 'styled-components';\n\nimport { useConfig } from 'contexts/Config';\nimport AlertModal from 'components/AlertModal';\nimport {\n  DeletedDetail,\n  DetailList,\n  Detail,\n  UserDateDetail,\n  LaunchedByDetail,\n} from 'components/DetailList';\nimport { CardBody, CardActionsRow } from 'components/Card';\nimport ChipGroup from 'components/ChipGroup';\nimport CredentialChip from 'components/CredentialChip';\nimport { VariablesDetail } from 'components/CodeEditor';\nimport DeleteButton from 'components/DeleteButton';\nimport ErrorDetail from 'components/ErrorDetail';\nimport { LaunchButton, ReLaunchDropDown } from 'components/LaunchButton';\nimport StatusLabel from 'components/StatusLabel';\nimport JobCancelButton from 'components/JobCancelButton';\nimport ExecutionEnvironmentDetail from 'components/ExecutionEnvironmentDetail';\nimport { VERBOSITY } from 'components/VerbositySelectField';\nimport { getJobModel, isJobRunning } from 'util/jobs';\nimport { formatDateString } from 'util/dates';\nimport { Job } from 'types';\nimport jobHelpText from '../Job.helptext';\n\nconst StatusDetailValue = styled.div`\n  align-items: center;\n  display: inline-grid;\n  grid-gap: 10px;\n  grid-template-columns: auto auto;\n`;\n\nfunction JobDetail({ job, inventorySourceLabels }) {\n  const { me } = useConfig();\n  const {\n    created_by,\n    credential,\n    credentials,\n    instance_group: instanceGroup,\n    inventory,\n    inventory_source,\n    source_project,\n    job_template: jobTemplate,\n    workflow_job_template: workflowJobTemplate,\n    labels,\n    project,\n    project_update: projectUpdate,\n    source_workflow_job,\n    execution_environment: executionEnvironment,\n  } = job.summary_fields;\n  const { scm_branch: scmBranch } = job;\n  const [errorMsg, setErrorMsg] = useState();\n  const history = useHistory();\n\n  const jobTypes = {\n    project_update: t`Source Control Update`,\n    inventory_update: t`Inventory Sync`,\n    job: job.job_type === 'check' ? t`Playbook Check` : t`Playbook Run`,\n    ad_hoc_command: t`Run Command`,\n    system_job: t`Management Job`,\n    workflow_job: t`Workflow Job`,\n  };\n\n  const scmTypes = {\n    '': t`Manual`,\n    git: t`Git`,\n    svn: t`Subversion`,\n    insights: t`Red Hat Insights`,\n    archive: t`Remote Archive`,\n  };\n\n  const deleteJob = async () => {\n    try {\n      await getJobModel(job.type).destroy(job.id);\n      history.push('/jobs');\n    } catch (err) {\n      setErrorMsg(err);\n    }\n  };\n\n  const buildInstanceGroupLink = (item) => (\n    <Link to={`/instance_groups/${item.id}`}>{item.name}</Link>\n  );\n\n  const buildContainerGroupLink = (item) => (\n    <Link to={`/instance_groups/container_group/${item.id}`}>{item.name}</Link>\n  );\n\n  const renderInventoryDetail = () => {\n    if (\n      job.type !== 'project_update' &&\n      job.type !== 'system_job' &&\n      job.type !== 'workflow_job'\n    ) {\n      return inventory ? (\n        <Detail\n          dataCy=\"job-inventory\"\n          label={t`Inventory`}\n          helpText={jobHelpText.inventory}\n          value={\n            <Link\n              to={\n                inventory.kind === 'smart'\n                  ? `/inventories/smart_inventory/${inventory.id}`\n                  : `/inventories/inventory/${inventory.id}`\n              }\n            >\n              {inventory.name}\n            </Link>\n          }\n        />\n      ) : (\n        <DeletedDetail label={t`Inventory`} helpText={jobHelpText.inventory} />\n      );\n    }\n    if (job.type === 'workflow_job') {\n      return inventory ? (\n        <Detail\n          dataCy=\"job-inventory\"\n          label={t`Inventory`}\n          helpText={jobHelpText.inventory}\n          value={\n            <Link\n              to={\n                inventory.kind === 'smart'\n                  ? `/inventories/smart_inventory/${inventory.id}`\n                  : `/inventories/inventory/${inventory.id}`\n              }\n            >\n              {inventory.name}\n            </Link>\n          }\n        />\n      ) : null;\n    }\n    return null;\n  };\n\n  const renderProjectDetail = () => {\n    if (\n      job.type !== 'ad_hoc_command' &&\n      job.type !== 'inventory_update' &&\n      job.type !== 'system_job' &&\n      job.type !== 'workflow_job'\n    ) {\n      return project ? (\n        <>\n          <Detail\n            dataCy=\"job-project\"\n            label={t`Project`}\n            helpText={jobHelpText.project}\n            value={<Link to={`/projects/${project.id}`}>{project.name}</Link>}\n          />\n          <Detail\n            dataCy=\"job-project-status\"\n            label={t`Project Update Status`}\n            helpText={jobHelpText.projectUpdate}\n            value={\n              projectUpdate ? (\n                <Link to={`/jobs/project/${projectUpdate.id}`}>\n                  <StatusLabel status={projectUpdate.status} />\n                </Link>\n              ) : null\n            }\n          />\n        </>\n      ) : (\n        <DeletedDetail label={t`Project`} />\n      );\n    }\n    return null;\n  };\n  return (\n    <CardBody>\n      <DetailList>\n        <Detail dataCy=\"job-id\" label={t`Job ID`} value={job.id} />\n        <Detail\n          dataCy=\"job-status\"\n          fullWidth={Boolean(job.job_explanation)}\n          label={t`Status`}\n          value={\n            <StatusDetailValue>\n              {job.status && <StatusLabel status={job.status} />}\n              {job.job_explanation && job.job_explanation !== job.status\n                ? job.job_explanation\n                : null}\n            </StatusDetailValue>\n          }\n        />\n        <Detail\n          dataCy=\"job-started-date\"\n          label={t`Started`}\n          value={formatDateString(job.started)}\n        />\n        {job?.finished && (\n          <Detail\n            dataCy=\"job-finished-date\"\n            label={t`Finished`}\n            value={formatDateString(job.finished)}\n          />\n        )}\n        {jobTemplate && (\n          <Detail\n            dataCy=\"job-template\"\n            label={t`Job Template`}\n            value={\n              <Link to={`/templates/job_template/${jobTemplate.id}`}>\n                {jobTemplate.name}\n              </Link>\n            }\n          />\n        )}\n        {workflowJobTemplate && (\n          <Detail\n            dataCy=\"workflow-job-template\"\n            label={t`Workflow Job Template`}\n            value={\n              <Link\n                to={`/templates/workflow_job_template/${workflowJobTemplate.id}`}\n              >\n                {workflowJobTemplate.name}\n              </Link>\n            }\n          />\n        )}\n        {source_workflow_job && (\n          <Detail\n            dataCy=\"source-workflow-job\"\n            label={t`Source Workflow Job`}\n            value={\n              <Link to={`/jobs/workflow/${source_workflow_job.id}`}>\n                {source_workflow_job.id} - {source_workflow_job.name}\n              </Link>\n            }\n          />\n        )}\n        <Detail\n          dataCy=\"job-type\"\n          label={t`Job Type`}\n          helpText={jobHelpText.jobType}\n          value={jobTypes[job.type]}\n        />\n        <Detail\n          dataCy=\"source-control-type\"\n          label={t`Source Control Type`}\n          value={scmTypes[job.scm_type]}\n        />\n        <LaunchedByDetail dataCy=\"job-launched-by\" job={job} />\n        {renderInventoryDetail()}\n        {inventory_source && (\n          <>\n            <Detail\n              dataCy=\"job-inventory-source\"\n              label={t`Inventory Source`}\n              value={\n                <Link\n                  to={`/inventories/inventory/${inventory.id}/sources/${inventory_source.id}`}\n                >\n                  {inventory_source.name}\n                </Link>\n              }\n            />\n            <Detail\n              dataCy=\"job-inventory-source-type\"\n              label={t`Source`}\n              value={inventorySourceLabels.map(([string, label]) =>\n                string === job.source ? label : null\n              )}\n              isEmpty={inventorySourceLabels.length === 0}\n            />\n          </>\n        )}\n        {inventory_source && inventory_source.source === 'scm' && (\n          <Detail\n            dataCy=\"job-inventory-source-project\"\n            label={t`Inventory Source Project`}\n            value={\n              <StatusDetailValue>\n                {source_project.status && (\n                  <StatusLabel status={source_project.status} />\n                )}\n                <Link to={`/projects/${source_project.id}`}>\n                  {source_project.name}\n                </Link>\n              </StatusDetailValue>\n            }\n          />\n        )}\n        {renderProjectDetail()}\n        {scmBranch && (\n          <Detail\n            dataCy=\"source-control-branch\"\n            label={t`Source Control Branch`}\n            helpText={jobHelpText.sourceControlBranch}\n            value={scmBranch}\n          />\n        )}\n        <Detail\n          dataCy=\"job-scm-revision\"\n          label={t`Revision`}\n          value={job.scm_revision}\n        />\n        <Detail\n          dataCy=\"job-playbook\"\n          label={t`Playbook`}\n          helpText={jobHelpText.playbook}\n          value={job.playbook}\n        />\n        <Detail\n          dataCy=\"job-limit\"\n          label={t`Limit`}\n          helpText={jobHelpText.limit}\n          value={job.limit}\n        />\n        <Detail\n          dataCy=\"job-verbosity\"\n          label={t`Verbosity`}\n          helpText={jobHelpText.verbosity}\n          value={VERBOSITY()[job.verbosity]}\n        />\n        {job.type !== 'workflow_job' && !isJobRunning(job.status) && (\n          <ExecutionEnvironmentDetail\n            dataCy=\"job-execution-environment\"\n            executionEnvironment={executionEnvironment}\n            helpText={jobHelpText.executionEnvironment}\n            verifyMissingVirtualEnv={false}\n          />\n        )}\n        <Detail\n          dataCy=\"job-execution-node\"\n          label={t`Execution Node`}\n          value={job.execution_node}\n        />\n        {job?.controller_node ? (\n          <Detail\n            dataCy=\"job-controller-node\"\n            label={t`Controller Node`}\n            value={job.controller_node}\n          />\n        ) : null}\n        {instanceGroup && !instanceGroup?.is_container_group && (\n          <Detail\n            dataCy=\"job-instance-group\"\n            label={t`Instance Group`}\n            helpText={jobHelpText.instanceGroups}\n            value={buildInstanceGroupLink(instanceGroup)}\n          />\n        )}\n        {instanceGroup && instanceGroup?.is_container_group && (\n          <Detail\n            dataCy=\"job-container-group\"\n            label={t`Container Group`}\n            value={buildContainerGroupLink(instanceGroup)}\n          />\n        )}\n        {typeof job.job_slice_number === 'number' &&\n          typeof job.job_slice_count === 'number' && (\n            <Detail\n              dataCy=\"job-slice\"\n              label={t`Job Slice`}\n              helpText={jobHelpText.jobSlicing}\n              value={`${job.job_slice_number}/${job.job_slice_count}`}\n            />\n          )}\n        {job.type === 'workflow_job' && job.is_sliced_job && (\n          <Detail\n            dataCy=\"job-slice-parent\"\n            label={t`Job Slice Parent`}\n            value={t`True`}\n          />\n        )}\n        {typeof job.forks === 'number' && (\n          <Detail\n            dataCy=\"forks\"\n            label={t`Forks`}\n            value={`${job.forks}`}\n            helpText={jobHelpText.forks}\n          />\n        )}\n        {credential && (\n          <Detail\n            dataCy=\"job-machine-credential\"\n            label={t`Machine Credential`}\n            value={\n              <ChipGroup\n                numChips={5}\n                totalChips={1}\n                ouiaId=\"job-machine-credential-chips\"\n              >\n                <CredentialChip\n                  key={credential.id}\n                  credential={credential}\n                  isReadOnly\n                  ouiaId={`job-machine-credential-${credential.id}-chip`}\n                />\n              </ChipGroup>\n            }\n          />\n        )}\n        {credentials && (\n          <Detail\n            dataCy=\"job-credentials\"\n            fullWidth\n            helpText={jobHelpText.credentials}\n            label={t`Credentials`}\n            value={\n              <ChipGroup\n                numChips={5}\n                totalChips={credentials.length}\n                ouiaId=\"job-credential-chips\"\n              >\n                {credentials.map((c) => (\n                  <CredentialChip\n                    key={c.id}\n                    credential={c}\n                    isReadOnly\n                    ouiaId={`job-credential-${c.id}-chip`}\n                  />\n                ))}\n              </ChipGroup>\n            }\n            isEmpty={credentials.length === 0}\n          />\n        )}\n        {labels && labels.count > 0 && (\n          <Detail\n            dataCy=\"job-labels\"\n            fullWidth\n            label={t`Labels`}\n            helpText={jobHelpText.labels}\n            value={\n              <ChipGroup\n                numChips={5}\n                totalChips={labels.results.length}\n                ouiaId=\"job-label-chips\"\n              >\n                {labels.results.map((l) => (\n                  <Chip key={l.id} isReadOnly ouiaId={`job-label-${l.id}-chip`}>\n                    {l.name}\n                  </Chip>\n                ))}\n              </ChipGroup>\n            }\n          />\n        )}\n        {job.job_tags && (\n          <Detail\n            dataCy=\"job-tags\"\n            fullWidth\n            label={t`Job Tags`}\n            helpText={jobHelpText.jobTags}\n            value={\n              <ChipGroup\n                numChips={5}\n                totalChips={job.job_tags.split(',').length}\n                ouiaId=\"job-tag-chips\"\n              >\n                {job.job_tags.split(',').map((jobTag) => (\n                  <Chip\n                    key={jobTag}\n                    isReadOnly\n                    ouiaId={`job-tag-${jobTag}-chip`}\n                  >\n                    {jobTag}\n                  </Chip>\n                ))}\n              </ChipGroup>\n            }\n            isEmpty={job.job_tags.length === 0}\n          />\n        )}\n        {job.skip_tags && (\n          <Detail\n            dataCy=\"job-skip-tags\"\n            fullWidth\n            label={t`Skip Tags`}\n            helpText={jobHelpText.skipTags}\n            value={\n              <ChipGroup\n                numChips={5}\n                totalChips={job.skip_tags.split(',').length}\n                ouiaId=\"job-skip-tag-chips\"\n              >\n                {job.skip_tags.split(',').map((skipTag) => (\n                  <Chip\n                    key={skipTag}\n                    isReadOnly\n                    ouiaId={`job-skip-tag-${skipTag}-chip`}\n                  >\n                    {skipTag}\n                  </Chip>\n                ))}\n              </ChipGroup>\n            }\n            isEmpty={job.skip_tags.length === 0}\n          />\n        )}\n        <Detail\n          dataCy=\"job-module-name\"\n          label={t`Module Name`}\n          value={job.module_name}\n          helpText={jobHelpText.module(job.module_name)}\n        />\n        <Detail\n          dataCy=\"job-module-arguments\"\n          label={t`Module Arguments`}\n          value={job.module_args}\n        />\n        <UserDateDetail\n          label={t`Created`}\n          date={job.created}\n          user={created_by}\n        />\n        <UserDateDetail label={t`Last Modified`} date={job.modified} />\n        {job.extra_vars && (\n          <VariablesDetail\n            css=\"margin: 20px 0\"\n            id=\"job-variables\"\n            readOnly\n            value={job.extra_vars}\n            rows={4}\n            label={t`Variables`}\n            name=\"extra_vars\"\n            dataCy=\"job-detail-extra-variables\"\n            helpText={jobHelpText.variables}\n          />\n        )}\n        {job.artifacts && (\n          <VariablesDetail\n            css=\"margin: 20px 0\"\n            id=\"job-artifacts\"\n            readOnly\n            value={JSON.stringify(job.artifacts)}\n            rows={4}\n            label={t`Artifacts`}\n            name=\"artifacts\"\n            dataCy=\"job-detail-artifacts\"\n          />\n        )}\n      </DetailList>\n      <CardActionsRow>\n        {job.type !== 'system_job' &&\n          job.summary_fields.user_capabilities.start &&\n          (job.status === 'failed' && job.type === 'job' ? (\n            <LaunchButton resource={job}>\n              {({ handleRelaunch, isLaunching }) => (\n                <ReLaunchDropDown\n                  ouiaId=\"job-detail-relaunch-dropdown\"\n                  isPrimary\n                  handleRelaunch={handleRelaunch}\n                  isLaunching={isLaunching}\n                />\n              )}\n            </LaunchButton>\n          ) : (\n            <LaunchButton resource={job} aria-label={t`Relaunch`}>\n              {({ handleRelaunch, isLaunching }) => (\n                <Button\n                  ouiaId=\"job-detail-relaunch-button\"\n                  type=\"submit\"\n                  onClick={() => handleRelaunch()}\n                  isDisabled={isLaunching}\n                >\n                  {t`Relaunch`}\n                </Button>\n              )}\n            </LaunchButton>\n          ))}\n        {isJobRunning(job.status) &&\n          (job.type === 'system_job'\n            ? me.is_superuser\n            : job?.summary_fields?.user_capabilities?.start) && (\n            <JobCancelButton\n              job={job}\n              errorTitle={t`Job Cancel Error`}\n              title={t`Cancel ${job.name}`}\n              errorMessage={t`Failed to cancel ${job.name}`}\n            />\n          )}\n        {!isJobRunning(job.status) &&\n          job?.summary_fields?.user_capabilities?.delete && (\n            <DeleteButton\n              name={job.name}\n              modalTitle={t`Delete Job`}\n              onConfirm={deleteJob}\n              ouiaId=\"job-detail-delete-button\"\n            >\n              {t`Delete`}\n            </DeleteButton>\n          )}\n      </CardActionsRow>\n      {errorMsg && (\n        <AlertModal\n          isOpen={errorMsg}\n          variant=\"error\"\n          onClose={() => setErrorMsg()}\n          title={t`Job Delete Error`}\n        >\n          <ErrorDetail error={errorMsg} />\n        </AlertModal>\n      )}\n    </CardBody>\n  );\n}\nJobDetail.propTypes = {\n  job: Job.isRequired,\n};\n\nexport default JobDetail;\n"]},"metadata":{},"sourceType":"module"}