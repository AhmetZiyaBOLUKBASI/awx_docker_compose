{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Trans}from\"@lingui/react\";import{i18n}from\"@lingui/core\";import React,{useEffect}from'react';import{useField}from'formik';import{Button,Flex,FormGroup}from'@patternfly/react-core';import getDocsBaseUrl from'util/getDocsBaseUrl';import{required}from'util/validators';import FormField,{CheckboxField,PasswordField}from'components/FormField';import{useConfig}from'contexts/Config';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ANALYTICSLINK='https://www.ansible.com/products/automation-analytics';function AnalyticsStep(){var config=useConfig();var _useField=useField('manifest_file'),_useField2=_slicedToArray(_useField,1),manifest=_useField2[0];var _useField3=useField('insights'),_useField4=_slicedToArray(_useField3,1),insights=_useField4[0];var _useField5=useField('username'),_useField6=_slicedToArray(_useField5,3),usernameHelpers=_useField6[2];var _useField7=useField('password'),_useField8=_slicedToArray(_useField7,3),passwordHelpers=_useField8[2];var requireCredentialFields=manifest.value&&insights.value;useEffect(function(){if(!requireCredentialFields){usernameHelpers.setValue('');passwordHelpers.setValue('');}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[requireCredentialFields]);return/*#__PURE__*/_jsxs(Flex,{spaceItems:{default:'spaceItemsMd'},direction:{default:'column'},children:[/*#__PURE__*/_jsx(Trans,{id:\"User and Automation Analytics\"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Trans,{id:\"By default, we collect and transmit analytics data on the service usage to Red Hat. There are two categories of data collected by the service. For more information, see <0>this Tower documentation page</0>. Uncheck the following boxes to disable this feature.\",components:{0:/*#__PURE__*/_jsx(Button,{component:\"a\",href:\"\".concat(getDocsBaseUrl(config),\"/html/installandreference/user-data.html#index-0\"),variant:\"link\",isInline:true,ouiaId:\"tower-documentation-link\",target:\"_blank\"})}})}),/*#__PURE__*/_jsx(FormGroup,{fieldId:\"pendo\",children:/*#__PURE__*/_jsx(CheckboxField,{name:\"pendo\",isDisabled:!config.me.is_superuser,\"aria-label\":/*i18n*/i18n._(\"User analytics\"),label:/*i18n*/i18n._(\"User analytics\"),id:\"pendo-field\",description:/*i18n*/i18n._(\"This data is used to enhance\\nfuture releases of the Tower Software and help\\nstreamline customer experience and success.\")})}),/*#__PURE__*/_jsx(FormGroup,{fieldId:\"insights\",children:/*#__PURE__*/_jsx(CheckboxField,{name:\"insights\",isDisabled:!config.me.is_superuser,\"aria-label\":/*i18n*/i18n._(\"Automation Analytics\"),label:/*i18n*/i18n._(\"Automation Analytics\"),id:\"insights-field\",description:/*i18n*/i18n._(\"This data is used to enhance\\nfuture releases of the Software and to provide\\nAutomation Analytics.\")})}),requireCredentialFields&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Trans,{id:\"Provide your Red Hat or Red Hat Satellite credentials to enable Automation Analytics.\"})}),/*#__PURE__*/_jsx(FormField,{id:\"username-field\",isDisabled:!config.me.is_superuser,isRequired:requireCredentialFields,label:/*i18n*/i18n._(\"Username\"),name:\"username\",type:\"text\",validate:required(null)}),/*#__PURE__*/_jsx(PasswordField,{id:\"password-field\",isDisabled:!config.me.is_superuser,isRequired:requireCredentialFields,label:/*i18n*/i18n._(\"Password\"),name:\"password\",validate:required(null)})]}),/*#__PURE__*/_jsxs(Flex,{alignItems:{default:'alignItemsCenter'},children:[/*#__PURE__*/_jsx(\"img\",{width:\"300\",src:\"static/media/insights-analytics-dashboard.jpeg\",alt:/*i18n*/i18n._(\"Automation Analytics dashboard\")}),/*#__PURE__*/_jsx(Button,{component:\"a\",href:ANALYTICSLINK,target:\"_blank\",variant:\"secondary\",ouiaId:\"analytics-link\",children:/*#__PURE__*/_jsx(Trans,{id:\"Learn more about Automation Analytics\"})})]})]});}export default AnalyticsStep;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/Setting/Subscription/SubscriptionEdit/AnalyticsStep.js"],"names":["React","useEffect","useField","Button","Flex","FormGroup","getDocsBaseUrl","required","FormField","CheckboxField","PasswordField","useConfig","ANALYTICSLINK","AnalyticsStep","config","manifest","insights","usernameHelpers","passwordHelpers","requireCredentialFields","value","setValue","default","me","is_superuser"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\n\nimport { Trans, t } from '@lingui/macro';\nimport { useField } from 'formik';\nimport { Button, Flex, FormGroup } from '@patternfly/react-core';\nimport getDocsBaseUrl from 'util/getDocsBaseUrl';\nimport { required } from 'util/validators';\nimport FormField, { CheckboxField, PasswordField } from 'components/FormField';\nimport { useConfig } from 'contexts/Config';\n\nconst ANALYTICSLINK = 'https://www.ansible.com/products/automation-analytics';\n\nfunction AnalyticsStep() {\n  const config = useConfig();\n  const [manifest] = useField('manifest_file');\n  const [insights] = useField('insights');\n  const [, , usernameHelpers] = useField('username');\n  const [, , passwordHelpers] = useField('password');\n  const requireCredentialFields = manifest.value && insights.value;\n\n  useEffect(() => {\n    if (!requireCredentialFields) {\n      usernameHelpers.setValue('');\n      passwordHelpers.setValue('');\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [requireCredentialFields]);\n\n  return (\n    <Flex\n      spaceItems={{ default: 'spaceItemsMd' }}\n      direction={{ default: 'column' }}\n    >\n      <Trans>User and Automation Analytics</Trans>\n      <p>\n        <Trans>\n          By default, we collect and transmit analytics data on the service\n          usage to Red Hat. There are two categories of data collected by the\n          service. For more information, see{' '}\n          <Button\n            component=\"a\"\n            href={`${getDocsBaseUrl(\n              config\n            )}/html/installandreference/user-data.html#index-0`}\n            variant=\"link\"\n            isInline\n            ouiaId=\"tower-documentation-link\"\n            target=\"_blank\"\n          >\n            this Tower documentation page\n          </Button>\n          . Uncheck the following boxes to disable this feature.\n        </Trans>\n      </p>\n      <FormGroup fieldId=\"pendo\">\n        <CheckboxField\n          name=\"pendo\"\n          isDisabled={!config.me.is_superuser}\n          aria-label={t`User analytics`}\n          label={t`User analytics`}\n          id=\"pendo-field\"\n          description={t`This data is used to enhance\n                   future releases of the Tower Software and help\n                   streamline customer experience and success.`}\n        />\n      </FormGroup>\n      <FormGroup fieldId=\"insights\">\n        <CheckboxField\n          name=\"insights\"\n          isDisabled={!config.me.is_superuser}\n          aria-label={t`Automation Analytics`}\n          label={t`Automation Analytics`}\n          id=\"insights-field\"\n          description={t`This data is used to enhance\n                   future releases of the Software and to provide\n                   Automation Analytics.`}\n        />\n      </FormGroup>\n      {requireCredentialFields && (\n        <>\n          <br />\n          <p>\n            <Trans>\n              Provide your Red Hat or Red Hat Satellite credentials to enable\n              Automation Analytics.\n            </Trans>\n          </p>\n          <FormField\n            id=\"username-field\"\n            isDisabled={!config.me.is_superuser}\n            isRequired={requireCredentialFields}\n            label={t`Username`}\n            name=\"username\"\n            type=\"text\"\n            validate={required(null)}\n          />\n          <PasswordField\n            id=\"password-field\"\n            isDisabled={!config.me.is_superuser}\n            isRequired={requireCredentialFields}\n            label={t`Password`}\n            name=\"password\"\n            validate={required(null)}\n          />\n        </>\n      )}\n      <Flex alignItems={{ default: 'alignItemsCenter' }}>\n        <img\n          width=\"300\"\n          src=\"static/media/insights-analytics-dashboard.jpeg\"\n          alt={t`Automation Analytics dashboard`}\n        />\n        <Button\n          component=\"a\"\n          href={ANALYTICSLINK}\n          target=\"_blank\"\n          variant=\"secondary\"\n          ouiaId=\"analytics-link\"\n        >\n          <Trans>Learn more about Automation Analytics</Trans>\n        </Button>\n      </Flex>\n    </Flex>\n  );\n}\nexport default AnalyticsStep;\n"]},"metadata":{},"sourceType":"module"}