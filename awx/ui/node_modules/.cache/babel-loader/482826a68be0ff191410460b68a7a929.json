{"ast":null,"code":"import _taggedTemplateLiteral from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import{Trans}from\"@lingui/react\";import{i18n}from\"@lingui/core\";import React from'react';import{Link}from'react-router-dom';import styled from'styled-components';import{Button,HelperText as PFHelperText,HelperTextItem,Label}from'@patternfly/react-core';import{CaretLeftIcon,CheckIcon,ExclamationCircleIcon}from'@patternfly/react-icons';import RoutedTabs from'components/RoutedTabs';import{CardBody,CardActionsRow}from'components/Card';import{DetailList,Detail}from'components/DetailList';import{useConfig}from'contexts/Config';import{formatDateString,secondsToDays}from'util/dates';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var HelperText=styled(PFHelperText)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  margin-top: 10px;\\n\"])));function SubscriptionDetail(){var _useConfig=useConfig(),_useConfig$me=_useConfig.me,me=_useConfig$me===void 0?{}:_useConfig$me,license_info=_useConfig.license_info,version=_useConfig.version;var baseURL='/settings/subscription';var tabsArray=[{name:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CaretLeftIcon,{}),/*i18n*/i18n._(\"Back to Settings\")]}),link:'/settings',id:99},{name:/*i18n*/i18n._(\"Subscription Details\"),link:\"\".concat(baseURL,\"/details\"),id:0}];var automatedInstancesCount=license_info.automated_instances,automated_since=license_info.automated_since;var automatedInstancesSinceDateTime=automated_since?formatDateString(new Date(automated_since*1000).toISOString()):null;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(RoutedTabs,{tabsArray:tabsArray}),/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsxs(DetailList,{children:[/*#__PURE__*/_jsx(Detail,{dataCy:\"subscription-status\",label:/*i18n*/i18n._(\"Status\"),value:license_info.compliant?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Label,{variant:\"outline\",color:\"green\",icon:/*#__PURE__*/_jsx(CheckIcon,{}),children:/*i18n*/i18n._(\"Compliant\")}),/*#__PURE__*/_jsx(HelperText,{children:/*#__PURE__*/_jsx(HelperTextItem,{children:/*i18n*/i18n._(\"The number of hosts you have automated against is below your subscription count.\")})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Label,{variant:\"outline\",color:\"red\",icon:/*#__PURE__*/_jsx(ExclamationCircleIcon,{}),children:/*i18n*/i18n._(\"Out of compliance\")}),/*#__PURE__*/_jsx(HelperText,{children:/*#__PURE__*/_jsx(HelperTextItem,{children:/*i18n*/i18n._(\"You have automated against more hosts than your subscription allows.\")})})]})}),typeof automatedInstancesCount!=='undefined'&&automatedInstancesCount!==null&&/*#__PURE__*/_jsx(Detail,{dataCy:\"subscription-hosts-automated\",label:/*i18n*/i18n._(\"Hosts automated\"),value:automated_since?/*#__PURE__*/_jsx(Trans,{id:\"{automatedInstancesCount} since {automatedInstancesSinceDateTime}\",values:{automatedInstancesCount:automatedInstancesCount,automatedInstancesSinceDateTime:automatedInstancesSinceDateTime}}):automatedInstancesCount}),/*#__PURE__*/_jsx(Detail,{dataCy:\"subscription-hosts-imported\",label:/*i18n*/i18n._(\"Hosts imported\"),value:license_info.current_instances}),/*#__PURE__*/_jsx(Detail,{dataCy:\"subscription-hosts-remaining\",label:/*i18n*/i18n._(\"Hosts remaining\"),value:license_info.free_instances}),license_info.instance_count<9999999&&/*#__PURE__*/_jsx(Detail,{dataCy:\"subscription-hosts-available\",label:/*i18n*/i18n._(\"Hosts available\"),value:license_info.available_instances}),license_info.instance_count>=9999999&&/*#__PURE__*/_jsx(Detail,{dataCy:\"subscription-unlimited-hosts-available\",label:/*i18n*/i18n._(\"Hosts available\"),value:/*i18n*/i18n._(\"Unlimited\")}),/*#__PURE__*/_jsx(Detail,{dataCy:\"subscription-type\",label:/*i18n*/i18n._(\"Subscription type\"),value:license_info.license_type}),/*#__PURE__*/_jsx(Detail,{dataCy:\"subscription-name\",label:/*i18n*/i18n._(\"Subscription\"),value:license_info.subscription_name}),/*#__PURE__*/_jsx(Detail,{dataCy:\"subscription-trial\",label:/*i18n*/i18n._(\"Trial\"),value:license_info.trial?/*i18n*/i18n._(\"True\"):/*i18n*/i18n._(\"False\")}),/*#__PURE__*/_jsx(Detail,{dataCy:\"subscription-expires-on-date\",label:/*i18n*/i18n._(\"Expires on\"),value:license_info.license_date&&formatDateString(new Date(license_info.license_date*1000).toISOString())}),/*#__PURE__*/_jsx(Detail,{dataCy:\"subscription-expires-on-utc-date\",label:/*i18n*/i18n._(\"Expires on UTC\"),value:license_info.license_date&&formatDateString(new Date(license_info.license_date*1000).toISOString(),'UTC')}),/*#__PURE__*/_jsx(Detail,{dataCy:\"subscription-days-remaining\",label:/*i18n*/i18n._(\"Days remaining\"),value:license_info.time_remaining&&secondsToDays(license_info.time_remaining)}),/*#__PURE__*/_jsx(Detail,{dataCy:\"subscription-version\",label:/*i18n*/i18n._(\"Automation controller version\"),value:version})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Trans,{id:\"If you are ready to upgrade or renew, please <0>contact us.</0>\",components:{0:/*#__PURE__*/_jsx(Button,{component:\"a\",href:\"https://www.redhat.com/contact\",variant:\"link\",target:\"_blank\",isInline:true})}}),me.is_superuser&&/*#__PURE__*/_jsx(CardActionsRow,{children:/*#__PURE__*/_jsx(Button,{\"aria-label\":/*i18n*/i18n._(\"edit\"),component:Link,to:\"/settings/subscription/edit\",children:/*#__PURE__*/_jsx(Trans,{id:\"Edit\"})})})]})]});}export default SubscriptionDetail;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/Setting/Subscription/SubscriptionDetail/SubscriptionDetail.js"],"names":["React","Link","styled","Button","HelperText","PFHelperText","HelperTextItem","Label","CaretLeftIcon","CheckIcon","ExclamationCircleIcon","RoutedTabs","CardBody","CardActionsRow","DetailList","Detail","useConfig","formatDateString","secondsToDays","SubscriptionDetail","me","license_info","version","baseURL","tabsArray","name","link","id","automatedInstancesCount","automated_instances","automated_since","automatedInstancesSinceDateTime","Date","toISOString","compliant","current_instances","free_instances","instance_count","available_instances","license_type","subscription_name","trial","license_date","time_remaining","is_superuser"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { t, Trans } from '@lingui/macro';\nimport styled from 'styled-components';\nimport {\n  Button,\n  HelperText as PFHelperText,\n  HelperTextItem,\n  Label,\n} from '@patternfly/react-core';\nimport {\n  CaretLeftIcon,\n  CheckIcon,\n  ExclamationCircleIcon,\n} from '@patternfly/react-icons';\nimport RoutedTabs from 'components/RoutedTabs';\nimport { CardBody, CardActionsRow } from 'components/Card';\nimport { DetailList, Detail } from 'components/DetailList';\nimport { useConfig } from 'contexts/Config';\nimport { formatDateString, secondsToDays } from 'util/dates';\n\nconst HelperText = styled(PFHelperText)`\n  margin-top: 10px;\n`;\n\nfunction SubscriptionDetail() {\n  const { me = {}, license_info, version } = useConfig();\n  const baseURL = '/settings/subscription';\n  const tabsArray = [\n    {\n      name: (\n        <>\n          <CaretLeftIcon />\n          {t`Back to Settings`}\n        </>\n      ),\n      link: '/settings',\n      id: 99,\n    },\n    {\n      name: t`Subscription Details`,\n      link: `${baseURL}/details`,\n      id: 0,\n    },\n  ];\n\n  const { automated_instances: automatedInstancesCount, automated_since } =\n    license_info;\n\n  const automatedInstancesSinceDateTime = automated_since\n    ? formatDateString(new Date(automated_since * 1000).toISOString())\n    : null;\n\n  return (\n    <>\n      <RoutedTabs tabsArray={tabsArray} />\n      <CardBody>\n        <DetailList>\n          <Detail\n            dataCy=\"subscription-status\"\n            label={t`Status`}\n            value={\n              license_info.compliant ? (\n                <>\n                  <Label variant=\"outline\" color=\"green\" icon={<CheckIcon />}>\n                    {t`Compliant`}\n                  </Label>\n                  <HelperText>\n                    <HelperTextItem>{t`The number of hosts you have automated against is below your subscription count.`}</HelperTextItem>\n                  </HelperText>\n                </>\n              ) : (\n                <>\n                  <Label\n                    variant=\"outline\"\n                    color=\"red\"\n                    icon={<ExclamationCircleIcon />}\n                  >\n                    {t`Out of compliance`}\n                  </Label>\n                  <HelperText>\n                    <HelperTextItem>{t`You have automated against more hosts than your subscription allows.`}</HelperTextItem>\n                  </HelperText>\n                </>\n              )\n            }\n          />\n          {typeof automatedInstancesCount !== 'undefined' &&\n            automatedInstancesCount !== null && (\n              <Detail\n                dataCy=\"subscription-hosts-automated\"\n                label={t`Hosts automated`}\n                value={\n                  automated_since ? (\n                    <Trans>\n                      {automatedInstancesCount} since{' '}\n                      {automatedInstancesSinceDateTime}\n                    </Trans>\n                  ) : (\n                    automatedInstancesCount\n                  )\n                }\n              />\n            )}\n          <Detail\n            dataCy=\"subscription-hosts-imported\"\n            label={t`Hosts imported`}\n            value={license_info.current_instances}\n          />\n          <Detail\n            dataCy=\"subscription-hosts-remaining\"\n            label={t`Hosts remaining`}\n            value={license_info.free_instances}\n          />\n          {license_info.instance_count < 9999999 && (\n            <Detail\n              dataCy=\"subscription-hosts-available\"\n              label={t`Hosts available`}\n              value={license_info.available_instances}\n            />\n          )}\n          {license_info.instance_count >= 9999999 && (\n            <Detail\n              dataCy=\"subscription-unlimited-hosts-available\"\n              label={t`Hosts available`}\n              value={t`Unlimited`}\n            />\n          )}\n          <Detail\n            dataCy=\"subscription-type\"\n            label={t`Subscription type`}\n            value={license_info.license_type}\n          />\n          <Detail\n            dataCy=\"subscription-name\"\n            label={t`Subscription`}\n            value={license_info.subscription_name}\n          />\n          <Detail\n            dataCy=\"subscription-trial\"\n            label={t`Trial`}\n            value={license_info.trial ? t`True` : t`False`}\n          />\n          <Detail\n            dataCy=\"subscription-expires-on-date\"\n            label={t`Expires on`}\n            value={\n              license_info.license_date &&\n              formatDateString(\n                new Date(license_info.license_date * 1000).toISOString()\n              )\n            }\n          />\n          <Detail\n            dataCy=\"subscription-expires-on-utc-date\"\n            label={t`Expires on UTC`}\n            value={\n              license_info.license_date &&\n              formatDateString(\n                new Date(license_info.license_date * 1000).toISOString(),\n                'UTC'\n              )\n            }\n          />\n          <Detail\n            dataCy=\"subscription-days-remaining\"\n            label={t`Days remaining`}\n            value={\n              license_info.time_remaining &&\n              secondsToDays(license_info.time_remaining)\n            }\n          />\n          <Detail\n            dataCy=\"subscription-version\"\n            label={t`Automation controller version`}\n            value={version}\n          />\n        </DetailList>\n        <br />\n        <Trans>\n          If you are ready to upgrade or renew, please{' '}\n          <Button\n            component=\"a\"\n            href=\"https://www.redhat.com/contact\"\n            variant=\"link\"\n            target=\"_blank\"\n            isInline\n          >\n            contact us.\n          </Button>\n        </Trans>\n        {me.is_superuser && (\n          <CardActionsRow>\n            <Button\n              aria-label={t`edit`}\n              component={Link}\n              to=\"/settings/subscription/edit\"\n            >\n              <Trans>Edit</Trans>\n            </Button>\n          </CardActionsRow>\n        )}\n      </CardBody>\n    </>\n  );\n}\n\nexport default SubscriptionDetail;\n"]},"metadata":{},"sourceType":"module"}