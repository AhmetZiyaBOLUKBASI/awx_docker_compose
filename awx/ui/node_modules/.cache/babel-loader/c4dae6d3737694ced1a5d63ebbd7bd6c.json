{"ast":null,"code":"import _toConsumableArray from \"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { parseMillis, isUndefined, untruncateYear, signedOffset, hasOwnProperty } from \"./util.js\";\nimport Formatter from \"./formatter.js\";\nimport FixedOffsetZone from \"../zones/fixedOffsetZone.js\";\nimport IANAZone from \"../zones/IANAZone.js\";\nimport DateTime from \"../datetime.js\";\nimport { digitRegex, parseDigits } from \"./digits.js\";\nimport { ConflictingSpecificationError } from \"../errors.js\";\nvar MISSING_FTP = \"missing Intl.DateTimeFormat.formatToParts support\";\n\nfunction intUnit(regex) {\n  var post = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function (i) {\n    return i;\n  };\n  return {\n    regex: regex,\n    deser: function deser(_ref) {\n      var _ref2 = _slicedToArray(_ref, 1),\n          s = _ref2[0];\n\n      return post(parseDigits(s));\n    }\n  };\n}\n\nvar NBSP = String.fromCharCode(160);\nvar spaceOrNBSP = \"[ \".concat(NBSP, \"]\");\nvar spaceOrNBSPRegExp = new RegExp(spaceOrNBSP, \"g\");\n\nfunction fixListRegex(s) {\n  // make dots optional and also make them literal\n  // make space and non breakable space characters interchangeable\n  return s.replace(/\\./g, \"\\\\.?\").replace(spaceOrNBSPRegExp, spaceOrNBSP);\n}\n\nfunction stripInsensitivities(s) {\n  return s.replace(/\\./g, \"\") // ignore dots that were made optional\n  .replace(spaceOrNBSPRegExp, \" \") // interchange space and nbsp\n  .toLowerCase();\n}\n\nfunction oneOf(strings, startIndex) {\n  if (strings === null) {\n    return null;\n  } else {\n    return {\n      regex: RegExp(strings.map(fixListRegex).join(\"|\")),\n      deser: function deser(_ref3) {\n        var _ref4 = _slicedToArray(_ref3, 1),\n            s = _ref4[0];\n\n        return strings.findIndex(function (i) {\n          return stripInsensitivities(s) === stripInsensitivities(i);\n        }) + startIndex;\n      }\n    };\n  }\n}\n\nfunction offset(regex, groups) {\n  return {\n    regex: regex,\n    deser: function deser(_ref5) {\n      var _ref6 = _slicedToArray(_ref5, 3),\n          h = _ref6[1],\n          m = _ref6[2];\n\n      return signedOffset(h, m);\n    },\n    groups: groups\n  };\n}\n\nfunction simple(regex) {\n  return {\n    regex: regex,\n    deser: function deser(_ref7) {\n      var _ref8 = _slicedToArray(_ref7, 1),\n          s = _ref8[0];\n\n      return s;\n    }\n  };\n}\n\nfunction escapeToken(value) {\n  return value.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, \"\\\\$&\");\n}\n\nfunction unitForToken(token, loc) {\n  var one = digitRegex(loc),\n      two = digitRegex(loc, \"{2}\"),\n      three = digitRegex(loc, \"{3}\"),\n      four = digitRegex(loc, \"{4}\"),\n      six = digitRegex(loc, \"{6}\"),\n      oneOrTwo = digitRegex(loc, \"{1,2}\"),\n      oneToThree = digitRegex(loc, \"{1,3}\"),\n      oneToSix = digitRegex(loc, \"{1,6}\"),\n      oneToNine = digitRegex(loc, \"{1,9}\"),\n      twoToFour = digitRegex(loc, \"{2,4}\"),\n      fourToSix = digitRegex(loc, \"{4,6}\"),\n      literal = function literal(t) {\n    return {\n      regex: RegExp(escapeToken(t.val)),\n      deser: function deser(_ref9) {\n        var _ref10 = _slicedToArray(_ref9, 1),\n            s = _ref10[0];\n\n        return s;\n      },\n      literal: true\n    };\n  },\n      unitate = function unitate(t) {\n    if (token.literal) {\n      return literal(t);\n    }\n\n    switch (t.val) {\n      // era\n      case \"G\":\n        return oneOf(loc.eras(\"short\", false), 0);\n\n      case \"GG\":\n        return oneOf(loc.eras(\"long\", false), 0);\n      // years\n\n      case \"y\":\n        return intUnit(oneToSix);\n\n      case \"yy\":\n        return intUnit(twoToFour, untruncateYear);\n\n      case \"yyyy\":\n        return intUnit(four);\n\n      case \"yyyyy\":\n        return intUnit(fourToSix);\n\n      case \"yyyyyy\":\n        return intUnit(six);\n      // months\n\n      case \"M\":\n        return intUnit(oneOrTwo);\n\n      case \"MM\":\n        return intUnit(two);\n\n      case \"MMM\":\n        return oneOf(loc.months(\"short\", true, false), 1);\n\n      case \"MMMM\":\n        return oneOf(loc.months(\"long\", true, false), 1);\n\n      case \"L\":\n        return intUnit(oneOrTwo);\n\n      case \"LL\":\n        return intUnit(two);\n\n      case \"LLL\":\n        return oneOf(loc.months(\"short\", false, false), 1);\n\n      case \"LLLL\":\n        return oneOf(loc.months(\"long\", false, false), 1);\n      // dates\n\n      case \"d\":\n        return intUnit(oneOrTwo);\n\n      case \"dd\":\n        return intUnit(two);\n      // ordinals\n\n      case \"o\":\n        return intUnit(oneToThree);\n\n      case \"ooo\":\n        return intUnit(three);\n      // time\n\n      case \"HH\":\n        return intUnit(two);\n\n      case \"H\":\n        return intUnit(oneOrTwo);\n\n      case \"hh\":\n        return intUnit(two);\n\n      case \"h\":\n        return intUnit(oneOrTwo);\n\n      case \"mm\":\n        return intUnit(two);\n\n      case \"m\":\n        return intUnit(oneOrTwo);\n\n      case \"q\":\n        return intUnit(oneOrTwo);\n\n      case \"qq\":\n        return intUnit(two);\n\n      case \"s\":\n        return intUnit(oneOrTwo);\n\n      case \"ss\":\n        return intUnit(two);\n\n      case \"S\":\n        return intUnit(oneToThree);\n\n      case \"SSS\":\n        return intUnit(three);\n\n      case \"u\":\n        return simple(oneToNine);\n\n      case \"uu\":\n        return simple(oneOrTwo);\n\n      case \"uuu\":\n        return intUnit(one);\n      // meridiem\n\n      case \"a\":\n        return oneOf(loc.meridiems(), 0);\n      // weekYear (k)\n\n      case \"kkkk\":\n        return intUnit(four);\n\n      case \"kk\":\n        return intUnit(twoToFour, untruncateYear);\n      // weekNumber (W)\n\n      case \"W\":\n        return intUnit(oneOrTwo);\n\n      case \"WW\":\n        return intUnit(two);\n      // weekdays\n\n      case \"E\":\n      case \"c\":\n        return intUnit(one);\n\n      case \"EEE\":\n        return oneOf(loc.weekdays(\"short\", false, false), 1);\n\n      case \"EEEE\":\n        return oneOf(loc.weekdays(\"long\", false, false), 1);\n\n      case \"ccc\":\n        return oneOf(loc.weekdays(\"short\", true, false), 1);\n\n      case \"cccc\":\n        return oneOf(loc.weekdays(\"long\", true, false), 1);\n      // offset/zone\n\n      case \"Z\":\n      case \"ZZ\":\n        return offset(new RegExp(\"([+-]\".concat(oneOrTwo.source, \")(?::(\").concat(two.source, \"))?\")), 2);\n\n      case \"ZZZ\":\n        return offset(new RegExp(\"([+-]\".concat(oneOrTwo.source, \")(\").concat(two.source, \")?\")), 2);\n      // we don't support ZZZZ (PST) or ZZZZZ (Pacific Standard Time) in parsing\n      // because we don't have any way to figure out what they are\n\n      case \"z\":\n        return simple(/[a-z_+-/]{1,256}?/i);\n\n      default:\n        return literal(t);\n    }\n  };\n\n  var unit = unitate(token) || {\n    invalidReason: MISSING_FTP\n  };\n  unit.token = token;\n  return unit;\n}\n\nvar partTypeStyleToTokenVal = {\n  year: {\n    \"2-digit\": \"yy\",\n    numeric: \"yyyyy\"\n  },\n  month: {\n    numeric: \"M\",\n    \"2-digit\": \"MM\",\n    short: \"MMM\",\n    long: \"MMMM\"\n  },\n  day: {\n    numeric: \"d\",\n    \"2-digit\": \"dd\"\n  },\n  weekday: {\n    short: \"EEE\",\n    long: \"EEEE\"\n  },\n  dayperiod: \"a\",\n  dayPeriod: \"a\",\n  hour: {\n    numeric: \"h\",\n    \"2-digit\": \"hh\"\n  },\n  minute: {\n    numeric: \"m\",\n    \"2-digit\": \"mm\"\n  },\n  second: {\n    numeric: \"s\",\n    \"2-digit\": \"ss\"\n  },\n  timeZoneName: {\n    long: \"ZZZZZ\",\n    short: \"ZZZ\"\n  }\n};\n\nfunction tokenForPart(part, locale, formatOpts) {\n  var type = part.type,\n      value = part.value;\n\n  if (type === \"literal\") {\n    return {\n      literal: true,\n      val: value\n    };\n  }\n\n  var style = formatOpts[type];\n  var val = partTypeStyleToTokenVal[type];\n\n  if (typeof val === \"object\") {\n    val = val[style];\n  }\n\n  if (val) {\n    return {\n      literal: false,\n      val: val\n    };\n  }\n\n  return undefined;\n}\n\nfunction buildRegex(units) {\n  var re = units.map(function (u) {\n    return u.regex;\n  }).reduce(function (f, r) {\n    return \"\".concat(f, \"(\").concat(r.source, \")\");\n  }, \"\");\n  return [\"^\".concat(re, \"$\"), units];\n}\n\nfunction match(input, regex, handlers) {\n  var matches = input.match(regex);\n\n  if (matches) {\n    var all = {};\n    var matchIndex = 1;\n\n    for (var i in handlers) {\n      if (hasOwnProperty(handlers, i)) {\n        var h = handlers[i],\n            groups = h.groups ? h.groups + 1 : 1;\n\n        if (!h.literal && h.token) {\n          all[h.token.val[0]] = h.deser(matches.slice(matchIndex, matchIndex + groups));\n        }\n\n        matchIndex += groups;\n      }\n    }\n\n    return [matches, all];\n  } else {\n    return [matches, {}];\n  }\n}\n\nfunction dateTimeFromMatches(matches) {\n  var toField = function toField(token) {\n    switch (token) {\n      case \"S\":\n        return \"millisecond\";\n\n      case \"s\":\n        return \"second\";\n\n      case \"m\":\n        return \"minute\";\n\n      case \"h\":\n      case \"H\":\n        return \"hour\";\n\n      case \"d\":\n        return \"day\";\n\n      case \"o\":\n        return \"ordinal\";\n\n      case \"L\":\n      case \"M\":\n        return \"month\";\n\n      case \"y\":\n        return \"year\";\n\n      case \"E\":\n      case \"c\":\n        return \"weekday\";\n\n      case \"W\":\n        return \"weekNumber\";\n\n      case \"k\":\n        return \"weekYear\";\n\n      case \"q\":\n        return \"quarter\";\n\n      default:\n        return null;\n    }\n  };\n\n  var zone = null;\n  var specificOffset;\n\n  if (!isUndefined(matches.z)) {\n    zone = IANAZone.create(matches.z);\n  }\n\n  if (!isUndefined(matches.Z)) {\n    if (!zone) {\n      zone = new FixedOffsetZone(matches.Z);\n    }\n\n    specificOffset = matches.Z;\n  }\n\n  if (!isUndefined(matches.q)) {\n    matches.M = (matches.q - 1) * 3 + 1;\n  }\n\n  if (!isUndefined(matches.h)) {\n    if (matches.h < 12 && matches.a === 1) {\n      matches.h += 12;\n    } else if (matches.h === 12 && matches.a === 0) {\n      matches.h = 0;\n    }\n  }\n\n  if (matches.G === 0 && matches.y) {\n    matches.y = -matches.y;\n  }\n\n  if (!isUndefined(matches.u)) {\n    matches.S = parseMillis(matches.u);\n  }\n\n  var vals = Object.keys(matches).reduce(function (r, k) {\n    var f = toField(k);\n\n    if (f) {\n      r[f] = matches[k];\n    }\n\n    return r;\n  }, {});\n  return [vals, zone, specificOffset];\n}\n\nvar dummyDateTimeCache = null;\n\nfunction getDummyDateTime() {\n  if (!dummyDateTimeCache) {\n    dummyDateTimeCache = DateTime.fromMillis(1555555555555);\n  }\n\n  return dummyDateTimeCache;\n}\n\nfunction maybeExpandMacroToken(token, locale) {\n  if (token.literal) {\n    return token;\n  }\n\n  var formatOpts = Formatter.macroTokenToFormatOpts(token.val);\n  var tokens = formatOptsToTokens(formatOpts, locale);\n\n  if (tokens == null || tokens.includes(undefined)) {\n    return token;\n  }\n\n  return tokens;\n}\n\nfunction expandMacroTokens(tokens, locale) {\n  var _Array$prototype;\n\n  return (_Array$prototype = Array.prototype).concat.apply(_Array$prototype, _toConsumableArray(tokens.map(function (t) {\n    return maybeExpandMacroToken(t, locale);\n  })));\n}\n/**\n * @private\n */\n\n\nexport function explainFromTokens(locale, input, format) {\n  var tokens = expandMacroTokens(Formatter.parseFormat(format), locale),\n      units = tokens.map(function (t) {\n    return unitForToken(t, locale);\n  }),\n      disqualifyingUnit = units.find(function (t) {\n    return t.invalidReason;\n  });\n\n  if (disqualifyingUnit) {\n    return {\n      input: input,\n      tokens: tokens,\n      invalidReason: disqualifyingUnit.invalidReason\n    };\n  } else {\n    var _buildRegex = buildRegex(units),\n        _buildRegex2 = _slicedToArray(_buildRegex, 2),\n        regexString = _buildRegex2[0],\n        handlers = _buildRegex2[1],\n        regex = RegExp(regexString, \"i\"),\n        _match = match(input, regex, handlers),\n        _match2 = _slicedToArray(_match, 2),\n        rawMatches = _match2[0],\n        matches = _match2[1],\n        _ref11 = matches ? dateTimeFromMatches(matches) : [null, null, undefined],\n        _ref12 = _slicedToArray(_ref11, 3),\n        result = _ref12[0],\n        zone = _ref12[1],\n        specificOffset = _ref12[2];\n\n    if (hasOwnProperty(matches, \"a\") && hasOwnProperty(matches, \"H\")) {\n      throw new ConflictingSpecificationError(\"Can't include meridiem when specifying 24-hour format\");\n    }\n\n    return {\n      input: input,\n      tokens: tokens,\n      regex: regex,\n      rawMatches: rawMatches,\n      matches: matches,\n      result: result,\n      zone: zone,\n      specificOffset: specificOffset\n    };\n  }\n}\nexport function parseFromTokens(locale, input, format) {\n  var _explainFromTokens = explainFromTokens(locale, input, format),\n      result = _explainFromTokens.result,\n      zone = _explainFromTokens.zone,\n      specificOffset = _explainFromTokens.specificOffset,\n      invalidReason = _explainFromTokens.invalidReason;\n\n  return [result, zone, specificOffset, invalidReason];\n}\nexport function formatOptsToTokens(formatOpts, locale) {\n  if (!formatOpts) {\n    return null;\n  }\n\n  var formatter = Formatter.create(locale, formatOpts);\n  var parts = formatter.formatDateTimeParts(getDummyDateTime());\n  return parts.map(function (p) {\n    return tokenForPart(p, locale, formatOpts);\n  });\n}","map":{"version":3,"sources":["/awx_devel/awx/ui/node_modules/luxon/src/impl/tokenParser.js"],"names":["parseMillis","isUndefined","untruncateYear","signedOffset","hasOwnProperty","Formatter","FixedOffsetZone","IANAZone","DateTime","digitRegex","parseDigits","ConflictingSpecificationError","MISSING_FTP","intUnit","regex","post","i","deser","s","NBSP","String","fromCharCode","spaceOrNBSP","spaceOrNBSPRegExp","RegExp","fixListRegex","replace","stripInsensitivities","toLowerCase","oneOf","strings","startIndex","map","join","findIndex","offset","groups","h","m","simple","escapeToken","value","unitForToken","token","loc","one","two","three","four","six","oneOrTwo","oneToThree","oneToSix","oneToNine","twoToFour","fourToSix","literal","t","val","unitate","eras","months","meridiems","weekdays","source","unit","invalidReason","partTypeStyleToTokenVal","year","numeric","month","short","long","day","weekday","dayperiod","dayPeriod","hour","minute","second","timeZoneName","tokenForPart","part","locale","formatOpts","type","style","undefined","buildRegex","units","re","u","reduce","f","r","match","input","handlers","matches","all","matchIndex","slice","dateTimeFromMatches","toField","zone","specificOffset","z","create","Z","q","M","a","G","y","S","vals","Object","keys","k","dummyDateTimeCache","getDummyDateTime","fromMillis","maybeExpandMacroToken","macroTokenToFormatOpts","tokens","formatOptsToTokens","includes","expandMacroTokens","Array","prototype","concat","explainFromTokens","format","parseFormat","disqualifyingUnit","find","regexString","rawMatches","result","parseFromTokens","formatter","parts","formatDateTimeParts","p"],"mappings":"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","sourcesContent":["import { parseMillis, isUndefined, untruncateYear, signedOffset, hasOwnProperty } from \"./util.js\";\nimport Formatter from \"./formatter.js\";\nimport FixedOffsetZone from \"../zones/fixedOffsetZone.js\";\nimport IANAZone from \"../zones/IANAZone.js\";\nimport DateTime from \"../datetime.js\";\nimport { digitRegex, parseDigits } from \"./digits.js\";\nimport { ConflictingSpecificationError } from \"../errors.js\";\n\nconst MISSING_FTP = \"missing Intl.DateTimeFormat.formatToParts support\";\n\nfunction intUnit(regex, post = (i) => i) {\n  return { regex, deser: ([s]) => post(parseDigits(s)) };\n}\n\nconst NBSP = String.fromCharCode(160);\nconst spaceOrNBSP = `[ ${NBSP}]`;\nconst spaceOrNBSPRegExp = new RegExp(spaceOrNBSP, \"g\");\n\nfunction fixListRegex(s) {\n  // make dots optional and also make them literal\n  // make space and non breakable space characters interchangeable\n  return s.replace(/\\./g, \"\\\\.?\").replace(spaceOrNBSPRegExp, spaceOrNBSP);\n}\n\nfunction stripInsensitivities(s) {\n  return s\n    .replace(/\\./g, \"\") // ignore dots that were made optional\n    .replace(spaceOrNBSPRegExp, \" \") // interchange space and nbsp\n    .toLowerCase();\n}\n\nfunction oneOf(strings, startIndex) {\n  if (strings === null) {\n    return null;\n  } else {\n    return {\n      regex: RegExp(strings.map(fixListRegex).join(\"|\")),\n      deser: ([s]) =>\n        strings.findIndex((i) => stripInsensitivities(s) === stripInsensitivities(i)) + startIndex,\n    };\n  }\n}\n\nfunction offset(regex, groups) {\n  return { regex, deser: ([, h, m]) => signedOffset(h, m), groups };\n}\n\nfunction simple(regex) {\n  return { regex, deser: ([s]) => s };\n}\n\nfunction escapeToken(value) {\n  return value.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, \"\\\\$&\");\n}\n\nfunction unitForToken(token, loc) {\n  const one = digitRegex(loc),\n    two = digitRegex(loc, \"{2}\"),\n    three = digitRegex(loc, \"{3}\"),\n    four = digitRegex(loc, \"{4}\"),\n    six = digitRegex(loc, \"{6}\"),\n    oneOrTwo = digitRegex(loc, \"{1,2}\"),\n    oneToThree = digitRegex(loc, \"{1,3}\"),\n    oneToSix = digitRegex(loc, \"{1,6}\"),\n    oneToNine = digitRegex(loc, \"{1,9}\"),\n    twoToFour = digitRegex(loc, \"{2,4}\"),\n    fourToSix = digitRegex(loc, \"{4,6}\"),\n    literal = (t) => ({ regex: RegExp(escapeToken(t.val)), deser: ([s]) => s, literal: true }),\n    unitate = (t) => {\n      if (token.literal) {\n        return literal(t);\n      }\n      switch (t.val) {\n        // era\n        case \"G\":\n          return oneOf(loc.eras(\"short\", false), 0);\n        case \"GG\":\n          return oneOf(loc.eras(\"long\", false), 0);\n        // years\n        case \"y\":\n          return intUnit(oneToSix);\n        case \"yy\":\n          return intUnit(twoToFour, untruncateYear);\n        case \"yyyy\":\n          return intUnit(four);\n        case \"yyyyy\":\n          return intUnit(fourToSix);\n        case \"yyyyyy\":\n          return intUnit(six);\n        // months\n        case \"M\":\n          return intUnit(oneOrTwo);\n        case \"MM\":\n          return intUnit(two);\n        case \"MMM\":\n          return oneOf(loc.months(\"short\", true, false), 1);\n        case \"MMMM\":\n          return oneOf(loc.months(\"long\", true, false), 1);\n        case \"L\":\n          return intUnit(oneOrTwo);\n        case \"LL\":\n          return intUnit(two);\n        case \"LLL\":\n          return oneOf(loc.months(\"short\", false, false), 1);\n        case \"LLLL\":\n          return oneOf(loc.months(\"long\", false, false), 1);\n        // dates\n        case \"d\":\n          return intUnit(oneOrTwo);\n        case \"dd\":\n          return intUnit(two);\n        // ordinals\n        case \"o\":\n          return intUnit(oneToThree);\n        case \"ooo\":\n          return intUnit(three);\n        // time\n        case \"HH\":\n          return intUnit(two);\n        case \"H\":\n          return intUnit(oneOrTwo);\n        case \"hh\":\n          return intUnit(two);\n        case \"h\":\n          return intUnit(oneOrTwo);\n        case \"mm\":\n          return intUnit(two);\n        case \"m\":\n          return intUnit(oneOrTwo);\n        case \"q\":\n          return intUnit(oneOrTwo);\n        case \"qq\":\n          return intUnit(two);\n        case \"s\":\n          return intUnit(oneOrTwo);\n        case \"ss\":\n          return intUnit(two);\n        case \"S\":\n          return intUnit(oneToThree);\n        case \"SSS\":\n          return intUnit(three);\n        case \"u\":\n          return simple(oneToNine);\n        case \"uu\":\n          return simple(oneOrTwo);\n        case \"uuu\":\n          return intUnit(one);\n        // meridiem\n        case \"a\":\n          return oneOf(loc.meridiems(), 0);\n        // weekYear (k)\n        case \"kkkk\":\n          return intUnit(four);\n        case \"kk\":\n          return intUnit(twoToFour, untruncateYear);\n        // weekNumber (W)\n        case \"W\":\n          return intUnit(oneOrTwo);\n        case \"WW\":\n          return intUnit(two);\n        // weekdays\n        case \"E\":\n        case \"c\":\n          return intUnit(one);\n        case \"EEE\":\n          return oneOf(loc.weekdays(\"short\", false, false), 1);\n        case \"EEEE\":\n          return oneOf(loc.weekdays(\"long\", false, false), 1);\n        case \"ccc\":\n          return oneOf(loc.weekdays(\"short\", true, false), 1);\n        case \"cccc\":\n          return oneOf(loc.weekdays(\"long\", true, false), 1);\n        // offset/zone\n        case \"Z\":\n        case \"ZZ\":\n          return offset(new RegExp(`([+-]${oneOrTwo.source})(?::(${two.source}))?`), 2);\n        case \"ZZZ\":\n          return offset(new RegExp(`([+-]${oneOrTwo.source})(${two.source})?`), 2);\n        // we don't support ZZZZ (PST) or ZZZZZ (Pacific Standard Time) in parsing\n        // because we don't have any way to figure out what they are\n        case \"z\":\n          return simple(/[a-z_+-/]{1,256}?/i);\n        default:\n          return literal(t);\n      }\n    };\n\n  const unit = unitate(token) || {\n    invalidReason: MISSING_FTP,\n  };\n\n  unit.token = token;\n\n  return unit;\n}\n\nconst partTypeStyleToTokenVal = {\n  year: {\n    \"2-digit\": \"yy\",\n    numeric: \"yyyyy\",\n  },\n  month: {\n    numeric: \"M\",\n    \"2-digit\": \"MM\",\n    short: \"MMM\",\n    long: \"MMMM\",\n  },\n  day: {\n    numeric: \"d\",\n    \"2-digit\": \"dd\",\n  },\n  weekday: {\n    short: \"EEE\",\n    long: \"EEEE\",\n  },\n  dayperiod: \"a\",\n  dayPeriod: \"a\",\n  hour: {\n    numeric: \"h\",\n    \"2-digit\": \"hh\",\n  },\n  minute: {\n    numeric: \"m\",\n    \"2-digit\": \"mm\",\n  },\n  second: {\n    numeric: \"s\",\n    \"2-digit\": \"ss\",\n  },\n  timeZoneName: {\n    long: \"ZZZZZ\",\n    short: \"ZZZ\",\n  },\n};\n\nfunction tokenForPart(part, locale, formatOpts) {\n  const { type, value } = part;\n\n  if (type === \"literal\") {\n    return {\n      literal: true,\n      val: value,\n    };\n  }\n\n  const style = formatOpts[type];\n\n  let val = partTypeStyleToTokenVal[type];\n  if (typeof val === \"object\") {\n    val = val[style];\n  }\n\n  if (val) {\n    return {\n      literal: false,\n      val,\n    };\n  }\n\n  return undefined;\n}\n\nfunction buildRegex(units) {\n  const re = units.map((u) => u.regex).reduce((f, r) => `${f}(${r.source})`, \"\");\n  return [`^${re}$`, units];\n}\n\nfunction match(input, regex, handlers) {\n  const matches = input.match(regex);\n\n  if (matches) {\n    const all = {};\n    let matchIndex = 1;\n    for (const i in handlers) {\n      if (hasOwnProperty(handlers, i)) {\n        const h = handlers[i],\n          groups = h.groups ? h.groups + 1 : 1;\n        if (!h.literal && h.token) {\n          all[h.token.val[0]] = h.deser(matches.slice(matchIndex, matchIndex + groups));\n        }\n        matchIndex += groups;\n      }\n    }\n    return [matches, all];\n  } else {\n    return [matches, {}];\n  }\n}\n\nfunction dateTimeFromMatches(matches) {\n  const toField = (token) => {\n    switch (token) {\n      case \"S\":\n        return \"millisecond\";\n      case \"s\":\n        return \"second\";\n      case \"m\":\n        return \"minute\";\n      case \"h\":\n      case \"H\":\n        return \"hour\";\n      case \"d\":\n        return \"day\";\n      case \"o\":\n        return \"ordinal\";\n      case \"L\":\n      case \"M\":\n        return \"month\";\n      case \"y\":\n        return \"year\";\n      case \"E\":\n      case \"c\":\n        return \"weekday\";\n      case \"W\":\n        return \"weekNumber\";\n      case \"k\":\n        return \"weekYear\";\n      case \"q\":\n        return \"quarter\";\n      default:\n        return null;\n    }\n  };\n\n  let zone = null;\n  let specificOffset;\n  if (!isUndefined(matches.z)) {\n    zone = IANAZone.create(matches.z);\n  }\n\n  if (!isUndefined(matches.Z)) {\n    if (!zone) {\n      zone = new FixedOffsetZone(matches.Z);\n    }\n    specificOffset = matches.Z;\n  }\n\n  if (!isUndefined(matches.q)) {\n    matches.M = (matches.q - 1) * 3 + 1;\n  }\n\n  if (!isUndefined(matches.h)) {\n    if (matches.h < 12 && matches.a === 1) {\n      matches.h += 12;\n    } else if (matches.h === 12 && matches.a === 0) {\n      matches.h = 0;\n    }\n  }\n\n  if (matches.G === 0 && matches.y) {\n    matches.y = -matches.y;\n  }\n\n  if (!isUndefined(matches.u)) {\n    matches.S = parseMillis(matches.u);\n  }\n\n  const vals = Object.keys(matches).reduce((r, k) => {\n    const f = toField(k);\n    if (f) {\n      r[f] = matches[k];\n    }\n\n    return r;\n  }, {});\n\n  return [vals, zone, specificOffset];\n}\n\nlet dummyDateTimeCache = null;\n\nfunction getDummyDateTime() {\n  if (!dummyDateTimeCache) {\n    dummyDateTimeCache = DateTime.fromMillis(1555555555555);\n  }\n\n  return dummyDateTimeCache;\n}\n\nfunction maybeExpandMacroToken(token, locale) {\n  if (token.literal) {\n    return token;\n  }\n\n  const formatOpts = Formatter.macroTokenToFormatOpts(token.val);\n  const tokens = formatOptsToTokens(formatOpts, locale);\n\n  if (tokens == null || tokens.includes(undefined)) {\n    return token;\n  }\n\n  return tokens;\n}\n\nfunction expandMacroTokens(tokens, locale) {\n  return Array.prototype.concat(...tokens.map((t) => maybeExpandMacroToken(t, locale)));\n}\n\n/**\n * @private\n */\n\nexport function explainFromTokens(locale, input, format) {\n  const tokens = expandMacroTokens(Formatter.parseFormat(format), locale),\n    units = tokens.map((t) => unitForToken(t, locale)),\n    disqualifyingUnit = units.find((t) => t.invalidReason);\n\n  if (disqualifyingUnit) {\n    return { input, tokens, invalidReason: disqualifyingUnit.invalidReason };\n  } else {\n    const [regexString, handlers] = buildRegex(units),\n      regex = RegExp(regexString, \"i\"),\n      [rawMatches, matches] = match(input, regex, handlers),\n      [result, zone, specificOffset] = matches\n        ? dateTimeFromMatches(matches)\n        : [null, null, undefined];\n    if (hasOwnProperty(matches, \"a\") && hasOwnProperty(matches, \"H\")) {\n      throw new ConflictingSpecificationError(\n        \"Can't include meridiem when specifying 24-hour format\"\n      );\n    }\n    return { input, tokens, regex, rawMatches, matches, result, zone, specificOffset };\n  }\n}\n\nexport function parseFromTokens(locale, input, format) {\n  const { result, zone, specificOffset, invalidReason } = explainFromTokens(locale, input, format);\n  return [result, zone, specificOffset, invalidReason];\n}\n\nexport function formatOptsToTokens(formatOpts, locale) {\n  if (!formatOpts) {\n    return null;\n  }\n\n  const formatter = Formatter.create(locale, formatOpts);\n  const parts = formatter.formatDateTimeParts(getDummyDateTime());\n  return parts.map((p) => tokenForPart(p, locale, formatOpts));\n}\n"]},"metadata":{},"sourceType":"module"}