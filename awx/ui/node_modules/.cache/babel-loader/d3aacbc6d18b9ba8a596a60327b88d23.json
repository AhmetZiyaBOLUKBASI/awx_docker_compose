{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useCallback}from'react';import{Link,useHistory}from'react-router-dom';import{Button}from'@patternfly/react-core';import useRequest,{useDismissableError}from'hooks/useRequest';import AlertModal from'components/AlertModal';import{CardBody,CardActionsRow}from'components/Card';import{Detail,DetailList,UserDateDetail}from'components/DetailList';import{ApplicationsAPI}from'api';import DeleteButton from'components/DeleteButton';import ErrorDetail from'components/ErrorDetail';import applicationHelpTextStrings from'../shared/Application.helptext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ApplicationDetails(_ref){var application=_ref.application,authorizationOptions=_ref.authorizationOptions,clientTypeOptions=_ref.clientTypeOptions;var history=useHistory();var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return ApplicationsAPI.destroy(application.id);case 2:history.push('/applications');case 3:case\"end\":return _context.stop();}}},_callee);})),[application.id,history])),deleteLoading=_useRequest.isLoading,deletionError=_useRequest.error,deleteApplications=_useRequest.request;var _useDismissableError=useDismissableError(deletionError),error=_useDismissableError.error,dismissError=_useDismissableError.dismissError;var getAuthorizationGrantType=function getAuthorizationGrantType(type){var value;authorizationOptions.filter(function(option){if(option.value===type){value=option.label;}return null;});return value;};var getClientType=function getClientType(type){var value;clientTypeOptions.filter(function(option){if(option.value===type){value=option.label;}return null;});return value;};return/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsxs(DetailList,{children:[/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Name\"),value:application.name,dataCy:\"app-detail-name\"}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Description\"),value:application.description,dataCy:\"app-detail-description\"}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Organization\"),value:/*#__PURE__*/_jsx(Link,{to:\"/organizations/\".concat(application.summary_fields.organization.id,\"/details\"),children:application.summary_fields.organization.name}),dataCy:\"app-detail-organization\"}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Authorization grant type\"),value:getAuthorizationGrantType(application.authorization_grant_type),dataCy:\"app-detail-authorization-grant-type\",helpText:applicationHelpTextStrings.authorizationGrantType}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Client ID\"),value:application.client_id,dataCy:\"app-detail-client-id\"}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Redirect URIs\"),value:application.redirect_uris,dataCy:\"app-detail-redirect-uris\",helpText:applicationHelpTextStrings.redirectURIS}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Client type\"),value:getClientType(application.client_type),dataCy:\"app-detail-client-type\",helpText:applicationHelpTextStrings.clientType}),/*#__PURE__*/_jsx(UserDateDetail,{label:/*i18n*/i18n._(\"Created\"),date:application.created}),/*#__PURE__*/_jsx(UserDateDetail,{label:/*i18n*/i18n._(\"Last Modified\"),date:application.modified})]}),/*#__PURE__*/_jsxs(CardActionsRow,{children:[application.summary_fields.user_capabilities&&application.summary_fields.user_capabilities.edit&&/*#__PURE__*/_jsx(Button,{ouiaId:\"application-details-edit-button\",component:Link,to:\"/applications/\".concat(application.id,\"/edit\"),\"aria-label\":/*i18n*/i18n._(\"Edit\"),children:/*i18n*/i18n._(\"Edit\")}),application.summary_fields.user_capabilities&&application.summary_fields.user_capabilities.delete&&/*#__PURE__*/_jsx(DeleteButton,{name:application.name,modalTitle:/*i18n*/i18n._(\"Delete application\"),onConfirm:deleteApplications,isDisabled:deleteLoading,children:/*i18n*/i18n._(\"Delete\")})]}),error&&/*#__PURE__*/_jsxs(AlertModal,{isOpen:error,variant:\"error\",title:/*i18n*/i18n._(\"Error!\"),onClose:dismissError,children:[/*i18n*/i18n._(\"Failed to delete application.\"),/*#__PURE__*/_jsx(ErrorDetail,{error:error})]})]});}export default ApplicationDetails;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/Application/ApplicationDetails/ApplicationDetails.js"],"names":["React","useCallback","Link","useHistory","Button","useRequest","useDismissableError","AlertModal","CardBody","CardActionsRow","Detail","DetailList","UserDateDetail","ApplicationsAPI","DeleteButton","ErrorDetail","applicationHelpTextStrings","ApplicationDetails","application","authorizationOptions","clientTypeOptions","history","destroy","id","push","deleteLoading","isLoading","deletionError","error","deleteApplications","request","dismissError","getAuthorizationGrantType","type","value","filter","option","label","getClientType","name","description","summary_fields","organization","authorization_grant_type","authorizationGrantType","client_id","redirect_uris","redirectURIS","client_type","clientType","created","modified","user_capabilities","edit","delete"],"mappings":"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","sourcesContent":["import React, { useCallback } from 'react';\n\nimport { t } from '@lingui/macro';\nimport { Link, useHistory } from 'react-router-dom';\nimport { Button } from '@patternfly/react-core';\n\nimport useRequest, { useDismissableError } from 'hooks/useRequest';\nimport AlertModal from 'components/AlertModal';\nimport { CardBody, CardActionsRow } from 'components/Card';\nimport { Detail, DetailList, UserDateDetail } from 'components/DetailList';\nimport { ApplicationsAPI } from 'api';\nimport DeleteButton from 'components/DeleteButton';\nimport ErrorDetail from 'components/ErrorDetail';\nimport applicationHelpTextStrings from '../shared/Application.helptext';\n\nfunction ApplicationDetails({\n  application,\n  authorizationOptions,\n  clientTypeOptions,\n}) {\n  const history = useHistory();\n  const {\n    isLoading: deleteLoading,\n    error: deletionError,\n    request: deleteApplications,\n  } = useRequest(\n    useCallback(async () => {\n      await ApplicationsAPI.destroy(application.id);\n      history.push('/applications');\n    }, [application.id, history])\n  );\n\n  const { error, dismissError } = useDismissableError(deletionError);\n\n  const getAuthorizationGrantType = (type) => {\n    let value;\n    authorizationOptions.filter((option) => {\n      if (option.value === type) {\n        value = option.label;\n      }\n      return null;\n    });\n    return value;\n  };\n  const getClientType = (type) => {\n    let value;\n    clientTypeOptions.filter((option) => {\n      if (option.value === type) {\n        value = option.label;\n      }\n      return null;\n    });\n    return value;\n  };\n  return (\n    <CardBody>\n      <DetailList>\n        <Detail\n          label={t`Name`}\n          value={application.name}\n          dataCy=\"app-detail-name\"\n        />\n        <Detail\n          label={t`Description`}\n          value={application.description}\n          dataCy=\"app-detail-description\"\n        />\n        <Detail\n          label={t`Organization`}\n          value={\n            <Link\n              to={`/organizations/${application.summary_fields.organization.id}/details`}\n            >\n              {application.summary_fields.organization.name}\n            </Link>\n          }\n          dataCy=\"app-detail-organization\"\n        />\n        <Detail\n          label={t`Authorization grant type`}\n          value={getAuthorizationGrantType(\n            application.authorization_grant_type\n          )}\n          dataCy=\"app-detail-authorization-grant-type\"\n          helpText={applicationHelpTextStrings.authorizationGrantType}\n        />\n        <Detail\n          label={t`Client ID`}\n          value={application.client_id}\n          dataCy=\"app-detail-client-id\"\n        />\n        <Detail\n          label={t`Redirect URIs`}\n          value={application.redirect_uris}\n          dataCy=\"app-detail-redirect-uris\"\n          helpText={applicationHelpTextStrings.redirectURIS}\n        />\n        <Detail\n          label={t`Client type`}\n          value={getClientType(application.client_type)}\n          dataCy=\"app-detail-client-type\"\n          helpText={applicationHelpTextStrings.clientType}\n        />\n        <UserDateDetail label={t`Created`} date={application.created} />\n        <UserDateDetail label={t`Last Modified`} date={application.modified} />\n      </DetailList>\n      <CardActionsRow>\n        {application.summary_fields.user_capabilities &&\n          application.summary_fields.user_capabilities.edit && (\n            <Button\n              ouiaId=\"application-details-edit-button\"\n              component={Link}\n              to={`/applications/${application.id}/edit`}\n              aria-label={t`Edit`}\n            >\n              {t`Edit`}\n            </Button>\n          )}\n        {application.summary_fields.user_capabilities &&\n          application.summary_fields.user_capabilities.delete && (\n            <DeleteButton\n              name={application.name}\n              modalTitle={t`Delete application`}\n              onConfirm={deleteApplications}\n              isDisabled={deleteLoading}\n            >\n              {t`Delete`}\n            </DeleteButton>\n          )}\n      </CardActionsRow>\n      {error && (\n        <AlertModal\n          isOpen={error}\n          variant=\"error\"\n          title={t`Error!`}\n          onClose={dismissError}\n        >\n          {t`Failed to delete application.`}\n          <ErrorDetail error={error} />\n        </AlertModal>\n      )}\n    </CardBody>\n  );\n}\nexport default ApplicationDetails;\n"]},"metadata":{},"sourceType":"module"}