{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useEffect,useCallback}from'react';import{Link,Redirect,useRouteMatch}from'react-router-dom';import{Button}from'@patternfly/react-core';import{CaretLeftIcon}from'@patternfly/react-icons';import{CardBody,CardActionsRow}from'components/Card';import ContentError from'components/ContentError';import ContentLoading from'components/ContentLoading';import{DetailList}from'components/DetailList';import RoutedTabs from'components/RoutedTabs';import{useConfig}from'contexts/Config';import{useSettings}from'contexts/Settings';import useRequest from'hooks/useRequest';import{SettingsAPI}from'api';import{SettingDetail}from'../../shared';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function GitHubDetail(){var _Object$values;var _useConfig=useConfig(),me=_useConfig.me;var _useSettings=useSettings(),options=_useSettings.GET;var baseURL='/settings/github';var _useRouteMatch=useRouteMatch(\"\".concat(baseURL,\"/:category/details\")),path=_useRouteMatch.path,category=_useRouteMatch.params.category;var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$Promise$all,_yield$Promise$all2,gitHubDefault,gitHubOrganization,gitHubTeam,gitHubEnterprise,gitHubEnterpriseOrganization,gitHubEnterpriseTeam;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all([SettingsAPI.readCategory('github'),SettingsAPI.readCategory('github-org'),SettingsAPI.readCategory('github-team'),SettingsAPI.readCategory('github-enterprise'),SettingsAPI.readCategory('github-enterprise-org'),SettingsAPI.readCategory('github-enterprise-team')]);case 2:_yield$Promise$all=_context.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,6);gitHubDefault=_yield$Promise$all2[0].data;gitHubOrganization=_yield$Promise$all2[1].data;gitHubTeam=_yield$Promise$all2[2].data;gitHubEnterprise=_yield$Promise$all2[3].data;gitHubEnterpriseOrganization=_yield$Promise$all2[4].data;gitHubEnterpriseTeam=_yield$Promise$all2[5].data;return _context.abrupt(\"return\",{default:gitHubDefault,organization:gitHubOrganization,team:gitHubTeam,enterprise:gitHubEnterprise,enterprise_organization:gitHubEnterpriseOrganization,enterprise_team:gitHubEnterpriseTeam});case 11:case\"end\":return _context.stop();}}},_callee);})),[]),{default:null,organization:null,team:null,enterprise:null,enterprise_organization:null,enterprise_team:null}),isLoading=_useRequest.isLoading,error=_useRequest.error,request=_useRequest.request,gitHubDetails=_useRequest.result;useEffect(function(){request();},[request]);var tabsArray=[{name:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CaretLeftIcon,{}),/*i18n*/i18n._(\"Back to Settings\")]}),link:\"/settings\",id:99},{name:/*i18n*/i18n._(\"GitHub Default\"),link:\"\".concat(baseURL,\"/default/details\"),id:0},{name:/*i18n*/i18n._(\"GitHub Organization\"),link:\"\".concat(baseURL,\"/organization/details\"),id:1},{name:/*i18n*/i18n._(\"GitHub Team\"),link:\"\".concat(baseURL,\"/team/details\"),id:2},{name:/*i18n*/i18n._(\"GitHub Enterprise\"),link:\"\".concat(baseURL,\"/enterprise/details\"),id:3},{name:/*i18n*/i18n._(\"GitHub Enterprise Organization\"),link:\"\".concat(baseURL,\"/enterprise_organization/details\"),id:4},{name:/*i18n*/i18n._(\"GitHub Enterprise Team\"),link:\"\".concat(baseURL,\"/enterprise_team/details\"),id:5}];if(!Object.keys(gitHubDetails).includes(category)){return/*#__PURE__*/_jsx(Redirect,{from:path,to:\"\".concat(baseURL,\"/default/details\"),exact:true});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(RoutedTabs,{tabsArray:tabsArray}),/*#__PURE__*/_jsxs(CardBody,{children:[isLoading&&/*#__PURE__*/_jsx(ContentLoading,{}),!isLoading&&error&&/*#__PURE__*/_jsx(ContentError,{error:error}),!isLoading&&!((_Object$values=Object.values(gitHubDetails))!==null&&_Object$values!==void 0&&_Object$values.includes(null))&&/*#__PURE__*/_jsx(DetailList,{children:Object.keys(gitHubDetails[category]).map(function(key){var record=options===null||options===void 0?void 0:options[key];return/*#__PURE__*/_jsx(SettingDetail,{id:key,helpText:record===null||record===void 0?void 0:record.help_text,label:record===null||record===void 0?void 0:record.label,type:record===null||record===void 0?void 0:record.type,unit:record===null||record===void 0?void 0:record.unit,value:gitHubDetails[category][key]},key);})}),(me===null||me===void 0?void 0:me.is_superuser)&&/*#__PURE__*/_jsx(CardActionsRow,{children:/*#__PURE__*/_jsx(Button,{ouiaId:\"github-detail-edit-button\",\"aria-label\":/*i18n*/i18n._(\"Edit\"),component:Link,to:\"\".concat(baseURL,\"/\").concat(category,\"/edit\"),children:/*i18n*/i18n._(\"Edit\")})})]})]});}export default GitHubDetail;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/Setting/GitHub/GitHubDetail/GitHubDetail.js"],"names":["React","useEffect","useCallback","Link","Redirect","useRouteMatch","Button","CaretLeftIcon","CardBody","CardActionsRow","ContentError","ContentLoading","DetailList","RoutedTabs","useConfig","useSettings","useRequest","SettingsAPI","SettingDetail","GitHubDetail","me","options","GET","baseURL","path","category","params","Promise","all","readCategory","gitHubDefault","data","gitHubOrganization","gitHubTeam","gitHubEnterprise","gitHubEnterpriseOrganization","gitHubEnterpriseTeam","default","organization","team","enterprise","enterprise_organization","enterprise_team","isLoading","error","request","gitHubDetails","result","tabsArray","name","link","id","Object","keys","includes","values","map","key","record","help_text","label","type","unit","is_superuser"],"mappings":"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","sourcesContent":["import React, { useEffect, useCallback } from 'react';\nimport { Link, Redirect, useRouteMatch } from 'react-router-dom';\n\nimport { t } from '@lingui/macro';\nimport { Button } from '@patternfly/react-core';\nimport { CaretLeftIcon } from '@patternfly/react-icons';\nimport { CardBody, CardActionsRow } from 'components/Card';\nimport ContentError from 'components/ContentError';\nimport ContentLoading from 'components/ContentLoading';\nimport { DetailList } from 'components/DetailList';\nimport RoutedTabs from 'components/RoutedTabs';\nimport { useConfig } from 'contexts/Config';\nimport { useSettings } from 'contexts/Settings';\nimport useRequest from 'hooks/useRequest';\nimport { SettingsAPI } from 'api';\nimport { SettingDetail } from '../../shared';\n\nfunction GitHubDetail() {\n  const { me } = useConfig();\n  const { GET: options } = useSettings();\n\n  const baseURL = '/settings/github';\n  const {\n    path,\n    params: { category },\n  } = useRouteMatch(`${baseURL}/:category/details`);\n\n  const {\n    isLoading,\n    error,\n    request,\n    result: gitHubDetails,\n  } = useRequest(\n    useCallback(async () => {\n      const [\n        { data: gitHubDefault },\n        { data: gitHubOrganization },\n        { data: gitHubTeam },\n        { data: gitHubEnterprise },\n        { data: gitHubEnterpriseOrganization },\n        { data: gitHubEnterpriseTeam },\n      ] = await Promise.all([\n        SettingsAPI.readCategory('github'),\n        SettingsAPI.readCategory('github-org'),\n        SettingsAPI.readCategory('github-team'),\n        SettingsAPI.readCategory('github-enterprise'),\n        SettingsAPI.readCategory('github-enterprise-org'),\n        SettingsAPI.readCategory('github-enterprise-team'),\n      ]);\n      return {\n        default: gitHubDefault,\n        organization: gitHubOrganization,\n        team: gitHubTeam,\n        enterprise: gitHubEnterprise,\n        enterprise_organization: gitHubEnterpriseOrganization,\n        enterprise_team: gitHubEnterpriseTeam,\n      };\n    }, []),\n    {\n      default: null,\n      organization: null,\n      team: null,\n      enterprise: null,\n      enterprise_organization: null,\n      enterprise_team: null,\n    }\n  );\n\n  useEffect(() => {\n    request();\n  }, [request]);\n\n  const tabsArray = [\n    {\n      name: (\n        <>\n          <CaretLeftIcon />\n          {t`Back to Settings`}\n        </>\n      ),\n      link: `/settings`,\n      id: 99,\n    },\n    {\n      name: t`GitHub Default`,\n      link: `${baseURL}/default/details`,\n      id: 0,\n    },\n    {\n      name: t`GitHub Organization`,\n      link: `${baseURL}/organization/details`,\n      id: 1,\n    },\n    {\n      name: t`GitHub Team`,\n      link: `${baseURL}/team/details`,\n      id: 2,\n    },\n    {\n      name: t`GitHub Enterprise`,\n      link: `${baseURL}/enterprise/details`,\n      id: 3,\n    },\n    {\n      name: t`GitHub Enterprise Organization`,\n      link: `${baseURL}/enterprise_organization/details`,\n      id: 4,\n    },\n    {\n      name: t`GitHub Enterprise Team`,\n      link: `${baseURL}/enterprise_team/details`,\n      id: 5,\n    },\n  ];\n\n  if (!Object.keys(gitHubDetails).includes(category)) {\n    return <Redirect from={path} to={`${baseURL}/default/details`} exact />;\n  }\n\n  return (\n    <>\n      <RoutedTabs tabsArray={tabsArray} />\n      <CardBody>\n        {isLoading && <ContentLoading />}\n        {!isLoading && error && <ContentError error={error} />}\n        {!isLoading && !Object.values(gitHubDetails)?.includes(null) && (\n          <DetailList>\n            {Object.keys(gitHubDetails[category]).map((key) => {\n              const record = options?.[key];\n              return (\n                <SettingDetail\n                  key={key}\n                  id={key}\n                  helpText={record?.help_text}\n                  label={record?.label}\n                  type={record?.type}\n                  unit={record?.unit}\n                  value={gitHubDetails[category][key]}\n                />\n              );\n            })}\n          </DetailList>\n        )}\n        {me?.is_superuser && (\n          <CardActionsRow>\n            <Button\n              ouiaId=\"github-detail-edit-button\"\n              aria-label={t`Edit`}\n              component={Link}\n              to={`${baseURL}/${category}/edit`}\n            >\n              {t`Edit`}\n            </Button>\n          </CardActionsRow>\n        )}\n      </CardBody>\n    </>\n  );\n}\n\nexport default GitHubDetail;\n"]},"metadata":{},"sourceType":"module"}