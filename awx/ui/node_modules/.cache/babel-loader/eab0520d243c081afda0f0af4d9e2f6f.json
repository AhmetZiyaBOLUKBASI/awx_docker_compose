{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{i18n}from\"@lingui/core\";import React from'react';import{useField}from'formik';import DaysToKeepStep from'./DaysToKeepStep';import StepName from'../../../../../components/LaunchPrompt/steps/StepName';import{jsx as _jsx}from\"react/jsx-runtime\";var STEP_ID='daysToKeep';export default function useDaysToKeepStep(){var _useField=useField('nodeResource'),_useField2=_slicedToArray(_useField,2),nodeResourceMeta=_useField2[1];var _useField3=useField('daysToKeep'),_useField4=_slicedToArray(_useField3,2),daysToKeepMeta=_useField4[1];return{step:getStep(nodeResourceMeta,daysToKeepMeta),initialValues:{daysToKeep:30},isReady:true,contentError:null,hasError:!!daysToKeepMeta.error,setTouched:function setTouched(setFieldTouched){setFieldTouched('daysToKeep',true,false);},validate:function validate(){}};}function getStep(nodeResourceMeta,daysToKeepMeta){var _nodeResourceMeta$val;if(['cleanup_activitystream','cleanup_jobs'].includes(nodeResourceMeta===null||nodeResourceMeta===void 0?void 0:(_nodeResourceMeta$val=nodeResourceMeta.value)===null||_nodeResourceMeta$val===void 0?void 0:_nodeResourceMeta$val.job_type)){return{id:STEP_ID,name:/*#__PURE__*/_jsx(StepName,{hasErrors:!!daysToKeepMeta.error,id:\"days-to-keep-step\",children:/*i18n*/i18n._(\"Days to keep\")}),component:/*#__PURE__*/_jsx(DaysToKeepStep,{}),enableNext:!daysToKeepMeta.error};}return null;}","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/Template/WorkflowJobTemplateVisualizer/Modals/NodeModals/useDaysToKeepStep.js"],"names":["React","useField","DaysToKeepStep","StepName","STEP_ID","useDaysToKeepStep","nodeResourceMeta","daysToKeepMeta","step","getStep","initialValues","daysToKeep","isReady","contentError","hasError","error","setTouched","setFieldTouched","validate","includes","value","job_type","id","name","component","enableNext"],"mappings":"sIAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,OAASC,QAAT,KAAyB,QAAzB,CACA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,QAAP,KAAqB,uDAArB,C,2CAEA,GAAMC,CAAAA,OAAO,CAAG,YAAhB,CAEA,cAAe,SAASC,CAAAA,iBAAT,EAA6B,CAC1C,cAA6BJ,QAAQ,CAAC,cAAD,CAArC,wCAASK,gBAAT,eACA,eAA2BL,QAAQ,CAAC,YAAD,CAAnC,yCAASM,cAAT,eAEA,MAAO,CACLC,IAAI,CAAEC,OAAO,CAACH,gBAAD,CAAmBC,cAAnB,CADR,CAELG,aAAa,CAAE,CAAEC,UAAU,CAAE,EAAd,CAFV,CAGLC,OAAO,CAAE,IAHJ,CAILC,YAAY,CAAE,IAJT,CAKLC,QAAQ,CAAE,CAAC,CAACP,cAAc,CAACQ,KALtB,CAMLC,UAAU,CAAE,oBAACC,eAAD,CAAqB,CAC/BA,eAAe,CAAC,YAAD,CAAe,IAAf,CAAqB,KAArB,CAAf,CACD,CARI,CASLC,QAAQ,CAAE,mBAAM,CAAE,CATb,CAAP,CAWD,CACD,QAAST,CAAAA,OAAT,CAAiBH,gBAAjB,CAAmCC,cAAnC,CAAmD,2BACjD,GACE,CAAC,wBAAD,CAA2B,cAA3B,EAA2CY,QAA3C,CACEb,gBADF,SACEA,gBADF,wCACEA,gBAAgB,CAAEc,KADpB,gDACE,sBAAyBC,QAD3B,CADF,CAIE,CACA,MAAO,CACLC,EAAE,CAAElB,OADC,CAELmB,IAAI,cACF,KAAC,QAAD,EAAU,SAAS,CAAE,CAAC,CAAChB,cAAc,CAACQ,KAAtC,CAA6C,EAAE,CAAC,mBAAhD,kBACG,sBADH,EAHG,CAOLS,SAAS,cAAE,KAAC,cAAD,IAPN,CAQLC,UAAU,CAAE,CAAClB,cAAc,CAACQ,KARvB,CAAP,CAUD,CACD,MAAO,KAAP,CACD","sourcesContent":["import React from 'react';\nimport { t } from '@lingui/macro';\nimport { useField } from 'formik';\nimport DaysToKeepStep from './DaysToKeepStep';\nimport StepName from '../../../../../components/LaunchPrompt/steps/StepName';\n\nconst STEP_ID = 'daysToKeep';\n\nexport default function useDaysToKeepStep() {\n  const [, nodeResourceMeta] = useField('nodeResource');\n  const [, daysToKeepMeta] = useField('daysToKeep');\n\n  return {\n    step: getStep(nodeResourceMeta, daysToKeepMeta),\n    initialValues: { daysToKeep: 30 },\n    isReady: true,\n    contentError: null,\n    hasError: !!daysToKeepMeta.error,\n    setTouched: (setFieldTouched) => {\n      setFieldTouched('daysToKeep', true, false);\n    },\n    validate: () => {},\n  };\n}\nfunction getStep(nodeResourceMeta, daysToKeepMeta) {\n  if (\n    ['cleanup_activitystream', 'cleanup_jobs'].includes(\n      nodeResourceMeta?.value?.job_type\n    )\n  ) {\n    return {\n      id: STEP_ID,\n      name: (\n        <StepName hasErrors={!!daysToKeepMeta.error} id=\"days-to-keep-step\">\n          {t`Days to keep`}\n        </StepName>\n      ),\n      component: <DaysToKeepStep />,\n      enableNext: !daysToKeepMeta.error,\n    };\n  }\n  return null;\n}\n"]},"metadata":{},"sourceType":"module"}