{"ast":null,"code":"import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useEffect,useCallback}from'react';import{SyncAltIcon}from'@patternfly/react-icons';import{useParams,useLocation}from'react-router-dom';import{FormGroup,TextInput,InputGroup,Button}from'@patternfly/react-core';import{useField,useFormikContext}from'formik';import ContentError from'components/ContentError';import ContentLoading from'components/ContentLoading';import useRequest from'hooks/useRequest';import{FormColumnLayout}from'components/FormLayout';import{CredentialLookup}from'components/Lookup';import AnsibleSelect from'components/AnsibleSelect';import Popover from'components/Popover';import{JobTemplatesAPI,WorkflowJobTemplatesAPI,CredentialTypesAPI}from'api';import helpText from'./WorkflowJobTemplate.helptext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function WebhookSubForm(_ref){var templateType=_ref.templateType;var _useFormikContext=useFormikContext(),setFieldValue=_useFormikContext.setFieldValue;var _useParams=useParams(),id=_useParams.id;var _useLocation=useLocation(),pathname=_useLocation.pathname;var origin=document.location.origin;var _useField=useField('webhook_service'),_useField2=_slicedToArray(_useField,3),webhookServiceField=_useField2[0],webhookServiceMeta=_useField2[1],webhookServiceHelpers=_useField2[2];var _useField3=useField('webhook_url'),_useField4=_slicedToArray(_useField3,3),webhookUrlField=_useField4[0],webhookUrlHelpers=_useField4[2];var _useField5=useField('webhook_key'),_useField6=_slicedToArray(_useField5,3),webhookKeyField=_useField6[0],webhookKeyMeta=_useField6[1],webhookKeyHelpers=_useField6[2];var _useField7=useField('webhook_credential'),_useField8=_slicedToArray(_useField7,3),webhookCredentialField=_useField8[0],webhookCredentialMeta=_useField8[1],webhookCredentialHelpers=_useField8[2];var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _results,_results$data,_results$data$results;var results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!webhookServiceField.value){_context.next=4;break;}_context.next=3;return CredentialTypesAPI.read({namespace:\"\".concat(webhookServiceField.value,\"_token\")});case 3:results=_context.sent;case 4:return _context.abrupt(\"return\",(_results=results)===null||_results===void 0?void 0:(_results$data=_results.data)===null||_results$data===void 0?void 0:(_results$data$results=_results$data.results[0])===null||_results$data$results===void 0?void 0:_results$data$results.id);case 5:case\"end\":return _context.stop();}}},_callee);})),[webhookServiceField.value])),loadCredentialType=_useRequest.request,error=_useRequest.error,isLoading=_useRequest.isLoading,credTypeId=_useRequest.result;useEffect(function(){loadCredentialType();},[loadCredentialType]);var _useRequest2=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var updateWebhookKey,_yield$updateWebhookK,key;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:updateWebhookKey=templateType==='job_template'?JobTemplatesAPI.updateWebhookKey(id):WorkflowJobTemplatesAPI.updateWebhookKey(id);_context2.next=3;return updateWebhookKey;case 3:_yield$updateWebhookK=_context2.sent;key=_yield$updateWebhookK.data.webhook_key;webhookKeyHelpers.setValue(key);case 6:case\"end\":return _context2.stop();}}},_callee2);})),[webhookKeyHelpers,id,templateType])),fetchWebhookKey=_useRequest2.request,webhookKeyError=_useRequest2.error;var changeWebhookKey=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetchWebhookKey();case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function changeWebhookKey(){return _ref4.apply(this,arguments);};}();var onCredentialChange=useCallback(function(value){setFieldValue('webhook_credential',value||null);},[setFieldValue]);var isUpdateKeyDisabled=pathname.endsWith('/add')||webhookKeyMeta.initialValue==='A NEW WEBHOOK KEY WILL BE GENERATED ON SAVE.';var webhookServiceOptions=[{value:'',key:'',label:/*i18n*/i18n._(\"Choose a Webhook Service\"),isDisabled:true},{value:'github',key:'github',label:/*i18n*/i18n._(\"GitHub\"),isDisabled:false},{value:'gitlab',key:'gitlab',label:/*i18n*/i18n._(\"GitLab\"),isDisabled:false}];if(error||webhookKeyError){return/*#__PURE__*/_jsx(ContentError,{error:error});}if(isLoading){return/*#__PURE__*/_jsx(ContentLoading,{});}return/*#__PURE__*/_jsxs(FormColumnLayout,{children:[/*#__PURE__*/_jsx(FormGroup,{name:\"webhook_service\",fieldId:\"webhook_service\",helperTextInvalid:webhookServiceMeta.error,label:/*i18n*/i18n._(\"Webhook Service\"),labelIcon:/*#__PURE__*/_jsx(Popover,{content:helpText.webhookService}),children:/*#__PURE__*/_jsx(AnsibleSelect,_objectSpread(_objectSpread({},webhookServiceField),{},{id:\"webhook_service\",data:webhookServiceOptions,onChange:function onChange(event,val){webhookServiceHelpers.setValue(val);webhookUrlHelpers.setValue(pathname.endsWith('/add')?/*i18n*/i18n._(\"a new webhook url will be generated on save.\").toUpperCase():\"\".concat(origin,\"/api/v2/\").concat(templateType,\"s/\").concat(id,\"/\").concat(val,\"/\"));if(val===webhookServiceMeta.initialValue||val===''){webhookKeyHelpers.setValue(webhookKeyMeta.initialValue);webhookCredentialHelpers.setValue(webhookCredentialMeta.initialValue);}else{webhookKeyHelpers.setValue(/*i18n*/i18n._(\"a new webhook key will be generated on save.\").toUpperCase());webhookCredentialHelpers.setValue(null);}}}))}),/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FormGroup,{type:\"text\",fieldId:\"jt-webhookURL\",label:/*i18n*/i18n._(\"Webhook URL\"),labelIcon:/*#__PURE__*/_jsx(Popover,{content:helpText.webhookURL}),name:\"webhook_url\",children:/*#__PURE__*/_jsx(TextInput,{id:\"t-webhookURL\",\"aria-label\":/*i18n*/i18n._(\"Webhook URL\"),value:webhookUrlField.value,isReadOnly:true})}),/*#__PURE__*/_jsx(FormGroup,{label:/*i18n*/i18n._(\"Webhook Key\"),labelIcon:/*#__PURE__*/_jsx(Popover,{content:helpText.webhookKey}),fieldId:\"template-webhook_key\",children:/*#__PURE__*/_jsxs(InputGroup,{children:[/*#__PURE__*/_jsx(TextInput,{id:\"template-webhook_key\",isReadOnly:true,\"aria-label\":/*i18n*/i18n._(\"workflow job template webhook key\"),value:webhookKeyField.value}),/*#__PURE__*/_jsx(Button,{ouiaId:\"update-webhook-key-button\",isDisabled:isUpdateKeyDisabled,variant:\"tertiary\",\"aria-label\":/*i18n*/i18n._(\"Update webhook key\"),onClick:changeWebhookKey,children:/*#__PURE__*/_jsx(SyncAltIcon,{})})]})})]}),credTypeId&&/*#__PURE__*/_jsx(CredentialLookup,{label:/*i18n*/i18n._(\"Webhook Credential\"),tooltip:helpText.webhookCredential,credentialTypeId:credTypeId,onChange:onCredentialChange,isValid:!webhookCredentialMeta.error,helperTextInvalid:webhookCredentialMeta.error,value:webhookCredentialField.value,fieldName:\"webhook_credential\"})]});}export default WebhookSubForm;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/Template/shared/WebhookSubForm.js"],"names":["React","useEffect","useCallback","SyncAltIcon","useParams","useLocation","FormGroup","TextInput","InputGroup","Button","useField","useFormikContext","ContentError","ContentLoading","useRequest","FormColumnLayout","CredentialLookup","AnsibleSelect","Popover","JobTemplatesAPI","WorkflowJobTemplatesAPI","CredentialTypesAPI","helpText","WebhookSubForm","templateType","setFieldValue","id","pathname","origin","document","location","webhookServiceField","webhookServiceMeta","webhookServiceHelpers","webhookUrlField","webhookUrlHelpers","webhookKeyField","webhookKeyMeta","webhookKeyHelpers","webhookCredentialField","webhookCredentialMeta","webhookCredentialHelpers","value","read","namespace","results","data","loadCredentialType","request","error","isLoading","credTypeId","result","updateWebhookKey","key","webhook_key","setValue","fetchWebhookKey","webhookKeyError","changeWebhookKey","onCredentialChange","isUpdateKeyDisabled","endsWith","initialValue","webhookServiceOptions","label","isDisabled","webhookService","event","val","toUpperCase","webhookURL","webhookKey","webhookCredential"],"mappings":"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","sourcesContent":["import React, { useEffect, useCallback } from 'react';\nimport { SyncAltIcon } from '@patternfly/react-icons';\nimport { useParams, useLocation } from 'react-router-dom';\nimport { t } from '@lingui/macro';\n\nimport {\n  FormGroup,\n  TextInput,\n  InputGroup,\n  Button,\n} from '@patternfly/react-core';\nimport { useField, useFormikContext } from 'formik';\nimport ContentError from 'components/ContentError';\nimport ContentLoading from 'components/ContentLoading';\nimport useRequest from 'hooks/useRequest';\nimport { FormColumnLayout } from 'components/FormLayout';\nimport { CredentialLookup } from 'components/Lookup';\nimport AnsibleSelect from 'components/AnsibleSelect';\nimport Popover from 'components/Popover';\nimport {\n  JobTemplatesAPI,\n  WorkflowJobTemplatesAPI,\n  CredentialTypesAPI,\n} from 'api';\nimport helpText from './WorkflowJobTemplate.helptext';\n\nfunction WebhookSubForm({ templateType }) {\n  const { setFieldValue } = useFormikContext();\n  const { id } = useParams();\n  const { pathname } = useLocation();\n  const { origin } = document.location;\n\n  const [webhookServiceField, webhookServiceMeta, webhookServiceHelpers] =\n    useField('webhook_service');\n  const [webhookUrlField, , webhookUrlHelpers] = useField('webhook_url');\n  const [webhookKeyField, webhookKeyMeta, webhookKeyHelpers] =\n    useField('webhook_key');\n  const [\n    webhookCredentialField,\n    webhookCredentialMeta,\n    webhookCredentialHelpers,\n  ] = useField('webhook_credential');\n\n  const {\n    request: loadCredentialType,\n    error,\n    isLoading,\n    result: credTypeId,\n  } = useRequest(\n    useCallback(async () => {\n      let results;\n      if (webhookServiceField.value) {\n        results = await CredentialTypesAPI.read({\n          namespace: `${webhookServiceField.value}_token`,\n        });\n        // TODO: Consider how to handle the situation where the results returns\n        // and empty array, or any of the other values is undefined or null (data, results, id)\n      }\n      return results?.data?.results[0]?.id;\n    }, [webhookServiceField.value])\n  );\n\n  useEffect(() => {\n    loadCredentialType();\n  }, [loadCredentialType]);\n\n  const { request: fetchWebhookKey, error: webhookKeyError } = useRequest(\n    useCallback(async () => {\n      const updateWebhookKey =\n        templateType === 'job_template'\n          ? JobTemplatesAPI.updateWebhookKey(id)\n          : WorkflowJobTemplatesAPI.updateWebhookKey(id);\n      const {\n        data: { webhook_key: key },\n      } = await updateWebhookKey;\n      webhookKeyHelpers.setValue(key);\n    }, [webhookKeyHelpers, id, templateType])\n  );\n\n  const changeWebhookKey = async () => {\n    await fetchWebhookKey();\n  };\n\n  const onCredentialChange = useCallback(\n    (value) => {\n      setFieldValue('webhook_credential', value || null);\n    },\n    [setFieldValue]\n  );\n\n  const isUpdateKeyDisabled =\n    pathname.endsWith('/add') ||\n    webhookKeyMeta.initialValue ===\n      'A NEW WEBHOOK KEY WILL BE GENERATED ON SAVE.';\n  const webhookServiceOptions = [\n    {\n      value: '',\n      key: '',\n      label: t`Choose a Webhook Service`,\n      isDisabled: true,\n    },\n    {\n      value: 'github',\n      key: 'github',\n      label: t`GitHub`,\n      isDisabled: false,\n    },\n    {\n      value: 'gitlab',\n      key: 'gitlab',\n      label: t`GitLab`,\n      isDisabled: false,\n    },\n  ];\n\n  if (error || webhookKeyError) {\n    return <ContentError error={error} />;\n  }\n  if (isLoading) {\n    return <ContentLoading />;\n  }\n  return (\n    <FormColumnLayout>\n      <FormGroup\n        name=\"webhook_service\"\n        fieldId=\"webhook_service\"\n        helperTextInvalid={webhookServiceMeta.error}\n        label={t`Webhook Service`}\n        labelIcon={<Popover content={helpText.webhookService} />}\n      >\n        <AnsibleSelect\n          {...webhookServiceField}\n          id=\"webhook_service\"\n          data={webhookServiceOptions}\n          onChange={(event, val) => {\n            webhookServiceHelpers.setValue(val);\n            webhookUrlHelpers.setValue(\n              pathname.endsWith('/add')\n                ? t`a new webhook url will be generated on save.`.toUpperCase()\n                : `${origin}/api/v2/${templateType}s/${id}/${val}/`\n            );\n            if (val === webhookServiceMeta.initialValue || val === '') {\n              webhookKeyHelpers.setValue(webhookKeyMeta.initialValue);\n              webhookCredentialHelpers.setValue(\n                webhookCredentialMeta.initialValue\n              );\n            } else {\n              webhookKeyHelpers.setValue(\n                t`a new webhook key will be generated on save.`.toUpperCase()\n              );\n              webhookCredentialHelpers.setValue(null);\n            }\n          }}\n        />\n      </FormGroup>\n      <>\n        <FormGroup\n          type=\"text\"\n          fieldId=\"jt-webhookURL\"\n          label={t`Webhook URL`}\n          labelIcon={<Popover content={helpText.webhookURL} />}\n          name=\"webhook_url\"\n        >\n          <TextInput\n            id=\"t-webhookURL\"\n            aria-label={t`Webhook URL`}\n            value={webhookUrlField.value}\n            isReadOnly\n          />\n        </FormGroup>\n        <FormGroup\n          label={t`Webhook Key`}\n          labelIcon={<Popover content={helpText.webhookKey} />}\n          fieldId=\"template-webhook_key\"\n        >\n          <InputGroup>\n            <TextInput\n              id=\"template-webhook_key\"\n              isReadOnly\n              aria-label={t`workflow job template webhook key`}\n              value={webhookKeyField.value}\n            />\n            <Button\n              ouiaId=\"update-webhook-key-button\"\n              isDisabled={isUpdateKeyDisabled}\n              variant=\"tertiary\"\n              aria-label={t`Update webhook key`}\n              onClick={changeWebhookKey}\n            >\n              <SyncAltIcon />\n            </Button>\n          </InputGroup>\n        </FormGroup>\n      </>\n\n      {credTypeId && (\n        <CredentialLookup\n          label={t`Webhook Credential`}\n          tooltip={helpText.webhookCredential}\n          credentialTypeId={credTypeId}\n          onChange={onCredentialChange}\n          isValid={!webhookCredentialMeta.error}\n          helperTextInvalid={webhookCredentialMeta.error}\n          value={webhookCredentialField.value}\n          fieldName=\"webhook_credential\"\n        />\n      )}\n    </FormColumnLayout>\n  );\n}\nexport default WebhookSubForm;\n"]},"metadata":{},"sourceType":"module"}