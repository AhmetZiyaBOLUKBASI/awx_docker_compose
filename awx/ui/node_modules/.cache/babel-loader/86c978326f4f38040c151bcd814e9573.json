{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useCallback}from'react';import{Link,useHistory}from'react-router-dom';import{Button,Label}from'@patternfly/react-core';import AlertModal from'components/AlertModal';import{CardBody,CardActionsRow}from'components/Card';import DeleteButton from'components/DeleteButton';import{DetailList,Detail}from'components/DetailList';import ErrorDetail from'components/ErrorDetail';import{formatDateString}from'util/dates';import{UsersAPI}from'api';import useRequest,{useDismissableError}from'hooks/useRequest';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UserDetail(_ref){var user=_ref.user;var id=user.id,username=user.username,email=user.email,first_name=user.first_name,last_name=user.last_name,last_login=user.last_login,created=user.created,modified=user.modified,is_superuser=user.is_superuser,is_system_auditor=user.is_system_auditor,summary_fields=user.summary_fields;var history=useHistory();var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return UsersAPI.destroy(id);case 2:history.push(\"/users\");case 3:case\"end\":return _context.stop();}}},_callee);})),[id,history])),deleteUser=_useRequest.request,isLoading=_useRequest.isLoading,deleteError=_useRequest.error;var _useDismissableError=useDismissableError(deleteError),error=_useDismissableError.error,dismissError=_useDismissableError.dismissError;var user_type;if(is_superuser){user_type=/*i18n*/i18n._(\"System Administrator\");}else if(is_system_auditor){user_type=/*i18n*/i18n._(\"System Auditor\");}else{user_type=/*i18n*/i18n._(\"Normal User\");}var userAuthType;if(user.ldap_dn){userAuthType=/*i18n*/i18n._(\"LDAP\");}else if(user.auth.length>0){userAuthType=/*i18n*/i18n._(\"SOCIAL\");}return/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsxs(DetailList,{children:[/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"First Name\"),value:\"\".concat(first_name)}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Last Name\"),value:\"\".concat(last_name)}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Email\"),value:email}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Username\"),value:username,dataCy:\"user-detail-username\"}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"User Type\"),value:\"\".concat(user_type)}),userAuthType&&/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Type\"),value:/*#__PURE__*/_jsx(Label,{\"aria-label\":/*i18n*/i18n._(\"login type\"),children:userAuthType})}),last_login&&/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Last Login\"),value:formatDateString(last_login)}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Created\"),value:formatDateString(created)}),modified&&/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Last Modified\"),value:formatDateString(modified)})]}),/*#__PURE__*/_jsxs(CardActionsRow,{children:[summary_fields.user_capabilities&&summary_fields.user_capabilities.edit&&/*#__PURE__*/_jsx(Button,{ouiaId:\"user-detail-edit-button\",\"aria-label\":/*i18n*/i18n._(\"edit\"),component:Link,to:\"/users/\".concat(id,\"/edit\"),children:/*i18n*/i18n._(\"Edit\")}),summary_fields.user_capabilities&&summary_fields.user_capabilities.delete&&/*#__PURE__*/_jsx(DeleteButton,{name:username,modalTitle:/*i18n*/i18n._(\"Delete User\"),onConfirm:deleteUser,isDisabled:isLoading,children:/*i18n*/i18n._(\"Delete\")})]}),error&&/*#__PURE__*/_jsxs(AlertModal,{isOpen:error,variant:\"error\",title:/*i18n*/i18n._(\"Error!\"),onClose:dismissError,children:[/*i18n*/i18n._(\"Failed to delete user.\"),/*#__PURE__*/_jsx(ErrorDetail,{error:error})]})]});}export default UserDetail;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/User/UserDetail/UserDetail.js"],"names":["React","useCallback","Link","useHistory","Button","Label","AlertModal","CardBody","CardActionsRow","DeleteButton","DetailList","Detail","ErrorDetail","formatDateString","UsersAPI","useRequest","useDismissableError","UserDetail","user","id","username","email","first_name","last_name","last_login","created","modified","is_superuser","is_system_auditor","summary_fields","history","destroy","push","deleteUser","request","isLoading","deleteError","error","dismissError","user_type","userAuthType","ldap_dn","auth","length","user_capabilities","edit","delete"],"mappings":"gPAAA,MAAOA,CAAAA,KAAP,EAAgBC,WAAhB,KAAmC,OAAnC,CACA,OAASC,IAAT,CAAeC,UAAf,KAAiC,kBAAjC,CAIA,OAASC,MAAT,CAAiBC,KAAjB,KAA8B,wBAA9B,CACA,MAAOC,CAAAA,UAAP,KAAuB,uBAAvB,CACA,OAASC,QAAT,CAAmBC,cAAnB,KAAyC,iBAAzC,CACA,MAAOC,CAAAA,YAAP,KAAyB,yBAAzB,CACA,OAASC,UAAT,CAAqBC,MAArB,KAAmC,uBAAnC,CACA,MAAOC,CAAAA,WAAP,KAAwB,wBAAxB,CACA,OAASC,gBAAT,KAAiC,YAAjC,CACA,OAASC,QAAT,KAAyB,KAAzB,CACA,MAAOC,CAAAA,UAAP,EAAqBC,mBAArB,KAAgD,kBAAhD,C,wFAEA,QAASC,CAAAA,UAAT,MAA8B,IAARC,CAAAA,IAAQ,MAARA,IAAQ,CAC5B,GACEC,CAAAA,EADF,CAYID,IAZJ,CACEC,EADF,CAEEC,QAFF,CAYIF,IAZJ,CAEEE,QAFF,CAGEC,KAHF,CAYIH,IAZJ,CAGEG,KAHF,CAIEC,UAJF,CAYIJ,IAZJ,CAIEI,UAJF,CAKEC,SALF,CAYIL,IAZJ,CAKEK,SALF,CAMEC,UANF,CAYIN,IAZJ,CAMEM,UANF,CAOEC,OAPF,CAYIP,IAZJ,CAOEO,OAPF,CAQEC,QARF,CAYIR,IAZJ,CAQEQ,QARF,CASEC,YATF,CAYIT,IAZJ,CASES,YATF,CAUEC,iBAVF,CAYIV,IAZJ,CAUEU,iBAVF,CAWEC,cAXF,CAYIX,IAZJ,CAWEW,cAXF,CAaA,GAAMC,CAAAA,OAAO,CAAG3B,UAAU,EAA1B,CAEA,gBAIIY,UAAU,CACZd,WAAW,sEAAC,yJACJa,CAAAA,QAAQ,CAACiB,OAAT,CAAiBZ,EAAjB,CADI,QAEVW,OAAO,CAACE,IAAR,WAFU,sDAAD,GAGR,CAACb,EAAD,CAAKW,OAAL,CAHQ,CADC,CAJd,CACWG,UADX,aACEC,OADF,CAEEC,SAFF,aAEEA,SAFF,CAGSC,WAHT,aAGEC,KAHF,CAWA,yBAAgCrB,mBAAmB,CAACoB,WAAD,CAAnD,CAAQC,KAAR,sBAAQA,KAAR,CAAeC,YAAf,sBAAeA,YAAf,CAEA,GAAIC,CAAAA,SAAJ,CACA,GAAIZ,YAAJ,CAAkB,CAChBY,SAAS,SAAG,8BAAZ,CACD,CAFD,IAEO,IAAIX,iBAAJ,CAAuB,CAC5BW,SAAS,SAAG,wBAAZ,CACD,CAFM,IAEA,CACLA,SAAS,SAAG,qBAAZ,CACD,CAED,GAAIC,CAAAA,YAAJ,CACA,GAAItB,IAAI,CAACuB,OAAT,CAAkB,CAChBD,YAAY,SAAG,cAAf,CACD,CAFD,IAEO,IAAItB,IAAI,CAACwB,IAAL,CAAUC,MAAV,CAAmB,CAAvB,CAA0B,CAC/BH,YAAY,SAAG,gBAAf,CACD,CAED,mBACE,MAAC,QAAD,yBACE,MAAC,UAAD,yBACE,KAAC,MAAD,EAAQ,KAAK,SAAE,oBAAf,CAA8B,KAAK,WAAKlB,UAAL,CAAnC,EADF,cAEE,KAAC,MAAD,EAAQ,KAAK,SAAE,mBAAf,CAA6B,KAAK,WAAKC,SAAL,CAAlC,EAFF,cAGE,KAAC,MAAD,EAAQ,KAAK,SAAE,eAAf,CAAyB,KAAK,CAAEF,KAAhC,EAHF,cAIE,KAAC,MAAD,EACE,KAAK,SAAE,kBADT,CAEE,KAAK,CAAED,QAFT,CAGE,MAAM,CAAC,sBAHT,EAJF,cASE,KAAC,MAAD,EAAQ,KAAK,SAAE,mBAAf,CAA6B,KAAK,WAAKmB,SAAL,CAAlC,EATF,CAUGC,YAAY,eACX,KAAC,MAAD,EACE,KAAK,SAAE,cADT,CAEE,KAAK,cAAE,KAAC,KAAD,EAAO,qBAAY,oBAAnB,UAAmCA,YAAnC,EAFT,EAXJ,CAgBGhB,UAAU,eACT,KAAC,MAAD,EAAQ,KAAK,SAAE,oBAAf,CAA8B,KAAK,CAAEX,gBAAgB,CAACW,UAAD,CAArD,EAjBJ,cAmBE,KAAC,MAAD,EAAQ,KAAK,SAAE,iBAAf,CAA2B,KAAK,CAAEX,gBAAgB,CAACY,OAAD,CAAlD,EAnBF,CAoBGC,QAAQ,eACP,KAAC,MAAD,EAAQ,KAAK,SAAE,uBAAf,CAAiC,KAAK,CAAEb,gBAAgB,CAACa,QAAD,CAAxD,EArBJ,GADF,cAyBE,MAAC,cAAD,YACGG,cAAc,CAACe,iBAAf,EACCf,cAAc,CAACe,iBAAf,CAAiCC,IADlC,eAEG,KAAC,MAAD,EACE,MAAM,CAAC,yBADT,CAEE,qBAAY,cAFd,CAGE,SAAS,CAAE3C,IAHb,CAIE,EAAE,kBAAYiB,EAAZ,SAJJ,kBAMG,cANH,EAHN,CAYGU,cAAc,CAACe,iBAAf,EACCf,cAAc,CAACe,iBAAf,CAAiCE,MADlC,eAEG,KAAC,YAAD,EACE,IAAI,CAAE1B,QADR,CAEE,UAAU,SAAE,qBAFd,CAGE,SAAS,CAAEa,UAHb,CAIE,UAAU,CAAEE,SAJd,kBAMG,gBANH,EAdN,GAzBF,CAiDGE,KAAK,eACJ,MAAC,UAAD,EACE,MAAM,CAAEA,KADV,CAEE,OAAO,CAAC,OAFV,CAGE,KAAK,SAAE,gBAHT,CAIE,OAAO,CAAEC,YAJX,mBAMG,gCANH,cAOE,KAAC,WAAD,EAAa,KAAK,CAAED,KAApB,EAPF,GAlDJ,GADF,CA+DD,CAED,cAAepB,CAAAA,UAAf","sourcesContent":["import React, { useCallback } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\n\nimport { t } from '@lingui/macro';\n\nimport { Button, Label } from '@patternfly/react-core';\nimport AlertModal from 'components/AlertModal';\nimport { CardBody, CardActionsRow } from 'components/Card';\nimport DeleteButton from 'components/DeleteButton';\nimport { DetailList, Detail } from 'components/DetailList';\nimport ErrorDetail from 'components/ErrorDetail';\nimport { formatDateString } from 'util/dates';\nimport { UsersAPI } from 'api';\nimport useRequest, { useDismissableError } from 'hooks/useRequest';\n\nfunction UserDetail({ user }) {\n  const {\n    id,\n    username,\n    email,\n    first_name,\n    last_name,\n    last_login,\n    created,\n    modified,\n    is_superuser,\n    is_system_auditor,\n    summary_fields,\n  } = user;\n  const history = useHistory();\n\n  const {\n    request: deleteUser,\n    isLoading,\n    error: deleteError,\n  } = useRequest(\n    useCallback(async () => {\n      await UsersAPI.destroy(id);\n      history.push(`/users`);\n    }, [id, history])\n  );\n\n  const { error, dismissError } = useDismissableError(deleteError);\n\n  let user_type;\n  if (is_superuser) {\n    user_type = t`System Administrator`;\n  } else if (is_system_auditor) {\n    user_type = t`System Auditor`;\n  } else {\n    user_type = t`Normal User`;\n  }\n\n  let userAuthType;\n  if (user.ldap_dn) {\n    userAuthType = t`LDAP`;\n  } else if (user.auth.length > 0) {\n    userAuthType = t`SOCIAL`;\n  }\n\n  return (\n    <CardBody>\n      <DetailList>\n        <Detail label={t`First Name`} value={`${first_name}`} />\n        <Detail label={t`Last Name`} value={`${last_name}`} />\n        <Detail label={t`Email`} value={email} />\n        <Detail\n          label={t`Username`}\n          value={username}\n          dataCy=\"user-detail-username\"\n        />\n        <Detail label={t`User Type`} value={`${user_type}`} />\n        {userAuthType && (\n          <Detail\n            label={t`Type`}\n            value={<Label aria-label={t`login type`}>{userAuthType}</Label>}\n          />\n        )}\n        {last_login && (\n          <Detail label={t`Last Login`} value={formatDateString(last_login)} />\n        )}\n        <Detail label={t`Created`} value={formatDateString(created)} />\n        {modified && (\n          <Detail label={t`Last Modified`} value={formatDateString(modified)} />\n        )}\n      </DetailList>\n      <CardActionsRow>\n        {summary_fields.user_capabilities &&\n          summary_fields.user_capabilities.edit && (\n            <Button\n              ouiaId=\"user-detail-edit-button\"\n              aria-label={t`edit`}\n              component={Link}\n              to={`/users/${id}/edit`}\n            >\n              {t`Edit`}\n            </Button>\n          )}\n        {summary_fields.user_capabilities &&\n          summary_fields.user_capabilities.delete && (\n            <DeleteButton\n              name={username}\n              modalTitle={t`Delete User`}\n              onConfirm={deleteUser}\n              isDisabled={isLoading}\n            >\n              {t`Delete`}\n            </DeleteButton>\n          )}\n      </CardActionsRow>\n      {error && (\n        <AlertModal\n          isOpen={error}\n          variant=\"error\"\n          title={t`Error!`}\n          onClose={dismissError}\n        >\n          {t`Failed to delete user.`}\n          <ErrorDetail error={error} />\n        </AlertModal>\n      )}\n    </CardBody>\n  );\n}\n\nexport default UserDetail;\n"]},"metadata":{},"sourceType":"module"}