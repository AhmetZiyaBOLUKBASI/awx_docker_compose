{"ast":null,"code":"import _defineProperty from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{i18n}from\"@lingui/core\";import React,{useState,useCallback,useRef}from'react';import{Route,withRouter,Switch}from'react-router-dom';import{PageSection}from'@patternfly/react-core';import ScreenHeader from'components/ScreenHeader/ScreenHeader';import TemplateList from'components/TemplateList';import PersistentFilters from'components/PersistentFilters';import Template from'./Template';import WorkflowJobTemplate from'./WorkflowJobTemplate';import JobTemplateAdd from'./JobTemplateAdd';import WorkflowJobTemplateAdd from'./WorkflowJobTemplateAdd';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Templates(){var initScreenHeader=useRef({'/templates':/*i18n*/i18n._(\"Templates\"),'/templates/job_template/add':/*i18n*/i18n._(\"Create New Job Template\"),'/templates/workflow_job_template/add':/*i18n*/i18n._(\"Create New Workflow Template\")});var _useState=useState(initScreenHeader.current),_useState2=_slicedToArray(_useState,2),breadcrumbConfig=_useState2[0],setScreenHeader=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),schedule=_useState4[0],setSchedule=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),template=_useState6[0],setTemplate=_useState6[1];var setBreadcrumbConfig=useCallback(function(passedTemplate,passedSchedule){var _objectSpread2;if(passedTemplate&&passedTemplate.name!==(template===null||template===void 0?void 0:template.name)){setTemplate(passedTemplate);}if(passedSchedule&&passedSchedule.name!==(schedule===null||schedule===void 0?void 0:schedule.name)){setSchedule(passedSchedule);}if(!template)return;var templatePath=\"/templates/\".concat(template.type,\"/\").concat(template.id);var schedulesPath=\"\".concat(templatePath,\"/schedules\");var surveyPath=\"\".concat(templatePath,\"/survey\");setScreenHeader(_objectSpread(_objectSpread({},initScreenHeader.current),{},(_objectSpread2={},_defineProperty(_objectSpread2,templatePath,\"\".concat(template.name)),_defineProperty(_objectSpread2,\"\".concat(templatePath,\"/details\"),/*i18n*/i18n._(\"Details\")),_defineProperty(_objectSpread2,\"\".concat(templatePath,\"/edit\"),/*i18n*/i18n._(\"Edit Details\")),_defineProperty(_objectSpread2,\"\".concat(templatePath,\"/access\"),/*i18n*/i18n._(\"Access\")),_defineProperty(_objectSpread2,\"\".concat(templatePath,\"/notifications\"),/*i18n*/i18n._(\"Notifications\")),_defineProperty(_objectSpread2,\"\".concat(templatePath,\"/jobs\"),/*i18n*/i18n._(\"Jobs\")),_defineProperty(_objectSpread2,surveyPath,/*i18n*/i18n._(\"Survey\")),_defineProperty(_objectSpread2,\"\".concat(surveyPath,\"/add\"),/*i18n*/i18n._(\"Add Question\")),_defineProperty(_objectSpread2,\"\".concat(surveyPath,\"/edit\"),/*i18n*/i18n._(\"Edit Question\")),_defineProperty(_objectSpread2,schedulesPath,/*i18n*/i18n._(\"Schedules\")),_defineProperty(_objectSpread2,\"\".concat(schedulesPath,\"/add\"),/*i18n*/i18n._(\"Create New Schedule\")),_defineProperty(_objectSpread2,\"\".concat(schedulesPath,\"/\").concat(schedule===null||schedule===void 0?void 0:schedule.id),\"\".concat(schedule===null||schedule===void 0?void 0:schedule.name)),_defineProperty(_objectSpread2,\"\".concat(schedulesPath,\"/\").concat(schedule===null||schedule===void 0?void 0:schedule.id,\"/details\"),/*i18n*/i18n._(\"Schedule Details\")),_defineProperty(_objectSpread2,\"\".concat(schedulesPath,\"/\").concat(schedule===null||schedule===void 0?void 0:schedule.id,\"/edit\"),/*i18n*/i18n._(\"Edit Schedule\")),_objectSpread2)));},[template,schedule]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ScreenHeader,{streamType:\"job_template,workflow_job_template,workflow_job_template_node\",breadcrumbConfig:breadcrumbConfig}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/templates/job_template/add\",children:/*#__PURE__*/_jsx(JobTemplateAdd,{})}),/*#__PURE__*/_jsx(Route,{path:\"/templates/workflow_job_template/add\",children:/*#__PURE__*/_jsx(WorkflowJobTemplateAdd,{})}),/*#__PURE__*/_jsx(Route,{path:\"/templates/job_template/:id\",children:/*#__PURE__*/_jsx(Template,{setBreadcrumb:setBreadcrumbConfig})}),/*#__PURE__*/_jsx(Route,{path:\"/templates/workflow_job_template/:id\",children:/*#__PURE__*/_jsx(WorkflowJobTemplate,{setBreadcrumb:setBreadcrumbConfig})}),/*#__PURE__*/_jsx(Route,{path:\"/templates\",children:/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsx(PersistentFilters,{pageKey:\"templates\",children:/*#__PURE__*/_jsx(TemplateList,{})})})})]})]});}export{Templates as _Templates};export default withRouter(Templates);","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/Template/Templates.js"],"names":["React","useState","useCallback","useRef","Route","withRouter","Switch","PageSection","ScreenHeader","TemplateList","PersistentFilters","Template","WorkflowJobTemplate","JobTemplateAdd","WorkflowJobTemplateAdd","Templates","initScreenHeader","current","breadcrumbConfig","setScreenHeader","schedule","setSchedule","template","setTemplate","setBreadcrumbConfig","passedTemplate","passedSchedule","name","templatePath","type","id","schedulesPath","surveyPath","_Templates"],"mappings":"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","sourcesContent":["import React, { useState, useCallback, useRef } from 'react';\n\nimport { t } from '@lingui/macro';\nimport { Route, withRouter, Switch } from 'react-router-dom';\nimport { PageSection } from '@patternfly/react-core';\n\nimport ScreenHeader from 'components/ScreenHeader/ScreenHeader';\nimport TemplateList from 'components/TemplateList';\nimport PersistentFilters from 'components/PersistentFilters';\nimport Template from './Template';\nimport WorkflowJobTemplate from './WorkflowJobTemplate';\nimport JobTemplateAdd from './JobTemplateAdd';\nimport WorkflowJobTemplateAdd from './WorkflowJobTemplateAdd';\n\nfunction Templates() {\n  const initScreenHeader = useRef({\n    '/templates': t`Templates`,\n    '/templates/job_template/add': t`Create New Job Template`,\n    '/templates/workflow_job_template/add': t`Create New Workflow Template`,\n  });\n  const [breadcrumbConfig, setScreenHeader] = useState(\n    initScreenHeader.current\n  );\n\n  const [schedule, setSchedule] = useState();\n  const [template, setTemplate] = useState();\n\n  const setBreadcrumbConfig = useCallback(\n    (passedTemplate, passedSchedule) => {\n      if (passedTemplate && passedTemplate.name !== template?.name) {\n        setTemplate(passedTemplate);\n      }\n      if (passedSchedule && passedSchedule.name !== schedule?.name) {\n        setSchedule(passedSchedule);\n      }\n      if (!template) return;\n      const templatePath = `/templates/${template.type}/${template.id}`;\n      const schedulesPath = `${templatePath}/schedules`;\n      const surveyPath = `${templatePath}/survey`;\n      setScreenHeader({\n        ...initScreenHeader.current,\n        [templatePath]: `${template.name}`,\n        [`${templatePath}/details`]: t`Details`,\n        [`${templatePath}/edit`]: t`Edit Details`,\n        [`${templatePath}/access`]: t`Access`,\n        [`${templatePath}/notifications`]: t`Notifications`,\n        [`${templatePath}/jobs`]: t`Jobs`,\n        [surveyPath]: t`Survey`,\n        [`${surveyPath}/add`]: t`Add Question`,\n        [`${surveyPath}/edit`]: t`Edit Question`,\n        [schedulesPath]: t`Schedules`,\n        [`${schedulesPath}/add`]: t`Create New Schedule`,\n        [`${schedulesPath}/${schedule?.id}`]: `${schedule?.name}`,\n        [`${schedulesPath}/${schedule?.id}/details`]: t`Schedule Details`,\n        [`${schedulesPath}/${schedule?.id}/edit`]: t`Edit Schedule`,\n      });\n    },\n    [template, schedule]\n  );\n\n  return (\n    <>\n      <ScreenHeader\n        streamType=\"job_template,workflow_job_template,workflow_job_template_node\"\n        breadcrumbConfig={breadcrumbConfig}\n      />\n      <Switch>\n        <Route path=\"/templates/job_template/add\">\n          <JobTemplateAdd />\n        </Route>\n        <Route path=\"/templates/workflow_job_template/add\">\n          <WorkflowJobTemplateAdd />\n        </Route>\n        <Route path=\"/templates/job_template/:id\">\n          <Template setBreadcrumb={setBreadcrumbConfig} />\n        </Route>\n        <Route path=\"/templates/workflow_job_template/:id\">\n          <WorkflowJobTemplate setBreadcrumb={setBreadcrumbConfig} />\n        </Route>\n        <Route path=\"/templates\">\n          <PageSection>\n            <PersistentFilters pageKey=\"templates\">\n              <TemplateList />\n            </PersistentFilters>\n          </PageSection>\n        </Route>\n      </Switch>\n    </>\n  );\n}\n\nexport { Templates as _Templates };\nexport default withRouter(Templates);\n"]},"metadata":{},"sourceType":"module"}