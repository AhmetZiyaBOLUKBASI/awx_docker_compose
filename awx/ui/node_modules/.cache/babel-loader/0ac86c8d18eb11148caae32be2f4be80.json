{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _styled2 from\"styled-components\";import _styled from\"styled-components\";import{i18n}from\"@lingui/core\";import React,{useState}from'react';import styled from'styled-components';import{Card as PFCard,CardBody as PFCardBody,ExpandableSection as PFExpandable}from'@patternfly/react-core';import getErrorMessage from'./getErrorMessage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Card=styled(PFCard).withConfig({displayName:\"ErrorDetail__Card\",componentId:\"sc-1grrpky-0\"})([\"background-color:var(--pf-global--BackgroundColor--200);overflow-wrap:break-word;\"]);var CardBody=styled(PFCardBody).withConfig({displayName:\"ErrorDetail__CardBody\",componentId:\"sc-1grrpky-1\"})([\"max-height:200px;overflow:scroll;\"]);var _StyledCardBody2=styled(CardBody).withConfig({displayName:\"ErrorDetail___StyledCardBody2\",componentId:\"sc-1grrpky-2\"})([\"white-space:pre;font-family:var(--pf-global--FontFamily--monospace)\"]);var _StyledCardBody=styled(CardBody).withConfig({displayName:\"ErrorDetail___StyledCardBody\",componentId:\"sc-1grrpky-3\"})([\"max-width:70vw\"]);var Expandable=styled(PFExpandable).withConfig({displayName:\"ErrorDetail__Expandable\",componentId:\"sc-1grrpky-4\"})([\"text-align:left;max-width:75vw;& .pf-c-expandable__toggle{padding-left:10px;margin-left:5px;margin-top:10px;margin-bottom:10px;}\"]);function ErrorDetail(_ref){var error=_ref.error;var response=error.response;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isExpanded=_useState2[0],setIsExpanded=_useState2[1];if(!error){return null;}var handleToggle=function handleToggle(){setIsExpanded(!isExpanded);};var renderNetworkError=function renderNetworkError(){var _response$config,_response$config2;var message=getErrorMessage(response);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(CardBody,{children:[response===null||response===void 0?void 0:(_response$config=response.config)===null||_response$config===void 0?void 0:_response$config.method.toUpperCase(),\" \",response===null||response===void 0?void 0:(_response$config2=response.config)===null||_response$config2===void 0?void 0:_response$config2.url,' ',/*#__PURE__*/_jsx(\"strong\",{children:response===null||response===void 0?void 0:response.status})]}),/*#__PURE__*/_jsx(_StyledCardBody,{children:Array.isArray(message)?/*#__PURE__*/_jsx(\"ul\",{children:message.map(function(m){return typeof m==='string'?/*#__PURE__*/_jsx(\"li\",{children:m},m):null;})}):message})]});};var renderStack=function renderStack(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsxs(\"strong\",{children:[error.name,\": \",error.message]})}),/*#__PURE__*/_jsx(_StyledCardBody2,{children:error.stack})]});};return/*#__PURE__*/_jsx(Expandable,{toggleText:/*i18n*/i18n._(\"Details\"),onToggle:handleToggle,isExpanded:isExpanded,children:/*#__PURE__*/_jsx(Card,{children:Object.prototype.hasOwnProperty.call(error,'response')?renderNetworkError():renderStack()})});}ErrorDetail.defaultProps={error:null};export default ErrorDetail;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/components/ErrorDetail/ErrorDetail.js"],"names":["React","useState","styled","Card","PFCard","CardBody","PFCardBody","ExpandableSection","PFExpandable","getErrorMessage","Expandable","ErrorDetail","error","response","isExpanded","setIsExpanded","handleToggle","renderNetworkError","message","config","method","toUpperCase","url","status","Array","isArray","map","m","renderStack","name","stack","Object","prototype","hasOwnProperty","call","defaultProps"],"mappings":"qNACA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CAEA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CAIA,OACEC,IAAI,GAAIC,CAAAA,MADV,CAEEC,QAAQ,GAAIC,CAAAA,UAFd,CAGEC,iBAAiB,GAAIC,CAAAA,YAHvB,KAIO,wBAJP,CAKA,MAAOC,CAAAA,eAAP,KAA4B,mBAA5B,C,6IAEA,GAAMN,CAAAA,IAAI,CAAGD,MAAM,CAACE,MAAD,CAAT,gKAAV,CAKA,GAAMC,CAAAA,QAAQ,CAAGH,MAAM,CAACI,UAAD,CAAT,oHAAd,C,iVAKA,GAAMI,CAAAA,UAAU,CAAGR,MAAM,CAACM,YAAD,CAAT,qNAAhB,CAYA,QAASG,CAAAA,WAAT,MAAgC,IAATC,CAAAA,KAAS,MAATA,KAAS,CAC9B,GAAQC,CAAAA,QAAR,CAAqBD,KAArB,CAAQC,QAAR,CACA,cAAoCZ,QAAQ,CAAC,KAAD,CAA5C,wCAAOa,UAAP,eAAmBC,aAAnB,eAEA,GAAI,CAACH,KAAL,CAAY,CACV,MAAO,KAAP,CACD,CAED,GAAMI,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzBD,aAAa,CAAC,CAACD,UAAF,CAAb,CACD,CAFD,CAIA,GAAMG,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,EAAM,wCAC/B,GAAMC,CAAAA,OAAO,CAAGT,eAAe,CAACI,QAAD,CAA/B,CAEA,mBACE,wCACE,MAAC,QAAD,YACGA,QADH,SACGA,QADH,mCACGA,QAAQ,CAAEM,MADb,2CACG,iBAAkBC,MAAlB,CAAyBC,WAAzB,EADH,KAC4CR,QAD5C,SAC4CA,QAD5C,oCAC4CA,QAAQ,CAAEM,MADtD,4CAC4C,kBAAkBG,GAD9D,CACmE,GADnE,cAEE,wBAAST,QAAT,SAASA,QAAT,iBAASA,QAAQ,CAAEU,MAAnB,EAFF,GADF,cAKE,+BACGC,KAAK,CAACC,OAAN,CAAcP,OAAd,eACC,oBACGA,OAAO,CAACQ,GAAR,CAAY,SAACC,CAAD,QACX,OAAOA,CAAAA,CAAP,GAAa,QAAb,cAAwB,oBAAaA,CAAb,EAASA,CAAT,CAAxB,CAA+C,IADpC,EAAZ,CADH,EADD,CAOCT,OARJ,EALF,GADF,CAmBD,CAtBD,CAwBA,GAAMU,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,sBAClB,wCACE,KAAC,QAAD,wBACE,0BACGhB,KAAK,CAACiB,IADT,MACiBjB,KAAK,CAACM,OADvB,GADF,EADF,cAME,gCACGN,KAAK,CAACkB,KADT,EANF,GADkB,EAApB,CAaA,mBACE,KAAC,UAAD,EACE,UAAU,SAAE,iBADd,CAEE,QAAQ,CAAEd,YAFZ,CAGE,UAAU,CAAEF,UAHd,uBAKE,KAAC,IAAD,WACGiB,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCtB,KAArC,CAA4C,UAA5C,EACGK,kBAAkB,EADrB,CAEGW,WAAW,EAHjB,EALF,EADF,CAaD,CAKDjB,WAAW,CAACwB,YAAZ,CAA2B,CACzBvB,KAAK,CAAE,IADkB,CAA3B,CAIA,cAAeD,CAAAA,WAAf","sourcesContent":["import 'styled-components/macro';\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport { t } from '@lingui/macro';\n\nimport {\n  Card as PFCard,\n  CardBody as PFCardBody,\n  ExpandableSection as PFExpandable,\n} from '@patternfly/react-core';\nimport getErrorMessage from './getErrorMessage';\n\nconst Card = styled(PFCard)`\n  background-color: var(--pf-global--BackgroundColor--200);\n  overflow-wrap: break-word;\n`;\n\nconst CardBody = styled(PFCardBody)`\n  max-height: 200px;\n  overflow: scroll;\n`;\n\nconst Expandable = styled(PFExpandable)`\n  text-align: left;\n  max-width: 75vw;\n\n  & .pf-c-expandable__toggle {\n    padding-left: 10px;\n    margin-left: 5px;\n    margin-top: 10px;\n    margin-bottom: 10px;\n  }\n`;\n\nfunction ErrorDetail({ error }) {\n  const { response } = error;\n  const [isExpanded, setIsExpanded] = useState(false);\n\n  if (!error) {\n    return null;\n  }\n\n  const handleToggle = () => {\n    setIsExpanded(!isExpanded);\n  };\n\n  const renderNetworkError = () => {\n    const message = getErrorMessage(response);\n\n    return (\n      <>\n        <CardBody>\n          {response?.config?.method.toUpperCase()} {response?.config?.url}{' '}\n          <strong>{response?.status}</strong>\n        </CardBody>\n        <CardBody css=\"max-width: 70vw\">\n          {Array.isArray(message) ? (\n            <ul>\n              {message.map((m) =>\n                typeof m === 'string' ? <li key={m}>{m}</li> : null\n              )}\n            </ul>\n          ) : (\n            message\n          )}\n        </CardBody>\n      </>\n    );\n  };\n\n  const renderStack = () => (\n    <>\n      <CardBody>\n        <strong>\n          {error.name}: {error.message}\n        </strong>\n      </CardBody>\n      <CardBody css=\"white-space: pre; font-family: var(--pf-global--FontFamily--monospace)\">\n        {error.stack}\n      </CardBody>\n    </>\n  );\n\n  return (\n    <Expandable\n      toggleText={t`Details`}\n      onToggle={handleToggle}\n      isExpanded={isExpanded}\n    >\n      <Card>\n        {Object.prototype.hasOwnProperty.call(error, 'response')\n          ? renderNetworkError()\n          : renderStack()}\n      </Card>\n    </Expandable>\n  );\n}\n\nErrorDetail.propTypes = {\n  error: PropTypes.instanceOf(Error),\n};\nErrorDetail.defaultProps = {\n  error: null,\n};\n\nexport default ErrorDetail;\n"]},"metadata":{},"sourceType":"module"}