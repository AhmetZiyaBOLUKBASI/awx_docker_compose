{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import{i18n}from\"@lingui/core\";import React from'react';import{useField}from'formik';import{Button,Tooltip}from'@patternfly/react-core';import styled from'styled-components';import{jsx as _jsx}from\"react/jsx-runtime\";var ButtonWrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  margin-left: auto;\\n  &&& {\\n    --pf-c-button--FontSize: var(--pf-c-button--m-small--FontSize);\\n  }\\n\"])));function RevertButton(_ref){var _meta$initialValue;var id=_ref.id,defaultValue=_ref.defaultValue,_ref$isDisabled=_ref.isDisabled,isDisabled=_ref$isDisabled===void 0?false:_ref$isDisabled,_ref$onRevertCallback=_ref.onRevertCallback,onRevertCallback=_ref$onRevertCallback===void 0?function(){return null;}:_ref$onRevertCallback;var _useField=useField(id),_useField2=_slicedToArray(_useField,3),field=_useField2[0],meta=_useField2[1],helpers=_useField2[2];var initialValue=(_meta$initialValue=meta.initialValue)!==null&&_meta$initialValue!==void 0?_meta$initialValue:'';var currentValue=field.value;var isRevertable=true;var isMatch=false;if(currentValue===defaultValue&&currentValue!==initialValue){isRevertable=false;}if(currentValue===defaultValue&&currentValue===initialValue){isMatch=true;}var handleConfirm=function handleConfirm(){helpers.setValue(isRevertable?defaultValue:initialValue);onRevertCallback();};var revertTooltipContent=isRevertable?/*i18n*/i18n._(\"Revert to factory default.\"):/*i18n*/i18n._(\"Restore initial value.\");var tooltipContent=isDisabled||isMatch?/*i18n*/i18n._(\"Setting matches factory default.\"):revertTooltipContent;return/*#__PURE__*/_jsx(Tooltip,{entryDelay:700,content:tooltipContent,children:/*#__PURE__*/_jsx(ButtonWrapper,{children:/*#__PURE__*/_jsx(Button,{\"aria-label\":isRevertable?/*i18n*/i18n._(\"Revert\"):/*i18n*/i18n._(\"Undo\"),ouiaId:\"\".concat(id,\"-revert\"),isInline:true,isSmall:true,onClick:handleConfirm,type:\"button\",variant:\"link\",isDisabled:isDisabled||isMatch,children:isRevertable?/*i18n*/i18n._(\"Revert\"):/*i18n*/i18n._(\"Undo\")})})});}export default RevertButton;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/Setting/shared/RevertButton.js"],"names":["React","useField","Button","Tooltip","styled","ButtonWrapper","div","RevertButton","id","defaultValue","isDisabled","onRevertCallback","field","meta","helpers","initialValue","currentValue","value","isRevertable","isMatch","handleConfirm","setValue","revertTooltipContent","tooltipContent"],"mappings":"iRAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAIA,OAASC,QAAT,KAAyB,QAAzB,CACA,OAASC,MAAT,CAAiBC,OAAjB,KAAgC,wBAAhC,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,C,2CAEA,GAAMC,CAAAA,aAAa,CAAGD,MAAM,CAACE,GAAV,4KAAnB,CAOA,QAASC,CAAAA,YAAT,MAKG,2BAJDC,CAAAA,EAIC,MAJDA,EAIC,CAHDC,YAGC,MAHDA,YAGC,sBAFDC,UAEC,CAFDA,UAEC,0BAFY,KAEZ,4CADDC,gBACC,CADDA,gBACC,gCADkB,iBAAM,KAAN,EAClB,uBACD,cAA+BV,QAAQ,CAACO,EAAD,CAAvC,wCAAOI,KAAP,eAAcC,IAAd,eAAoBC,OAApB,eACA,GAAMC,CAAAA,YAAY,qBAAGF,IAAI,CAACE,YAAR,yDAAwB,EAA1C,CACA,GAAMC,CAAAA,YAAY,CAAGJ,KAAK,CAACK,KAA3B,CACA,GAAIC,CAAAA,YAAY,CAAG,IAAnB,CACA,GAAIC,CAAAA,OAAO,CAAG,KAAd,CAEA,GAAIH,YAAY,GAAKP,YAAjB,EAAiCO,YAAY,GAAKD,YAAtD,CAAoE,CAClEG,YAAY,CAAG,KAAf,CACD,CAED,GAAIF,YAAY,GAAKP,YAAjB,EAAiCO,YAAY,GAAKD,YAAtD,CAAoE,CAClEI,OAAO,CAAG,IAAV,CACD,CAED,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CAC1BN,OAAO,CAACO,QAAR,CAAiBH,YAAY,CAAGT,YAAH,CAAkBM,YAA/C,EACAJ,gBAAgB,GACjB,CAHD,CAKA,GAAMW,CAAAA,oBAAoB,CAAGJ,YAAY,SACrC,oCADqC,SAErC,gCAFJ,CAGA,GAAMK,CAAAA,cAAc,CAClBb,UAAU,EAAIS,OAAd,SACI,0CADJ,CAEIG,oBAHN,CAKA,mBACE,KAAC,OAAD,EAAS,UAAU,CAAE,GAArB,CAA0B,OAAO,CAAEC,cAAnC,uBACE,KAAC,aAAD,wBACE,KAAC,MAAD,EACE,aAAYL,YAAY,SAAG,gBAAH,SAAe,cADzC,CAEE,MAAM,WAAKV,EAAL,WAFR,CAGE,QAAQ,KAHV,CAIE,OAAO,KAJT,CAKE,OAAO,CAAEY,aALX,CAME,IAAI,CAAC,QANP,CAOE,OAAO,CAAC,MAPV,CAQE,UAAU,CAAEV,UAAU,EAAIS,OAR5B,UAUGD,YAAY,SAAG,gBAAH,SAAe,cAV9B,EADF,EADF,EADF,CAkBD,CAMD,cAAeX,CAAAA,YAAf","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { t } from '@lingui/macro';\nimport { useField } from 'formik';\nimport { Button, Tooltip } from '@patternfly/react-core';\nimport styled from 'styled-components';\n\nconst ButtonWrapper = styled.div`\n  margin-left: auto;\n  &&& {\n    --pf-c-button--FontSize: var(--pf-c-button--m-small--FontSize);\n  }\n`;\n\nfunction RevertButton({\n  id,\n  defaultValue,\n  isDisabled = false,\n  onRevertCallback = () => null,\n}) {\n  const [field, meta, helpers] = useField(id);\n  const initialValue = meta.initialValue ?? '';\n  const currentValue = field.value;\n  let isRevertable = true;\n  let isMatch = false;\n\n  if (currentValue === defaultValue && currentValue !== initialValue) {\n    isRevertable = false;\n  }\n\n  if (currentValue === defaultValue && currentValue === initialValue) {\n    isMatch = true;\n  }\n\n  const handleConfirm = () => {\n    helpers.setValue(isRevertable ? defaultValue : initialValue);\n    onRevertCallback();\n  };\n\n  const revertTooltipContent = isRevertable\n    ? t`Revert to factory default.`\n    : t`Restore initial value.`;\n  const tooltipContent =\n    isDisabled || isMatch\n      ? t`Setting matches factory default.`\n      : revertTooltipContent;\n\n  return (\n    <Tooltip entryDelay={700} content={tooltipContent}>\n      <ButtonWrapper>\n        <Button\n          aria-label={isRevertable ? t`Revert` : t`Undo`}\n          ouiaId={`${id}-revert`}\n          isInline\n          isSmall\n          onClick={handleConfirm}\n          type=\"button\"\n          variant=\"link\"\n          isDisabled={isDisabled || isMatch}\n        >\n          {isRevertable ? t`Revert` : t`Undo`}\n        </Button>\n      </ButtonWrapper>\n    </Tooltip>\n  );\n}\n\nRevertButton.propTypes = {\n  id: PropTypes.string.isRequired,\n};\n\nexport default RevertButton;\n"]},"metadata":{},"sourceType":"module"}