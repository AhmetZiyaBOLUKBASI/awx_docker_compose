{"ast":null,"code":"import{i18n}from\"@lingui/core\";import React,{useEffect}from'react';import{Button}from'@patternfly/react-core';import{CopyIcon}from'@patternfly/react-icons';import useRequest,{useDismissableError}from'hooks/useRequest';import AlertModal from'../AlertModal';import ErrorDetail from'../ErrorDetail';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function CopyButton(_ref){var id=_ref.id,copyItem=_ref.copyItem,isDisabled=_ref.isDisabled,onCopyStart=_ref.onCopyStart,onCopyFinish=_ref.onCopyFinish,errorMessage=_ref.errorMessage,ouiaId=_ref.ouiaId;var _useRequest=useRequest(copyItem),isLoading=_useRequest.isLoading,copyError=_useRequest.error,copyItemToAPI=_useRequest.request;useEffect(function(){if(isLoading){return onCopyStart();}return onCopyFinish();},[isLoading,onCopyStart,onCopyFinish]);var _useDismissableError=useDismissableError(copyError),error=_useDismissableError.error,dismissError=_useDismissableError.dismissError;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{id:id,ouiaId:ouiaId,isDisabled:isLoading||isDisabled,\"aria-label\":/*i18n*/i18n._(\"Copy\"),variant:\"plain\",onClick:copyItemToAPI,children:/*#__PURE__*/_jsx(CopyIcon,{})}),error&&/*#__PURE__*/_jsxs(AlertModal,{\"aria-label\":/*i18n*/i18n._(\"Copy Error\"),isOpen:error,variant:\"error\",title:/*i18n*/i18n._(\"Error!\"),onClose:dismissError,children:[errorMessage,/*#__PURE__*/_jsx(ErrorDetail,{error:error})]})]});}CopyButton.defaultProps={isDisabled:false,ouiaId:null};export default CopyButton;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/components/CopyButton/CopyButton.js"],"names":["React","useEffect","Button","CopyIcon","useRequest","useDismissableError","AlertModal","ErrorDetail","CopyButton","id","copyItem","isDisabled","onCopyStart","onCopyFinish","errorMessage","ouiaId","isLoading","copyError","error","copyItemToAPI","request","dismissError","defaultProps"],"mappings":"+BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CAGA,OAASC,MAAT,KAAuB,wBAAvB,CACA,OAASC,QAAT,KAAyB,yBAAzB,CACA,MAAOC,CAAAA,UAAP,EAAqBC,mBAArB,KAAgD,kBAAhD,CACA,MAAOC,CAAAA,UAAP,KAAuB,eAAvB,CACA,MAAOC,CAAAA,WAAP,KAAwB,gBAAxB,C,6IAEA,QAASC,CAAAA,UAAT,MAQG,IAPDC,CAAAA,EAOC,MAPDA,EAOC,CANDC,QAMC,MANDA,QAMC,CALDC,UAKC,MALDA,UAKC,CAJDC,WAIC,MAJDA,WAIC,CAHDC,YAGC,MAHDA,YAGC,CAFDC,YAEC,MAFDA,YAEC,CADDC,MACC,MADDA,MACC,CACD,gBAIIX,UAAU,CAACM,QAAD,CAJd,CACEM,SADF,aACEA,SADF,CAESC,SAFT,aAEEC,KAFF,CAGWC,aAHX,aAGEC,OAHF,CAMAnB,SAAS,CAAC,UAAM,CACd,GAAIe,SAAJ,CAAe,CACb,MAAOJ,CAAAA,WAAW,EAAlB,CACD,CACD,MAAOC,CAAAA,YAAY,EAAnB,CACD,CALQ,CAKN,CAACG,SAAD,CAAYJ,WAAZ,CAAyBC,YAAzB,CALM,CAAT,CAOA,yBAAgCR,mBAAmB,CAACY,SAAD,CAAnD,CAAQC,KAAR,sBAAQA,KAAR,CAAeG,YAAf,sBAAeA,YAAf,CAEA,mBACE,wCACE,KAAC,MAAD,EACE,EAAE,CAAEZ,EADN,CAEE,MAAM,CAAEM,MAFV,CAGE,UAAU,CAAEC,SAAS,EAAIL,UAH3B,CAIE,qBAAY,cAJd,CAKE,OAAO,CAAC,OALV,CAME,OAAO,CAAEQ,aANX,uBAQE,KAAC,QAAD,IARF,EADF,CAWGD,KAAK,eACJ,MAAC,UAAD,EACE,qBAAY,oBADd,CAEE,MAAM,CAAEA,KAFV,CAGE,OAAO,CAAC,OAHV,CAIE,KAAK,SAAE,gBAJT,CAKE,OAAO,CAAEG,YALX,WAOGP,YAPH,cAQE,KAAC,WAAD,EAAa,KAAK,CAAEI,KAApB,EARF,GAZJ,GADF,CA0BD,CAWDV,UAAU,CAACc,YAAX,CAA0B,CACxBX,UAAU,CAAE,KADY,CAExBI,MAAM,CAAE,IAFgB,CAA1B,CAKA,cAAeP,CAAAA,UAAf","sourcesContent":["import React, { useEffect } from 'react';\nimport { t } from '@lingui/macro';\nimport PropTypes from 'prop-types';\nimport { Button } from '@patternfly/react-core';\nimport { CopyIcon } from '@patternfly/react-icons';\nimport useRequest, { useDismissableError } from 'hooks/useRequest';\nimport AlertModal from '../AlertModal';\nimport ErrorDetail from '../ErrorDetail';\n\nfunction CopyButton({\n  id,\n  copyItem,\n  isDisabled,\n  onCopyStart,\n  onCopyFinish,\n  errorMessage,\n  ouiaId,\n}) {\n  const {\n    isLoading,\n    error: copyError,\n    request: copyItemToAPI,\n  } = useRequest(copyItem);\n\n  useEffect(() => {\n    if (isLoading) {\n      return onCopyStart();\n    }\n    return onCopyFinish();\n  }, [isLoading, onCopyStart, onCopyFinish]);\n\n  const { error, dismissError } = useDismissableError(copyError);\n\n  return (\n    <>\n      <Button\n        id={id}\n        ouiaId={ouiaId}\n        isDisabled={isLoading || isDisabled}\n        aria-label={t`Copy`}\n        variant=\"plain\"\n        onClick={copyItemToAPI}\n      >\n        <CopyIcon />\n      </Button>\n      {error && (\n        <AlertModal\n          aria-label={t`Copy Error`}\n          isOpen={error}\n          variant=\"error\"\n          title={t`Error!`}\n          onClose={dismissError}\n        >\n          {errorMessage}\n          <ErrorDetail error={error} />\n        </AlertModal>\n      )}\n    </>\n  );\n}\n\nCopyButton.propTypes = {\n  copyItem: PropTypes.func.isRequired,\n  onCopyStart: PropTypes.func.isRequired,\n  onCopyFinish: PropTypes.func.isRequired,\n  errorMessage: PropTypes.string.isRequired,\n  isDisabled: PropTypes.bool,\n  ouiaId: PropTypes.string,\n};\n\nCopyButton.defaultProps = {\n  isDisabled: false,\n  ouiaId: null,\n};\n\nexport default CopyButton;\n"]},"metadata":{},"sourceType":"module"}