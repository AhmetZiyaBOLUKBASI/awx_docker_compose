{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useCallback}from'react';import{Link,useHistory}from'react-router-dom';import{Button,Label}from'@patternfly/react-core';import{VariablesDetail}from'components/CodeEditor';import AlertModal from'components/AlertModal';import ErrorDetail from'components/ErrorDetail';import{CardBody,CardActionsRow}from'components/Card';import DeleteButton from'components/DeleteButton';import{Detail,DetailList,UserDateDetail}from'components/DetailList';import useRequest,{useDismissableError}from'hooks/useRequest';import{jsonToYaml,isJsonString}from'util/yaml';import{InstanceGroupsAPI}from'api';import{relatedResourceDeleteRequests}from'util/getRelatedResourceDeleteDetails';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ContainerGroupDetails(_ref){var _instanceGroup$summar,_instanceGroup$summar2,_instanceGroup$summar3,_instanceGroup$summar4;var instanceGroup=_ref.instanceGroup;var id=instanceGroup.id,name=instanceGroup.name;var history=useHistory();var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return InstanceGroupsAPI.destroy(id);case 2:history.push(\"/instance_groups\");case 3:case\"end\":return _context.stop();}}},_callee);})),[id,history])),deleteInstanceGroup=_useRequest.request,isLoading=_useRequest.isLoading,deleteError=_useRequest.error;var _useDismissableError=useDismissableError(deleteError),error=_useDismissableError.error,dismissError=_useDismissableError.dismissError;var deleteDetailsRequests=relatedResourceDeleteRequests.instanceGroup(instanceGroup);return/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsxs(DetailList,{children:[/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Name\"),value:instanceGroup.name,dataCy:\"container-group-detail-name\"}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Type\"),value:/*i18n*/i18n._(\"Container group\"),dataCy:\"container-group-type\"}),instanceGroup.summary_fields.credential&&/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Credential\"),helpText:/*i18n*/i18n._(\"Credential to authenticate with Kubernetes or OpenShift\"),value:/*#__PURE__*/_jsx(Link,{to:\"/credentials/\".concat(instanceGroup===null||instanceGroup===void 0?void 0:(_instanceGroup$summar=instanceGroup.summary_fields)===null||_instanceGroup$summar===void 0?void 0:(_instanceGroup$summar2=_instanceGroup$summar.credential)===null||_instanceGroup$summar2===void 0?void 0:_instanceGroup$summar2.id),children:/*#__PURE__*/_jsx(Label,{variant:\"outline\",color:\"blue\",children:instanceGroup===null||instanceGroup===void 0?void 0:(_instanceGroup$summar3=instanceGroup.summary_fields)===null||_instanceGroup$summar3===void 0?void 0:(_instanceGroup$summar4=_instanceGroup$summar3.credential)===null||_instanceGroup$summar4===void 0?void 0:_instanceGroup$summar4.name})}),dataCy:\"container-group-credential\"}),/*#__PURE__*/_jsx(UserDateDetail,{label:/*i18n*/i18n._(\"Created\"),date:instanceGroup.created,user:instanceGroup.summary_fields.created_by}),/*#__PURE__*/_jsx(UserDateDetail,{label:/*i18n*/i18n._(\"Last Modified\"),date:instanceGroup.modified,user:instanceGroup.summary_fields.modified_by}),instanceGroup.pod_spec_override&&/*#__PURE__*/_jsx(VariablesDetail,{label:/*i18n*/i18n._(\"Pod spec override\"),value:isJsonString(instanceGroup.pod_spec_override)?jsonToYaml(instanceGroup.pod_spec_override):instanceGroup.pod_spec_override,rows:6,helpText:/*i18n*/i18n._(\"Custom Kubernetes or OpenShift Pod specification.\"),name:\"pod_spec_override\",dataCy:\"container-group-detail-pod-spec-override\"})]}),/*#__PURE__*/_jsxs(CardActionsRow,{children:[instanceGroup.summary_fields.user_capabilities&&instanceGroup.summary_fields.user_capabilities.edit&&/*#__PURE__*/_jsx(Button,{ouiaId:\"container-group-detail-edit-button\",\"aria-label\":/*i18n*/i18n._(\"edit\"),component:Link,to:\"/instance_groups/container_group/\".concat(id,\"/edit\"),children:/*i18n*/i18n._(\"Edit\")}),instanceGroup.summary_fields.user_capabilities&&instanceGroup.summary_fields.user_capabilities.delete&&/*#__PURE__*/_jsx(DeleteButton,{ouiaId:\"container-group-detail-delete-button\",name:name,modalTitle:/*i18n*/i18n._(\"Delete instance group\"),onConfirm:deleteInstanceGroup,isDisabled:isLoading,deleteDetailsRequests:deleteDetailsRequests,deleteMessage:/*i18n*/i18n._(\"This container group is currently being by other resources. Are you sure you want to delete it?\"),children:/*i18n*/i18n._(\"Delete\")})]}),error&&/*#__PURE__*/_jsx(AlertModal,{isOpen:error,onClose:dismissError,title:/*i18n*/i18n._(\"Error\"),variant:\"error\",children:/*#__PURE__*/_jsx(ErrorDetail,{error:error})})]});}export default ContainerGroupDetails;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/InstanceGroup/ContainerGroupDetails/ContainerGroupDetails.js"],"names":["React","useCallback","Link","useHistory","Button","Label","VariablesDetail","AlertModal","ErrorDetail","CardBody","CardActionsRow","DeleteButton","Detail","DetailList","UserDateDetail","useRequest","useDismissableError","jsonToYaml","isJsonString","InstanceGroupsAPI","relatedResourceDeleteRequests","ContainerGroupDetails","instanceGroup","id","name","history","destroy","push","deleteInstanceGroup","request","isLoading","deleteError","error","dismissError","deleteDetailsRequests","summary_fields","credential","created","created_by","modified","modified_by","pod_spec_override","user_capabilities","edit","delete"],"mappings":"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","sourcesContent":["import React, { useCallback } from 'react';\n\nimport { t } from '@lingui/macro';\nimport { Link, useHistory } from 'react-router-dom';\nimport { Button, Label } from '@patternfly/react-core';\n\nimport { VariablesDetail } from 'components/CodeEditor';\nimport AlertModal from 'components/AlertModal';\nimport ErrorDetail from 'components/ErrorDetail';\nimport { CardBody, CardActionsRow } from 'components/Card';\nimport DeleteButton from 'components/DeleteButton';\nimport { Detail, DetailList, UserDateDetail } from 'components/DetailList';\nimport useRequest, { useDismissableError } from 'hooks/useRequest';\nimport { jsonToYaml, isJsonString } from 'util/yaml';\nimport { InstanceGroupsAPI } from 'api';\nimport { relatedResourceDeleteRequests } from 'util/getRelatedResourceDeleteDetails';\n\nfunction ContainerGroupDetails({ instanceGroup }) {\n  const { id, name } = instanceGroup;\n\n  const history = useHistory();\n\n  const {\n    request: deleteInstanceGroup,\n    isLoading,\n    error: deleteError,\n  } = useRequest(\n    useCallback(async () => {\n      await InstanceGroupsAPI.destroy(id);\n      history.push(`/instance_groups`);\n    }, [id, history])\n  );\n\n  const { error, dismissError } = useDismissableError(deleteError);\n  const deleteDetailsRequests =\n    relatedResourceDeleteRequests.instanceGroup(instanceGroup);\n  return (\n    <CardBody>\n      <DetailList>\n        <Detail\n          label={t`Name`}\n          value={instanceGroup.name}\n          dataCy=\"container-group-detail-name\"\n        />\n        <Detail\n          label={t`Type`}\n          value={t`Container group`}\n          dataCy=\"container-group-type\"\n        />\n        {instanceGroup.summary_fields.credential && (\n          <Detail\n            label={t`Credential`}\n            helpText={t`Credential to authenticate with Kubernetes or OpenShift`}\n            value={\n              <Link\n                to={`/credentials/${instanceGroup?.summary_fields?.credential?.id}`}\n              >\n                <Label variant=\"outline\" color=\"blue\">\n                  {instanceGroup?.summary_fields?.credential?.name}\n                </Label>\n              </Link>\n            }\n            dataCy=\"container-group-credential\"\n          />\n        )}\n        <UserDateDetail\n          label={t`Created`}\n          date={instanceGroup.created}\n          user={instanceGroup.summary_fields.created_by}\n        />\n        <UserDateDetail\n          label={t`Last Modified`}\n          date={instanceGroup.modified}\n          user={instanceGroup.summary_fields.modified_by}\n        />\n        {instanceGroup.pod_spec_override && (\n          <VariablesDetail\n            label={t`Pod spec override`}\n            value={\n              isJsonString(instanceGroup.pod_spec_override)\n                ? jsonToYaml(instanceGroup.pod_spec_override)\n                : instanceGroup.pod_spec_override\n            }\n            rows={6}\n            helpText={t`Custom Kubernetes or OpenShift Pod specification.`}\n            name=\"pod_spec_override\"\n            dataCy=\"container-group-detail-pod-spec-override\"\n          />\n        )}\n      </DetailList>\n\n      <CardActionsRow>\n        {instanceGroup.summary_fields.user_capabilities &&\n          instanceGroup.summary_fields.user_capabilities.edit && (\n            <Button\n              ouiaId=\"container-group-detail-edit-button\"\n              aria-label={t`edit`}\n              component={Link}\n              to={`/instance_groups/container_group/${id}/edit`}\n            >\n              {t`Edit`}\n            </Button>\n          )}\n        {instanceGroup.summary_fields.user_capabilities &&\n          instanceGroup.summary_fields.user_capabilities.delete && (\n            <DeleteButton\n              ouiaId=\"container-group-detail-delete-button\"\n              name={name}\n              modalTitle={t`Delete instance group`}\n              onConfirm={deleteInstanceGroup}\n              isDisabled={isLoading}\n              deleteDetailsRequests={deleteDetailsRequests}\n              deleteMessage={t`This container group is currently being by other resources. Are you sure you want to delete it?`}\n            >\n              {t`Delete`}\n            </DeleteButton>\n          )}\n      </CardActionsRow>\n      {error && (\n        <AlertModal\n          isOpen={error}\n          onClose={dismissError}\n          title={t`Error`}\n          variant=\"error\"\n        >\n          <ErrorDetail error={error} />\n        </AlertModal>\n      )}\n    </CardBody>\n  );\n}\n\nexport default ContainerGroupDetails;\n"]},"metadata":{},"sourceType":"module"}