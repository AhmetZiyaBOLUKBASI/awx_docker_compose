{"ast":null,"code":"import{i18n}from\"@lingui/core\";import React from'react';import{useFormikContext}from'formik';import StepName from'../LaunchPrompt/steps/StepName';import AdHocDetailsStep from'./AdHocDetailsStep';import{jsx as _jsx}from\"react/jsx-runtime\";var STEP_ID='details';export default function useAdHocDetailsStep(visited,moduleOptions){var _useFormikContext=useFormikContext(),values=_useFormikContext.values,touched=_useFormikContext.touched,setFieldError=_useFormikContext.setFieldError;var hasError=function hasError(){if(!Object.keys(visited).includes(STEP_ID)){return false;}if(!values.module_name&&touched.module_name){return true;}if(values.module_name==='shell'||values.module_name==='command'){if(values.module_args){return false;// eslint-disable-next-line no-else-return\n}else{return true;}}return false;};return{step:{id:STEP_ID,key:1,name:/*#__PURE__*/_jsx(StepName,{hasErrors:hasError(),id:\"details-step\",children:/*i18n*/i18n._(\"Details\")}),component:/*#__PURE__*/_jsx(AdHocDetailsStep,{moduleOptions:moduleOptions}),enableNext:true,nextButtonText:/*i18n*/i18n._(\"Next\")},hasError:hasError(),validate:function validate(){if(Object.keys(touched).includes('module_name'||'module_args')){if(!values.module_name){setFieldError('module_name',/*i18n*/i18n._(\"This field must not be blank.\"));}if(values.module_name===('command'||'shell')&&!values.module_args){setFieldError('module_args',/*i18n*/i18n._(\"This field must not be blank\"));}}},setTouched:function setTouched(setFieldTouched){setFieldTouched('module_name',true,false);setFieldTouched('module_args',true,false);}};}","map":{"version":3,"sources":["/awx_devel/awx/ui/src/components/AdHocCommands/useAdHocDetailsStep.js"],"names":["React","useFormikContext","StepName","AdHocDetailsStep","STEP_ID","useAdHocDetailsStep","visited","moduleOptions","values","touched","setFieldError","hasError","Object","keys","includes","module_name","module_args","step","id","key","name","component","enableNext","nextButtonText","validate","setTouched","setFieldTouched"],"mappings":"+BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,OAASC,gBAAT,KAAiC,QAAjC,CACA,MAAOC,CAAAA,QAAP,KAAqB,gCAArB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,oBAA7B,C,2CAEA,GAAMC,CAAAA,OAAO,CAAG,SAAhB,CACA,cAAe,SAASC,CAAAA,mBAAT,CAA6BC,OAA7B,CAAsCC,aAAtC,CAAqD,CAClE,sBAA2CN,gBAAgB,EAA3D,CAAQO,MAAR,mBAAQA,MAAR,CAAgBC,OAAhB,mBAAgBA,OAAhB,CAAyBC,aAAzB,mBAAyBA,aAAzB,CAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACrB,GAAI,CAACC,MAAM,CAACC,IAAP,CAAYP,OAAZ,EAAqBQ,QAArB,CAA8BV,OAA9B,CAAL,CAA6C,CAC3C,MAAO,MAAP,CACD,CACD,GAAI,CAACI,MAAM,CAACO,WAAR,EAAuBN,OAAO,CAACM,WAAnC,CAAgD,CAC9C,MAAO,KAAP,CACD,CAED,GAAIP,MAAM,CAACO,WAAP,GAAuB,OAAvB,EAAkCP,MAAM,CAACO,WAAP,GAAuB,SAA7D,CAAwE,CACtE,GAAIP,MAAM,CAACQ,WAAX,CAAwB,CACtB,MAAO,MAAP,CACA;AACD,CAHD,IAGO,CACL,MAAO,KAAP,CACD,CACF,CACD,MAAO,MAAP,CACD,CAjBD,CAkBA,MAAO,CACLC,IAAI,CAAE,CACJC,EAAE,CAAEd,OADA,CAEJe,GAAG,CAAE,CAFD,CAGJC,IAAI,cACF,KAAC,QAAD,EAAU,SAAS,CAAET,QAAQ,EAA7B,CAAiC,EAAE,CAAC,cAApC,kBACG,iBADH,EAJE,CAQJU,SAAS,cAAE,KAAC,gBAAD,EAAkB,aAAa,CAAEd,aAAjC,EARP,CASJe,UAAU,CAAE,IATR,CAUJC,cAAc,SAAE,cAVZ,CADD,CAaLZ,QAAQ,CAAEA,QAAQ,EAbb,CAcLa,QAAQ,CAAE,mBAAM,CACd,GAAIZ,MAAM,CAACC,IAAP,CAAYJ,OAAZ,EAAqBK,QAArB,CAA8B,eAAiB,aAA/C,CAAJ,CAAmE,CACjE,GAAI,CAACN,MAAM,CAACO,WAAZ,CAAyB,CACvBL,aAAa,CAAC,aAAD,SAAgB,uCAAhB,CAAb,CACD,CACD,GACEF,MAAM,CAACO,WAAP,IAAwB,WAAa,OAArC,GACA,CAACP,MAAM,CAACQ,WAFV,CAGE,CACAN,aAAa,CAAC,aAAD,SAAgB,sCAAhB,CAAb,CACD,CACF,CACF,CA1BI,CA2BLe,UAAU,CAAE,oBAACC,eAAD,CAAqB,CAC/BA,eAAe,CAAC,aAAD,CAAgB,IAAhB,CAAsB,KAAtB,CAAf,CACAA,eAAe,CAAC,aAAD,CAAgB,IAAhB,CAAsB,KAAtB,CAAf,CACD,CA9BI,CAAP,CAgCD","sourcesContent":["import React from 'react';\nimport { t } from '@lingui/macro';\nimport { useFormikContext } from 'formik';\nimport StepName from '../LaunchPrompt/steps/StepName';\nimport AdHocDetailsStep from './AdHocDetailsStep';\n\nconst STEP_ID = 'details';\nexport default function useAdHocDetailsStep(visited, moduleOptions) {\n  const { values, touched, setFieldError } = useFormikContext();\n\n  const hasError = () => {\n    if (!Object.keys(visited).includes(STEP_ID)) {\n      return false;\n    }\n    if (!values.module_name && touched.module_name) {\n      return true;\n    }\n\n    if (values.module_name === 'shell' || values.module_name === 'command') {\n      if (values.module_args) {\n        return false;\n        // eslint-disable-next-line no-else-return\n      } else {\n        return true;\n      }\n    }\n    return false;\n  };\n  return {\n    step: {\n      id: STEP_ID,\n      key: 1,\n      name: (\n        <StepName hasErrors={hasError()} id=\"details-step\">\n          {t`Details`}\n        </StepName>\n      ),\n      component: <AdHocDetailsStep moduleOptions={moduleOptions} />,\n      enableNext: true,\n      nextButtonText: t`Next`,\n    },\n    hasError: hasError(),\n    validate: () => {\n      if (Object.keys(touched).includes('module_name' || 'module_args')) {\n        if (!values.module_name) {\n          setFieldError('module_name', t`This field must not be blank.`);\n        }\n        if (\n          values.module_name === ('command' || 'shell') &&\n          !values.module_args\n        ) {\n          setFieldError('module_args', t`This field must not be blank`);\n        }\n      }\n    },\n    setTouched: (setFieldTouched) => {\n      setFieldTouched('module_name', true, false);\n      setFieldTouched('module_args', true, false);\n    },\n  };\n}\n"]},"metadata":{},"sourceType":"module"}