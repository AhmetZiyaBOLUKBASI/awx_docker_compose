{"ast":null,"code":"import _taggedTemplateLiteral from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5;import{i18n}from\"@lingui/core\";import React,{useContext}from'react';import{useHistory}from'react-router-dom';import{Badge as PFBadge,Button,Tooltip}from'@patternfly/react-core';import{CompassIcon,WrenchIcon,ProjectDiagramIcon}from'@patternfly/react-icons';import styled from'styled-components';import StatusLabel from'components/StatusLabel';import JobCancelButton from'components/JobCancelButton';import{WorkflowDispatchContext,WorkflowStateContext}from'contexts/Workflow';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Toolbar=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  align-items: center;\\n  border-bottom: 1px solid grey;\\n  display: flex;\\n  height: 56px;\\n\"])));var ToolbarJob=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: inline-flex;\\n  align-items: center;\\n\\n  h1 {\\n    margin-right: 10px;\\n    font-weight: var(--pf-global--FontWeight--bold);\\n  }\\n\"])));var ToolbarActions=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  align-items: center;\\n  display: flex;\\n  flex: 1;\\n  justify-content: flex-end;\\n\"])));var Badge=styled(PFBadge)(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  align-items: center;\\n  display: flex;\\n  justify-content: center;\\n  margin-left: 10px;\\n\"])));var ActionButton=styled(Button)(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  border: none;\\n  margin: 0px 6px;\\n  padding: 6px 10px;\\n  &:hover {\\n    background-color: #0066cc;\\n    color: white;\\n  }\\n\\n  &.pf-m-active {\\n    background-color: #0066cc;\\n    color: white;\\n  }\\n\"])));function WorkflowOutputToolbar(_ref){var _job$summary_fields,_job$summary_fields$u;var job=_ref.job;var dispatch=useContext(WorkflowDispatchContext);var history=useHistory();var _useContext=useContext(WorkflowStateContext),nodes=_useContext.nodes,showLegend=_useContext.showLegend,showTools=_useContext.showTools;var totalNodes=nodes.reduce(function(n,node){return n+!node.isDeleted;},0)-1;var navToWorkflow=function navToWorkflow(){history.push(\"/templates/workflow_job_template/\".concat(job.unified_job_template,\"/visualizer\"));};return/*#__PURE__*/_jsxs(Toolbar,{id:\"workflow-output-toolbar\",ouiaId:\"workflow-output-toolbar\",children:[/*#__PURE__*/_jsxs(ToolbarJob,{children:[/*#__PURE__*/_jsx(\"h1\",{children:job.name}),/*#__PURE__*/_jsx(StatusLabel,{status:job.status})]}),/*#__PURE__*/_jsxs(ToolbarActions,{children:[['new','pending','waiting','running'].includes(job===null||job===void 0?void 0:job.status)&&job!==null&&job!==void 0&&(_job$summary_fields=job.summary_fields)!==null&&_job$summary_fields!==void 0&&(_job$summary_fields$u=_job$summary_fields.user_capabilities)!==null&&_job$summary_fields$u!==void 0&&_job$summary_fields$u.start?/*#__PURE__*/_jsx(JobCancelButton,{style:{margin:'0px 6px',padding:'6px 10px'},job:job,errorTitle:/*i18n*/i18n._(\"Job Cancel Error\"),title:/*i18n*/i18n._(\"Cancel {0}\",{0:job.name}),errorMessage:/*i18n*/i18n._(\"Failed to cancel {0}\",{0:job.name}),showIconButton:true}):null,/*#__PURE__*/_jsx(ActionButton,{ouiaId:\"edit-workflow\",\"aria-label\":/*i18n*/i18n._(\"Edit workflow\"),id:\"edit-workflow\",variant:\"plain\",onClick:navToWorkflow,children:/*#__PURE__*/_jsx(ProjectDiagramIcon,{})}),/*#__PURE__*/_jsx(\"div\",{children:/*i18n*/i18n._(\"Total Nodes\")}),/*#__PURE__*/_jsx(Badge,{isRead:true,children:totalNodes}),/*#__PURE__*/_jsx(Tooltip,{content:/*i18n*/i18n._(\"Toggle Legend\"),position:\"bottom\",children:/*#__PURE__*/_jsx(ActionButton,{id:\"workflow-output-toggle-legend\",isActive:showLegend,onClick:function onClick(){return dispatch({type:'TOGGLE_LEGEND'});},variant:\"plain\",children:/*#__PURE__*/_jsx(CompassIcon,{})})}),/*#__PURE__*/_jsx(Tooltip,{content:/*i18n*/i18n._(\"Toggle Tools\"),position:\"bottom\",children:/*#__PURE__*/_jsx(ActionButton,{id:\"workflow-output-toggle-tools\",isActive:showTools,onClick:function onClick(){return dispatch({type:'TOGGLE_TOOLS'});},variant:\"plain\",children:/*#__PURE__*/_jsx(WrenchIcon,{})})})]})]});}export default WorkflowOutputToolbar;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/Job/WorkflowOutput/WorkflowOutputToolbar.js"],"names":["React","useContext","useHistory","Badge","PFBadge","Button","Tooltip","CompassIcon","WrenchIcon","ProjectDiagramIcon","styled","StatusLabel","JobCancelButton","WorkflowDispatchContext","WorkflowStateContext","Toolbar","div","ToolbarJob","ToolbarActions","ActionButton","WorkflowOutputToolbar","job","dispatch","history","nodes","showLegend","showTools","totalNodes","reduce","n","node","isDeleted","navToWorkflow","push","unified_job_template","name","status","includes","summary_fields","user_capabilities","start","margin","padding","type"],"mappings":"8OAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,KAAkC,OAAlC,CACA,OAASC,UAAT,KAA2B,kBAA3B,CAGA,OAASC,KAAK,GAAIC,CAAAA,OAAlB,CAA2BC,MAA3B,CAAmCC,OAAnC,KAAkD,wBAAlD,CAEA,OACEC,WADF,CAEEC,UAFF,CAGEC,kBAHF,KAIO,yBAJP,CAKA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CACA,MAAOC,CAAAA,WAAP,KAAwB,wBAAxB,CACA,MAAOC,CAAAA,eAAP,KAA4B,4BAA5B,CACA,OACEC,uBADF,CAEEC,oBAFF,KAGO,mBAHP,C,wFAKA,GAAMC,CAAAA,OAAO,CAAGL,MAAM,CAACM,GAAV,gKAAb,CAOA,GAAMC,CAAAA,UAAU,CAAGP,MAAM,CAACM,GAAV,oNAAhB,CAUA,GAAME,CAAAA,cAAc,CAAGR,MAAM,CAACM,GAAV,yJAApB,CAOA,GAAMb,CAAAA,KAAK,CAAGO,MAAM,CAACN,OAAD,CAAT,iKAAX,CAOA,GAAMe,CAAAA,YAAY,CAAGT,MAAM,CAACL,MAAD,CAAT,kRAAlB,CAcA,QAASe,CAAAA,qBAAT,MAAwC,kDAAPC,CAAAA,GAAO,MAAPA,GAAO,CACtC,GAAMC,CAAAA,QAAQ,CAAGrB,UAAU,CAACY,uBAAD,CAA3B,CACA,GAAMU,CAAAA,OAAO,CAAGrB,UAAU,EAA1B,CACA,gBAAyCD,UAAU,CAACa,oBAAD,CAAnD,CAAQU,KAAR,aAAQA,KAAR,CAAeC,UAAf,aAAeA,UAAf,CAA2BC,SAA3B,aAA2BA,SAA3B,CAEA,GAAMC,CAAAA,UAAU,CAAGH,KAAK,CAACI,MAAN,CAAa,SAACC,CAAD,CAAIC,IAAJ,QAAaD,CAAAA,CAAC,CAAG,CAACC,IAAI,CAACC,SAAvB,EAAb,CAA+C,CAA/C,EAAoD,CAAvE,CACA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CAC1BT,OAAO,CAACU,IAAR,4CACsCZ,GAAG,CAACa,oBAD1C,iBAGD,CAJD,CAKA,mBACE,MAAC,OAAD,EAAS,EAAE,CAAC,yBAAZ,CAAsC,MAAM,CAAC,yBAA7C,wBACE,MAAC,UAAD,yBACE,oBAAKb,GAAG,CAACc,IAAT,EADF,cAEE,KAAC,WAAD,EAAa,MAAM,CAAEd,GAAG,CAACe,MAAzB,EAFF,GADF,cAKE,MAAC,cAAD,YACG,CAAC,KAAD,CAAQ,SAAR,CAAmB,SAAnB,CAA8B,SAA9B,EAAyCC,QAAzC,CAAkDhB,GAAlD,SAAkDA,GAAlD,iBAAkDA,GAAG,CAAEe,MAAvD,GACDf,GADC,SACDA,GADC,gCACDA,GAAG,CAAEiB,cADJ,+DACD,oBAAqBC,iBADpB,0CACD,sBAAwCC,KADvC,cAEC,KAAC,eAAD,EACE,KAAK,CAAE,CAAEC,MAAM,CAAE,SAAV,CAAqBC,OAAO,CAAE,UAA9B,CADT,CAEE,GAAG,CAAErB,GAFP,CAGE,UAAU,SAAE,0BAHd,CAIE,KAAK,SAAE,uBAAWA,GAAG,CAACc,IAAf,EAJT,CAKE,YAAY,SAAE,iCAAqBd,GAAG,CAACc,IAAzB,EALhB,CAME,cAAc,KANhB,EAFD,CAUG,IAXN,cAaE,KAAC,YAAD,EACE,MAAM,CAAC,eADT,CAEE,qBAAY,uBAFd,CAGE,EAAE,CAAC,eAHL,CAIE,OAAO,CAAC,OAJV,CAKE,OAAO,CAAEH,aALX,uBAOE,KAAC,kBAAD,IAPF,EAbF,cAsBE,6BAAM,qBAAN,EAtBF,cAuBE,KAAC,KAAD,EAAO,MAAM,KAAb,UAAeL,UAAf,EAvBF,cAwBE,KAAC,OAAD,EAAS,OAAO,SAAE,uBAAlB,CAAoC,QAAQ,CAAC,QAA7C,uBACE,KAAC,YAAD,EACE,EAAE,CAAC,+BADL,CAEE,QAAQ,CAAEF,UAFZ,CAGE,OAAO,CAAE,yBAAMH,CAAAA,QAAQ,CAAC,CAAEqB,IAAI,CAAE,eAAR,CAAD,CAAd,EAHX,CAIE,OAAO,CAAC,OAJV,uBAME,KAAC,WAAD,IANF,EADF,EAxBF,cAkCE,KAAC,OAAD,EAAS,OAAO,SAAE,sBAAlB,CAAmC,QAAQ,CAAC,QAA5C,uBACE,KAAC,YAAD,EACE,EAAE,CAAC,8BADL,CAEE,QAAQ,CAAEjB,SAFZ,CAGE,OAAO,CAAE,yBAAMJ,CAAAA,QAAQ,CAAC,CAAEqB,IAAI,CAAE,cAAR,CAAD,CAAd,EAHX,CAIE,OAAO,CAAC,OAJV,uBAME,KAAC,UAAD,IANF,EADF,EAlCF,GALF,GADF,CAqDD,CAMD,cAAevB,CAAAA,qBAAf","sourcesContent":["import React, { useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { t } from '@lingui/macro';\nimport { shape } from 'prop-types';\nimport { Badge as PFBadge, Button, Tooltip } from '@patternfly/react-core';\n\nimport {\n  CompassIcon,\n  WrenchIcon,\n  ProjectDiagramIcon,\n} from '@patternfly/react-icons';\nimport styled from 'styled-components';\nimport StatusLabel from 'components/StatusLabel';\nimport JobCancelButton from 'components/JobCancelButton';\nimport {\n  WorkflowDispatchContext,\n  WorkflowStateContext,\n} from 'contexts/Workflow';\n\nconst Toolbar = styled.div`\n  align-items: center;\n  border-bottom: 1px solid grey;\n  display: flex;\n  height: 56px;\n`;\n\nconst ToolbarJob = styled.div`\n  display: inline-flex;\n  align-items: center;\n\n  h1 {\n    margin-right: 10px;\n    font-weight: var(--pf-global--FontWeight--bold);\n  }\n`;\n\nconst ToolbarActions = styled.div`\n  align-items: center;\n  display: flex;\n  flex: 1;\n  justify-content: flex-end;\n`;\n\nconst Badge = styled(PFBadge)`\n  align-items: center;\n  display: flex;\n  justify-content: center;\n  margin-left: 10px;\n`;\n\nconst ActionButton = styled(Button)`\n  border: none;\n  margin: 0px 6px;\n  padding: 6px 10px;\n  &:hover {\n    background-color: #0066cc;\n    color: white;\n  }\n\n  &.pf-m-active {\n    background-color: #0066cc;\n    color: white;\n  }\n`;\nfunction WorkflowOutputToolbar({ job }) {\n  const dispatch = useContext(WorkflowDispatchContext);\n  const history = useHistory();\n  const { nodes, showLegend, showTools } = useContext(WorkflowStateContext);\n\n  const totalNodes = nodes.reduce((n, node) => n + !node.isDeleted, 0) - 1;\n  const navToWorkflow = () => {\n    history.push(\n      `/templates/workflow_job_template/${job.unified_job_template}/visualizer`\n    );\n  };\n  return (\n    <Toolbar id=\"workflow-output-toolbar\" ouiaId=\"workflow-output-toolbar\">\n      <ToolbarJob>\n        <h1>{job.name}</h1>\n        <StatusLabel status={job.status} />\n      </ToolbarJob>\n      <ToolbarActions>\n        {['new', 'pending', 'waiting', 'running'].includes(job?.status) &&\n        job?.summary_fields?.user_capabilities?.start ? (\n          <JobCancelButton\n            style={{ margin: '0px 6px', padding: '6px 10px' }}\n            job={job}\n            errorTitle={t`Job Cancel Error`}\n            title={t`Cancel ${job.name}`}\n            errorMessage={t`Failed to cancel ${job.name}`}\n            showIconButton\n          />\n        ) : null}\n\n        <ActionButton\n          ouiaId=\"edit-workflow\"\n          aria-label={t`Edit workflow`}\n          id=\"edit-workflow\"\n          variant=\"plain\"\n          onClick={navToWorkflow}\n        >\n          <ProjectDiagramIcon />\n        </ActionButton>\n        <div>{t`Total Nodes`}</div>\n        <Badge isRead>{totalNodes}</Badge>\n        <Tooltip content={t`Toggle Legend`} position=\"bottom\">\n          <ActionButton\n            id=\"workflow-output-toggle-legend\"\n            isActive={showLegend}\n            onClick={() => dispatch({ type: 'TOGGLE_LEGEND' })}\n            variant=\"plain\"\n          >\n            <CompassIcon />\n          </ActionButton>\n        </Tooltip>\n        <Tooltip content={t`Toggle Tools`} position=\"bottom\">\n          <ActionButton\n            id=\"workflow-output-toggle-tools\"\n            isActive={showTools}\n            onClick={() => dispatch({ type: 'TOGGLE_TOOLS' })}\n            variant=\"plain\"\n          >\n            <WrenchIcon />\n          </ActionButton>\n        </Tooltip>\n      </ToolbarActions>\n    </Toolbar>\n  );\n}\n\nWorkflowOutputToolbar.propTypes = {\n  job: shape().isRequired,\n};\n\nexport default WorkflowOutputToolbar;\n"]},"metadata":{},"sourceType":"module"}