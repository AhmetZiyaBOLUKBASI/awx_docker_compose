{"ast":null,"code":"import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{Trans}from\"@lingui/react\";import{i18n}from\"@lingui/core\";import React,{useCallback,useEffect}from'react';import{useLocation,useRouteMatch}from'react-router-dom';import{Card,PageSection}from'@patternfly/react-core';import{WorkflowApprovalsAPI}from'api';import PaginatedTable,{HeaderRow,HeaderCell,ToolbarDeleteButton,getSearchableKeys}from'components/PaginatedTable';import AlertModal from'components/AlertModal';import ErrorDetail from'components/ErrorDetail';import DataListToolbar from'components/DataListToolbar';import useRequest,{useDeleteItems}from'hooks/useRequest';import useSelected from'hooks/useSelected';import{getQSConfig,parseQueryString}from'util/qs';import WorkflowApprovalListItem from'./WorkflowApprovalListItem';import useWsWorkflowApprovals from'./useWsWorkflowApprovals';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var QS_CONFIG=getQSConfig('workflow_approvals',{page:1,page_size:20,order_by:'-started'});function WorkflowApprovalsList(){var location=useLocation();var match=useRouteMatch();var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _actionsResponse$data,_actionsResponse$data2;var params,_yield$Promise$all,_yield$Promise$all2,response,actionsResponse;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:params=parseQueryString(QS_CONFIG,location.search);_context.next=3;return Promise.all([WorkflowApprovalsAPI.read(params),WorkflowApprovalsAPI.readOptions()]);case 3:_yield$Promise$all=_context.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,2);response=_yield$Promise$all2[0];actionsResponse=_yield$Promise$all2[1];return _context.abrupt(\"return\",{results:response.data.results,count:response.data.count,relatedSearchableKeys:((actionsResponse===null||actionsResponse===void 0?void 0:(_actionsResponse$data=actionsResponse.data)===null||_actionsResponse$data===void 0?void 0:_actionsResponse$data.related_search_fields)||[]).map(function(val){return val.slice(0,-8);}),searchableKeys:getSearchableKeys((_actionsResponse$data2=actionsResponse.data.actions)===null||_actionsResponse$data2===void 0?void 0:_actionsResponse$data2.GET)});case 8:case\"end\":return _context.stop();}}},_callee);})),[location]),{results:[],count:0,relatedSearchableKeys:[],searchableKeys:[]}),_useRequest$result=_useRequest.result,results=_useRequest$result.results,count=_useRequest$result.count,relatedSearchableKeys=_useRequest$result.relatedSearchableKeys,searchableKeys=_useRequest$result.searchableKeys,contentError=_useRequest.error,isWorkflowApprovalsLoading=_useRequest.isLoading,fetchWorkflowApprovals=_useRequest.request;useEffect(function(){fetchWorkflowApprovals();},[fetchWorkflowApprovals]);var fetchWorkflowApprovalsById=useCallback(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(ids){var params,_yield$WorkflowApprov,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:params=_objectSpread({},parseQueryString(QS_CONFIG,location.search));params.id__in=ids.join(',');_context2.next=4;return WorkflowApprovalsAPI.read(params);case 4:_yield$WorkflowApprov=_context2.sent;data=_yield$WorkflowApprov.data;return _context2.abrupt(\"return\",data.results);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}(),[location.search]// eslint-disable-line react-hooks/exhaustive-deps\n);var workflowApprovals=useWsWorkflowApprovals(results,fetchWorkflowApprovals,fetchWorkflowApprovalsById,QS_CONFIG);var _useSelected=useSelected(workflowApprovals),selected=_useSelected.selected,isAllSelected=_useSelected.isAllSelected,handleSelect=_useSelected.handleSelect,clearSelected=_useSelected.clearSelected,selectAll=_useSelected.selectAll;var _useDeleteItems=useDeleteItems(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:return _context3.abrupt(\"return\",Promise.all(selected.map(function(_ref4){var id=_ref4.id;return WorkflowApprovalsAPI.destroy(id);})));case 1:case\"end\":return _context3.stop();}}},_callee3);})),[selected]),{qsConfig:QS_CONFIG,allItemsSelected:isAllSelected,fetchItems:fetchWorkflowApprovals}),isDeleteLoading=_useDeleteItems.isLoading,deleteWorkflowApprovals=_useDeleteItems.deleteItems,deletionError=_useDeleteItems.deletionError,clearDeletionError=_useDeleteItems.clearDeletionError;var handleDelete=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return deleteWorkflowApprovals();case 2:clearSelected();case 3:case\"end\":return _context4.stop();}}},_callee4);}));return function handleDelete(){return _ref5.apply(this,arguments);};}();var isLoading=isWorkflowApprovalsLoading||isDeleteLoading;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(PaginatedTable,{contentError:contentError,hasContentLoading:isLoading,items:workflowApprovals,itemCount:count,pluralizedItemName:/*i18n*/i18n._(\"Workflow Approvals\"),qsConfig:QS_CONFIG,clearSelected:clearSelected,toolbarSearchColumns:[{name:/*i18n*/i18n._(\"Name\"),key:'name__icontains',isDefault:true},{name:/*i18n*/i18n._(\"Description\"),key:'description__icontains'}],toolbarSearchableKeys:searchableKeys,toolbarRelatedSearchableKeys:relatedSearchableKeys,renderToolbar:function renderToolbar(props){return/*#__PURE__*/_jsx(DataListToolbar,_objectSpread(_objectSpread({},props),{},{isAllSelected:isAllSelected,onSelectAll:selectAll,qsConfig:QS_CONFIG,additionalControls:[/*#__PURE__*/_jsx(ToolbarDeleteButton,{onDelete:handleDelete,itemsToDelete:selected,pluralizedItemName:/*i18n*/i18n._(\"Workflow Approvals\"),cannotDelete:function cannotDelete(item){return item.status==='pending'||!item.summary_fields.user_capabilities.delete;},errorMessage:/*#__PURE__*/_jsx(Trans,{id:\"{0, plural, one {This approval cannot be deleted due to insufficient permissions or a pending job status} other {These approvals cannot be deleted due to insufficient permissions or a pending job status}}\",values:{0:selected.length}})},\"delete\")]}));},headerRow:/*#__PURE__*/_jsxs(HeaderRow,{qsConfig:QS_CONFIG,children:[/*#__PURE__*/_jsx(HeaderCell,{sortKey:\"name\",children:/*i18n*/i18n._(\"Name\")}),/*#__PURE__*/_jsx(HeaderCell,{children:/*i18n*/i18n._(\"Workflow Job\")}),/*#__PURE__*/_jsx(HeaderCell,{sortKey:\"started\",children:/*i18n*/i18n._(\"Started\")}),/*#__PURE__*/_jsx(HeaderCell,{children:/*i18n*/i18n._(\"Status\")}),/*#__PURE__*/_jsx(HeaderCell,{children:/*i18n*/i18n._(\"Actions\")})]}),renderRow:function renderRow(workflowApproval,index){return/*#__PURE__*/_jsx(WorkflowApprovalListItem,{workflowApproval:workflowApproval,detailUrl:\"\".concat(match.url,\"/\").concat(workflowApproval.id),isSelected:selected.some(function(row){return row.id===workflowApproval.id;}),onSelect:function onSelect(){return handleSelect(workflowApproval);},rowIndex:index},workflowApproval.id);}})})}),deletionError&&/*#__PURE__*/_jsxs(AlertModal,{isOpen:deletionError,variant:\"error\",title:/*i18n*/i18n._(\"Error!\"),onClose:clearDeletionError,children:[/*i18n*/i18n._(\"Failed to delete one or more workflow approval.\"),/*#__PURE__*/_jsx(ErrorDetail,{error:deletionError})]})]});}export default WorkflowApprovalsList;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/WorkflowApproval/WorkflowApprovalList/WorkflowApprovalList.js"],"names":["React","useCallback","useEffect","useLocation","useRouteMatch","Card","PageSection","WorkflowApprovalsAPI","PaginatedTable","HeaderRow","HeaderCell","ToolbarDeleteButton","getSearchableKeys","AlertModal","ErrorDetail","DataListToolbar","useRequest","useDeleteItems","useSelected","getQSConfig","parseQueryString","WorkflowApprovalListItem","useWsWorkflowApprovals","QS_CONFIG","page","page_size","order_by","WorkflowApprovalsList","location","match","params","search","Promise","all","read","readOptions","response","actionsResponse","results","data","count","relatedSearchableKeys","related_search_fields","map","val","slice","searchableKeys","actions","GET","result","contentError","error","isWorkflowApprovalsLoading","isLoading","fetchWorkflowApprovals","request","fetchWorkflowApprovalsById","ids","id__in","join","workflowApprovals","selected","isAllSelected","handleSelect","clearSelected","selectAll","id","destroy","qsConfig","allItemsSelected","fetchItems","isDeleteLoading","deleteWorkflowApprovals","deleteItems","deletionError","clearDeletionError","handleDelete","name","key","isDefault","props","item","status","summary_fields","user_capabilities","delete","length","workflowApproval","index","url","some","row"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect } from 'react';\nimport { useLocation, useRouteMatch } from 'react-router-dom';\nimport { t, Plural } from '@lingui/macro';\nimport { Card, PageSection } from '@patternfly/react-core';\nimport { WorkflowApprovalsAPI } from 'api';\nimport PaginatedTable, {\n  HeaderRow,\n  HeaderCell,\n  ToolbarDeleteButton,\n  getSearchableKeys,\n} from 'components/PaginatedTable';\nimport AlertModal from 'components/AlertModal';\nimport ErrorDetail from 'components/ErrorDetail';\nimport DataListToolbar from 'components/DataListToolbar';\nimport useRequest, { useDeleteItems } from 'hooks/useRequest';\nimport useSelected from 'hooks/useSelected';\nimport { getQSConfig, parseQueryString } from 'util/qs';\nimport WorkflowApprovalListItem from './WorkflowApprovalListItem';\nimport useWsWorkflowApprovals from './useWsWorkflowApprovals';\n\nconst QS_CONFIG = getQSConfig('workflow_approvals', {\n  page: 1,\n  page_size: 20,\n  order_by: '-started',\n});\n\nfunction WorkflowApprovalsList() {\n  const location = useLocation();\n  const match = useRouteMatch();\n\n  const {\n    result: { results, count, relatedSearchableKeys, searchableKeys },\n    error: contentError,\n    isLoading: isWorkflowApprovalsLoading,\n    request: fetchWorkflowApprovals,\n  } = useRequest(\n    useCallback(async () => {\n      const params = parseQueryString(QS_CONFIG, location.search);\n      const [response, actionsResponse] = await Promise.all([\n        WorkflowApprovalsAPI.read(params),\n        WorkflowApprovalsAPI.readOptions(),\n      ]);\n      return {\n        results: response.data.results,\n        count: response.data.count,\n        relatedSearchableKeys: (\n          actionsResponse?.data?.related_search_fields || []\n        ).map((val) => val.slice(0, -8)),\n        searchableKeys: getSearchableKeys(actionsResponse.data.actions?.GET),\n      };\n    }, [location]),\n    {\n      results: [],\n      count: 0,\n      relatedSearchableKeys: [],\n      searchableKeys: [],\n    }\n  );\n\n  useEffect(() => {\n    fetchWorkflowApprovals();\n  }, [fetchWorkflowApprovals]);\n\n  const fetchWorkflowApprovalsById = useCallback(\n    async (ids) => {\n      const params = { ...parseQueryString(QS_CONFIG, location.search) };\n      params.id__in = ids.join(',');\n      const { data } = await WorkflowApprovalsAPI.read(params);\n      return data.results;\n    },\n    [location.search] // eslint-disable-line react-hooks/exhaustive-deps\n  );\n\n  const workflowApprovals = useWsWorkflowApprovals(\n    results,\n    fetchWorkflowApprovals,\n    fetchWorkflowApprovalsById,\n    QS_CONFIG\n  );\n\n  const { selected, isAllSelected, handleSelect, clearSelected, selectAll } =\n    useSelected(workflowApprovals);\n\n  const {\n    isLoading: isDeleteLoading,\n    deleteItems: deleteWorkflowApprovals,\n    deletionError,\n    clearDeletionError,\n  } = useDeleteItems(\n    useCallback(\n      async () =>\n        Promise.all(selected.map(({ id }) => WorkflowApprovalsAPI.destroy(id))),\n      [selected]\n    ),\n    {\n      qsConfig: QS_CONFIG,\n      allItemsSelected: isAllSelected,\n      fetchItems: fetchWorkflowApprovals,\n    }\n  );\n\n  const handleDelete = async () => {\n    await deleteWorkflowApprovals();\n    clearSelected();\n  };\n\n  const isLoading = isWorkflowApprovalsLoading || isDeleteLoading;\n\n  return (\n    <>\n      <PageSection>\n        <Card>\n          <PaginatedTable\n            contentError={contentError}\n            hasContentLoading={isLoading}\n            items={workflowApprovals}\n            itemCount={count}\n            pluralizedItemName={t`Workflow Approvals`}\n            qsConfig={QS_CONFIG}\n            clearSelected={clearSelected}\n            toolbarSearchColumns={[\n              {\n                name: t`Name`,\n                key: 'name__icontains',\n                isDefault: true,\n              },\n              {\n                name: t`Description`,\n                key: 'description__icontains',\n              },\n            ]}\n            toolbarSearchableKeys={searchableKeys}\n            toolbarRelatedSearchableKeys={relatedSearchableKeys}\n            renderToolbar={(props) => (\n              <DataListToolbar\n                {...props}\n                isAllSelected={isAllSelected}\n                onSelectAll={selectAll}\n                qsConfig={QS_CONFIG}\n                additionalControls={[\n                  <ToolbarDeleteButton\n                    key=\"delete\"\n                    onDelete={handleDelete}\n                    itemsToDelete={selected}\n                    pluralizedItemName={t`Workflow Approvals`}\n                    cannotDelete={(item) =>\n                      item.status === 'pending' ||\n                      !item.summary_fields.user_capabilities.delete\n                    }\n                    errorMessage={\n                      <Plural\n                        value={selected.length}\n                        one=\"This approval cannot be deleted due to insufficient permissions or a pending job status\"\n                        other=\"These approvals cannot be deleted due to insufficient permissions or a pending job status\"\n                      />\n                    }\n                  />,\n                ]}\n              />\n            )}\n            headerRow={\n              <HeaderRow qsConfig={QS_CONFIG}>\n                <HeaderCell sortKey=\"name\">{t`Name`}</HeaderCell>\n                <HeaderCell>{t`Workflow Job`}</HeaderCell>\n                <HeaderCell sortKey=\"started\">{t`Started`}</HeaderCell>\n                <HeaderCell>{t`Status`}</HeaderCell>\n                <HeaderCell>{t`Actions`}</HeaderCell>\n              </HeaderRow>\n            }\n            renderRow={(workflowApproval, index) => (\n              <WorkflowApprovalListItem\n                key={workflowApproval.id}\n                workflowApproval={workflowApproval}\n                detailUrl={`${match.url}/${workflowApproval.id}`}\n                isSelected={selected.some(\n                  (row) => row.id === workflowApproval.id\n                )}\n                onSelect={() => handleSelect(workflowApproval)}\n                rowIndex={index}\n              />\n            )}\n          />\n        </Card>\n      </PageSection>\n      {deletionError && (\n        <AlertModal\n          isOpen={deletionError}\n          variant=\"error\"\n          title={t`Error!`}\n          onClose={clearDeletionError}\n        >\n          {t`Failed to delete one or more workflow approval.`}\n          <ErrorDetail error={deletionError} />\n        </AlertModal>\n      )}\n    </>\n  );\n}\n\nexport default WorkflowApprovalsList;\n"]},"metadata":{},"sourceType":"module"}