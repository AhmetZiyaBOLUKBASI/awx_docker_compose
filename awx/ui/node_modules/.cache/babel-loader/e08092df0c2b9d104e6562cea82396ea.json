{"ast":null,"code":"import _toConsumableArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{i18n}from\"@lingui/core\";import React,{useState,useRef}from'react';import{GripVerticalIcon}from'@patternfly/react-icons';import{Modal,TextInput,TextArea,Select,SelectOption,SelectVariant,Button}from'@patternfly/react-core';import{TableComposable,Thead,Tbody,Tr,Th,Td}from'@patternfly/react-table';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SurveyReorderModal(_ref){var questions=_ref.questions,isOrderModalOpen=_ref.isOrderModalOpen,onCloseOrderModal=_ref.onCloseOrderModal,onSave=_ref.onSave;var _useState=useState(_toConsumableArray(questions)),_useState2=_slicedToArray(_useState,2),surveyQuestions=_useState2[0],setSurveyQuestions=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),itemStartIndex=_useState4[0],setStartItemIndex=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),draggedItemId=_useState6[0],setDraggedItemId=_useState6[1];var ref=useRef(null);var isValidDrop=function isValidDrop(evt){var ulRect=ref.current.getBoundingClientRect();return evt.clientX>ulRect.x&&evt.clientX<ulRect.x+ulRect.width&&evt.clientY>ulRect.y&&evt.clientY<ulRect.y+ulRect.height;};var onDrop=function onDrop(evt){if(!isValidDrop(evt)){onDragCancel();}};var onDragCancel=function onDragCancel(){Array.from(ref.current.children).forEach(function(el){el.setAttribute('aria-pressed','false');});setDraggedItemId(null);setStartItemIndex(null);};var onDragOver=function onDragOver(evt){evt.preventDefault();var curListItem=evt.target.closest('tr');var dragId=curListItem.id;var newDraggedItemIndex=Array.from(ref.current.children).findIndex(function(item){return item.id===dragId;});if(newDraggedItemIndex!==itemStartIndex){var temporaryOrder=moveItem(_toConsumableArray(surveyQuestions),draggedItemId,newDraggedItemIndex);setSurveyQuestions(temporaryOrder);}return null;};var moveItem=function moveItem(arr,itemId,toIndex){var fromIndex=arr.findIndex(function(item){return item.variable===itemId;});if(fromIndex===toIndex){return arr;}var temp=arr.splice(fromIndex,1);arr.splice(toIndex,0,temp[0]);return arr;};var onDragLeave=function onDragLeave(evt){if(!isValidDrop(evt)){setStartItemIndex(null);}};var onDragEnd=function onDragEnd(evt){evt.target.setAttribute('aria-pressed','false');setDraggedItemId(null);setStartItemIndex(null);};var onDragStart=function onDragStart(evt){evt.dataTransfer.effectAllowed='move';var newDraggedItemId=evt.currentTarget.id;var originalStartIndex=Array.from(ref.current.children).findIndex(function(item){return item.id===evt.currentTarget.id;});evt.currentTarget.setAttribute('aria-pressed','true');setDraggedItemId(newDraggedItemId);setStartItemIndex(originalStartIndex);};var defaultAnswer=function defaultAnswer(q){var component=null;var choices=Array.isArray(q.choices)?q.choices:(q.choices||'').split('\\n');switch(q.type){case'password':component=/*#__PURE__*/_jsx(\"span\",{id:\"survey-preview-encrypted\",children:/*i18n*/i18n._(\"encrypted\").toUpperCase()});break;case'textarea':component=/*#__PURE__*/_jsx(TextArea,{id:\"survey-preview-textArea-\".concat(q.variable),type:\"survey-preview-textArea-\".concat(q.variable),value:q.default,\"aria-label\":/*i18n*/i18n._(\"Text Area\"),isDisabled:true});break;case'multiplechoice':component=/*#__PURE__*/_jsx(Select,{id:\"survey-preview-multipleChoice-\".concat(q.variable),ouiaId:\"survey-preview-multipleChoice-\".concat(q.variable),isDisabled:true,\"aria-label\":/*i18n*/i18n._(\"Multiple Choice\"),typeAheadAriaLabel:/*i18n*/i18n._(\"Multiple Choice\"),placeholderText:q.default,onToggle:function onToggle(){}});break;case'multiselect':component=/*#__PURE__*/_jsx(Select,{isDisabled:true,isReadOnly:true,variant:SelectVariant.typeaheadMulti,isOpen:false,selections:q.default.length>0?q.default.split('\\n'):[],onToggle:function onToggle(){},\"aria-label\":/*i18n*/i18n._(\"Multi-Select\"),typeAheadAriaLabel:/*i18n*/i18n._(\"Multi-Select\"),id:\"survey-preview-multiSelect-\".concat(q.variable),ouiaId:\"survey-preview-multiSelect-\".concat(q.variable),noResultsFoundText:/*i18n*/i18n._(\"No results found\"),children:choices.length>0&&choices.map(function(option){return/*#__PURE__*/_jsx(SelectOption,{value:option},option);})});break;default:component=/*#__PURE__*/_jsx(TextInput,{id:\"survey-preview-text-\".concat(q.variable),value:q.default,isDisabled:true,\"aria-label\":/*i18n*/i18n._(\"Text\")});break;}return component;};return/*#__PURE__*/_jsx(Modal,{title:/*i18n*/i18n._(\"Survey Question Order\"),\"aria-label\":/*i18n*/i18n._(\"Survey preview modal\"),isOpen:isOrderModalOpen,description:/*i18n*/i18n._(\"To reorder the survey questions drag and drop them in the desired location.\"),onClose:function onClose(){return onCloseOrderModal();},variant:\"medium\",actions:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",ouiaId:\"survey-order-save\",onClick:function onClick(){onSave(surveyQuestions);},children:/*i18n*/i18n._(\"Save\")},\"save\"),/*#__PURE__*/_jsx(Button,{ouiaId:\"survey-order-cancel\",variant:\"link\",onClick:function onClick(){return onCloseOrderModal();},children:/*i18n*/i18n._(\"Cancel\")},\"cancel\")],children:/*#__PURE__*/_jsxs(TableComposable,{children:[/*#__PURE__*/_jsx(Thead,{children:/*#__PURE__*/_jsxs(Tr,{ouiaId:\"survey-order-table-header\",children:[/*#__PURE__*/_jsx(Th,{dataLabel:/*i18n*/i18n._(\"Order\"),children:/*i18n*/i18n._(\"Order\")}),/*#__PURE__*/_jsx(Th,{dataLabel:/*i18n*/i18n._(\"Name\"),children:/*i18n*/i18n._(\"Name\")}),/*#__PURE__*/_jsx(Th,{dataLabel:/*i18n*/i18n._(\"Default Answer(s)\"),children:/*i18n*/i18n._(\"Default Answer(s)\")})]})}),/*#__PURE__*/_jsx(Tbody,{onDragOver:onDragOver,onDragLeave:onDragLeave,ref:ref,children:surveyQuestions.map(function(q){return/*#__PURE__*/_jsxs(Tr,{id:q.variable,draggable:true,onDrop:onDrop,onDragEnd:onDragEnd,onDragStart:onDragStart,ouiaId:\"survey-order-row-\".concat(q.variable),children:[/*#__PURE__*/_jsx(Td,{dataLabel:/*i18n*/i18n._(\"Order\"),children:/*#__PURE__*/_jsx(Button,{variant:\"plain\",children:/*#__PURE__*/_jsx(GripVerticalIcon,{})})}),/*#__PURE__*/_jsx(Td,{dataLabel:/*i18n*/i18n._(\"Name\"),\"aria-label\":q.question_name,children:q.question_name}),/*#__PURE__*/_jsx(Td,{dataLabel:/*i18n*/i18n._(\"Default Answer(s)\"),children:defaultAnswer(q)})]},q.variable);})})]})});}export default SurveyReorderModal;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/Template/Survey/SurveyReorderModal.js"],"names":["React","useState","useRef","GripVerticalIcon","Modal","TextInput","TextArea","Select","SelectOption","SelectVariant","Button","TableComposable","Thead","Tbody","Tr","Th","Td","SurveyReorderModal","questions","isOrderModalOpen","onCloseOrderModal","onSave","surveyQuestions","setSurveyQuestions","itemStartIndex","setStartItemIndex","draggedItemId","setDraggedItemId","ref","isValidDrop","evt","ulRect","current","getBoundingClientRect","clientX","x","width","clientY","y","height","onDrop","onDragCancel","Array","from","children","forEach","el","setAttribute","onDragOver","preventDefault","curListItem","target","closest","dragId","id","newDraggedItemIndex","findIndex","item","temporaryOrder","moveItem","arr","itemId","toIndex","fromIndex","variable","temp","splice","onDragLeave","onDragEnd","onDragStart","dataTransfer","effectAllowed","newDraggedItemId","currentTarget","originalStartIndex","defaultAnswer","q","component","choices","isArray","split","type","toUpperCase","default","typeaheadMulti","length","map","option","question_name"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from 'react';\nimport { t } from '@lingui/macro';\nimport { GripVerticalIcon } from '@patternfly/react-icons';\nimport {\n  Modal,\n  TextInput,\n  TextArea,\n  Select,\n  SelectOption,\n  SelectVariant,\n  Button,\n} from '@patternfly/react-core';\nimport {\n  TableComposable,\n  Thead,\n  Tbody,\n  Tr,\n  Th,\n  Td,\n} from '@patternfly/react-table';\n\nfunction SurveyReorderModal({\n  questions,\n  isOrderModalOpen,\n  onCloseOrderModal,\n  onSave,\n}) {\n  const [surveyQuestions, setSurveyQuestions] = useState([...questions]);\n  const [itemStartIndex, setStartItemIndex] = useState(null);\n  const [draggedItemId, setDraggedItemId] = useState(null);\n  const ref = useRef(null);\n\n  const isValidDrop = (evt) => {\n    const ulRect = ref.current.getBoundingClientRect();\n    return (\n      evt.clientX > ulRect.x &&\n      evt.clientX < ulRect.x + ulRect.width &&\n      evt.clientY > ulRect.y &&\n      evt.clientY < ulRect.y + ulRect.height\n    );\n  };\n  const onDrop = (evt) => {\n    if (!isValidDrop(evt)) {\n      onDragCancel();\n    }\n  };\n\n  const onDragCancel = () => {\n    Array.from(ref.current.children).forEach((el) => {\n      el.setAttribute('aria-pressed', 'false');\n    });\n    setDraggedItemId(null);\n    setStartItemIndex(null);\n  };\n\n  const onDragOver = (evt) => {\n    evt.preventDefault();\n\n    const curListItem = evt.target.closest('tr');\n\n    const dragId = curListItem.id;\n    const newDraggedItemIndex = Array.from(ref.current.children).findIndex(\n      (item) => item.id === dragId\n    );\n\n    if (newDraggedItemIndex !== itemStartIndex) {\n      const temporaryOrder = moveItem(\n        [...surveyQuestions],\n        draggedItemId,\n        newDraggedItemIndex\n      );\n\n      setSurveyQuestions(temporaryOrder);\n    }\n    return null;\n  };\n\n  const moveItem = (arr, itemId, toIndex) => {\n    const fromIndex = arr.findIndex((item) => item.variable === itemId);\n\n    if (fromIndex === toIndex) {\n      return arr;\n    }\n    const temp = arr.splice(fromIndex, 1);\n    arr.splice(toIndex, 0, temp[0]);\n\n    return arr;\n  };\n\n  const onDragLeave = (evt) => {\n    if (!isValidDrop(evt)) {\n      setStartItemIndex(null);\n    }\n  };\n\n  const onDragEnd = (evt) => {\n    evt.target.setAttribute('aria-pressed', 'false');\n\n    setDraggedItemId(null);\n    setStartItemIndex(null);\n  };\n\n  const onDragStart = (evt) => {\n    evt.dataTransfer.effectAllowed = 'move';\n    const newDraggedItemId = evt.currentTarget.id;\n\n    const originalStartIndex = Array.from(ref.current.children).findIndex(\n      (item) => item.id === evt.currentTarget.id\n    );\n\n    evt.currentTarget.setAttribute('aria-pressed', 'true');\n    setDraggedItemId(newDraggedItemId);\n    setStartItemIndex(originalStartIndex);\n  };\n\n  const defaultAnswer = (q) => {\n    let component = null;\n    const choices = Array.isArray(q.choices)\n      ? q.choices\n      : (q.choices || '').split('\\n');\n    switch (q.type) {\n      case 'password':\n        component = (\n          <span id=\"survey-preview-encrypted\">\n            {t`encrypted`.toUpperCase()}\n          </span>\n        );\n        break;\n      case 'textarea':\n        component = (\n          <TextArea\n            id={`survey-preview-textArea-${q.variable}`}\n            type={`survey-preview-textArea-${q.variable}`}\n            value={q.default}\n            aria-label={t`Text Area`}\n            isDisabled\n          />\n        );\n        break;\n      case 'multiplechoice':\n        component = (\n          <Select\n            id={`survey-preview-multipleChoice-${q.variable}`}\n            ouiaId={`survey-preview-multipleChoice-${q.variable}`}\n            isDisabled\n            aria-label={t`Multiple Choice`}\n            typeAheadAriaLabel={t`Multiple Choice`}\n            placeholderText={q.default}\n            onToggle={() => {}}\n          />\n        );\n        break;\n      case 'multiselect':\n        component = (\n          <Select\n            isDisabled\n            isReadOnly\n            variant={SelectVariant.typeaheadMulti}\n            isOpen={false}\n            selections={q.default.length > 0 ? q.default.split('\\n') : []}\n            onToggle={() => {}}\n            aria-label={t`Multi-Select`}\n            typeAheadAriaLabel={t`Multi-Select`}\n            id={`survey-preview-multiSelect-${q.variable}`}\n            ouiaId={`survey-preview-multiSelect-${q.variable}`}\n            noResultsFoundText={t`No results found`}\n          >\n            {choices.length > 0 &&\n              choices.map((option) => (\n                <SelectOption key={option} value={option} />\n              ))}\n          </Select>\n        );\n        break;\n      default:\n        component = (\n          <TextInput\n            id={`survey-preview-text-${q.variable}`}\n            value={q.default}\n            isDisabled\n            aria-label={t`Text`}\n          />\n        );\n        break;\n    }\n\n    return component;\n  };\n  return (\n    <Modal\n      title={t`Survey Question Order`}\n      aria-label={t`Survey preview modal`}\n      isOpen={isOrderModalOpen}\n      description={t`To reorder the survey questions drag and drop them in the desired location.`}\n      onClose={() => onCloseOrderModal()}\n      variant=\"medium\"\n      actions={[\n        <Button\n          variant=\"primary\"\n          ouiaId=\"survey-order-save\"\n          key=\"save\"\n          onClick={() => {\n            onSave(surveyQuestions);\n          }}\n        >{t`Save`}</Button>,\n        <Button\n          ouiaId=\"survey-order-cancel\"\n          key=\"cancel\"\n          variant=\"link\"\n          onClick={() => onCloseOrderModal()}\n        >{t`Cancel`}</Button>,\n      ]}\n    >\n      <TableComposable>\n        <Thead>\n          <Tr ouiaId=\"survey-order-table-header\">\n            <Th dataLabel={t`Order`}>{t`Order`}</Th>\n            <Th dataLabel={t`Name`}>{t`Name`}</Th>\n            <Th dataLabel={t`Default Answer(s)`}>{t`Default Answer(s)`}</Th>\n          </Tr>\n        </Thead>\n        <Tbody onDragOver={onDragOver} onDragLeave={onDragLeave} ref={ref}>\n          {surveyQuestions.map((q) => (\n            <Tr\n              key={q.variable}\n              id={q.variable}\n              draggable\n              onDrop={onDrop}\n              onDragEnd={onDragEnd}\n              onDragStart={onDragStart}\n              ouiaId={`survey-order-row-${q.variable}`}\n            >\n              <Td dataLabel={t`Order`}>\n                <Button variant=\"plain\">\n                  <GripVerticalIcon />\n                </Button>\n              </Td>\n              <Td dataLabel={t`Name`} aria-label={q.question_name}>\n                {q.question_name}\n              </Td>\n              <Td dataLabel={t`Default Answer(s)`}>{defaultAnswer(q)}</Td>\n            </Tr>\n          ))}\n        </Tbody>\n      </TableComposable>\n    </Modal>\n  );\n}\nexport default SurveyReorderModal;\n"]},"metadata":{},"sourceType":"module"}