{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useCallback,useEffect}from'react';import{Switch,Route,Redirect,Link,useRouteMatch,useLocation}from'react-router-dom';import{CaretLeftIcon}from'@patternfly/react-icons';import{Card,PageSection}from'@patternfly/react-core';import RoutedTabs from'components/RoutedTabs';import ContentError from'components/ContentError';import ContentLoading from'components/ContentLoading';import JobList from'components/JobList';import{HostsAPI}from'api';import useRequest from'hooks/useRequest';import HostFacts from'./HostFacts';import HostDetail from'./HostDetail';import HostEdit from'./HostEdit';import HostGroups from'./HostGroups';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Host(_ref){var setBreadcrumb=_ref.setBreadcrumb;var location=useLocation();var match=useRouteMatch('/hosts/:id');var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$HostsAPI$readD,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return HostsAPI.readDetail(match.params.id);case 2:_yield$HostsAPI$readD=_context.sent;data=_yield$HostsAPI$readD.data;setBreadcrumb(data);return _context.abrupt(\"return\",data);case 6:case\"end\":return _context.stop();}}},_callee);})),[match.params.id,setBreadcrumb])),error=_useRequest.error,isLoading=_useRequest.isLoading,host=_useRequest.result,fetchHost=_useRequest.request;useEffect(function(){fetchHost();},[fetchHost,location.pathname]);var tabsArray=[{name:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CaretLeftIcon,{}),/*i18n*/i18n._(\"Back to Hosts\")]}),link:\"/hosts\",id:99,isBackButton:true},{name:/*i18n*/i18n._(\"Details\"),link:\"\".concat(match.url,\"/details\"),id:0},{name:/*i18n*/i18n._(\"Facts\"),link:\"\".concat(match.url,\"/facts\"),id:1},{name:/*i18n*/i18n._(\"Groups\"),link:\"\".concat(match.url,\"/groups\"),id:2},{name:/*i18n*/i18n._(\"Jobs\"),link:\"\".concat(match.url,\"/jobs\"),id:3}];if(isLoading){return/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(ContentLoading,{})})});}if(error){var _error$response;return/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(ContentError,{error:error,children:(error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===404&&/*#__PURE__*/_jsxs(\"span\",{children:[/*i18n*/i18n._(\"Host not found.\"),' ',/*#__PURE__*/_jsx(Link,{to:\"/hosts\",children:/*i18n*/i18n._(\"View all Hosts.\")})]})})})});}var showCardHeader=true;if(location.pathname.endsWith('edit')){showCardHeader=false;}return/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsxs(Card,{children:[showCardHeader&&/*#__PURE__*/_jsx(RoutedTabs,{tabsArray:tabsArray}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Redirect,{from:\"/hosts/:id\",to:\"/hosts/:id/details\",exact:true}),host&&[/*#__PURE__*/_jsx(Route,{path:\"/hosts/:id/details\",children:/*#__PURE__*/_jsx(HostDetail,{host:host})},\"details\"),/*#__PURE__*/_jsx(Route,{path:\"/hosts/:id/edit\",children:/*#__PURE__*/_jsx(HostEdit,{host:host})},\"edit\"),/*#__PURE__*/_jsx(Route,{path:\"/hosts/:id/facts\",children:/*#__PURE__*/_jsx(HostFacts,{host:host})},\"facts\"),/*#__PURE__*/_jsx(Route,{path:\"/hosts/:id/groups\",children:/*#__PURE__*/_jsx(HostGroups,{host:host})},\"groups\"),/*#__PURE__*/_jsx(Route,{path:\"/hosts/:id/jobs\",children:/*#__PURE__*/_jsx(JobList,{defaultParams:{job__hosts:host.id}})},\"jobs\")],/*#__PURE__*/_jsx(Route,{path:\"*\",children:/*#__PURE__*/_jsx(ContentError,{isNotFound:true,children:/*#__PURE__*/_jsx(Link,{to:\"\".concat(match.url,\"/details\"),children:/*i18n*/i18n._(\"View Host Details\")})})},\"not-found\")]})]})});}export default Host;export{Host as _Host};","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/Host/Host.js"],"names":["React","useCallback","useEffect","Switch","Route","Redirect","Link","useRouteMatch","useLocation","CaretLeftIcon","Card","PageSection","RoutedTabs","ContentError","ContentLoading","JobList","HostsAPI","useRequest","HostFacts","HostDetail","HostEdit","HostGroups","Host","setBreadcrumb","location","match","readDetail","params","id","data","error","isLoading","host","result","fetchHost","request","pathname","tabsArray","name","link","isBackButton","url","response","status","showCardHeader","endsWith","job__hosts","_Host"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect } from 'react';\n\nimport { t } from '@lingui/macro';\nimport {\n  Switch,\n  Route,\n  Redirect,\n  Link,\n  useRouteMatch,\n  useLocation,\n} from 'react-router-dom';\nimport { CaretLeftIcon } from '@patternfly/react-icons';\nimport { Card, PageSection } from '@patternfly/react-core';\nimport RoutedTabs from 'components/RoutedTabs';\nimport ContentError from 'components/ContentError';\nimport ContentLoading from 'components/ContentLoading';\nimport JobList from 'components/JobList';\nimport { HostsAPI } from 'api';\nimport useRequest from 'hooks/useRequest';\nimport HostFacts from './HostFacts';\nimport HostDetail from './HostDetail';\nimport HostEdit from './HostEdit';\nimport HostGroups from './HostGroups';\n\nfunction Host({ setBreadcrumb }) {\n  const location = useLocation();\n  const match = useRouteMatch('/hosts/:id');\n  const {\n    error,\n    isLoading,\n    result: host,\n    request: fetchHost,\n  } = useRequest(\n    useCallback(async () => {\n      const { data } = await HostsAPI.readDetail(match.params.id);\n      setBreadcrumb(data);\n      return data;\n    }, [match.params.id, setBreadcrumb])\n  );\n\n  useEffect(() => {\n    fetchHost();\n  }, [fetchHost, location.pathname]);\n\n  const tabsArray = [\n    {\n      name: (\n        <>\n          <CaretLeftIcon />\n          {t`Back to Hosts`}\n        </>\n      ),\n      link: `/hosts`,\n      id: 99,\n      isBackButton: true,\n    },\n    {\n      name: t`Details`,\n      link: `${match.url}/details`,\n      id: 0,\n    },\n    {\n      name: t`Facts`,\n      link: `${match.url}/facts`,\n      id: 1,\n    },\n    {\n      name: t`Groups`,\n      link: `${match.url}/groups`,\n      id: 2,\n    },\n    {\n      name: t`Jobs`,\n      link: `${match.url}/jobs`,\n      id: 3,\n    },\n  ];\n\n  if (isLoading) {\n    return (\n      <PageSection>\n        <Card>\n          <ContentLoading />\n        </Card>\n      </PageSection>\n    );\n  }\n\n  if (error) {\n    return (\n      <PageSection>\n        <Card>\n          <ContentError error={error}>\n            {error?.response?.status === 404 && (\n              <span>\n                {t`Host not found.`}{' '}\n                <Link to=\"/hosts\">{t`View all Hosts.`}</Link>\n              </span>\n            )}\n          </ContentError>\n        </Card>\n      </PageSection>\n    );\n  }\n\n  let showCardHeader = true;\n\n  if (location.pathname.endsWith('edit')) {\n    showCardHeader = false;\n  }\n\n  return (\n    <PageSection>\n      <Card>\n        {showCardHeader && <RoutedTabs tabsArray={tabsArray} />}\n        <Switch>\n          <Redirect from=\"/hosts/:id\" to=\"/hosts/:id/details\" exact />\n          {host && [\n            <Route path=\"/hosts/:id/details\" key=\"details\">\n              <HostDetail host={host} />\n            </Route>,\n            <Route path=\"/hosts/:id/edit\" key=\"edit\">\n              <HostEdit host={host} />\n            </Route>,\n            <Route key=\"facts\" path=\"/hosts/:id/facts\">\n              <HostFacts host={host} />\n            </Route>,\n            <Route path=\"/hosts/:id/groups\" key=\"groups\">\n              <HostGroups host={host} />\n            </Route>,\n            <Route path=\"/hosts/:id/jobs\" key=\"jobs\">\n              <JobList defaultParams={{ job__hosts: host.id }} />\n            </Route>,\n          ]}\n          <Route key=\"not-found\" path=\"*\">\n            <ContentError isNotFound>\n              <Link to={`${match.url}/details`}>{t`View Host Details`}</Link>\n            </ContentError>\n          </Route>\n        </Switch>\n      </Card>\n    </PageSection>\n  );\n}\n\nexport default Host;\nexport { Host as _Host };\n"]},"metadata":{},"sourceType":"module"}