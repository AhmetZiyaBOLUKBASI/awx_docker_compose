{"ast":null,"code":"import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";var _excluded=[\"approvalName\",\"approvalDescription\",\"credentials\",\"linkType\",\"nodeResource\",\"nodeType\",\"timeoutMinutes\",\"timeoutSeconds\",\"convergence\",\"identifier\"];import{i18n}from\"@lingui/core\";import React,{useContext}from'react';import{WorkflowDispatchContext}from'contexts/Workflow';import NodeModal from'./NodeModal';import{jsx as _jsx}from\"react/jsx-runtime\";function NodeEditModal(){var dispatch=useContext(WorkflowDispatchContext);var updateNode=function updateNode(values,config){var approvalName=values.approvalName,approvalDescription=values.approvalDescription,credentials=values.credentials,linkType=values.linkType,nodeResource=values.nodeResource,nodeType=values.nodeType,timeoutMinutes=values.timeoutMinutes,timeoutSeconds=values.timeoutSeconds,convergence=values.convergence,identifier=values.identifier,rest=_objectWithoutProperties(values,_excluded);var node;if(values.nodeType==='workflow_approval_template'){node={all_parents_must_converge:convergence==='all',nodeResource:{description:approvalDescription,name:approvalName,timeout:Number(timeoutMinutes)*60+Number(timeoutSeconds),type:'workflow_approval_template'},identifier:identifier};}else{node={nodeResource:nodeResource,all_parents_must_converge:convergence==='all',identifier:identifier};if(nodeType==='job_template'||nodeType==='workflow_job_template'){node.promptValues=_objectSpread(_objectSpread({},rest),{},{credentials:credentials});node.launchConfig=config;}if(nodeType==='system_job_template'){node.promptValues={extra_data:values===null||values===void 0?void 0:values.extra_data};}}dispatch({type:'UPDATE_NODE',node:node});};return/*#__PURE__*/_jsx(NodeModal,{askLinkType:false,onSave:updateNode,title:/*i18n*/i18n._(\"Edit Node\")});}export default NodeEditModal;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/Template/WorkflowJobTemplateVisualizer/Modals/NodeModals/NodeEditModal.js"],"names":["React","useContext","WorkflowDispatchContext","NodeModal","NodeEditModal","dispatch","updateNode","values","config","approvalName","approvalDescription","credentials","linkType","nodeResource","nodeType","timeoutMinutes","timeoutSeconds","convergence","identifier","rest","node","all_parents_must_converge","description","name","timeout","Number","type","promptValues","launchConfig","extra_data"],"mappings":"qaAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,KAAkC,OAAlC,CAGA,OAASC,uBAAT,KAAwC,mBAAxC,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,C,2CAEA,QAASC,CAAAA,aAAT,EAAyB,CACvB,GAAMC,CAAAA,QAAQ,CAAGJ,UAAU,CAACC,uBAAD,CAA3B,CAEA,GAAMI,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,MAAD,CAASC,MAAT,CAAoB,CACrC,GACEC,CAAAA,YADF,CAYIF,MAZJ,CACEE,YADF,CAEEC,mBAFF,CAYIH,MAZJ,CAEEG,mBAFF,CAGEC,WAHF,CAYIJ,MAZJ,CAGEI,WAHF,CAIEC,QAJF,CAYIL,MAZJ,CAIEK,QAJF,CAKEC,YALF,CAYIN,MAZJ,CAKEM,YALF,CAMEC,QANF,CAYIP,MAZJ,CAMEO,QANF,CAOEC,cAPF,CAYIR,MAZJ,CAOEQ,cAPF,CAQEC,cARF,CAYIT,MAZJ,CAQES,cARF,CASEC,WATF,CAYIV,MAZJ,CASEU,WATF,CAUEC,UAVF,CAYIX,MAZJ,CAUEW,UAVF,CAWKC,IAXL,0BAYIZ,MAZJ,YAaA,GAAIa,CAAAA,IAAJ,CACA,GAAIb,MAAM,CAACO,QAAP,GAAoB,4BAAxB,CAAsD,CACpDM,IAAI,CAAG,CACLC,yBAAyB,CAAEJ,WAAW,GAAK,KADtC,CAELJ,YAAY,CAAE,CACZS,WAAW,CAAEZ,mBADD,CAEZa,IAAI,CAAEd,YAFM,CAGZe,OAAO,CAAEC,MAAM,CAACV,cAAD,CAAN,CAAyB,EAAzB,CAA8BU,MAAM,CAACT,cAAD,CAHjC,CAIZU,IAAI,CAAE,4BAJM,CAFT,CAQLR,UAAU,CAAVA,UARK,CAAP,CAUD,CAXD,IAWO,CACLE,IAAI,CAAG,CACLP,YAAY,CAAZA,YADK,CAELQ,yBAAyB,CAAEJ,WAAW,GAAK,KAFtC,CAGLC,UAAU,CAAVA,UAHK,CAAP,CAKA,GAAIJ,QAAQ,GAAK,cAAb,EAA+BA,QAAQ,GAAK,uBAAhD,CAAyE,CACvEM,IAAI,CAACO,YAAL,gCACKR,IADL,MAEER,WAAW,CAAXA,WAFF,GAKAS,IAAI,CAACQ,YAAL,CAAoBpB,MAApB,CACD,CACD,GAAIM,QAAQ,GAAK,qBAAjB,CAAwC,CACtCM,IAAI,CAACO,YAAL,CAAoB,CAClBE,UAAU,CAAEtB,MAAF,SAAEA,MAAF,iBAAEA,MAAM,CAAEsB,UADF,CAApB,CAGD,CACF,CAEDxB,QAAQ,CAAC,CACPqB,IAAI,CAAE,aADC,CAEPN,IAAI,CAAJA,IAFO,CAAD,CAAR,CAID,CAnDD,CAqDA,mBACE,KAAC,SAAD,EAAW,WAAW,CAAE,KAAxB,CAA+B,MAAM,CAAEd,UAAvC,CAAmD,KAAK,SAAE,mBAA1D,EADF,CAGD,CAED,cAAeF,CAAAA,aAAf","sourcesContent":["import React, { useContext } from 'react';\n\nimport { t } from '@lingui/macro';\nimport { WorkflowDispatchContext } from 'contexts/Workflow';\nimport NodeModal from './NodeModal';\n\nfunction NodeEditModal() {\n  const dispatch = useContext(WorkflowDispatchContext);\n\n  const updateNode = (values, config) => {\n    const {\n      approvalName,\n      approvalDescription,\n      credentials,\n      linkType,\n      nodeResource,\n      nodeType,\n      timeoutMinutes,\n      timeoutSeconds,\n      convergence,\n      identifier,\n      ...rest\n    } = values;\n    let node;\n    if (values.nodeType === 'workflow_approval_template') {\n      node = {\n        all_parents_must_converge: convergence === 'all',\n        nodeResource: {\n          description: approvalDescription,\n          name: approvalName,\n          timeout: Number(timeoutMinutes) * 60 + Number(timeoutSeconds),\n          type: 'workflow_approval_template',\n        },\n        identifier,\n      };\n    } else {\n      node = {\n        nodeResource,\n        all_parents_must_converge: convergence === 'all',\n        identifier,\n      };\n      if (nodeType === 'job_template' || nodeType === 'workflow_job_template') {\n        node.promptValues = {\n          ...rest,\n          credentials,\n        };\n\n        node.launchConfig = config;\n      }\n      if (nodeType === 'system_job_template') {\n        node.promptValues = {\n          extra_data: values?.extra_data,\n        };\n      }\n    }\n\n    dispatch({\n      type: 'UPDATE_NODE',\n      node,\n    });\n  };\n\n  return (\n    <NodeModal askLinkType={false} onSave={updateNode} title={t`Edit Node`} />\n  );\n}\n\nexport default NodeEditModal;\n"]},"metadata":{},"sourceType":"module"}