{"ast":null,"code":"import _classCallCheck from \"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { __rest } from \"tslib\";\nimport * as React from 'react';\nimport styles from '@patternfly/react-styles/css/components/Menu/menu';\nimport { css } from '@patternfly/react-styles';\nimport { getOUIAProps, getDefaultOUIAId } from '../../helpers';\nimport { MenuContext } from './MenuContext';\nimport { canUseDOM } from '../../helpers/util';\nimport { KeyboardHandler } from '../../helpers';\n\nvar MenuBase = /*#__PURE__*/function (_React$Component) {\n  _inherits(MenuBase, _React$Component);\n\n  var _super = _createSuper(MenuBase);\n\n  function MenuBase(props) {\n    var _this;\n\n    _classCallCheck(this, MenuBase);\n\n    _this = _super.call(this, props);\n    _this.menuRef = React.createRef();\n    _this.activeMenu = null;\n    _this.state = {\n      ouiaStateId: getDefaultOUIAId(Menu.displayName),\n      searchInputValue: '',\n      transitionMoveTarget: null,\n      flyoutRef: null,\n      disableHover: false\n    };\n\n    _this.handleDrilldownTransition = function (event) {\n      var current = _this.menuRef.current;\n\n      if (!current || current !== event.target.closest('.pf-c-menu') && !Array.from(current.getElementsByClassName('pf-c-menu')).includes(event.target.closest('.pf-c-menu'))) {\n        return;\n      }\n\n      if (_this.state.transitionMoveTarget) {\n        _this.state.transitionMoveTarget.focus();\n\n        _this.setState({\n          transitionMoveTarget: null\n        });\n      } else {\n        var nextMenu = current.querySelector('#' + _this.props.activeMenu) || current || null;\n        var nextTarget = Array.from(nextMenu.getElementsByTagName('UL')[0].children).filter(function (el) {\n          return !(el.classList.contains('pf-m-disabled') || el.classList.contains('pf-c-divider'));\n        })[0].firstChild;\n        nextTarget.focus();\n        nextTarget.tabIndex = 0;\n      }\n    };\n\n    _this.handleExtraKeys = function (event) {\n      var isDrilldown = _this.props.containsDrilldown;\n      var activeElement = document.activeElement;\n\n      if (event.target.closest('.pf-c-menu') !== _this.activeMenu && !event.target.classList.contains('pf-c-breadcrumb__link')) {\n        _this.activeMenu = event.target.closest('.pf-c-menu');\n\n        _this.setState({\n          disableHover: true\n        });\n      }\n\n      if (event.target.tagName === 'INPUT') {\n        return;\n      }\n\n      var parentMenu = _this.activeMenu;\n      var key = event.key;\n      var isFromBreadcrumb = activeElement.classList.contains('pf-c-breadcrumb__link') || activeElement.classList.contains('pf-c-dropdown__toggle');\n\n      if (key === ' ' || key === 'Enter') {\n        event.preventDefault();\n\n        if (isDrilldown && !isFromBreadcrumb) {\n          var isDrillingOut = activeElement.closest('li').classList.contains('pf-m-current-path');\n\n          if (isDrillingOut && parentMenu.parentElement.tagName === 'LI') {\n            activeElement.tabIndex = -1;\n            parentMenu.parentElement.firstChild.tabIndex = 0;\n\n            _this.setState({\n              transitionMoveTarget: parentMenu.parentElement.firstChild\n            });\n          } else {\n            if (activeElement.nextElementSibling && activeElement.nextElementSibling.classList.contains('pf-c-menu')) {\n              var childItems = Array.from(activeElement.nextElementSibling.getElementsByTagName('UL')[0].children).filter(function (el) {\n                return !(el.classList.contains('pf-m-disabled') || el.classList.contains('pf-c-divider'));\n              });\n              activeElement.tabIndex = -1;\n              childItems[0].firstChild.tabIndex = 0;\n\n              _this.setState({\n                transitionMoveTarget: childItems[0].firstChild\n              });\n            }\n          }\n        }\n\n        document.activeElement.click();\n      }\n    };\n\n    _this.createNavigableElements = function () {\n      var isDrilldown = _this.props.containsDrilldown;\n      return isDrilldown ? Array.from(_this.activeMenu.getElementsByTagName('UL')[0].children).filter(function (el) {\n        return !(el.classList.contains('pf-m-disabled') || el.classList.contains('pf-c-divider'));\n      }) : Array.from(_this.menuRef.current.getElementsByTagName('LI')).filter(function (el) {\n        return !(el.classList.contains('pf-m-disabled') || el.classList.contains('pf-c-divider'));\n      });\n    };\n\n    if (props.innerRef) {\n      _this.menuRef = props.innerRef;\n    }\n\n    return _this;\n  }\n\n  _createClass(MenuBase, [{\n    key: \"allowTabFirstItem\",\n    value: function allowTabFirstItem() {\n      // Allow tabbing to first menu item\n      var current = this.menuRef.current;\n\n      if (current) {\n        var first = current.querySelector('ul button, ul a');\n\n        if (first) {\n          first.tabIndex = 0;\n        }\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.context) {\n        this.setState({\n          disableHover: this.context.disableHover\n        });\n      }\n\n      if (canUseDOM) {\n        window.addEventListener('transitionend', this.props.isRootMenu ? this.handleDrilldownTransition : null);\n      }\n\n      this.allowTabFirstItem();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (canUseDOM) {\n        window.removeEventListener('transitionend', this.handleDrilldownTransition);\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.children !== this.props.children) {\n        this.allowTabFirstItem();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _a = this.props,\n          ariaLabel = _a['aria-label'],\n          id = _a.id,\n          children = _a.children,\n          className = _a.className,\n          onSelect = _a.onSelect,\n          _a$selected = _a.selected,\n          selected = _a$selected === void 0 ? null : _a$selected,\n          onActionClick = _a.onActionClick,\n          ouiaId = _a.ouiaId,\n          ouiaSafe = _a.ouiaSafe,\n          containsFlyout = _a.containsFlyout,\n          isNavFlyout = _a.isNavFlyout,\n          containsDrilldown = _a.containsDrilldown,\n          isMenuDrilledIn = _a.isMenuDrilledIn,\n          isPlain = _a.isPlain,\n          isScrollable = _a.isScrollable,\n          drilldownItemPath = _a.drilldownItemPath,\n          drilledInMenus = _a.drilledInMenus,\n          onDrillIn = _a.onDrillIn,\n          onDrillOut = _a.onDrillOut,\n          onGetMenuHeight = _a.onGetMenuHeight,\n          _a$parentMenu = _a.parentMenu,\n          parentMenu = _a$parentMenu === void 0 ? null : _a$parentMenu,\n          _a$activeItemId = _a.activeItemId,\n          activeItemId = _a$activeItemId === void 0 ? null : _a$activeItemId,\n          innerRef = _a.innerRef,\n          isRootMenu = _a.isRootMenu,\n          activeMenu = _a.activeMenu,\n          props = __rest(_a, ['aria-label', \"id\", \"children\", \"className\", \"onSelect\", \"selected\", \"onActionClick\", \"ouiaId\", \"ouiaSafe\", \"containsFlyout\", \"isNavFlyout\", \"containsDrilldown\", \"isMenuDrilledIn\", \"isPlain\", \"isScrollable\", \"drilldownItemPath\", \"drilledInMenus\", \"onDrillIn\", \"onDrillOut\", \"onGetMenuHeight\", \"parentMenu\", \"activeItemId\", \"innerRef\", \"isRootMenu\", \"activeMenu\"]);\n\n      var _isMenuDrilledIn = isMenuDrilledIn || drilledInMenus && drilledInMenus.includes(id) || false;\n\n      return React.createElement(MenuContext.Provider, {\n        value: {\n          menuId: id,\n          parentMenu: parentMenu || id,\n          onSelect: onSelect,\n          onActionClick: onActionClick,\n          activeItemId: activeItemId,\n          selected: selected,\n          drilledInMenus: drilledInMenus,\n          drilldownItemPath: drilldownItemPath,\n          onDrillIn: onDrillIn,\n          onDrillOut: onDrillOut,\n          onGetMenuHeight: onGetMenuHeight,\n          flyoutRef: this.state.flyoutRef,\n          setFlyoutRef: function setFlyoutRef(flyoutRef) {\n            return _this2.setState({\n              flyoutRef: flyoutRef\n            });\n          },\n          disableHover: this.state.disableHover\n        }\n      }, isRootMenu && React.createElement(KeyboardHandler, {\n        containerRef: this.menuRef || null,\n        additionalKeyHandler: this.handleExtraKeys,\n        createNavigableElements: this.createNavigableElements,\n        isActiveElement: function isActiveElement(element) {\n          return document.activeElement.parentElement === element || document.activeElement.closest('ol') && document.activeElement.closest('ol').firstChild === element;\n        },\n        getFocusableElement: function getFocusableElement(navigableElement) {\n          return navigableElement.firstChild;\n        },\n        noHorizontalArrowHandling: document.activeElement && (document.activeElement.classList.contains('pf-c-breadcrumb__link') || document.activeElement.classList.contains('pf-c-dropdown__toggle')),\n        noEnterHandling: true,\n        noSpaceHandling: true\n      }), React.createElement(\"div\", Object.assign({\n        id: id,\n        className: css(styles.menu, isPlain && styles.modifiers.plain, isScrollable && styles.modifiers.scrollable, containsFlyout && styles.modifiers.flyout, isNavFlyout && styles.modifiers.nav, containsDrilldown && styles.modifiers.drilldown, _isMenuDrilledIn && styles.modifiers.drilledIn, className),\n        \"aria-label\": ariaLabel,\n        ref: this.menuRef\n      }, getOUIAProps(Menu.displayName, ouiaId !== undefined ? ouiaId : this.state.ouiaStateId, ouiaSafe), props), children));\n    }\n  }]);\n\n  return MenuBase;\n}(React.Component);\n\nMenuBase.displayName = 'Menu';\nMenuBase.contextType = MenuContext;\nMenuBase.defaultProps = {\n  ouiaSafe: true,\n  isRootMenu: true,\n  isPlain: false,\n  isScrollable: false\n};\nexport var Menu = React.forwardRef(function (props, ref) {\n  return React.createElement(MenuBase, Object.assign({}, props, {\n    innerRef: ref\n  }));\n});\nMenu.displayName = 'Menu';","map":{"version":3,"sources":["/awx_devel/awx/ui/node_modules/@patternfly/react-core/src/components/Menu/Menu.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport styles from '@patternfly/react-styles/css/components/Menu/menu';\nimport { css } from '@patternfly/react-styles';\nimport { getOUIAProps, OUIAProps, getDefaultOUIAId } from '../../helpers';\nimport { MenuContext } from './MenuContext';\nimport { canUseDOM } from '../../helpers/util';\nimport { KeyboardHandler } from '../../helpers';\nexport interface MenuProps extends Omit<React.HTMLAttributes<HTMLDivElement>, 'ref' | 'onSelect'>, OUIAProps {\n  /** Anything that can be rendered inside of the Menu */\n  children?: React.ReactNode;\n  /** Additional classes added to the Menu */\n  className?: string;\n  /** ID of the menu */\n  id?: string;\n  /** Callback for updating when item selection changes. You can also specify onClick on the MenuItem. */\n  onSelect?: (event?: React.MouseEvent, itemId?: string | number) => void;\n  /** Single itemId for single select menus, or array of itemIds for multi select. You can also specify isSelected on the MenuItem. */\n  selected?: any | any[];\n  /** Callback called when an MenuItems's action button is clicked. You can also specify it within a MenuItemAction. */\n  onActionClick?: (event?: any, itemId?: any, actionId?: any) => void;\n  /** Search input of menu */\n  hasSearchInput?: boolean;\n  /** A callback for when the input value changes. */\n  onSearchInputChange?: (\n    event: React.FormEvent<HTMLInputElement> | React.SyntheticEvent<HTMLButtonElement>,\n    value: string\n  ) => void;\n  /** Accessibility label */\n  'aria-label'?: string;\n  /** @beta Indicates if menu contains a flyout menu */\n  containsFlyout?: boolean;\n  /** @beta Indicating that the menu should have nav flyout styling */\n  isNavFlyout?: boolean;\n  /** @beta Indicates if menu contains a drilldown menu */\n  containsDrilldown?: boolean;\n  /** @beta Indicates if a menu is drilled into */\n  isMenuDrilledIn?: boolean;\n  /** @beta Indicates the path of drilled in menu itemIds */\n  drilldownItemPath?: string[];\n  /** @beta Array of menus that are drilled in */\n  drilledInMenus?: string[];\n  /** @beta Callback for drilling into a submenu */\n  onDrillIn?: (fromItemId: string, toItemId: string, itemId: string) => void;\n  /** @beta Callback for drilling out of a submenu */\n  onDrillOut?: (toItemId: string, itemId: string) => void;\n  /** @beta Callback for collecting menu heights */\n  onGetMenuHeight?: (menuId: string, height: number) => void;\n  /** @beta ID of parent menu for drilldown menus */\n  parentMenu?: string;\n  /** @beta ID of the currently active menu for the drilldown variant */\n  activeMenu?: string;\n  /** @beta itemId of the currently active item. You can also specify isActive on the MenuItem. */\n  activeItemId?: string | number;\n  /** @hide Forwarded ref */\n  innerRef?: React.Ref<HTMLDivElement>;\n  /** Internal flag indicating if the Menu is the root of a menu tree */\n  isRootMenu?: boolean;\n  /** Indicates if the menu should be without the outer box-shadow */\n  isPlain?: boolean;\n  /** Indicates if the menu should be srollable */\n  isScrollable?: boolean;\n}\n\nexport interface MenuState {\n  searchInputValue: string | null;\n  ouiaStateId: string;\n  transitionMoveTarget: HTMLElement;\n  flyoutRef: React.Ref<HTMLLIElement> | null;\n  disableHover: boolean;\n}\n\nclass MenuBase extends React.Component<MenuProps, MenuState> {\n  static displayName = 'Menu';\n  static contextType = MenuContext;\n  context!: React.ContextType<typeof MenuContext>;\n  private menuRef = React.createRef<HTMLDivElement>();\n  private activeMenu = null as Element;\n  static defaultProps: MenuProps = {\n    ouiaSafe: true,\n    isRootMenu: true,\n    isPlain: false,\n    isScrollable: false\n  };\n\n  constructor(props: MenuProps) {\n    super(props);\n    if (props.innerRef) {\n      this.menuRef = props.innerRef as React.RefObject<HTMLDivElement>;\n    }\n  }\n\n  state: MenuState = {\n    ouiaStateId: getDefaultOUIAId(Menu.displayName),\n    searchInputValue: '',\n    transitionMoveTarget: null,\n    flyoutRef: null,\n    disableHover: false\n  };\n\n  allowTabFirstItem() {\n    // Allow tabbing to first menu item\n    const current = this.menuRef.current;\n    if (current) {\n      const first = current.querySelector('ul button, ul a') as HTMLButtonElement | HTMLAnchorElement;\n      if (first) {\n        first.tabIndex = 0;\n      }\n    }\n  }\n\n  componentDidMount() {\n    if (this.context) {\n      this.setState({ disableHover: this.context.disableHover });\n    }\n    if (canUseDOM) {\n      window.addEventListener('transitionend', this.props.isRootMenu ? this.handleDrilldownTransition : null);\n    }\n\n    this.allowTabFirstItem();\n  }\n\n  componentWillUnmount() {\n    if (canUseDOM) {\n      window.removeEventListener('transitionend', this.handleDrilldownTransition);\n    }\n  }\n\n  componentDidUpdate(prevProps: MenuProps) {\n    if (prevProps.children !== this.props.children) {\n      this.allowTabFirstItem();\n    }\n  }\n\n  handleDrilldownTransition = (event: TransitionEvent) => {\n    const current = this.menuRef.current;\n\n    if (\n      !current ||\n      (current !== (event.target as HTMLElement).closest('.pf-c-menu') &&\n        !Array.from(current.getElementsByClassName('pf-c-menu')).includes(\n          (event.target as HTMLElement).closest('.pf-c-menu')\n        ))\n    ) {\n      return;\n    }\n\n    if (this.state.transitionMoveTarget) {\n      this.state.transitionMoveTarget.focus();\n      this.setState({ transitionMoveTarget: null });\n    } else {\n      const nextMenu = current.querySelector('#' + this.props.activeMenu) || current || null;\n      const nextTarget = Array.from(nextMenu.getElementsByTagName('UL')[0].children).filter(\n        el => !(el.classList.contains('pf-m-disabled') || el.classList.contains('pf-c-divider'))\n      )[0].firstChild;\n      (nextTarget as HTMLElement).focus();\n      (nextTarget as HTMLElement).tabIndex = 0;\n    }\n  };\n\n  handleExtraKeys = (event: KeyboardEvent) => {\n    const isDrilldown = this.props.containsDrilldown;\n    const activeElement = document.activeElement;\n\n    if (\n      (event.target as HTMLElement).closest('.pf-c-menu') !== this.activeMenu &&\n      !(event.target as HTMLElement).classList.contains('pf-c-breadcrumb__link')\n    ) {\n      this.activeMenu = (event.target as HTMLElement).closest('.pf-c-menu');\n      this.setState({ disableHover: true });\n    }\n\n    if ((event.target as HTMLElement).tagName === 'INPUT') {\n      return;\n    }\n\n    const parentMenu = this.activeMenu;\n    const key = event.key;\n    const isFromBreadcrumb =\n      activeElement.classList.contains('pf-c-breadcrumb__link') ||\n      activeElement.classList.contains('pf-c-dropdown__toggle');\n\n    if (key === ' ' || key === 'Enter') {\n      event.preventDefault();\n      if (isDrilldown && !isFromBreadcrumb) {\n        const isDrillingOut = activeElement.closest('li').classList.contains('pf-m-current-path');\n        if (isDrillingOut && parentMenu.parentElement.tagName === 'LI') {\n          (activeElement as HTMLElement).tabIndex = -1;\n          (parentMenu.parentElement.firstChild as HTMLElement).tabIndex = 0;\n          this.setState({ transitionMoveTarget: parentMenu.parentElement.firstChild as HTMLElement });\n        } else {\n          if (activeElement.nextElementSibling && activeElement.nextElementSibling.classList.contains('pf-c-menu')) {\n            const childItems = Array.from(\n              activeElement.nextElementSibling.getElementsByTagName('UL')[0].children\n            ).filter(el => !(el.classList.contains('pf-m-disabled') || el.classList.contains('pf-c-divider')));\n\n            (activeElement as HTMLElement).tabIndex = -1;\n            (childItems[0].firstChild as HTMLElement).tabIndex = 0;\n            this.setState({ transitionMoveTarget: childItems[0].firstChild as HTMLElement });\n          }\n        }\n      }\n      (document.activeElement as HTMLElement).click();\n    }\n  };\n\n  createNavigableElements = () => {\n    const isDrilldown = this.props.containsDrilldown;\n\n    return isDrilldown\n      ? Array.from(this.activeMenu.getElementsByTagName('UL')[0].children).filter(\n          el => !(el.classList.contains('pf-m-disabled') || el.classList.contains('pf-c-divider'))\n        )\n      : Array.from(this.menuRef.current.getElementsByTagName('LI')).filter(\n          el => !(el.classList.contains('pf-m-disabled') || el.classList.contains('pf-c-divider'))\n        );\n  };\n\n  render() {\n    const {\n      'aria-label': ariaLabel,\n      id,\n      children,\n      className,\n      onSelect,\n      selected = null,\n      onActionClick,\n      ouiaId,\n      ouiaSafe,\n      containsFlyout,\n      isNavFlyout,\n      containsDrilldown,\n      isMenuDrilledIn,\n      isPlain,\n      isScrollable,\n      drilldownItemPath,\n      drilledInMenus,\n      onDrillIn,\n      onDrillOut,\n      onGetMenuHeight,\n      parentMenu = null,\n      activeItemId = null,\n      /* eslint-disable @typescript-eslint/no-unused-vars */\n      innerRef,\n      isRootMenu,\n      activeMenu,\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      ...props\n    } = this.props;\n    const _isMenuDrilledIn = isMenuDrilledIn || (drilledInMenus && drilledInMenus.includes(id)) || false;\n    return (\n      <MenuContext.Provider\n        value={{\n          menuId: id,\n          parentMenu: parentMenu || id,\n          onSelect,\n          onActionClick,\n          activeItemId,\n          selected,\n          drilledInMenus,\n          drilldownItemPath,\n          onDrillIn,\n          onDrillOut,\n          onGetMenuHeight,\n          flyoutRef: this.state.flyoutRef,\n          setFlyoutRef: flyoutRef => this.setState({ flyoutRef }),\n          disableHover: this.state.disableHover\n        }}\n      >\n        {isRootMenu && (\n          <KeyboardHandler\n            containerRef={(this.menuRef as React.RefObject<HTMLDivElement>) || null}\n            additionalKeyHandler={this.handleExtraKeys}\n            createNavigableElements={this.createNavigableElements}\n            isActiveElement={(element: Element) =>\n              document.activeElement.parentElement === element ||\n              (document.activeElement.closest('ol') && document.activeElement.closest('ol').firstChild === element)\n            }\n            getFocusableElement={(navigableElement: Element) => navigableElement.firstChild as Element}\n            noHorizontalArrowHandling={\n              document.activeElement &&\n              (document.activeElement.classList.contains('pf-c-breadcrumb__link') ||\n                document.activeElement.classList.contains('pf-c-dropdown__toggle'))\n            }\n            noEnterHandling\n            noSpaceHandling\n          />\n        )}\n        <div\n          id={id}\n          className={css(\n            styles.menu,\n            isPlain && styles.modifiers.plain,\n            isScrollable && styles.modifiers.scrollable,\n            containsFlyout && styles.modifiers.flyout,\n            isNavFlyout && styles.modifiers.nav,\n            containsDrilldown && styles.modifiers.drilldown,\n            _isMenuDrilledIn && styles.modifiers.drilledIn,\n            className\n          )}\n          aria-label={ariaLabel}\n          ref={this.menuRef}\n          {...getOUIAProps(Menu.displayName, ouiaId !== undefined ? ouiaId : this.state.ouiaStateId, ouiaSafe)}\n          {...props}\n        >\n          {children}\n        </div>\n      </MenuContext.Provider>\n    );\n  }\n}\n\nexport const Menu = React.forwardRef((props: MenuProps, ref: React.Ref<HTMLDivElement>) => (\n  <MenuBase {...props} innerRef={ref} />\n));\nMenu.displayName = 'Menu';\n"]},"metadata":{},"sourceType":"module"}