{"ast":null,"code":"import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useEffect,useState,useCallback}from'react';import{useParams,useLocation}from'react-router-dom';import{getQSConfig,parseQueryString}from'util/qs';import{InventoriesAPI,HostsAPI}from'api';import useRequest,{useDeleteItems}from'hooks/useRequest';import AlertModal from'components/AlertModal';import DataListToolbar from'components/DataListToolbar';import ErrorDetail from'components/ErrorDetail';import PaginatedTable,{HeaderRow,HeaderCell,ToolbarAddButton,ToolbarDeleteButton,getSearchableKeys}from'components/PaginatedTable';import useSelected from'hooks/useSelected';import AdHocCommands from'components/AdHocCommands/AdHocCommands';import InventoryHostItem from'./InventoryHostItem';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var QS_CONFIG=getQSConfig('host',{page:1,page_size:20,order_by:'name'});function InventoryHostList(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isAdHocLaunchLoading=_useState2[0],setIsAdHocLaunchLoading=_useState2[1];var _useParams=useParams(),id=_useParams.id;var _useLocation=useLocation(),search=_useLocation.search;var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _hostOptions$data,_hostOptions$data$act;var params,_yield$Promise$all,_yield$Promise$all2,response,hostOptions,adHocOptions;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:params=parseQueryString(QS_CONFIG,search);_context.next=3;return Promise.all([InventoriesAPI.readHosts(id,params),InventoriesAPI.readHostsOptions(id),InventoriesAPI.readAdHocOptions(id)]);case 3:_yield$Promise$all=_context.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,3);response=_yield$Promise$all2[0];hostOptions=_yield$Promise$all2[1];adHocOptions=_yield$Promise$all2[2];return _context.abrupt(\"return\",{moduleOptions:adHocOptions.data.actions.GET.module_name.choices,isAdHocDisabled:!adHocOptions.data.actions.POST,hosts:response.data.results,hostCount:response.data.count,actions:hostOptions.data.actions,relatedSearchableKeys:((hostOptions===null||hostOptions===void 0?void 0:(_hostOptions$data=hostOptions.data)===null||_hostOptions$data===void 0?void 0:_hostOptions$data.related_search_fields)||[]).map(function(val){return val.endsWith('search')?val.slice(0,-8):val;}),searchableKeys:getSearchableKeys((_hostOptions$data$act=hostOptions.data.actions)===null||_hostOptions$data$act===void 0?void 0:_hostOptions$data$act.GET)});case 9:case\"end\":return _context.stop();}}},_callee);})),[id,search]),{hosts:[],hostCount:0,actions:{},relatedSearchableKeys:[],searchableKeys:[],moduleOptions:[],isAdHocDisabled:true}),_useRequest$result=_useRequest.result,hosts=_useRequest$result.hosts,hostCount=_useRequest$result.hostCount,actions=_useRequest$result.actions,relatedSearchableKeys=_useRequest$result.relatedSearchableKeys,searchableKeys=_useRequest$result.searchableKeys,moduleOptions=_useRequest$result.moduleOptions,isAdHocDisabled=_useRequest$result.isAdHocDisabled,contentError=_useRequest.error,isLoading=_useRequest.isLoading,fetchData=_useRequest.request;useEffect(function(){fetchData();},[fetchData]);var _useSelected=useSelected(hosts),selected=_useSelected.selected,isAllSelected=_useSelected.isAllSelected,handleSelect=_useSelected.handleSelect,selectAll=_useSelected.selectAll,clearSelected=_useSelected.clearSelected;var _useDeleteItems=useDeleteItems(useCallback(function(){return Promise.all(selected.map(function(host){return HostsAPI.destroy(host.id);}));},[selected]),{qsConfig:QS_CONFIG,fetchItems:fetchData}),isDeleteLoading=_useDeleteItems.isLoading,deleteHosts=_useDeleteItems.deleteItems,deletionError=_useDeleteItems.deletionError,clearDeletionError=_useDeleteItems.clearDeletionError;var handleDeleteHosts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return deleteHosts();case 2:clearSelected();case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function handleDeleteHosts(){return _ref2.apply(this,arguments);};}();var canAdd=actions&&Object.prototype.hasOwnProperty.call(actions,'POST');return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(PaginatedTable,{contentError:contentError,hasContentLoading:isLoading||isDeleteLoading||isAdHocLaunchLoading,items:hosts,itemCount:hostCount,pluralizedItemName:/*i18n*/i18n._(\"Hosts\"),qsConfig:QS_CONFIG,clearSelected:clearSelected,toolbarSearchableKeys:searchableKeys,toolbarRelatedSearchableKeys:relatedSearchableKeys,toolbarSearchColumns:[{name:/*i18n*/i18n._(\"Name\"),key:'name__icontains',isDefault:true},{name:/*i18n*/i18n._(\"Description\"),key:'description__icontains'},{name:/*i18n*/i18n._(\"Created By (Username)\"),key:'created_by__username__icontains'},{name:/*i18n*/i18n._(\"Modified By (Username)\"),key:'modified_by__username__icontains'}],headerRow:/*#__PURE__*/_jsxs(HeaderRow,{qsConfig:QS_CONFIG,children:[/*#__PURE__*/_jsx(HeaderCell,{sortKey:\"name\",children:/*i18n*/i18n._(\"Name\")}),/*#__PURE__*/_jsx(HeaderCell,{sortKey:\"description\",children:/*i18n*/i18n._(\"Description\")}),/*#__PURE__*/_jsx(HeaderCell,{children:/*i18n*/i18n._(\"Actions\")})]}),renderToolbar:function renderToolbar(props){return/*#__PURE__*/_jsx(DataListToolbar,_objectSpread(_objectSpread({},props),{},{isAllSelected:isAllSelected,onSelectAll:selectAll,qsConfig:QS_CONFIG,additionalControls:[].concat(_toConsumableArray(canAdd?[/*#__PURE__*/_jsx(ToolbarAddButton,{linkTo:\"/inventories/inventory/\".concat(id,\"/hosts/add\")},\"add\")]:[]),_toConsumableArray(!isAdHocDisabled?[/*#__PURE__*/_jsx(AdHocCommands,{moduleOptions:moduleOptions,adHocItems:selected,hasListItems:hostCount>0,onLaunchLoading:setIsAdHocLaunchLoading})]:[]),[/*#__PURE__*/_jsx(ToolbarDeleteButton,{onDelete:handleDeleteHosts,itemsToDelete:selected,pluralizedItemName:/*i18n*/i18n._(\"Hosts\")},\"delete\")])}));},renderRow:function renderRow(host,index){return/*#__PURE__*/_jsx(InventoryHostItem,{host:host,detailUrl:\"/inventories/inventory/\".concat(id,\"/hosts/\").concat(host.id,\"/details\"),editUrl:\"/inventories/inventory/\".concat(id,\"/hosts/\").concat(host.id,\"/edit\"),isSelected:selected.some(function(row){return row.id===host.id;}),onSelect:function onSelect(){return handleSelect(host);},rowIndex:index},host.id);},emptyStateControls:canAdd&&/*#__PURE__*/_jsx(ToolbarAddButton,{linkTo:\"/inventories/inventory/\".concat(id,\"/add\")},\"add\")}),deletionError&&/*#__PURE__*/_jsxs(AlertModal,{isOpen:deletionError,variant:\"error\",title:/*i18n*/i18n._(\"Error!\"),onClose:clearDeletionError,children:[/*i18n*/i18n._(\"Failed to delete one or more hosts.\"),/*#__PURE__*/_jsx(ErrorDetail,{error:deletionError})]})]});}export default InventoryHostList;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/Inventory/InventoryHosts/InventoryHostList.js"],"names":["React","useEffect","useState","useCallback","useParams","useLocation","getQSConfig","parseQueryString","InventoriesAPI","HostsAPI","useRequest","useDeleteItems","AlertModal","DataListToolbar","ErrorDetail","PaginatedTable","HeaderRow","HeaderCell","ToolbarAddButton","ToolbarDeleteButton","getSearchableKeys","useSelected","AdHocCommands","InventoryHostItem","QS_CONFIG","page","page_size","order_by","InventoryHostList","isAdHocLaunchLoading","setIsAdHocLaunchLoading","id","search","params","Promise","all","readHosts","readHostsOptions","readAdHocOptions","response","hostOptions","adHocOptions","moduleOptions","data","actions","GET","module_name","choices","isAdHocDisabled","POST","hosts","results","hostCount","count","relatedSearchableKeys","related_search_fields","map","val","endsWith","slice","searchableKeys","result","contentError","error","isLoading","fetchData","request","selected","isAllSelected","handleSelect","selectAll","clearSelected","host","destroy","qsConfig","fetchItems","isDeleteLoading","deleteHosts","deleteItems","deletionError","clearDeletionError","handleDeleteHosts","canAdd","Object","prototype","hasOwnProperty","call","name","key","isDefault","props","index","some","row"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\nimport { useParams, useLocation } from 'react-router-dom';\nimport { t } from '@lingui/macro';\nimport { getQSConfig, parseQueryString } from 'util/qs';\nimport { InventoriesAPI, HostsAPI } from 'api';\nimport useRequest, { useDeleteItems } from 'hooks/useRequest';\nimport AlertModal from 'components/AlertModal';\nimport DataListToolbar from 'components/DataListToolbar';\nimport ErrorDetail from 'components/ErrorDetail';\nimport PaginatedTable, {\n  HeaderRow,\n  HeaderCell,\n  ToolbarAddButton,\n  ToolbarDeleteButton,\n  getSearchableKeys,\n} from 'components/PaginatedTable';\nimport useSelected from 'hooks/useSelected';\nimport AdHocCommands from 'components/AdHocCommands/AdHocCommands';\nimport InventoryHostItem from './InventoryHostItem';\n\nconst QS_CONFIG = getQSConfig('host', {\n  page: 1,\n  page_size: 20,\n  order_by: 'name',\n});\n\nfunction InventoryHostList() {\n  const [isAdHocLaunchLoading, setIsAdHocLaunchLoading] = useState(false);\n  const { id } = useParams();\n  const { search } = useLocation();\n\n  const {\n    result: {\n      hosts,\n      hostCount,\n      actions,\n      relatedSearchableKeys,\n      searchableKeys,\n      moduleOptions,\n      isAdHocDisabled,\n    },\n    error: contentError,\n    isLoading,\n    request: fetchData,\n  } = useRequest(\n    useCallback(async () => {\n      const params = parseQueryString(QS_CONFIG, search);\n      const [response, hostOptions, adHocOptions] = await Promise.all([\n        InventoriesAPI.readHosts(id, params),\n        InventoriesAPI.readHostsOptions(id),\n        InventoriesAPI.readAdHocOptions(id),\n      ]);\n\n      return {\n        moduleOptions: adHocOptions.data.actions.GET.module_name.choices,\n        isAdHocDisabled: !adHocOptions.data.actions.POST,\n        hosts: response.data.results,\n        hostCount: response.data.count,\n        actions: hostOptions.data.actions,\n        relatedSearchableKeys: (\n          hostOptions?.data?.related_search_fields || []\n        ).map((val) => (val.endsWith('search') ? val.slice(0, -8) : val)),\n        searchableKeys: getSearchableKeys(hostOptions.data.actions?.GET),\n      };\n    }, [id, search]),\n    {\n      hosts: [],\n      hostCount: 0,\n      actions: {},\n      relatedSearchableKeys: [],\n      searchableKeys: [],\n      moduleOptions: [],\n      isAdHocDisabled: true,\n    }\n  );\n\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n\n  const { selected, isAllSelected, handleSelect, selectAll, clearSelected } =\n    useSelected(hosts);\n\n  const {\n    isLoading: isDeleteLoading,\n    deleteItems: deleteHosts,\n    deletionError,\n    clearDeletionError,\n  } = useDeleteItems(\n    useCallback(\n      () => Promise.all(selected.map((host) => HostsAPI.destroy(host.id))),\n      [selected]\n    ),\n    { qsConfig: QS_CONFIG, fetchItems: fetchData }\n  );\n\n  const handleDeleteHosts = async () => {\n    await deleteHosts();\n    clearSelected();\n  };\n\n  const canAdd =\n    actions && Object.prototype.hasOwnProperty.call(actions, 'POST');\n\n  return (\n    <>\n      <PaginatedTable\n        contentError={contentError}\n        hasContentLoading={isLoading || isDeleteLoading || isAdHocLaunchLoading}\n        items={hosts}\n        itemCount={hostCount}\n        pluralizedItemName={t`Hosts`}\n        qsConfig={QS_CONFIG}\n        clearSelected={clearSelected}\n        toolbarSearchableKeys={searchableKeys}\n        toolbarRelatedSearchableKeys={relatedSearchableKeys}\n        toolbarSearchColumns={[\n          {\n            name: t`Name`,\n            key: 'name__icontains',\n            isDefault: true,\n          },\n          {\n            name: t`Description`,\n            key: 'description__icontains',\n          },\n          {\n            name: t`Created By (Username)`,\n            key: 'created_by__username__icontains',\n          },\n          {\n            name: t`Modified By (Username)`,\n            key: 'modified_by__username__icontains',\n          },\n        ]}\n        headerRow={\n          <HeaderRow qsConfig={QS_CONFIG}>\n            <HeaderCell sortKey=\"name\">{t`Name`}</HeaderCell>\n            <HeaderCell sortKey=\"description\">{t`Description`}</HeaderCell>\n            <HeaderCell>{t`Actions`}</HeaderCell>\n          </HeaderRow>\n        }\n        renderToolbar={(props) => (\n          <DataListToolbar\n            {...props}\n            isAllSelected={isAllSelected}\n            onSelectAll={selectAll}\n            qsConfig={QS_CONFIG}\n            additionalControls={[\n              ...(canAdd\n                ? [\n                    <ToolbarAddButton\n                      key=\"add\"\n                      linkTo={`/inventories/inventory/${id}/hosts/add`}\n                    />,\n                  ]\n                : []),\n              ...(!isAdHocDisabled\n                ? [\n                    <AdHocCommands\n                      moduleOptions={moduleOptions}\n                      adHocItems={selected}\n                      hasListItems={hostCount > 0}\n                      onLaunchLoading={setIsAdHocLaunchLoading}\n                    />,\n                  ]\n                : []),\n              <ToolbarDeleteButton\n                key=\"delete\"\n                onDelete={handleDeleteHosts}\n                itemsToDelete={selected}\n                pluralizedItemName={t`Hosts`}\n              />,\n            ]}\n          />\n        )}\n        renderRow={(host, index) => (\n          <InventoryHostItem\n            key={host.id}\n            host={host}\n            detailUrl={`/inventories/inventory/${id}/hosts/${host.id}/details`}\n            editUrl={`/inventories/inventory/${id}/hosts/${host.id}/edit`}\n            isSelected={selected.some((row) => row.id === host.id)}\n            onSelect={() => handleSelect(host)}\n            rowIndex={index}\n          />\n        )}\n        emptyStateControls={\n          canAdd && (\n            <ToolbarAddButton\n              key=\"add\"\n              linkTo={`/inventories/inventory/${id}/add`}\n            />\n          )\n        }\n      />\n      {deletionError && (\n        <AlertModal\n          isOpen={deletionError}\n          variant=\"error\"\n          title={t`Error!`}\n          onClose={clearDeletionError}\n        >\n          {t`Failed to delete one or more hosts.`}\n          <ErrorDetail error={deletionError} />\n        </AlertModal>\n      )}\n    </>\n  );\n}\n\nexport default InventoryHostList;\n"]},"metadata":{},"sourceType":"module"}