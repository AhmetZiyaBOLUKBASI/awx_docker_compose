{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useCallback}from'react';import{Link,useHistory}from'react-router-dom';import{Button,Label}from'@patternfly/react-core';import AlertModal from'components/AlertModal';import{CardBody,CardActionsRow}from'components/Card';import DeleteButton from'components/DeleteButton';import{Detail,DetailList,UserDateDetail}from'components/DetailList';import useRequest,{useDismissableError}from'hooks/useRequest';import{toTitleCase}from'util/strings';import{ExecutionEnvironmentsAPI}from'api';import{relatedResourceDeleteRequests}from'util/getRelatedResourceDeleteDetails';import helpText from'../shared/ExecutionEnvironment.helptext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ExecutionEnvironmentDetails(_ref){var _summary_fields$user_,_summary_fields$user_2;var executionEnvironment=_ref.executionEnvironment;var history=useHistory();var id=executionEnvironment.id,name=executionEnvironment.name,image=executionEnvironment.image,description=executionEnvironment.description,pull=executionEnvironment.pull,organization=executionEnvironment.organization,summary_fields=executionEnvironment.summary_fields,managedByTower=executionEnvironment.managed;var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return ExecutionEnvironmentsAPI.destroy(id);case 2:history.push(\"/execution_environments\");case 3:case\"end\":return _context.stop();}}},_callee);})),[id,history])),deleteExecutionEnvironment=_useRequest.request,isLoading=_useRequest.isLoading,deleteError=_useRequest.error;var _useDismissableError=useDismissableError(deleteError),error=_useDismissableError.error,dismissError=_useDismissableError.dismissError;var deleteDetailsRequests=relatedResourceDeleteRequests.executionEnvironment(executionEnvironment);return/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsxs(DetailList,{children:[/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Name\"),value:name,dataCy:\"execution-environment-detail-name\"}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Image\"),value:image,dataCy:\"execution-environment-detail-image\",helpText:helpText.image}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Description\"),value:description,dataCy:\"execution-environment-detail-description\"}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Managed\"),value:managedByTower?/*i18n*/i18n._(\"True\"):/*i18n*/i18n._(\"False\"),dataCy:\"execution-environment-managed-by-tower\"}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Organization\"),value:organization?/*#__PURE__*/_jsx(Link,{to:\"/organizations/\".concat(summary_fields.organization.id,\"/details\"),children:summary_fields.organization.name}):/*i18n*/i18n._(\"Globally Available\"),dataCy:\"execution-environment-detail-organization\"}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Pull\"),value:pull===''?/*i18n*/i18n._(\"Missing\"):toTitleCase(pull),dataCy:\"execution-environment-pull\"}),executionEnvironment.summary_fields.credential&&/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Registry credential\"),value:/*#__PURE__*/_jsx(Label,{variant:\"outline\",color:\"blue\",children:executionEnvironment.summary_fields.credential.name}),dataCy:\"execution-environment-credential\",helpText:helpText.registryCredential}),/*#__PURE__*/_jsx(UserDateDetail,{label:/*i18n*/i18n._(\"Created\"),date:executionEnvironment.created,user:executionEnvironment.summary_fields.created_by}),/*#__PURE__*/_jsx(UserDateDetail,{label:/*i18n*/i18n._(\"Last Modified\"),date:executionEnvironment.modified,user:executionEnvironment.summary_fields.modified_by})]}),/*#__PURE__*/_jsxs(CardActionsRow,{children:[((_summary_fields$user_=summary_fields.user_capabilities)===null||_summary_fields$user_===void 0?void 0:_summary_fields$user_.edit)&&/*#__PURE__*/_jsx(Button,{ouiaId:\"execution-environment-detail-edit-button\",\"aria-label\":/*i18n*/i18n._(\"edit\"),component:Link,to:\"/execution_environments/\".concat(id,\"/edit\"),children:/*i18n*/i18n._(\"Edit\")}),((_summary_fields$user_2=summary_fields.user_capabilities)===null||_summary_fields$user_2===void 0?void 0:_summary_fields$user_2.delete)&&/*#__PURE__*/_jsx(DeleteButton,{name:image,modalTitle:/*i18n*/i18n._(\"Delete Execution Environment\"),onConfirm:deleteExecutionEnvironment,isDisabled:isLoading,ouiaId:\"delete-button\",deleteDetailsRequests:deleteDetailsRequests,deleteMessage:/*i18n*/i18n._(\"This execution environment is currently being used by other resources. Are you sure you want to delete it?\"),children:/*i18n*/i18n._(\"Delete\")})]}),error&&/*#__PURE__*/_jsx(AlertModal,{isOpen:error,onClose:dismissError,title:/*i18n*/i18n._(\"Error\"),variant:\"error\"})]});}export default ExecutionEnvironmentDetails;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/ExecutionEnvironment/ExecutionEnvironmentDetails/ExecutionEnvironmentDetails.js"],"names":["React","useCallback","Link","useHistory","Button","Label","AlertModal","CardBody","CardActionsRow","DeleteButton","Detail","DetailList","UserDateDetail","useRequest","useDismissableError","toTitleCase","ExecutionEnvironmentsAPI","relatedResourceDeleteRequests","helpText","ExecutionEnvironmentDetails","executionEnvironment","history","id","name","image","description","pull","organization","summary_fields","managedByTower","managed","destroy","push","deleteExecutionEnvironment","request","isLoading","deleteError","error","dismissError","deleteDetailsRequests","credential","registryCredential","created","created_by","modified","modified_by","user_capabilities","edit","delete"],"mappings":"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","sourcesContent":["import React, { useCallback } from 'react';\n\nimport { t } from '@lingui/macro';\nimport { Link, useHistory } from 'react-router-dom';\nimport { Button, Label } from '@patternfly/react-core';\n\nimport AlertModal from 'components/AlertModal';\nimport { CardBody, CardActionsRow } from 'components/Card';\nimport DeleteButton from 'components/DeleteButton';\nimport { Detail, DetailList, UserDateDetail } from 'components/DetailList';\nimport useRequest, { useDismissableError } from 'hooks/useRequest';\nimport { toTitleCase } from 'util/strings';\nimport { ExecutionEnvironmentsAPI } from 'api';\nimport { relatedResourceDeleteRequests } from 'util/getRelatedResourceDeleteDetails';\nimport helpText from '../shared/ExecutionEnvironment.helptext';\n\nfunction ExecutionEnvironmentDetails({ executionEnvironment }) {\n  const history = useHistory();\n  const {\n    id,\n    name,\n    image,\n    description,\n    pull,\n    organization,\n    summary_fields,\n    managed: managedByTower,\n  } = executionEnvironment;\n\n  const {\n    request: deleteExecutionEnvironment,\n    isLoading,\n    error: deleteError,\n  } = useRequest(\n    useCallback(async () => {\n      await ExecutionEnvironmentsAPI.destroy(id);\n      history.push(`/execution_environments`);\n    }, [id, history])\n  );\n\n  const { error, dismissError } = useDismissableError(deleteError);\n  const deleteDetailsRequests =\n    relatedResourceDeleteRequests.executionEnvironment(executionEnvironment);\n  return (\n    <CardBody>\n      <DetailList>\n        <Detail\n          label={t`Name`}\n          value={name}\n          dataCy=\"execution-environment-detail-name\"\n        />\n        <Detail\n          label={t`Image`}\n          value={image}\n          dataCy=\"execution-environment-detail-image\"\n          helpText={helpText.image}\n        />\n        <Detail\n          label={t`Description`}\n          value={description}\n          dataCy=\"execution-environment-detail-description\"\n        />\n        <Detail\n          label={t`Managed`}\n          value={managedByTower ? t`True` : t`False`}\n          dataCy=\"execution-environment-managed-by-tower\"\n        />\n        <Detail\n          label={t`Organization`}\n          value={\n            organization ? (\n              <Link\n                to={`/organizations/${summary_fields.organization.id}/details`}\n              >\n                {summary_fields.organization.name}\n              </Link>\n            ) : (\n              t`Globally Available`\n            )\n          }\n          dataCy=\"execution-environment-detail-organization\"\n        />\n\n        <Detail\n          label={t`Pull`}\n          value={pull === '' ? t`Missing` : toTitleCase(pull)}\n          dataCy=\"execution-environment-pull\"\n        />\n        {executionEnvironment.summary_fields.credential && (\n          <Detail\n            label={t`Registry credential`}\n            value={\n              <Label variant=\"outline\" color=\"blue\">\n                {executionEnvironment.summary_fields.credential.name}\n              </Label>\n            }\n            dataCy=\"execution-environment-credential\"\n            helpText={helpText.registryCredential}\n          />\n        )}\n        <UserDateDetail\n          label={t`Created`}\n          date={executionEnvironment.created}\n          user={executionEnvironment.summary_fields.created_by}\n        />\n        <UserDateDetail\n          label={t`Last Modified`}\n          date={executionEnvironment.modified}\n          user={executionEnvironment.summary_fields.modified_by}\n        />\n      </DetailList>\n      <CardActionsRow>\n        {summary_fields.user_capabilities?.edit && (\n          <Button\n            ouiaId=\"execution-environment-detail-edit-button\"\n            aria-label={t`edit`}\n            component={Link}\n            to={`/execution_environments/${id}/edit`}\n          >\n            {t`Edit`}\n          </Button>\n        )}\n        {summary_fields.user_capabilities?.delete && (\n          <DeleteButton\n            name={image}\n            modalTitle={t`Delete Execution Environment`}\n            onConfirm={deleteExecutionEnvironment}\n            isDisabled={isLoading}\n            ouiaId=\"delete-button\"\n            deleteDetailsRequests={deleteDetailsRequests}\n            deleteMessage={t`This execution environment is currently being used by other resources. Are you sure you want to delete it?`}\n          >\n            {t`Delete`}\n          </DeleteButton>\n        )}\n      </CardActionsRow>\n\n      {error && (\n        <AlertModal\n          isOpen={error}\n          onClose={dismissError}\n          title={t`Error`}\n          variant=\"error\"\n        />\n      )}\n    </CardBody>\n  );\n}\n\nexport default ExecutionEnvironmentDetails;\n"]},"metadata":{},"sourceType":"module"}