{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{i18n}from\"@lingui/core\";import React from'react';import{Chip}from'@patternfly/react-core';import{Tr,Td}from'@patternfly/react-table';import{Link}from'react-router-dom';import{AccessRecord}from'types';import ChipGroup from'../ChipGroup';import{DetailList,Detail}from'../DetailList';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ResourceAccessListItem(_ref){var accessRecord=_ref.accessRecord,onRoleDelete=_ref.onRoleDelete;var getRoleLists=function getRoleLists(){var teamRoles=[];var userRoles=[];function sort(item){var role=item.role;if(role.team_id){teamRoles.push(role);}else{userRoles.push(role);}}accessRecord.summary_fields.direct_access.map(sort);accessRecord.summary_fields.indirect_access.map(sort);return[teamRoles,userRoles];};var renderChip=function renderChip(role){return/*#__PURE__*/_jsx(Chip,{onClick:function onClick(){onRoleDelete(role,accessRecord);},isReadOnly:!role.user_capabilities.unattach,ouiaId:\"\".concat(role.name,\"-\").concat(role.id),closeBtnAriaLabel:/*i18n*/i18n._(\"Remove {0} chip\",{0:role.name}),children:role.name},role.id);};var _getRoleLists=getRoleLists(),_getRoleLists2=_slicedToArray(_getRoleLists,2),teamRoles=_getRoleLists2[0],userRoles=_getRoleLists2[1];return/*#__PURE__*/_jsxs(Tr,{id:\"access-item-row-\".concat(accessRecord.id),ouiaId:\"access-item-row-\".concat(accessRecord.id),children:[/*#__PURE__*/_jsx(Td,{id:\"access-record-\".concat(accessRecord.id),dataLabel:/*i18n*/i18n._(\"Name\"),children:accessRecord.id?/*#__PURE__*/_jsx(Link,{to:{pathname:\"/users/\".concat(accessRecord.id,\"/details\")},children:/*#__PURE__*/_jsx(\"b\",{children:accessRecord.username})}):/*#__PURE__*/_jsx(\"b\",{children:accessRecord.username})}),/*#__PURE__*/_jsx(Td,{dataLabel:/*i18n*/i18n._(\"First name\"),children:accessRecord.first_name}),/*#__PURE__*/_jsx(Td,{dataLabel:/*i18n*/i18n._(\"Last name\"),children:accessRecord.last_name}),/*#__PURE__*/_jsx(Td,{dataLabel:/*i18n*/i18n._(\"Roles\"),children:/*#__PURE__*/_jsxs(DetailList,{stacked:true,children:[/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"User Roles\"),value:/*#__PURE__*/_jsx(ChipGroup,{numChips:5,totalChips:userRoles.length,ouiaId:\"user-role-chips\",children:userRoles.map(renderChip)}),isEmpty:userRoles.length===0}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Team Roles\"),value:/*#__PURE__*/_jsx(ChipGroup,{numChips:5,totalChips:teamRoles.length,ouiaId:\"team-role-chips\",children:teamRoles.map(renderChip)}),isEmpty:teamRoles.length===0})]})})]});}export default ResourceAccessListItem;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/components/ResourceAccessList/ResourceAccessListItem.js"],"names":["React","Chip","Tr","Td","Link","AccessRecord","ChipGroup","DetailList","Detail","ResourceAccessListItem","accessRecord","onRoleDelete","getRoleLists","teamRoles","userRoles","sort","item","role","team_id","push","summary_fields","direct_access","map","indirect_access","renderChip","user_capabilities","unattach","name","id","pathname","username","first_name","last_name","length"],"mappings":"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","sourcesContent":["import 'styled-components/macro';\nimport React from 'react';\nimport { func } from 'prop-types';\nimport { t } from '@lingui/macro';\nimport { Chip } from '@patternfly/react-core';\nimport { Tr, Td } from '@patternfly/react-table';\nimport { Link } from 'react-router-dom';\n\nimport { AccessRecord } from 'types';\nimport ChipGroup from '../ChipGroup';\nimport { DetailList, Detail } from '../DetailList';\n\nfunction ResourceAccessListItem({ accessRecord, onRoleDelete }) {\n  ResourceAccessListItem.propTypes = {\n    accessRecord: AccessRecord.isRequired,\n    onRoleDelete: func.isRequired,\n  };\n\n  const getRoleLists = () => {\n    const teamRoles = [];\n    const userRoles = [];\n\n    function sort(item) {\n      const { role } = item;\n      if (role.team_id) {\n        teamRoles.push(role);\n      } else {\n        userRoles.push(role);\n      }\n    }\n\n    accessRecord.summary_fields.direct_access.map(sort);\n    accessRecord.summary_fields.indirect_access.map(sort);\n    return [teamRoles, userRoles];\n  };\n\n  const renderChip = (role) => (\n    <Chip\n      key={role.id}\n      onClick={() => {\n        onRoleDelete(role, accessRecord);\n      }}\n      isReadOnly={!role.user_capabilities.unattach}\n      ouiaId={`${role.name}-${role.id}`}\n      closeBtnAriaLabel={t`Remove ${role.name} chip`}\n    >\n      {role.name}\n    </Chip>\n  );\n\n  const [teamRoles, userRoles] = getRoleLists();\n\n  return (\n    <Tr\n      id={`access-item-row-${accessRecord.id}`}\n      ouiaId={`access-item-row-${accessRecord.id}`}\n    >\n      <Td id={`access-record-${accessRecord.id}`} dataLabel={t`Name`}>\n        {accessRecord.id ? (\n          <Link to={{ pathname: `/users/${accessRecord.id}/details` }}>\n            <b>{accessRecord.username}</b>\n          </Link>\n        ) : (\n          <b>{accessRecord.username}</b>\n        )}\n      </Td>\n      <Td dataLabel={t`First name`}>{accessRecord.first_name}</Td>\n      <Td dataLabel={t`Last name`}>{accessRecord.last_name}</Td>\n      <Td dataLabel={t`Roles`}>\n        <DetailList stacked>\n          <Detail\n            label={t`User Roles`}\n            value={\n              <ChipGroup\n                numChips={5}\n                totalChips={userRoles.length}\n                ouiaId=\"user-role-chips\"\n              >\n                {userRoles.map(renderChip)}\n              </ChipGroup>\n            }\n            isEmpty={userRoles.length === 0}\n          />\n          <Detail\n            label={t`Team Roles`}\n            value={\n              <ChipGroup\n                numChips={5}\n                totalChips={teamRoles.length}\n                ouiaId=\"team-role-chips\"\n              >\n                {teamRoles.map(renderChip)}\n              </ChipGroup>\n            }\n            isEmpty={teamRoles.length === 0}\n          />\n        </DetailList>\n      </Td>\n    </Tr>\n  );\n}\n\nexport default ResourceAccessListItem;\n"]},"metadata":{},"sourceType":"module"}