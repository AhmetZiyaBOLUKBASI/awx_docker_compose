{"ast":null,"code":"import _defineProperty from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";export default function sortErrorMessages(error){var _error$response;var formValues=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!error){return{};}if(error!==null&&error!==void 0&&(_error$response=error.response)!==null&&_error$response!==void 0&&_error$response.data&&typeof error.response.data==='object'&&Object.keys(error.response.data).length>0){var parsed=parseFieldErrors(error.response.data,formValues);return{formError:parsed.formErrors.join('; '),fieldErrors:Object.keys(parsed.fieldErrors).length?parsed.fieldErrors:null};}/* eslint-disable-next-line no-console */console.error(error);return{formError:error.message,fieldErrors:null};}// Recursively traverse field errors object and build up field/form errors\nfunction parseFieldErrors(obj,formValues){var fieldErrors={};var formErrors=[];Object.keys(obj).forEach(function(key){var value=obj[key];if(typeof value==='string'){if(typeof formValues[key]==='undefined'){formErrors.push(value);}else{fieldErrors[key]=value;}}else if(Array.isArray(value)){if(typeof formValues[key]==='undefined'){formErrors=formErrors.concat(value);}else{fieldErrors[key]=value.join('; ');}}else if(typeof value==='object'){var parsed=parseFieldErrors(value,formValues[key]||{});if(Object.keys(parsed.fieldErrors).length){fieldErrors=_objectSpread(_objectSpread({},fieldErrors),{},_defineProperty({},key,parsed.fieldErrors));}formErrors=formErrors.concat(parsed.formErrors);}if(typeof formValues[key]==='boolean'){formErrors=formErrors.concat(value);}});return{fieldErrors:fieldErrors,formErrors:formErrors};}","map":{"version":3,"sources":["/awx_devel/awx/ui/src/components/FormField/sortErrorMessages.js"],"names":["sortErrorMessages","error","formValues","response","data","Object","keys","length","parsed","parseFieldErrors","formError","formErrors","join","fieldErrors","console","message","obj","forEach","key","value","push","Array","isArray","concat"],"mappings":"+MAAA,cAAe,SAASA,CAAAA,iBAAT,CAA2BC,KAA3B,CAAmD,wBAAjBC,CAAAA,UAAiB,2DAAJ,EAAI,CAChE,GAAI,CAACD,KAAL,CAAY,CACV,MAAO,EAAP,CACD,CAED,GACEA,KAAK,OAAL,EAAAA,KAAK,SAAL,mBAAAA,KAAK,CAAEE,QAAP,oDAAiBC,IAAjB,EACA,MAAOH,CAAAA,KAAK,CAACE,QAAN,CAAeC,IAAtB,GAA+B,QAD/B,EAEAC,MAAM,CAACC,IAAP,CAAYL,KAAK,CAACE,QAAN,CAAeC,IAA3B,EAAiCG,MAAjC,CAA0C,CAH5C,CAIE,CACA,GAAMC,CAAAA,MAAM,CAAGC,gBAAgB,CAACR,KAAK,CAACE,QAAN,CAAeC,IAAhB,CAAsBF,UAAtB,CAA/B,CACA,MAAO,CACLQ,SAAS,CAAEF,MAAM,CAACG,UAAP,CAAkBC,IAAlB,CAAuB,IAAvB,CADN,CAELC,WAAW,CAAER,MAAM,CAACC,IAAP,CAAYE,MAAM,CAACK,WAAnB,EAAgCN,MAAhC,CACTC,MAAM,CAACK,WADE,CAET,IAJC,CAAP,CAMD,CACD,yCACAC,OAAO,CAACb,KAAR,CAAcA,KAAd,EACA,MAAO,CACLS,SAAS,CAAET,KAAK,CAACc,OADZ,CAELF,WAAW,CAAE,IAFR,CAAP,CAID,CAED;AACA,QAASJ,CAAAA,gBAAT,CAA0BO,GAA1B,CAA+Bd,UAA/B,CAA2C,CACzC,GAAIW,CAAAA,WAAW,CAAG,EAAlB,CACA,GAAIF,CAAAA,UAAU,CAAG,EAAjB,CACAN,MAAM,CAACC,IAAP,CAAYU,GAAZ,EAAiBC,OAAjB,CAAyB,SAACC,GAAD,CAAS,CAChC,GAAMC,CAAAA,KAAK,CAAGH,GAAG,CAACE,GAAD,CAAjB,CACA,GAAI,MAAOC,CAAAA,KAAP,GAAiB,QAArB,CAA+B,CAC7B,GAAI,MAAOjB,CAAAA,UAAU,CAACgB,GAAD,CAAjB,GAA2B,WAA/B,CAA4C,CAC1CP,UAAU,CAACS,IAAX,CAAgBD,KAAhB,EACD,CAFD,IAEO,CACLN,WAAW,CAACK,GAAD,CAAX,CAAmBC,KAAnB,CACD,CACF,CAND,IAMO,IAAIE,KAAK,CAACC,OAAN,CAAcH,KAAd,CAAJ,CAA0B,CAC/B,GAAI,MAAOjB,CAAAA,UAAU,CAACgB,GAAD,CAAjB,GAA2B,WAA/B,CAA4C,CAC1CP,UAAU,CAAGA,UAAU,CAACY,MAAX,CAAkBJ,KAAlB,CAAb,CACD,CAFD,IAEO,CACLN,WAAW,CAACK,GAAD,CAAX,CAAmBC,KAAK,CAACP,IAAN,CAAW,IAAX,CAAnB,CACD,CACF,CANM,IAMA,IAAI,MAAOO,CAAAA,KAAP,GAAiB,QAArB,CAA+B,CACpC,GAAMX,CAAAA,MAAM,CAAGC,gBAAgB,CAACU,KAAD,CAAQjB,UAAU,CAACgB,GAAD,CAAV,EAAmB,EAA3B,CAA/B,CACA,GAAIb,MAAM,CAACC,IAAP,CAAYE,MAAM,CAACK,WAAnB,EAAgCN,MAApC,CAA4C,CAC1CM,WAAW,gCACNA,WADM,wBAERK,GAFQ,CAEFV,MAAM,CAACK,WAFL,EAAX,CAID,CACDF,UAAU,CAAGA,UAAU,CAACY,MAAX,CAAkBf,MAAM,CAACG,UAAzB,CAAb,CACD,CACD,GAAI,MAAOT,CAAAA,UAAU,CAACgB,GAAD,CAAjB,GAA2B,SAA/B,CAA0C,CACxCP,UAAU,CAAGA,UAAU,CAACY,MAAX,CAAkBJ,KAAlB,CAAb,CACD,CACF,CA3BD,EA6BA,MAAO,CAAEN,WAAW,CAAXA,WAAF,CAAeF,UAAU,CAAVA,UAAf,CAAP,CACD","sourcesContent":["export default function sortErrorMessages(error, formValues = {}) {\n  if (!error) {\n    return {};\n  }\n\n  if (\n    error?.response?.data &&\n    typeof error.response.data === 'object' &&\n    Object.keys(error.response.data).length > 0\n  ) {\n    const parsed = parseFieldErrors(error.response.data, formValues);\n    return {\n      formError: parsed.formErrors.join('; '),\n      fieldErrors: Object.keys(parsed.fieldErrors).length\n        ? parsed.fieldErrors\n        : null,\n    };\n  }\n  /* eslint-disable-next-line no-console */\n  console.error(error);\n  return {\n    formError: error.message,\n    fieldErrors: null,\n  };\n}\n\n// Recursively traverse field errors object and build up field/form errors\nfunction parseFieldErrors(obj, formValues) {\n  let fieldErrors = {};\n  let formErrors = [];\n  Object.keys(obj).forEach((key) => {\n    const value = obj[key];\n    if (typeof value === 'string') {\n      if (typeof formValues[key] === 'undefined') {\n        formErrors.push(value);\n      } else {\n        fieldErrors[key] = value;\n      }\n    } else if (Array.isArray(value)) {\n      if (typeof formValues[key] === 'undefined') {\n        formErrors = formErrors.concat(value);\n      } else {\n        fieldErrors[key] = value.join('; ');\n      }\n    } else if (typeof value === 'object') {\n      const parsed = parseFieldErrors(value, formValues[key] || {});\n      if (Object.keys(parsed.fieldErrors).length) {\n        fieldErrors = {\n          ...fieldErrors,\n          [key]: parsed.fieldErrors,\n        };\n      }\n      formErrors = formErrors.concat(parsed.formErrors);\n    }\n    if (typeof formValues[key] === 'boolean') {\n      formErrors = formErrors.concat(value);\n    }\n  });\n\n  return { fieldErrors, formErrors };\n}\n"]},"metadata":{},"sourceType":"module"}