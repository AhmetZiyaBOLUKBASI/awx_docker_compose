{"ast":null,"code":"import _toConsumableArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";export default function reducer(state,action){switch(action.type){case'SELECT_ITEM':return selectItem(state,action.item);case'DESELECT_ITEM':return deselectItem(state,action.item);case'TOGGLE_MODAL':return toggleModal(state);case'CLOSE_MODAL':return closeModal(state);case'SET_MULTIPLE':return _objectSpread(_objectSpread({},state),{},{multiple:action.value});case'SET_VALUE':return _objectSpread(_objectSpread({},state),{},{value:action.value});case'SET_SELECTED_ITEMS':return _objectSpread(_objectSpread({},state),{},{selectedItems:action.selectedItems});default:throw new Error(\"Unrecognized action type: \".concat(action.type));}}function selectItem(state,item){var selectedItems=state.selectedItems,multiple=state.multiple;if(!multiple){return _objectSpread(_objectSpread({},state),{},{selectedItems:[item]});}var index=selectedItems.findIndex(function(i){return i.id===item.id;});if(index>-1){return state;}return _objectSpread(_objectSpread({},state),{},{selectedItems:[].concat(_toConsumableArray(selectedItems),[item])});}function deselectItem(state,item){return _objectSpread(_objectSpread({},state),{},{selectedItems:state.selectedItems.filter(function(i){return i.id!==item.id;})});}function toggleModal(state){var isModalOpen=state.isModalOpen,value=state.value,multiple=state.multiple;if(isModalOpen){return closeModal(state);}var selectedItems=[];if(multiple){selectedItems=_toConsumableArray(value);}else if(value){selectedItems.push(value);}return _objectSpread(_objectSpread({},state),{},{isModalOpen:!isModalOpen,selectedItems:selectedItems});}function closeModal(state){return _objectSpread(_objectSpread({},state),{},{isModalOpen:false});}export function initReducer(_ref){var value=_ref.value,_ref$multiple=_ref.multiple,multiple=_ref$multiple===void 0?false:_ref$multiple,_ref$required=_ref.required,required=_ref$required===void 0?false:_ref$required;assertCorrectValueType(value,multiple);var selectedItems=[];if(value){selectedItems=multiple?_toConsumableArray(value):[value];}return{selectedItems:selectedItems,value:value,multiple:multiple,isModalOpen:false,required:required};}function assertCorrectValueType(value,multiple){if(!multiple&&Array.isArray(value)){throw new Error('Lookup value must not be an array unless `multiple` is set');}if(multiple&&!Array.isArray(value)){throw new Error('Lookup value must be an array if `multiple` is set');}}","map":{"version":3,"sources":["/awx_devel/awx/ui/src/components/Lookup/shared/reducer.js"],"names":["reducer","state","action","type","selectItem","item","deselectItem","toggleModal","closeModal","multiple","value","selectedItems","Error","index","findIndex","i","id","filter","isModalOpen","push","initReducer","required","assertCorrectValueType","Array","isArray"],"mappings":"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","sourcesContent":["export default function reducer(state, action) {\n  switch (action.type) {\n    case 'SELECT_ITEM':\n      return selectItem(state, action.item);\n    case 'DESELECT_ITEM':\n      return deselectItem(state, action.item);\n    case 'TOGGLE_MODAL':\n      return toggleModal(state);\n    case 'CLOSE_MODAL':\n      return closeModal(state);\n    case 'SET_MULTIPLE':\n      return { ...state, multiple: action.value };\n    case 'SET_VALUE':\n      return { ...state, value: action.value };\n    case 'SET_SELECTED_ITEMS':\n      return { ...state, selectedItems: action.selectedItems };\n    default:\n      throw new Error(`Unrecognized action type: ${action.type}`);\n  }\n}\n\nfunction selectItem(state, item) {\n  const { selectedItems, multiple } = state;\n  if (!multiple) {\n    return {\n      ...state,\n      selectedItems: [item],\n    };\n  }\n  const index = selectedItems.findIndex((i) => i.id === item.id);\n  if (index > -1) {\n    return state;\n  }\n  return {\n    ...state,\n    selectedItems: [...selectedItems, item],\n  };\n}\n\nfunction deselectItem(state, item) {\n  return {\n    ...state,\n    selectedItems: state.selectedItems.filter((i) => i.id !== item.id),\n  };\n}\n\nfunction toggleModal(state) {\n  const { isModalOpen, value, multiple } = state;\n  if (isModalOpen) {\n    return closeModal(state);\n  }\n  let selectedItems = [];\n  if (multiple) {\n    selectedItems = [...value];\n  } else if (value) {\n    selectedItems.push(value);\n  }\n  return {\n    ...state,\n    isModalOpen: !isModalOpen,\n    selectedItems,\n  };\n}\n\nfunction closeModal(state) {\n  return {\n    ...state,\n    isModalOpen: false,\n  };\n}\n\nexport function initReducer({ value, multiple = false, required = false }) {\n  assertCorrectValueType(value, multiple);\n  let selectedItems = [];\n  if (value) {\n    selectedItems = multiple ? [...value] : [value];\n  }\n  return {\n    selectedItems,\n    value,\n    multiple,\n    isModalOpen: false,\n    required,\n  };\n}\n\nfunction assertCorrectValueType(value, multiple) {\n  if (!multiple && Array.isArray(value)) {\n    throw new Error(\n      'Lookup value must not be an array unless `multiple` is set'\n    );\n  }\n  if (multiple && !Array.isArray(value)) {\n    throw new Error('Lookup value must be an array if `multiple` is set');\n  }\n}\n"]},"metadata":{},"sourceType":"module"}