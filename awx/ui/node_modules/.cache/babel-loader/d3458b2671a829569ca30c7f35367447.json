{"ast":null,"code":"import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from'react';import{useHistory}from'react-router-dom';import{CardBody}from'components/Card';import HostForm from'components/HostForm';import{HostsAPI}from'api';import{jsx as _jsx}from\"react/jsx-runtime\";function InventoryHostAdd(_ref){var inventory=_ref.inventory;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),formError=_useState2[0],setFormError=_useState2[1];var hostsUrl=\"/inventories/inventory/\".concat(inventory.id,\"/hosts\");var history=useHistory();var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(formData){var values,_yield$HostsAPI$creat,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;values=_objectSpread(_objectSpread({},formData),{},{inventory:inventory.id});_context.next=4;return HostsAPI.create(values);case 4:_yield$HostsAPI$creat=_context.sent;response=_yield$HostsAPI$creat.data;history.push(\"\".concat(hostsUrl,\"/\").concat(response.id,\"/details\"));_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);setFormError(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();var handleCancel=function handleCancel(){history.push(hostsUrl);};return/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsx(HostForm,{handleSubmit:handleSubmit,handleCancel:handleCancel,isInventoryVisible:false,submitError:formError})});}export default InventoryHostAdd;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/Inventory/InventoryHostAdd/InventoryHostAdd.js"],"names":["React","useState","useHistory","CardBody","HostForm","HostsAPI","InventoryHostAdd","inventory","formError","setFormError","hostsUrl","id","history","handleSubmit","formData","values","create","response","data","push","handleCancel"],"mappings":"8ZAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,QAAT,KAAyB,iBAAzB,CACA,MAAOC,CAAAA,QAAP,KAAqB,qBAArB,CAEA,OAASC,QAAT,KAAyB,KAAzB,C,2CAEA,QAASC,CAAAA,gBAAT,MAAyC,IAAbC,CAAAA,SAAa,MAAbA,SAAa,CACvC,cAAkCN,QAAQ,CAAC,IAAD,CAA1C,wCAAOO,SAAP,eAAkBC,YAAlB,eACA,GAAMC,CAAAA,QAAQ,kCAA6BH,SAAS,CAACI,EAAvC,UAAd,CACA,GAAMC,CAAAA,OAAO,CAAGV,UAAU,EAA1B,CAEA,GAAMW,CAAAA,YAAY,2FAAG,iBAAOC,QAAP,4KAEXC,MAFW,gCAGZD,QAHY,MAIfP,SAAS,CAAEA,SAAS,CAACI,EAJN,yBAMgBN,CAAAA,QAAQ,CAACW,MAAT,CAAgBD,MAAhB,CANhB,4CAMHE,QANG,uBAMTC,IANS,CAOjBN,OAAO,CAACO,IAAR,WAAgBT,QAAhB,aAA4BO,QAAQ,CAACN,EAArC,cAPiB,+EASjBF,YAAY,aAAZ,CATiB,oEAAH,kBAAZI,CAAAA,YAAY,6CAAlB,CAaA,GAAMO,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzBR,OAAO,CAACO,IAAR,CAAaT,QAAb,EACD,CAFD,CAIA,mBACE,KAAC,QAAD,wBACE,KAAC,QAAD,EACE,YAAY,CAAEG,YADhB,CAEE,YAAY,CAAEO,YAFhB,CAGE,kBAAkB,CAAE,KAHtB,CAIE,WAAW,CAAEZ,SAJf,EADF,EADF,CAUD,CAED,cAAeF,CAAAA,gBAAf","sourcesContent":["import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { CardBody } from 'components/Card';\nimport HostForm from 'components/HostForm';\n\nimport { HostsAPI } from 'api';\n\nfunction InventoryHostAdd({ inventory }) {\n  const [formError, setFormError] = useState(null);\n  const hostsUrl = `/inventories/inventory/${inventory.id}/hosts`;\n  const history = useHistory();\n\n  const handleSubmit = async (formData) => {\n    try {\n      const values = {\n        ...formData,\n        inventory: inventory.id,\n      };\n      const { data: response } = await HostsAPI.create(values);\n      history.push(`${hostsUrl}/${response.id}/details`);\n    } catch (error) {\n      setFormError(error);\n    }\n  };\n\n  const handleCancel = () => {\n    history.push(hostsUrl);\n  };\n\n  return (\n    <CardBody>\n      <HostForm\n        handleSubmit={handleSubmit}\n        handleCancel={handleCancel}\n        isInventoryVisible={false}\n        submitError={formError}\n      />\n    </CardBody>\n  );\n}\n\nexport default InventoryHostAdd;\n"]},"metadata":{},"sourceType":"module"}