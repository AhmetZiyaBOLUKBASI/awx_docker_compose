{"ast":null,"code":"import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _styled from\"styled-components\";import{i18n}from\"@lingui/core\";import React,{useEffect}from'react';import{TableComposable,Tbody}from'@patternfly/react-table';import{useLocation,useHistory}from'react-router-dom';import{parseQueryString,updateQueryString}from'util/qs';import{QSConfig,SearchColumns,SearchableKeys}from'types';import ListHeader from'../ListHeader';import ContentEmpty from'../ContentEmpty';import ContentError from'../ContentError';import ContentLoading from'../ContentLoading';import Pagination from'../Pagination';import DataListToolbar from'../DataListToolbar';import LoadingSpinner from'../LoadingSpinner';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var _StyledDiv=_styled(\"div\").withConfig({displayName:\"PaginatedTable___StyledDiv\",componentId:\"sc-1v42aza-0\"})([\"overflow:auto\"]);function PaginatedTable(_ref){var contentError=_ref.contentError,hasContentLoading=_ref.hasContentLoading,emptyStateControls=_ref.emptyStateControls,items=_ref.items,itemCount=_ref.itemCount,qsConfig=_ref.qsConfig,headerRow=_ref.headerRow,renderRow=_ref.renderRow,toolbarSearchColumns=_ref.toolbarSearchColumns,toolbarSearchableKeys=_ref.toolbarSearchableKeys,toolbarRelatedSearchableKeys=_ref.toolbarRelatedSearchableKeys,pluralizedItemName=_ref.pluralizedItemName,showPageSizeOptions=_ref.showPageSizeOptions,renderToolbar=_ref.renderToolbar,emptyContentMessage=_ref.emptyContentMessage,clearSelected=_ref.clearSelected,ouiaId=_ref.ouiaId;var _useLocation=useLocation(),search=_useLocation.search,pathname=_useLocation.pathname;var history=useHistory();var location=useLocation();if(!pluralizedItemName){pluralizedItemName=/*i18n*/i18n._(\"Items\");}useEffect(function(){clearSelected();},[location.search,clearSelected]);var pushHistoryState=function pushHistoryState(qs){history.push(qs?\"\".concat(pathname,\"?\").concat(qs):pathname);};var handleSetPage=function handleSetPage(event,pageNumber){var qs=updateQueryString(qsConfig,search,{page:pageNumber});pushHistoryState(qs);};var handleSetPageSize=function handleSetPageSize(event,pageSize,page){var qs=updateQueryString(qsConfig,search,{page_size:pageSize,page:page});pushHistoryState(qs);};var searchColumns=toolbarSearchColumns.length?toolbarSearchColumns:[{name:/*i18n*/i18n._(\"Name\"),key:'name',isDefault:true}];var queryParams=parseQueryString(qsConfig,history.location.search);var dataListLabel=/*i18n*/i18n._(\"{pluralizedItemName} List\",{pluralizedItemName:pluralizedItemName});var emptyContentTitle=/*i18n*/i18n._(\"No {pluralizedItemName} Found\",{pluralizedItemName:pluralizedItemName});var Content;if(hasContentLoading&&items.length<=0){Content=/*#__PURE__*/_jsx(ContentLoading,{});}else if(contentError){Content=/*#__PURE__*/_jsx(ContentError,{error:contentError});}else if(items.length<=0){Content=/*#__PURE__*/_jsx(ContentEmpty,{title:emptyContentTitle,message:emptyContentMessage||/*i18n*/i18n._(\"Please add {pluralizedItemName} to populate this list\",{pluralizedItemName:pluralizedItemName})});}else{Content=/*#__PURE__*/_jsxs(_StyledDiv,{children:[hasContentLoading&&/*#__PURE__*/_jsx(LoadingSpinner,{}),/*#__PURE__*/_jsxs(TableComposable,{\"aria-label\":dataListLabel,ouiaId:ouiaId||\"paginated-table-\".concat(pluralizedItemName),children:[headerRow,/*#__PURE__*/_jsx(Tbody,{children:items.map(renderRow)})]})]});}var ToolbarPagination=/*#__PURE__*/_jsx(Pagination,{isCompact:true,dropDirection:\"down\",itemCount:itemCount,page:queryParams.page||1,perPage:queryParams.page_size,perPageOptions:showPageSizeOptions?[{title:'5',value:5},{title:'10',value:10},{title:'20',value:20},{title:'50',value:50}]:[],onSetPage:handleSetPage,onPerPageSelect:handleSetPageSize,ouiaId:\"top-pagination\"});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ListHeader,{emptyStateControls:emptyStateControls,itemCount:itemCount,pagination:ToolbarPagination,qsConfig:qsConfig,relatedSearchableKeys:toolbarRelatedSearchableKeys,renderToolbar:renderToolbar,searchColumns:searchColumns,searchableKeys:toolbarSearchableKeys}),Content,items.length?/*#__PURE__*/_jsx(Pagination,{variant:\"bottom\",itemCount:itemCount,page:queryParams.page||1,perPage:queryParams.page_size,perPageOptions:showPageSizeOptions?[{title:'5',value:5},{title:'10',value:10},{title:'20',value:20},{title:'50',value:50}]:[],onSetPage:handleSetPage,onPerPageSelect:handleSetPageSize,ouiaId:\"bottom-pagination\"}):null]});}PaginatedTable.defaultProps={hasContentLoading:false,contentError:null,toolbarSearchColumns:[],toolbarSearchableKeys:[],toolbarRelatedSearchableKeys:[],pluralizedItemName:null,showPageSizeOptions:true,renderToolbar:function renderToolbar(props){return/*#__PURE__*/_jsx(DataListToolbar,_objectSpread({},props));},ouiaId:null,clearSelected:function clearSelected(){}};export{PaginatedTable as _PaginatedTable};export default PaginatedTable;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/components/PaginatedTable/PaginatedTable.js"],"names":["React","useEffect","TableComposable","Tbody","useLocation","useHistory","parseQueryString","updateQueryString","QSConfig","SearchColumns","SearchableKeys","ListHeader","ContentEmpty","ContentError","ContentLoading","Pagination","DataListToolbar","LoadingSpinner","PaginatedTable","contentError","hasContentLoading","emptyStateControls","items","itemCount","qsConfig","headerRow","renderRow","toolbarSearchColumns","toolbarSearchableKeys","toolbarRelatedSearchableKeys","pluralizedItemName","showPageSizeOptions","renderToolbar","emptyContentMessage","clearSelected","ouiaId","search","pathname","history","location","pushHistoryState","qs","push","handleSetPage","event","pageNumber","page","handleSetPageSize","pageSize","page_size","searchColumns","length","name","key","isDefault","queryParams","dataListLabel","emptyContentTitle","Content","map","ToolbarPagination","title","value","defaultProps","props","_PaginatedTable"],"mappings":"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","sourcesContent":["import 'styled-components/macro';\nimport React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { TableComposable, Tbody } from '@patternfly/react-table';\n\nimport { t } from '@lingui/macro';\nimport { useLocation, useHistory } from 'react-router-dom';\n\nimport { parseQueryString, updateQueryString } from 'util/qs';\nimport { QSConfig, SearchColumns, SearchableKeys } from 'types';\nimport ListHeader from '../ListHeader';\nimport ContentEmpty from '../ContentEmpty';\nimport ContentError from '../ContentError';\nimport ContentLoading from '../ContentLoading';\nimport Pagination from '../Pagination';\nimport DataListToolbar from '../DataListToolbar';\nimport LoadingSpinner from '../LoadingSpinner';\n\nfunction PaginatedTable({\n  contentError,\n  hasContentLoading,\n  emptyStateControls,\n  items,\n  itemCount,\n  qsConfig,\n  headerRow,\n  renderRow,\n  toolbarSearchColumns,\n  toolbarSearchableKeys,\n  toolbarRelatedSearchableKeys,\n  pluralizedItemName,\n  showPageSizeOptions,\n  renderToolbar,\n  emptyContentMessage,\n  clearSelected,\n  ouiaId,\n}) {\n  const { search, pathname } = useLocation();\n  const history = useHistory();\n  const location = useLocation();\n  if (!pluralizedItemName) {\n    pluralizedItemName = t`Items`;\n  }\n\n  useEffect(() => {\n    clearSelected();\n  }, [location.search, clearSelected]);\n\n  const pushHistoryState = (qs) => {\n    history.push(qs ? `${pathname}?${qs}` : pathname);\n  };\n\n  const handleSetPage = (event, pageNumber) => {\n    const qs = updateQueryString(qsConfig, search, {\n      page: pageNumber,\n    });\n    pushHistoryState(qs);\n  };\n\n  const handleSetPageSize = (event, pageSize, page) => {\n    const qs = updateQueryString(qsConfig, search, {\n      page_size: pageSize,\n      page,\n    });\n    pushHistoryState(qs);\n  };\n\n  const searchColumns = toolbarSearchColumns.length\n    ? toolbarSearchColumns\n    : [\n        {\n          name: t`Name`,\n          key: 'name',\n          isDefault: true,\n        },\n      ];\n  const queryParams = parseQueryString(qsConfig, history.location.search);\n\n  const dataListLabel = t`${pluralizedItemName} List`;\n  const emptyContentTitle = t`No ${pluralizedItemName} Found `;\n\n  let Content;\n  if (hasContentLoading && items.length <= 0) {\n    Content = <ContentLoading />;\n  } else if (contentError) {\n    Content = <ContentError error={contentError} />;\n  } else if (items.length <= 0) {\n    Content = (\n      <ContentEmpty\n        title={emptyContentTitle}\n        message={\n          emptyContentMessage ||\n          t`Please add ${pluralizedItemName} to populate this list `\n        }\n      />\n    );\n  } else {\n    Content = (\n      <div css=\"overflow: auto\">\n        {hasContentLoading && <LoadingSpinner />}\n        <TableComposable\n          aria-label={dataListLabel}\n          ouiaId={ouiaId || `paginated-table-${pluralizedItemName}`}\n        >\n          {headerRow}\n          <Tbody>{items.map(renderRow)}</Tbody>\n        </TableComposable>\n      </div>\n    );\n  }\n\n  const ToolbarPagination = (\n    <Pagination\n      isCompact\n      dropDirection=\"down\"\n      itemCount={itemCount}\n      page={queryParams.page || 1}\n      perPage={queryParams.page_size}\n      perPageOptions={\n        showPageSizeOptions\n          ? [\n              { title: '5', value: 5 },\n              { title: '10', value: 10 },\n              { title: '20', value: 20 },\n              { title: '50', value: 50 },\n            ]\n          : []\n      }\n      onSetPage={handleSetPage}\n      onPerPageSelect={handleSetPageSize}\n      ouiaId=\"top-pagination\"\n    />\n  );\n\n  return (\n    <>\n      <ListHeader\n        emptyStateControls={emptyStateControls}\n        itemCount={itemCount}\n        pagination={ToolbarPagination}\n        qsConfig={qsConfig}\n        relatedSearchableKeys={toolbarRelatedSearchableKeys}\n        renderToolbar={renderToolbar}\n        searchColumns={searchColumns}\n        searchableKeys={toolbarSearchableKeys}\n      />\n      {Content}\n      {items.length ? (\n        <Pagination\n          variant=\"bottom\"\n          itemCount={itemCount}\n          page={queryParams.page || 1}\n          perPage={queryParams.page_size}\n          perPageOptions={\n            showPageSizeOptions\n              ? [\n                  { title: '5', value: 5 },\n                  { title: '10', value: 10 },\n                  { title: '20', value: 20 },\n                  { title: '50', value: 50 },\n                ]\n              : []\n          }\n          onSetPage={handleSetPage}\n          onPerPageSelect={handleSetPageSize}\n          ouiaId=\"bottom-pagination\"\n        />\n      ) : null}\n    </>\n  );\n}\n\nconst Item = PropTypes.shape({\n  id: PropTypes.number.isRequired,\n  url: PropTypes.string.isRequired,\n  name: PropTypes.string,\n});\n\nPaginatedTable.propTypes = {\n  items: PropTypes.arrayOf(Item).isRequired,\n  itemCount: PropTypes.number.isRequired,\n  pluralizedItemName: PropTypes.string,\n  qsConfig: QSConfig.isRequired,\n  renderRow: PropTypes.func.isRequired,\n  toolbarSearchColumns: SearchColumns,\n  toolbarSearchableKeys: SearchableKeys,\n  toolbarRelatedSearchableKeys: PropTypes.arrayOf(PropTypes.string),\n  showPageSizeOptions: PropTypes.bool,\n  renderToolbar: PropTypes.func,\n  hasContentLoading: PropTypes.bool,\n  contentError: PropTypes.shape(),\n  clearSelected: PropTypes.func,\n  ouiaId: PropTypes.string,\n};\n\nPaginatedTable.defaultProps = {\n  hasContentLoading: false,\n  contentError: null,\n  toolbarSearchColumns: [],\n  toolbarSearchableKeys: [],\n  toolbarRelatedSearchableKeys: [],\n  pluralizedItemName: null,\n  showPageSizeOptions: true,\n  renderToolbar: (props) => <DataListToolbar {...props} />,\n  ouiaId: null,\n  clearSelected: () => {},\n};\n\nexport { PaginatedTable as _PaginatedTable };\nexport default PaginatedTable;\n"]},"metadata":{},"sourceType":"module"}