{"ast":null,"code":"import _slicedToArray from \"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { __rest } from \"tslib\";\nimport * as React from 'react';\nimport styles from '@patternfly/react-styles/css/components/Nav/nav';\nimport { css } from '@patternfly/react-styles';\nimport { NavContext } from './Nav';\nimport { PageSidebarContext } from '../Page/PageSidebar';\nimport { useOUIAProps } from '../../helpers';\nimport { Popper } from '../../helpers/Popper/Popper';\nimport AngleRightIcon from '@patternfly/react-icons/dist/esm/icons/angle-right-icon';\nexport var NavItem = function NavItem(_a) {\n  var children = _a.children,\n      _a$styleChildren = _a.styleChildren,\n      styleChildren = _a$styleChildren === void 0 ? true : _a$styleChildren,\n      className = _a.className,\n      to = _a.to,\n      _a$isActive = _a.isActive,\n      isActive = _a$isActive === void 0 ? false : _a$isActive,\n      _a$groupId = _a.groupId,\n      groupId = _a$groupId === void 0 ? null : _a$groupId,\n      _a$itemId = _a.itemId,\n      itemId = _a$itemId === void 0 ? null : _a$itemId,\n      _a$preventDefault = _a.preventDefault,\n      preventDefault = _a$preventDefault === void 0 ? false : _a$preventDefault,\n      _a$onClick = _a.onClick,\n      _onClick = _a$onClick === void 0 ? null : _a$onClick,\n      _a$component = _a.component,\n      component = _a$component === void 0 ? 'a' : _a$component,\n      flyout = _a.flyout,\n      onShowFlyout = _a.onShowFlyout,\n      ouiaId = _a.ouiaId,\n      ouiaSafe = _a.ouiaSafe,\n      props = __rest(_a, [\"children\", \"styleChildren\", \"className\", \"to\", \"isActive\", \"groupId\", \"itemId\", \"preventDefault\", \"onClick\", \"component\", \"flyout\", \"onShowFlyout\", \"ouiaId\", \"ouiaSafe\"]);\n\n  var _React$useContext = React.useContext(NavContext),\n      flyoutRef = _React$useContext.flyoutRef,\n      setFlyoutRef = _React$useContext.setFlyoutRef;\n\n  var _React$useContext2 = React.useContext(PageSidebarContext),\n      isNavOpen = _React$useContext2.isNavOpen;\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      flyoutTarget = _React$useState2[0],\n      setFlyoutTarget = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      isHovered = _React$useState4[0],\n      setIsHovered = _React$useState4[1];\n\n  var ref = React.useRef();\n  var flyoutVisible = ref === flyoutRef;\n  var popperRef = React.useRef();\n  var Component = component;\n  var hasFlyout = flyout !== undefined;\n\n  var showFlyout = function showFlyout(show, override) {\n    if ((!flyoutVisible || override) && show) {\n      setFlyoutRef(ref);\n    } else if ((flyoutVisible || override) && !show) {\n      setFlyoutRef(null);\n    }\n\n    onShowFlyout && show && onShowFlyout();\n  };\n\n  var onMouseOver = function onMouseOver(event) {\n    var evtContainedInFlyout = event.target.closest('.pf-c-nav__item.pf-m-flyout');\n\n    if (hasFlyout && !flyoutVisible) {\n      showFlyout(true);\n    } else if (flyoutRef !== null && !evtContainedInFlyout) {\n      setFlyoutRef(null);\n    }\n  };\n\n  var onFlyoutClick = function onFlyoutClick(event) {\n    var target = event.target;\n    var closestItem = target.closest('.pf-m-flyout');\n\n    if (!closestItem) {\n      if (hasFlyout) {\n        showFlyout(false, true);\n      } else if (flyoutRef !== null) {\n        setFlyoutRef(null);\n      }\n    }\n  };\n\n  var handleFlyout = function handleFlyout(event) {\n    var _a, _b;\n\n    var key = event.key;\n    var target = event.target;\n\n    if (!(((_a = popperRef === null || popperRef === void 0 ? void 0 : popperRef.current) === null || _a === void 0 ? void 0 : _a.contains(target)) || hasFlyout && ((_b = ref === null || ref === void 0 ? void 0 : ref.current) === null || _b === void 0 ? void 0 : _b.contains(target)))) {\n      return;\n    }\n\n    if (key === ' ' || key === 'ArrowRight') {\n      event.stopPropagation();\n      event.preventDefault();\n\n      if (!flyoutVisible) {\n        showFlyout(true);\n        setFlyoutTarget(target);\n      }\n    }\n\n    if (key === 'Escape' || key === 'ArrowLeft') {\n      if (flyoutVisible) {\n        event.stopPropagation();\n        event.preventDefault();\n        showFlyout(false);\n      }\n    }\n  };\n\n  React.useEffect(function () {\n    if (hasFlyout) {\n      window.addEventListener('click', onFlyoutClick);\n    }\n\n    return function () {\n      if (hasFlyout) {\n        window.removeEventListener('click', onFlyoutClick);\n      }\n    };\n  }, []);\n  React.useEffect(function () {\n    if (flyoutTarget) {\n      if (flyoutVisible) {\n        var flyoutItems = Array.from(popperRef.current.getElementsByTagName('UL')[0].children).filter(function (el) {\n          return !(el.classList.contains('pf-m-disabled') || el.classList.contains('pf-c-divider'));\n        });\n        flyoutItems[0].firstChild.focus();\n      } else {\n        flyoutTarget.focus();\n      }\n    }\n  }, [flyoutVisible, flyoutTarget]);\n  var flyoutButton = React.createElement(\"span\", {\n    className: css(styles.navToggle)\n  }, React.createElement(\"span\", {\n    className: css(styles.navToggleIcon)\n  }, React.createElement(AngleRightIcon, {\n    \"aria-hidden\": true\n  })));\n\n  var renderDefaultLink = function renderDefaultLink(context) {\n    var preventLinkDefault = preventDefault || !to;\n    return React.createElement(Component, Object.assign({\n      href: to,\n      onClick: function onClick(e) {\n        return context.onSelect(e, groupId, itemId, to, preventLinkDefault, _onClick);\n      },\n      className: css(styles.navLink, isActive && styles.modifiers.current, isHovered && styles.modifiers.hover, className),\n      \"aria-current\": isActive ? 'page' : null,\n      tabIndex: isNavOpen ? null : '-1'\n    }, props), children, flyout && flyoutButton);\n  };\n\n  var renderClonedChild = function renderClonedChild(context, child) {\n    return React.cloneElement(child, Object.assign(Object.assign({\n      onClick: function onClick(e) {\n        return context.onSelect(e, groupId, itemId, to, preventDefault, _onClick);\n      },\n      'aria-current': isActive ? 'page' : null\n    }, styleChildren && {\n      className: css(styles.navLink, isActive && styles.modifiers.current, child.props && child.props.className)\n    }), {\n      tabIndex: child.props.tabIndex || isNavOpen ? null : -1,\n      children: hasFlyout ? React.createElement(React.Fragment, null, child.props.children, flyoutButton) : child.props.children\n    }));\n  };\n\n  var ouiaProps = useOUIAProps(NavItem.displayName, ouiaId, ouiaSafe);\n\n  var handleMouseEnter = function handleMouseEnter() {\n    setIsHovered(true);\n  };\n\n  var handleMouseLeave = function handleMouseLeave() {\n    setIsHovered(false);\n  };\n\n  var flyoutPopper = React.createElement(Popper, {\n    reference: ref,\n    popper: React.createElement(\"div\", {\n      ref: popperRef,\n      onMouseEnter: handleMouseEnter,\n      onMouseLeave: handleMouseLeave\n    }, flyout),\n    placement: \"right-start\",\n    isVisible: flyoutVisible,\n    onDocumentKeyDown: handleFlyout\n  });\n  var navItem = React.createElement(React.Fragment, null, React.createElement(\"li\", Object.assign({\n    onMouseOver: onMouseOver,\n    className: css(styles.navItem, hasFlyout && styles.modifiers.flyout, className),\n    ref: ref\n  }, ouiaProps), React.createElement(NavContext.Consumer, null, function (context) {\n    return React.isValidElement(children) ? renderClonedChild(context, children) : renderDefaultLink(context);\n  })), flyout && flyoutPopper);\n  return navItem;\n};\nNavItem.displayName = 'NavItem';","map":{"version":3,"sources":["/awx_devel/awx/ui/node_modules/@patternfly/react-core/src/components/Nav/NavItem.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport styles from '@patternfly/react-styles/css/components/Nav/nav';\nimport { css } from '@patternfly/react-styles';\nimport { NavContext, NavSelectClickHandler } from './Nav';\nimport { PageSidebarContext } from '../Page/PageSidebar';\nimport { useOUIAProps, OUIAProps } from '../../helpers';\nimport { Popper } from '../../helpers/Popper/Popper';\nimport AngleRightIcon from '@patternfly/react-icons/dist/esm/icons/angle-right-icon';\n\nexport interface NavItemProps extends Omit<React.HTMLProps<HTMLAnchorElement>, 'onClick'>, OUIAProps {\n  /** Content rendered inside the nav item. */\n  children?: React.ReactNode;\n  /** Whether to set className on children when React.isValidElement(children) */\n  styleChildren?: boolean;\n  /** Additional classes added to the nav item */\n  className?: string;\n  /** Target navigation link */\n  to?: string;\n  /** Flag indicating whether the item is active */\n  isActive?: boolean;\n  /** Group identifier, will be returned with the onToggle and onSelect callback passed to the Nav component */\n  groupId?: string | number | null;\n  /** Item identifier, will be returned with the onToggle and onSelect callback passed to the Nav component */\n  itemId?: string | number | null;\n  /** If true prevents the default anchor link action to occur. Set to true if you want to handle navigation yourself. */\n  preventDefault?: boolean;\n  /** Callback for item click */\n  onClick?: NavSelectClickHandler;\n  /** Component used to render NavItems if  React.isValidElement(children) is false */\n  component?: React.ReactNode;\n  /** Flyout of a nav item. This should be a Menu component. */\n  flyout?: React.ReactElement;\n  /** Callback when flyout is opened or closed */\n  onShowFlyout?: () => void;\n}\n\nexport const NavItem: React.FunctionComponent<NavItemProps> = ({\n  children,\n  styleChildren = true,\n  className,\n  to,\n  isActive = false,\n  groupId = null as string,\n  itemId = null as string,\n  preventDefault = false,\n  onClick = null as NavSelectClickHandler,\n  component = 'a',\n  flyout,\n  onShowFlyout,\n  ouiaId,\n  ouiaSafe,\n  ...props\n}: NavItemProps) => {\n  const { flyoutRef, setFlyoutRef } = React.useContext(NavContext);\n  const { isNavOpen } = React.useContext(PageSidebarContext);\n  const [flyoutTarget, setFlyoutTarget] = React.useState(null);\n  const [isHovered, setIsHovered] = React.useState(false);\n  const ref = React.useRef<HTMLLIElement>();\n  const flyoutVisible = ref === flyoutRef;\n  const popperRef = React.useRef<HTMLDivElement>();\n  const Component = component as any;\n  const hasFlyout = flyout !== undefined;\n\n  const showFlyout = (show: boolean, override?: boolean) => {\n    if ((!flyoutVisible || override) && show) {\n      setFlyoutRef(ref);\n    } else if ((flyoutVisible || override) && !show) {\n      setFlyoutRef(null);\n    }\n\n    onShowFlyout && show && onShowFlyout();\n  };\n\n  const onMouseOver = (event: React.MouseEvent) => {\n    const evtContainedInFlyout = (event.target as HTMLElement).closest('.pf-c-nav__item.pf-m-flyout');\n    if (hasFlyout && !flyoutVisible) {\n      showFlyout(true);\n    } else if (flyoutRef !== null && !evtContainedInFlyout) {\n      setFlyoutRef(null);\n    }\n  };\n\n  const onFlyoutClick = (event: MouseEvent) => {\n    const target = event.target;\n    const closestItem = (target as HTMLElement).closest('.pf-m-flyout');\n    if (!closestItem) {\n      if (hasFlyout) {\n        showFlyout(false, true);\n      } else if (flyoutRef !== null) {\n        setFlyoutRef(null);\n      }\n    }\n  };\n\n  const handleFlyout = (event: KeyboardEvent) => {\n    const key = event.key;\n    const target = event.target as HTMLElement;\n\n    if (!(popperRef?.current?.contains(target) || (hasFlyout && ref?.current?.contains(target)))) {\n      return;\n    }\n\n    if (key === ' ' || key === 'ArrowRight') {\n      event.stopPropagation();\n      event.preventDefault();\n      if (!flyoutVisible) {\n        showFlyout(true);\n        setFlyoutTarget(target as HTMLElement);\n      }\n    }\n\n    if (key === 'Escape' || key === 'ArrowLeft') {\n      if (flyoutVisible) {\n        event.stopPropagation();\n        event.preventDefault();\n        showFlyout(false);\n      }\n    }\n  };\n\n  React.useEffect(() => {\n    if (hasFlyout) {\n      window.addEventListener('click', onFlyoutClick);\n    }\n    return () => {\n      if (hasFlyout) {\n        window.removeEventListener('click', onFlyoutClick);\n      }\n    };\n  }, []);\n\n  React.useEffect(() => {\n    if (flyoutTarget) {\n      if (flyoutVisible) {\n        const flyoutItems = Array.from(\n          (popperRef.current as HTMLElement).getElementsByTagName('UL')[0].children\n        ).filter(el => !(el.classList.contains('pf-m-disabled') || el.classList.contains('pf-c-divider')));\n        (flyoutItems[0].firstChild as HTMLElement).focus();\n      } else {\n        flyoutTarget.focus();\n      }\n    }\n  }, [flyoutVisible, flyoutTarget]);\n\n  const flyoutButton = (\n    <span className={css(styles.navToggle)}>\n      <span className={css(styles.navToggleIcon)}>\n        <AngleRightIcon aria-hidden />\n      </span>\n    </span>\n  );\n\n  const renderDefaultLink = (context: any): React.ReactNode => {\n    const preventLinkDefault = preventDefault || !to;\n    return (\n      <Component\n        href={to}\n        onClick={(e: any) => context.onSelect(e, groupId, itemId, to, preventLinkDefault, onClick)}\n        className={css(\n          styles.navLink,\n          isActive && styles.modifiers.current,\n          isHovered && styles.modifiers.hover,\n          className\n        )}\n        aria-current={isActive ? 'page' : null}\n        tabIndex={isNavOpen ? null : '-1'}\n        {...props}\n      >\n        {children}\n        {flyout && flyoutButton}\n      </Component>\n    );\n  };\n\n  const renderClonedChild = (context: any, child: React.ReactElement): React.ReactNode =>\n    React.cloneElement(child, {\n      onClick: (e: MouseEvent) => context.onSelect(e, groupId, itemId, to, preventDefault, onClick),\n      'aria-current': isActive ? 'page' : null,\n      ...(styleChildren && {\n        className: css(styles.navLink, isActive && styles.modifiers.current, child.props && child.props.className)\n      }),\n      tabIndex: child.props.tabIndex || isNavOpen ? null : -1,\n      children: hasFlyout ? (\n        <React.Fragment>\n          {child.props.children}\n          {flyoutButton}\n        </React.Fragment>\n      ) : (\n        child.props.children\n      )\n    });\n\n  const ouiaProps = useOUIAProps(NavItem.displayName, ouiaId, ouiaSafe);\n\n  const handleMouseEnter = () => {\n    setIsHovered(true);\n  };\n\n  const handleMouseLeave = () => {\n    setIsHovered(false);\n  };\n\n  const flyoutPopper = (\n    <Popper\n      reference={ref}\n      popper={\n        <div ref={popperRef} onMouseEnter={handleMouseEnter} onMouseLeave={handleMouseLeave}>\n          {flyout}\n        </div>\n      }\n      placement=\"right-start\"\n      isVisible={flyoutVisible}\n      onDocumentKeyDown={handleFlyout}\n    />\n  );\n\n  const navItem = (\n    <>\n      <li\n        onMouseOver={onMouseOver}\n        className={css(styles.navItem, hasFlyout && styles.modifiers.flyout, className)}\n        ref={ref}\n        {...ouiaProps}\n      >\n        <NavContext.Consumer>\n          {context =>\n            React.isValidElement(children)\n              ? renderClonedChild(context, children as React.ReactElement)\n              : renderDefaultLink(context)\n          }\n        </NavContext.Consumer>\n      </li>\n      {flyout && flyoutPopper}\n    </>\n  );\n\n  return navItem;\n};\nNavItem.displayName = 'NavItem';\n"]},"metadata":{},"sourceType":"module"}