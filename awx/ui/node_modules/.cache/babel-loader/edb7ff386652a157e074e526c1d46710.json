{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useEffect,useCallback}from'react';import{Link,Redirect,Route,Switch,useLocation,useParams}from'react-router-dom';import{Card,PageSection}from'@patternfly/react-core';import{CaretLeftIcon}from'@patternfly/react-icons';import useRequest from'hooks/useRequest';import{ExecutionEnvironmentsAPI}from'api';import RoutedTabs from'components/RoutedTabs';import ContentError from'components/ContentError';import ContentLoading from'components/ContentLoading';import ExecutionEnvironmentDetails from'./ExecutionEnvironmentDetails';import ExecutionEnvironmentEdit from'./ExecutionEnvironmentEdit';import ExecutionEnvironmentTemplateList from'./ExecutionEnvironmentTemplate';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ExecutionEnvironment(_ref){var setBreadcrumb=_ref.setBreadcrumb;var _useParams=useParams(),id=_useParams.id;var _useLocation=useLocation(),pathname=_useLocation.pathname;var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$ExecutionEnvir,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return ExecutionEnvironmentsAPI.readDetail(id);case 2:_yield$ExecutionEnvir=_context.sent;data=_yield$ExecutionEnvir.data;return _context.abrupt(\"return\",data);case 5:case\"end\":return _context.stop();}}},_callee);})),[id]),null),isLoading=_useRequest.isLoading,contentError=_useRequest.error,fetchExecutionEnvironments=_useRequest.request,executionEnvironment=_useRequest.result;useEffect(function(){fetchExecutionEnvironments();},[fetchExecutionEnvironments,pathname]);useEffect(function(){if(executionEnvironment){setBreadcrumb(executionEnvironment);}},[executionEnvironment,setBreadcrumb]);var tabsArray=[{name:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CaretLeftIcon,{}),/*i18n*/i18n._(\"Back to execution environments\")]}),link:'/execution_environments',id:99,isBackButton:true},{name:/*i18n*/i18n._(\"Details\"),link:\"/execution_environments/\".concat(id,\"/details\"),id:0},{name:/*i18n*/i18n._(\"Templates\"),link:\"/execution_environments/\".concat(id,\"/templates\"),id:1}];if(!isLoading&&contentError){var _contentError$respons;return/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(ContentError,{error:contentError,children:((_contentError$respons=contentError.response)===null||_contentError$respons===void 0?void 0:_contentError$respons.status)===404&&/*#__PURE__*/_jsxs(\"span\",{children:[/*i18n*/i18n._(\"Execution environment not found.\"),' ',/*#__PURE__*/_jsx(Link,{to:\"/execution_environments\",children:/*i18n*/i18n._(\"View all execution environments\")})]})})})});}var cardHeader=/*#__PURE__*/_jsx(RoutedTabs,{tabsArray:tabsArray});if(pathname.endsWith('edit')){cardHeader=null;}return/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsxs(Card,{children:[cardHeader,isLoading&&/*#__PURE__*/_jsx(ContentLoading,{}),!isLoading&&executionEnvironment&&/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Redirect,{from:\"/execution_environments/:id\",to:\"/execution_environments/:id/details\",exact:true}),executionEnvironment&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Route,{path:\"/execution_environments/:id/edit\",children:/*#__PURE__*/_jsx(ExecutionEnvironmentEdit,{executionEnvironment:executionEnvironment})}),/*#__PURE__*/_jsx(Route,{path:\"/execution_environments/:id/details\",children:/*#__PURE__*/_jsx(ExecutionEnvironmentDetails,{executionEnvironment:executionEnvironment})}),/*#__PURE__*/_jsx(Route,{path:\"/execution_environments/:id/templates\",children:/*#__PURE__*/_jsx(ExecutionEnvironmentTemplateList,{executionEnvironment:executionEnvironment})})]})]})]})});}export default ExecutionEnvironment;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/ExecutionEnvironment/ExecutionEnvironment.js"],"names":["React","useEffect","useCallback","Link","Redirect","Route","Switch","useLocation","useParams","Card","PageSection","CaretLeftIcon","useRequest","ExecutionEnvironmentsAPI","RoutedTabs","ContentError","ContentLoading","ExecutionEnvironmentDetails","ExecutionEnvironmentEdit","ExecutionEnvironmentTemplateList","ExecutionEnvironment","setBreadcrumb","id","pathname","readDetail","data","isLoading","contentError","error","fetchExecutionEnvironments","request","executionEnvironment","result","tabsArray","name","link","isBackButton","response","status","cardHeader","endsWith"],"mappings":"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","sourcesContent":["import React, { useEffect, useCallback } from 'react';\nimport {\n  Link,\n  Redirect,\n  Route,\n  Switch,\n  useLocation,\n  useParams,\n} from 'react-router-dom';\n\nimport { t } from '@lingui/macro';\nimport { Card, PageSection } from '@patternfly/react-core';\nimport { CaretLeftIcon } from '@patternfly/react-icons';\n\nimport useRequest from 'hooks/useRequest';\nimport { ExecutionEnvironmentsAPI } from 'api';\nimport RoutedTabs from 'components/RoutedTabs';\nimport ContentError from 'components/ContentError';\nimport ContentLoading from 'components/ContentLoading';\n\nimport ExecutionEnvironmentDetails from './ExecutionEnvironmentDetails';\nimport ExecutionEnvironmentEdit from './ExecutionEnvironmentEdit';\nimport ExecutionEnvironmentTemplateList from './ExecutionEnvironmentTemplate';\n\nfunction ExecutionEnvironment({ setBreadcrumb }) {\n  const { id } = useParams();\n  const { pathname } = useLocation();\n\n  const {\n    isLoading,\n    error: contentError,\n    request: fetchExecutionEnvironments,\n    result: executionEnvironment,\n  } = useRequest(\n    useCallback(async () => {\n      const { data } = await ExecutionEnvironmentsAPI.readDetail(id);\n      return data;\n    }, [id]),\n    null\n  );\n\n  useEffect(() => {\n    fetchExecutionEnvironments();\n  }, [fetchExecutionEnvironments, pathname]);\n\n  useEffect(() => {\n    if (executionEnvironment) {\n      setBreadcrumb(executionEnvironment);\n    }\n  }, [executionEnvironment, setBreadcrumb]);\n\n  const tabsArray = [\n    {\n      name: (\n        <>\n          <CaretLeftIcon />\n          {t`Back to execution environments`}\n        </>\n      ),\n      link: '/execution_environments',\n      id: 99,\n      isBackButton: true,\n    },\n    {\n      name: t`Details`,\n      link: `/execution_environments/${id}/details`,\n      id: 0,\n    },\n    {\n      name: t`Templates`,\n      link: `/execution_environments/${id}/templates`,\n      id: 1,\n    },\n  ];\n\n  if (!isLoading && contentError) {\n    return (\n      <PageSection>\n        <Card>\n          <ContentError error={contentError}>\n            {contentError.response?.status === 404 && (\n              <span>\n                {t`Execution environment not found.`}{' '}\n                <Link to=\"/execution_environments\">\n                  {t`View all execution environments`}\n                </Link>\n              </span>\n            )}\n          </ContentError>\n        </Card>\n      </PageSection>\n    );\n  }\n\n  let cardHeader = <RoutedTabs tabsArray={tabsArray} />;\n  if (pathname.endsWith('edit')) {\n    cardHeader = null;\n  }\n\n  return (\n    <PageSection>\n      <Card>\n        {cardHeader}\n        {isLoading && <ContentLoading />}\n        {!isLoading && executionEnvironment && (\n          <Switch>\n            <Redirect\n              from=\"/execution_environments/:id\"\n              to=\"/execution_environments/:id/details\"\n              exact\n            />\n            {executionEnvironment && (\n              <>\n                <Route path=\"/execution_environments/:id/edit\">\n                  <ExecutionEnvironmentEdit\n                    executionEnvironment={executionEnvironment}\n                  />\n                </Route>\n                <Route path=\"/execution_environments/:id/details\">\n                  <ExecutionEnvironmentDetails\n                    executionEnvironment={executionEnvironment}\n                  />\n                </Route>\n                <Route path=\"/execution_environments/:id/templates\">\n                  <ExecutionEnvironmentTemplateList\n                    executionEnvironment={executionEnvironment}\n                  />\n                </Route>\n              </>\n            )}\n          </Switch>\n        )}\n      </Card>\n    </PageSection>\n  );\n}\n\nexport default ExecutionEnvironment;\n"]},"metadata":{},"sourceType":"module"}