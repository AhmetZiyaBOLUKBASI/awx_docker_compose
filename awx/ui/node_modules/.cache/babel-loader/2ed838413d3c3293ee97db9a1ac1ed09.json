{"ast":null,"code":"import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _styled from\"styled-components\";var _excluded=[\"title\"];import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useContext,useState,useEffect,useCallback}from'react';import{useHistory}from'react-router-dom';import{Formik,useFormikContext}from'formik';import yaml from'js-yaml';import{Button,WizardContextConsumer,WizardFooter,Form}from'@patternfly/react-core';import ContentError from'components/ContentError';import ContentLoading from'components/ContentLoading';import useRequest,{useDismissableError}from'hooks/useRequest';import mergeExtraVars from'util/prompt/mergeExtraVars';import getSurveyValues from'util/prompt/getSurveyValues';import{parseVariableField}from'util/yaml';import{WorkflowDispatchContext,WorkflowStateContext}from'contexts/Workflow';import{JobTemplatesAPI,WorkflowJobTemplatesAPI}from'api';import Wizard from'components/Wizard';import AlertModal from'components/AlertModal';import useWorkflowNodeSteps from'./useWorkflowNodeSteps';import NodeNextButton from'./NodeNextButton';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _StyledWizard=_styled(Wizard).withConfig({displayName:\"NodeModal___StyledWizard\",componentId:\"sc-1sgmhlg-0\"})([\"overflow:scroll\"]);function NodeModalForm(_ref){var askLinkType=_ref.askLinkType,onSave=_ref.onSave,title=_ref.title,credentialError=_ref.credentialError,launchConfig=_ref.launchConfig,surveyConfig=_ref.surveyConfig,isLaunchLoading=_ref.isLaunchLoading,resourceDefaultCredentials=_ref.resourceDefaultCredentials;var history=useHistory();var dispatch=useContext(WorkflowDispatchContext);var _useFormikContext=useFormikContext(),values=_useFormikContext.values,setFieldTouched=_useFormikContext.setFieldTouched;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),triggerNext=_useState2[0],setTriggerNext=_useState2[1];var clearQueryParams=function clearQueryParams(){var parts=history.location.search.replace(/^\\?/,'').split('&');var otherParts=parts.filter(function(param){return /^!(job_templates\\.|projects\\.|inventory_sources\\.|workflow_job_templates\\.)/.test(param);});history.replace(\"\".concat(history.location.pathname,\"?\").concat(otherParts.join('&')));};var _useWorkflowNodeSteps=useWorkflowNodeSteps(launchConfig,surveyConfig,values.nodeResource,askLinkType,resourceDefaultCredentials),promptSteps=_useWorkflowNodeSteps.steps,validateStep=_useWorkflowNodeSteps.validateStep,visitStep=_useWorkflowNodeSteps.visitStep,visitAllSteps=_useWorkflowNodeSteps.visitAllSteps,contentError=_useWorkflowNodeSteps.contentError;var handleSaveNode=function handleSaveNode(){var _values$nodeResource;clearQueryParams();if(values.nodeType!=='workflow_approval_template'){delete values.approvalName;delete values.approvalDescription;delete values.timeoutMinutes;delete values.timeoutSeconds;}if(['job_template','workflow_job_template'].includes(values.nodeType)&&(launchConfig.ask_variables_on_launch||launchConfig.survey_enabled)){var extraVars;var surveyValues=getSurveyValues(values);var initialExtraVars=launchConfig.ask_variables_on_launch&&(values.extra_vars||'---');if(surveyConfig!==null&&surveyConfig!==void 0&&surveyConfig.spec){extraVars=yaml.dump(mergeExtraVars(initialExtraVars,surveyValues));}else{extraVars=yaml.dump(mergeExtraVars(initialExtraVars,{}));}values.extra_data=extraVars&&parseVariableField(extraVars);delete values.extra_vars;}else if(values.nodeType==='system_job_template'&&['cleanup_activitystream','cleanup_jobs'].includes(values===null||values===void 0?void 0:(_values$nodeResource=values.nodeResource)===null||_values$nodeResource===void 0?void 0:_values$nodeResource.job_type)){values.extra_data={days:parseInt(values===null||values===void 0?void 0:values.daysToKeep,10)};}delete values.daysToKeep;onSave(values,launchConfig);};var handleCancel=function handleCancel(){clearQueryParams();dispatch({type:'CANCEL_NODE_MODAL'});};var _useDismissableError=useDismissableError(contentError||credentialError),error=_useDismissableError.error,dismissError=_useDismissableError.dismissError;function nextButtonText(activeStep){var verifyPromptSteps=false;if(promptSteps.length){var _promptSteps;verifyPromptSteps=activeStep.id===((_promptSteps=promptSteps[promptSteps.length-1])===null||_promptSteps===void 0?void 0:_promptSteps.id);}return verifyPromptSteps||activeStep.name==='Preview'?/*i18n*/i18n._(\"Save\"):/*i18n*/i18n._(\"Next\");}var CustomFooter=/*#__PURE__*/_jsx(WizardFooter,{children:/*#__PURE__*/_jsx(WizardContextConsumer,{children:function children(_ref2){var _promptSteps$;var activeStep=_ref2.activeStep,onNext=_ref2.onNext,onBack=_ref2.onBack;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NodeNextButton,{isDisabled:isLaunchLoading,triggerNext:triggerNext,activeStep:activeStep,\"aria-label\":nextButtonText(activeStep),onNext:onNext,onClick:function onClick(){return setTriggerNext(triggerNext+1);},buttonText:nextButtonText(activeStep)}),activeStep&&activeStep.id!==((_promptSteps$=promptSteps[0])===null||_promptSteps$===void 0?void 0:_promptSteps$.id)&&/*#__PURE__*/_jsx(Button,{ouiaId:\"node-modal-back-button\",id:\"back-node-modal\",variant:\"secondary\",\"aria-label\":/*i18n*/i18n._(\"Back\"),onClick:onBack,children:/*i18n*/i18n._(\"Back\")}),/*#__PURE__*/_jsx(Button,{ouiaId:\"node-modal-cancel-button\",id:\"cancel-node-modal\",variant:\"link\",\"aria-label\":/*i18n*/i18n._(\"Cancel\"),onClick:handleCancel,children:/*i18n*/i18n._(\"Cancel\")})]});}})});if(error){return/*#__PURE__*/_jsx(AlertModal,{isOpen:error,variant:\"error\",title:/*i18n*/i18n._(\"Error!\"),onClose:function onClose(){dismissError();},children:/*#__PURE__*/_jsx(ContentError,{error:error})});}if(error&&!isLaunchLoading){return/*#__PURE__*/_jsx(AlertModal,{isOpen:error,variant:\"error\",title:/*i18n*/i18n._(\"Error!\"),onClose:function onClose(){dismissError();},children:/*#__PURE__*/_jsx(ContentError,{error:error})});}return/*#__PURE__*/_jsx(_StyledWizard,{footer:CustomFooter,isOpen:!error,onClose:handleCancel,onSave:function onSave(){handleSaveNode();},onBack:/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(nextStep){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:validateStep(nextStep.id);case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref3.apply(this,arguments);};}(),onGoToStep:/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(nextStep,prevStep){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(nextStep.id==='preview'){visitAllSteps(setFieldTouched);}else{visitStep(prevStep.prevId,setFieldTouched);validateStep(nextStep.id);}case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2,_x3){return _ref4.apply(this,arguments);};}(),steps:promptSteps,title:title,onNext:/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(nextStep,prevStep){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(nextStep.id==='preview'){visitAllSteps(setFieldTouched);}else{visitStep(prevStep.prevId,setFieldTouched);validateStep(nextStep.id);}case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x4,_x5){return _ref5.apply(this,arguments);};}()});}var NodeModalInner=function NodeModalInner(_ref6){var title=_ref6.title,rest=_objectWithoutProperties(_ref6,_excluded);var _useFormikContext2=useFormikContext(),values=_useFormikContext2.values;var wizardTitle=values.nodeResource?\"\".concat(title,\" | \").concat(values.nodeResource.name):title;var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var _values$nodeResource2,_values$nodeResource3;var readLaunch,_yield$readLaunch,launch,survey,_launch$workflow_job_,_launch$job_template_,_ref8,data,defaultCredentials,_values$nodeResource4,_yield$JobTemplatesAP,results;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:readLaunch=function readLaunch(type,id){return type==='workflow_job_template'?WorkflowJobTemplatesAPI.readLaunch(id):JobTemplatesAPI.readLaunch(id);};if(!(!values.nodeResource||!['job_template','workflow_job_template'].includes(values===null||values===void 0?void 0:values.nodeType)||!['job_template','workflow_job_template'].includes((_values$nodeResource2=values.nodeResource)===null||_values$nodeResource2===void 0?void 0:_values$nodeResource2.type))){_context4.next=3;break;}return _context4.abrupt(\"return\",{launchConfig:{},surveyConfig:{},resourceDefaultCredentials:[]});case 3:_context4.next=5;return readLaunch(values.nodeType,values===null||values===void 0?void 0:(_values$nodeResource3=values.nodeResource)===null||_values$nodeResource3===void 0?void 0:_values$nodeResource3.id);case 5:_yield$readLaunch=_context4.sent;launch=_yield$readLaunch.data;survey={};if(!launch.survey_enabled){_context4.next=21;break;}if(!(launch!==null&&launch!==void 0&&launch.workflow_job_template_data)){_context4.next=15;break;}_context4.next=12;return WorkflowJobTemplatesAPI.readSurvey(launch===null||launch===void 0?void 0:(_launch$workflow_job_=launch.workflow_job_template_data)===null||_launch$workflow_job_===void 0?void 0:_launch$workflow_job_.id);case 12:_context4.t0=_context4.sent;_context4.next=18;break;case 15:_context4.next=17;return JobTemplatesAPI.readSurvey(launch===null||launch===void 0?void 0:(_launch$job_template_=launch.job_template_data)===null||_launch$job_template_===void 0?void 0:_launch$job_template_.id);case 17:_context4.t0=_context4.sent;case 18:_ref8=_context4.t0;data=_ref8.data;survey=data;case 21:defaultCredentials=[];if(!launch.ask_credential_on_launch){_context4.next=28;break;}_context4.next=25;return JobTemplatesAPI.readCredentials(values===null||values===void 0?void 0:(_values$nodeResource4=values.nodeResource)===null||_values$nodeResource4===void 0?void 0:_values$nodeResource4.id,{page_size:200});case 25:_yield$JobTemplatesAP=_context4.sent;results=_yield$JobTemplatesAP.data.results;defaultCredentials=results;case 28:return _context4.abrupt(\"return\",{launchConfig:launch,surveyConfig:survey,resourceDefaultCredentials:defaultCredentials});case 29:case\"end\":return _context4.stop();}}},_callee4);})),[values.nodeResource,values.nodeType]),{}),readLaunchConfigs=_useRequest.request,launchConfigError=_useRequest.error,_useRequest$result=_useRequest.result,launchConfig=_useRequest$result.launchConfig,surveyConfig=_useRequest$result.surveyConfig,resourceDefaultCredentials=_useRequest$result.resourceDefaultCredentials,isLoading=_useRequest.isLoading;useEffect(function(){readLaunchConfigs();},[readLaunchConfigs,values.nodeResource]);var _useDismissableError2=useDismissableError(launchConfigError),error=_useDismissableError2.error,dismissError=_useDismissableError2.dismissError;if(error){return/*#__PURE__*/_jsx(AlertModal,{isOpen:error,variant:\"error\",title:/*i18n*/i18n._(\"Error!\"),onClose:function onClose(){dismissError();},children:/*#__PURE__*/_jsx(ContentError,{error:error})});}if(!launchConfig||!surveyConfig){return/*#__PURE__*/_jsx(Wizard,{isOpen:true,steps:[{name:/*i18n*/i18n._(\"Loading\"),component:/*#__PURE__*/_jsx(ContentLoading,{})}],title:wizardTitle,footer:/*#__PURE__*/_jsx(_Fragment,{})});}return/*#__PURE__*/_jsx(NodeModalForm,_objectSpread(_objectSpread({},rest),{},{launchConfig:launchConfig,surveyConfig:surveyConfig,resourceDefaultCredentials:resourceDefaultCredentials,isLaunchLoading:isLoading,title:wizardTitle}));};var NodeModal=function NodeModal(_ref9){var _nodeToEdit$fullUnifi;var onSave=_ref9.onSave,askLinkType=_ref9.askLinkType,title=_ref9.title;var _useContext=useContext(WorkflowStateContext),nodeToEdit=_useContext.nodeToEdit;var onSaveForm=function onSaveForm(values,config){onSave(values,config);};return/*#__PURE__*/_jsx(Formik,{initialValues:{approvalName:'',approvalDescription:'',daysToKeep:30,timeoutMinutes:0,timeoutSeconds:0,convergence:'any',linkType:'success',nodeResource:(nodeToEdit===null||nodeToEdit===void 0?void 0:nodeToEdit.fullUnifiedJobTemplate)||null,nodeType:(nodeToEdit===null||nodeToEdit===void 0?void 0:(_nodeToEdit$fullUnifi=nodeToEdit.fullUnifiedJobTemplate)===null||_nodeToEdit$fullUnifi===void 0?void 0:_nodeToEdit$fullUnifi.type)||'job_template'},onSave:function onSave(){return onSaveForm;},children:function children(formik){return/*#__PURE__*/_jsx(Form,{autoComplete:\"off\",onSubmit:formik.handleSubmit,children:/*#__PURE__*/_jsx(NodeModalInner,{onSave:onSaveForm,title:title,askLinkType:askLinkType})});}});};export default NodeModal;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/Template/WorkflowJobTemplateVisualizer/Modals/NodeModals/NodeModal.js"],"names":["React","useContext","useState","useEffect","useCallback","useHistory","Formik","useFormikContext","yaml","Button","WizardContextConsumer","WizardFooter","Form","ContentError","ContentLoading","useRequest","useDismissableError","mergeExtraVars","getSurveyValues","parseVariableField","WorkflowDispatchContext","WorkflowStateContext","JobTemplatesAPI","WorkflowJobTemplatesAPI","Wizard","AlertModal","useWorkflowNodeSteps","NodeNextButton","NodeModalForm","askLinkType","onSave","title","credentialError","launchConfig","surveyConfig","isLaunchLoading","resourceDefaultCredentials","history","dispatch","values","setFieldTouched","triggerNext","setTriggerNext","clearQueryParams","parts","location","search","replace","split","otherParts","filter","param","test","pathname","join","nodeResource","promptSteps","steps","validateStep","visitStep","visitAllSteps","contentError","handleSaveNode","nodeType","approvalName","approvalDescription","timeoutMinutes","timeoutSeconds","includes","ask_variables_on_launch","survey_enabled","extraVars","surveyValues","initialExtraVars","extra_vars","spec","dump","extra_data","job_type","days","parseInt","daysToKeep","handleCancel","type","error","dismissError","nextButtonText","activeStep","verifyPromptSteps","length","id","name","CustomFooter","onNext","onBack","nextStep","prevStep","prevId","NodeModalInner","rest","wizardTitle","readLaunch","launch","data","survey","workflow_job_template_data","readSurvey","job_template_data","defaultCredentials","ask_credential_on_launch","readCredentials","page_size","results","readLaunchConfigs","request","launchConfigError","result","isLoading","component","NodeModal","nodeToEdit","onSaveForm","config","convergence","linkType","fullUnifiedJobTemplate","formik","handleSubmit"],"mappings":"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","sourcesContent":["/* eslint-disable react/jsx-no-useless-fragment */\nimport 'styled-components/macro';\nimport React, { useContext, useState, useEffect, useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { t } from '@lingui/macro';\nimport { Formik, useFormikContext } from 'formik';\nimport yaml from 'js-yaml';\nimport { bool, node, func } from 'prop-types';\nimport {\n  Button,\n  WizardContextConsumer,\n  WizardFooter,\n  Form,\n} from '@patternfly/react-core';\nimport ContentError from 'components/ContentError';\nimport ContentLoading from 'components/ContentLoading';\n\nimport useRequest, { useDismissableError } from 'hooks/useRequest';\nimport mergeExtraVars from 'util/prompt/mergeExtraVars';\nimport getSurveyValues from 'util/prompt/getSurveyValues';\nimport { parseVariableField } from 'util/yaml';\nimport {\n  WorkflowDispatchContext,\n  WorkflowStateContext,\n} from 'contexts/Workflow';\nimport { JobTemplatesAPI, WorkflowJobTemplatesAPI } from 'api';\nimport Wizard from 'components/Wizard';\nimport AlertModal from 'components/AlertModal';\nimport useWorkflowNodeSteps from './useWorkflowNodeSteps';\nimport NodeNextButton from './NodeNextButton';\n\nfunction NodeModalForm({\n  askLinkType,\n  onSave,\n  title,\n  credentialError,\n  launchConfig,\n  surveyConfig,\n  isLaunchLoading,\n  resourceDefaultCredentials,\n}) {\n  const history = useHistory();\n  const dispatch = useContext(WorkflowDispatchContext);\n  const { values, setFieldTouched } = useFormikContext();\n\n  const [triggerNext, setTriggerNext] = useState(0);\n\n  const clearQueryParams = () => {\n    const parts = history.location.search.replace(/^\\?/, '').split('&');\n    const otherParts = parts.filter((param) =>\n      /^!(job_templates\\.|projects\\.|inventory_sources\\.|workflow_job_templates\\.)/.test(\n        param\n      )\n    );\n    history.replace(`${history.location.pathname}?${otherParts.join('&')}`);\n  };\n\n  const {\n    steps: promptSteps,\n    validateStep,\n    visitStep,\n    visitAllSteps,\n    contentError,\n  } = useWorkflowNodeSteps(\n    launchConfig,\n    surveyConfig,\n    values.nodeResource,\n    askLinkType,\n    resourceDefaultCredentials\n  );\n\n  const handleSaveNode = () => {\n    clearQueryParams();\n    if (values.nodeType !== 'workflow_approval_template') {\n      delete values.approvalName;\n      delete values.approvalDescription;\n      delete values.timeoutMinutes;\n      delete values.timeoutSeconds;\n    }\n\n    if (\n      ['job_template', 'workflow_job_template'].includes(values.nodeType) &&\n      (launchConfig.ask_variables_on_launch || launchConfig.survey_enabled)\n    ) {\n      let extraVars;\n      const surveyValues = getSurveyValues(values);\n      const initialExtraVars =\n        launchConfig.ask_variables_on_launch && (values.extra_vars || '---');\n      if (surveyConfig?.spec) {\n        extraVars = yaml.dump(mergeExtraVars(initialExtraVars, surveyValues));\n      } else {\n        extraVars = yaml.dump(mergeExtraVars(initialExtraVars, {}));\n      }\n      values.extra_data = extraVars && parseVariableField(extraVars);\n      delete values.extra_vars;\n    } else if (\n      values.nodeType === 'system_job_template' &&\n      ['cleanup_activitystream', 'cleanup_jobs'].includes(\n        values?.nodeResource?.job_type\n      )\n    ) {\n      values.extra_data = {\n        days: parseInt(values?.daysToKeep, 10),\n      };\n    }\n\n    delete values.daysToKeep;\n    onSave(values, launchConfig);\n  };\n\n  const handleCancel = () => {\n    clearQueryParams();\n    dispatch({ type: 'CANCEL_NODE_MODAL' });\n  };\n\n  const { error, dismissError } = useDismissableError(\n    contentError || credentialError\n  );\n\n  function nextButtonText(activeStep) {\n    let verifyPromptSteps = false;\n    if (promptSteps.length) {\n      verifyPromptSteps =\n        activeStep.id === promptSteps[promptSteps.length - 1]?.id;\n    }\n    return verifyPromptSteps || activeStep.name === 'Preview'\n      ? t`Save`\n      : t`Next`;\n  }\n\n  const CustomFooter = (\n    <WizardFooter>\n      <WizardContextConsumer>\n        {({ activeStep, onNext, onBack }) => (\n          <>\n            <NodeNextButton\n              isDisabled={isLaunchLoading}\n              triggerNext={triggerNext}\n              activeStep={activeStep}\n              aria-label={nextButtonText(activeStep)}\n              onNext={onNext}\n              onClick={() => setTriggerNext(triggerNext + 1)}\n              buttonText={nextButtonText(activeStep)}\n            />\n            {activeStep && activeStep.id !== promptSteps[0]?.id && (\n              <Button\n                ouiaId=\"node-modal-back-button\"\n                id=\"back-node-modal\"\n                variant=\"secondary\"\n                aria-label={t`Back`}\n                onClick={onBack}\n              >\n                {t`Back`}\n              </Button>\n            )}\n            <Button\n              ouiaId=\"node-modal-cancel-button\"\n              id=\"cancel-node-modal\"\n              variant=\"link\"\n              aria-label={t`Cancel`}\n              onClick={handleCancel}\n            >\n              {t`Cancel`}\n            </Button>\n          </>\n        )}\n      </WizardContextConsumer>\n    </WizardFooter>\n  );\n\n  if (error) {\n    return (\n      <AlertModal\n        isOpen={error}\n        variant=\"error\"\n        title={t`Error!`}\n        onClose={() => {\n          dismissError();\n        }}\n      >\n        <ContentError error={error} />\n      </AlertModal>\n    );\n  }\n\n  if (error && !isLaunchLoading) {\n    return (\n      <AlertModal\n        isOpen={error}\n        variant=\"error\"\n        title={t`Error!`}\n        onClose={() => {\n          dismissError();\n        }}\n      >\n        <ContentError error={error} />\n      </AlertModal>\n    );\n  }\n  return (\n    <Wizard\n      footer={CustomFooter}\n      isOpen={!error}\n      onClose={handleCancel}\n      onSave={() => {\n        handleSaveNode();\n      }}\n      onBack={async (nextStep) => {\n        validateStep(nextStep.id);\n      }}\n      onGoToStep={async (nextStep, prevStep) => {\n        if (nextStep.id === 'preview') {\n          visitAllSteps(setFieldTouched);\n        } else {\n          visitStep(prevStep.prevId, setFieldTouched);\n          validateStep(nextStep.id);\n        }\n      }}\n      steps={promptSteps}\n      css=\"overflow: scroll\"\n      title={title}\n      onNext={async (nextStep, prevStep) => {\n        if (nextStep.id === 'preview') {\n          visitAllSteps(setFieldTouched);\n        } else {\n          visitStep(prevStep.prevId, setFieldTouched);\n          validateStep(nextStep.id);\n        }\n      }}\n    />\n  );\n}\n\nconst NodeModalInner = ({ title, ...rest }) => {\n  const { values } = useFormikContext();\n\n  const wizardTitle = values.nodeResource\n    ? `${title} | ${values.nodeResource.name}`\n    : title;\n\n  const {\n    request: readLaunchConfigs,\n    error: launchConfigError,\n    result: { launchConfig, surveyConfig, resourceDefaultCredentials },\n    isLoading,\n  } = useRequest(\n    useCallback(async () => {\n      const readLaunch = (type, id) =>\n        type === 'workflow_job_template'\n          ? WorkflowJobTemplatesAPI.readLaunch(id)\n          : JobTemplatesAPI.readLaunch(id);\n      if (\n        !values.nodeResource ||\n        !['job_template', 'workflow_job_template'].includes(values?.nodeType) ||\n        !['job_template', 'workflow_job_template'].includes(\n          values.nodeResource?.type\n        )\n      ) {\n        return {\n          launchConfig: {},\n          surveyConfig: {},\n          resourceDefaultCredentials: [],\n        };\n      }\n\n      const { data: launch } = await readLaunch(\n        values.nodeType,\n        values?.nodeResource?.id\n      );\n\n      let survey = {};\n\n      if (launch.survey_enabled) {\n        const { data } = launch?.workflow_job_template_data\n          ? await WorkflowJobTemplatesAPI.readSurvey(\n              launch?.workflow_job_template_data?.id\n            )\n          : await JobTemplatesAPI.readSurvey(launch?.job_template_data?.id);\n\n        survey = data;\n      }\n\n      let defaultCredentials = [];\n\n      if (launch.ask_credential_on_launch) {\n        const {\n          data: { results },\n        } = await JobTemplatesAPI.readCredentials(values?.nodeResource?.id, {\n          page_size: 200,\n        });\n        defaultCredentials = results;\n      }\n\n      return {\n        launchConfig: launch,\n        surveyConfig: survey,\n        resourceDefaultCredentials: defaultCredentials,\n      };\n\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [values.nodeResource, values.nodeType]),\n    {}\n  );\n\n  useEffect(() => {\n    readLaunchConfigs();\n  }, [readLaunchConfigs, values.nodeResource]);\n\n  const { error, dismissError } = useDismissableError(launchConfigError);\n\n  if (error) {\n    return (\n      <AlertModal\n        isOpen={error}\n        variant=\"error\"\n        title={t`Error!`}\n        onClose={() => {\n          dismissError();\n        }}\n      >\n        <ContentError error={error} />\n      </AlertModal>\n    );\n  }\n\n  if (!launchConfig || !surveyConfig) {\n    return (\n      <Wizard\n        isOpen\n        steps={[\n          {\n            name: t`Loading`,\n            component: <ContentLoading />,\n          },\n        ]}\n        title={wizardTitle}\n        footer={<></>}\n      />\n    );\n  }\n\n  return (\n    <NodeModalForm\n      {...rest}\n      launchConfig={launchConfig}\n      surveyConfig={surveyConfig}\n      resourceDefaultCredentials={resourceDefaultCredentials}\n      isLaunchLoading={isLoading}\n      title={wizardTitle}\n    />\n  );\n};\n\nconst NodeModal = ({ onSave, askLinkType, title }) => {\n  const { nodeToEdit } = useContext(WorkflowStateContext);\n  const onSaveForm = (values, config) => {\n    onSave(values, config);\n  };\n\n  return (\n    <Formik\n      initialValues={{\n        approvalName: '',\n        approvalDescription: '',\n        daysToKeep: 30,\n        timeoutMinutes: 0,\n        timeoutSeconds: 0,\n        convergence: 'any',\n        linkType: 'success',\n        nodeResource: nodeToEdit?.fullUnifiedJobTemplate || null,\n        nodeType: nodeToEdit?.fullUnifiedJobTemplate?.type || 'job_template',\n      }}\n      onSave={() => onSaveForm}\n    >\n      {(formik) => (\n        <Form autoComplete=\"off\" onSubmit={formik.handleSubmit}>\n          <NodeModalInner\n            onSave={onSaveForm}\n            title={title}\n            askLinkType={askLinkType}\n          />\n        </Form>\n      )}\n    </Formik>\n  );\n};\n\nNodeModal.propTypes = {\n  askLinkType: bool.isRequired,\n  onSave: func.isRequired,\n  title: node.isRequired,\n};\n\nexport default NodeModal;\n"]},"metadata":{},"sourceType":"module"}