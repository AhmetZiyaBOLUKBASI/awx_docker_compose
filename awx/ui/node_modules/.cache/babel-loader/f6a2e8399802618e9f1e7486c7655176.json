{"ast":null,"code":"import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectWithoutProperties from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _excluded=[\"organization\",\"onCancel\",\"onSubmit\",\"submitError\",\"defaultGalaxyCredential\"];import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{Trans}from\"@lingui/react\";import{i18n}from\"@lingui/core\";import React,{useCallback,useEffect,useState}from'react';import{Formik,useField,useFormikContext}from'formik';import{Form}from'@patternfly/react-core';import{OrganizationsAPI}from'api';import{useConfig}from'contexts/Config';import ContentError from'components/ContentError';import ContentLoading from'components/ContentLoading';import FormField,{FormSubmitError}from'components/FormField';import FormActionGroup from'components/FormActionGroup/FormActionGroup';import{InstanceGroupsLookup,ExecutionEnvironmentLookup}from'components/Lookup';import{required,minMaxValue}from'util/validators';import{FormColumnLayout}from'components/FormLayout';import CredentialLookup from'components/Lookup/CredentialLookup';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function OrganizationFormFields(_ref){var instanceGroups=_ref.instanceGroups,setInstanceGroups=_ref.setInstanceGroups,organizationId=_ref.organizationId;var _useConfig=useConfig(),_useConfig$license_in=_useConfig.license_info,license_info=_useConfig$license_in===void 0?{}:_useConfig$license_in,_useConfig$me=_useConfig.me,me=_useConfig$me===void 0?{}:_useConfig$me;var _useFormikContext=useFormikContext(),setFieldValue=_useFormikContext.setFieldValue;var _useField=useField('galaxy_credentials'),_useField2=_slicedToArray(_useField,3),galaxyCredentialsField=_useField2[0],galaxyCredentialsMeta=_useField2[1],galaxyCredentialsHelpers=_useField2[2];var _useField3=useField('default_environment'),_useField4=_slicedToArray(_useField3,3),executionEnvironmentField=_useField4[0],executionEnvironmentMeta=_useField4[1],executionEnvironmentHelpers=_useField4[2];var handleCredentialUpdate=useCallback(function(value){setFieldValue('galaxy_credentials',value);},[setFieldValue]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FormField,{id:\"org-name\",name:\"name\",type:\"text\",label:/*i18n*/i18n._(\"Name\"),validate:required(null),isRequired:true}),/*#__PURE__*/_jsx(FormField,{id:\"org-description\",name:\"description\",type:\"text\",label:/*i18n*/i18n._(\"Description\")}),(license_info===null||license_info===void 0?void 0:license_info.license_type)!=='open'&&/*#__PURE__*/_jsx(FormField,{id:\"org-max_hosts\",name:\"max_hosts\",type:\"number\",label:/*i18n*/i18n._(\"Max Hosts\"),tooltip:/*i18n*/i18n._(\"The maximum number of hosts allowed to be managed by this organization.\\nValue defaults to 0 which means no limit. Refer to the Ansible\\ndocumentation for more details.\"),validate:minMaxValue(0,Number.MAX_SAFE_INTEGER),me:me,isDisabled:!me.is_superuser}),/*#__PURE__*/_jsx(InstanceGroupsLookup,{value:instanceGroups,onChange:setInstanceGroups,tooltip:/*i18n*/i18n._(\"Select the Instance Groups for this Organization to run on.\")}),/*#__PURE__*/_jsx(ExecutionEnvironmentLookup,{helperTextInvalid:executionEnvironmentMeta.error,isValid:!executionEnvironmentMeta.touched||!executionEnvironmentMeta.error,onBlur:function onBlur(){return executionEnvironmentHelpers.setTouched();},value:executionEnvironmentField.value,onChange:function onChange(value){return executionEnvironmentHelpers.setValue(value);},popoverContent:/*i18n*/i18n._(\"The execution environment that will be used for jobs inside of this organization. This will be used a fallback when an execution environment has not been explicitly assigned at the project, job template or workflow level.\"),globallyAvailable:true,organizationId:organizationId,isDefaultEnvironment:true,fieldName:\"default_environment\"}),/*#__PURE__*/_jsx(CredentialLookup,{credentialTypeNamespace:\"galaxy_api_token\",label:/*i18n*/i18n._(\"Galaxy Credentials\"),helperTextInvalid:galaxyCredentialsMeta.error,isValid:!galaxyCredentialsMeta.touched||!galaxyCredentialsMeta.error,onBlur:function onBlur(){return galaxyCredentialsHelpers.setTouched();},onChange:handleCredentialUpdate,value:galaxyCredentialsField.value,multiple:true,isSelectedDraggable:true,fieldName:\"galaxy_credentials\",modalDescription:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"b\",{children:/*#__PURE__*/_jsx(Trans,{id:\"Selected\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Trans,{id:\"Note: The order of these credentials sets precedence for the sync and lookup of the content. Select more than one to enable drag.\"})]})})]});}function OrganizationForm(_ref2){var _organization$summary;var organization=_ref2.organization,onCancel=_ref2.onCancel,onSubmit=_ref2.onSubmit,submitError=_ref2.submitError,defaultGalaxyCredential=_ref2.defaultGalaxyCredential,rest=_objectWithoutProperties(_ref2,_excluded);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),contentError=_useState2[0],setContentError=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),hasContentLoading=_useState4[0],setHasContentLoading=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),initialInstanceGroups=_useState6[0],setInitialInstanceGroups=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),instanceGroups=_useState8[0],setInstanceGroups=_useState8[1];var handleCancel=function handleCancel(){onCancel();};var handleSubmit=function handleSubmit(values){if(typeof values.max_hosts!=='number'||values.max_hosts==='undefined'){values.max_hosts=0;}onSubmit(values,instanceGroups,initialInstanceGroups);};useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var id,_yield$OrganizationsA,_yield$OrganizationsA2,results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:id=organization.id;if(id){_context.next=4;break;}setHasContentLoading(false);return _context.abrupt(\"return\");case 4:setContentError(null);setHasContentLoading(true);_context.prev=6;_context.next=9;return OrganizationsAPI.readInstanceGroups(id);case 9:_yield$OrganizationsA=_context.sent;_yield$OrganizationsA2=_yield$OrganizationsA.data.results;results=_yield$OrganizationsA2===void 0?[]:_yield$OrganizationsA2;setInitialInstanceGroups(results);setInstanceGroups(results);_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](6);setContentError(_context.t0);case 19:_context.prev=19;setHasContentLoading(false);return _context.finish(19);case 22:case\"end\":return _context.stop();}}},_callee,null,[[6,16,19,22]]);}))();},[organization]);if(contentError){return/*#__PURE__*/_jsx(ContentError,{error:contentError});}if(hasContentLoading){return/*#__PURE__*/_jsx(ContentLoading,{});}return/*#__PURE__*/_jsx(Formik,{initialValues:{name:organization.name,description:organization.description,max_hosts:organization.max_hosts||'0',galaxy_credentials:organization.galaxy_credentials||(defaultGalaxyCredential?[defaultGalaxyCredential]:[]),default_environment:((_organization$summary=organization.summary_fields)===null||_organization$summary===void 0?void 0:_organization$summary.default_environment)||null},onSubmit:handleSubmit,children:function children(formik){return/*#__PURE__*/_jsx(Form,{autoComplete:\"off\",onSubmit:formik.handleSubmit,children:/*#__PURE__*/_jsxs(FormColumnLayout,{children:[/*#__PURE__*/_jsx(OrganizationFormFields,_objectSpread({instanceGroups:instanceGroups,setInstanceGroups:setInstanceGroups,organizationId:(organization===null||organization===void 0?void 0:organization.id)||null},rest)),/*#__PURE__*/_jsx(FormSubmitError,{error:submitError}),/*#__PURE__*/_jsx(FormActionGroup,{onCancel:handleCancel,onSubmit:formik.handleSubmit})]})});}});}OrganizationForm.defaultProps={defaultGalaxyCredential:null,organization:{id:'',name:'',description:'',max_hosts:'0',default_environment:''},submitError:null};export{OrganizationForm as _OrganizationForm};export default OrganizationForm;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/Organization/shared/OrganizationForm.js"],"names":["React","useCallback","useEffect","useState","Formik","useField","useFormikContext","Form","OrganizationsAPI","useConfig","ContentError","ContentLoading","FormField","FormSubmitError","FormActionGroup","InstanceGroupsLookup","ExecutionEnvironmentLookup","required","minMaxValue","FormColumnLayout","CredentialLookup","OrganizationFormFields","instanceGroups","setInstanceGroups","organizationId","license_info","me","setFieldValue","galaxyCredentialsField","galaxyCredentialsMeta","galaxyCredentialsHelpers","executionEnvironmentField","executionEnvironmentMeta","executionEnvironmentHelpers","handleCredentialUpdate","value","license_type","Number","MAX_SAFE_INTEGER","is_superuser","error","touched","setTouched","setValue","OrganizationForm","organization","onCancel","onSubmit","submitError","defaultGalaxyCredential","rest","contentError","setContentError","hasContentLoading","setHasContentLoading","initialInstanceGroups","setInitialInstanceGroups","handleCancel","handleSubmit","values","max_hosts","id","readInstanceGroups","data","results","name","description","galaxy_credentials","default_environment","summary_fields","formik","defaultProps","_OrganizationForm"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Formik, useField, useFormikContext } from 'formik';\n\nimport { t, Trans } from '@lingui/macro';\nimport { Form } from '@patternfly/react-core';\n\nimport { OrganizationsAPI } from 'api';\nimport { useConfig } from 'contexts/Config';\nimport ContentError from 'components/ContentError';\nimport ContentLoading from 'components/ContentLoading';\nimport FormField, { FormSubmitError } from 'components/FormField';\nimport FormActionGroup from 'components/FormActionGroup/FormActionGroup';\nimport {\n  InstanceGroupsLookup,\n  ExecutionEnvironmentLookup,\n} from 'components/Lookup';\nimport { required, minMaxValue } from 'util/validators';\nimport { FormColumnLayout } from 'components/FormLayout';\nimport CredentialLookup from 'components/Lookup/CredentialLookup';\n\nfunction OrganizationFormFields({\n  instanceGroups,\n  setInstanceGroups,\n  organizationId,\n}) {\n  const { license_info = {}, me = {} } = useConfig();\n\n  const { setFieldValue } = useFormikContext();\n\n  const [\n    galaxyCredentialsField,\n    galaxyCredentialsMeta,\n    galaxyCredentialsHelpers,\n  ] = useField('galaxy_credentials');\n\n  const [\n    executionEnvironmentField,\n    executionEnvironmentMeta,\n    executionEnvironmentHelpers,\n  ] = useField('default_environment');\n\n  const handleCredentialUpdate = useCallback(\n    (value) => {\n      setFieldValue('galaxy_credentials', value);\n    },\n    [setFieldValue]\n  );\n\n  return (\n    <>\n      <FormField\n        id=\"org-name\"\n        name=\"name\"\n        type=\"text\"\n        label={t`Name`}\n        validate={required(null)}\n        isRequired\n      />\n      <FormField\n        id=\"org-description\"\n        name=\"description\"\n        type=\"text\"\n        label={t`Description`}\n      />\n      {license_info?.license_type !== 'open' && (\n        <FormField\n          id=\"org-max_hosts\"\n          name=\"max_hosts\"\n          type=\"number\"\n          label={t`Max Hosts`}\n          tooltip={t`The maximum number of hosts allowed to be managed by this organization.\n            Value defaults to 0 which means no limit. Refer to the Ansible\n            documentation for more details.`}\n          validate={minMaxValue(0, Number.MAX_SAFE_INTEGER)}\n          me={me}\n          isDisabled={!me.is_superuser}\n        />\n      )}\n      <InstanceGroupsLookup\n        value={instanceGroups}\n        onChange={setInstanceGroups}\n        tooltip={t`Select the Instance Groups for this Organization to run on.`}\n      />\n      <ExecutionEnvironmentLookup\n        helperTextInvalid={executionEnvironmentMeta.error}\n        isValid={\n          !executionEnvironmentMeta.touched || !executionEnvironmentMeta.error\n        }\n        onBlur={() => executionEnvironmentHelpers.setTouched()}\n        value={executionEnvironmentField.value}\n        onChange={(value) => executionEnvironmentHelpers.setValue(value)}\n        popoverContent={t`The execution environment that will be used for jobs inside of this organization. This will be used a fallback when an execution environment has not been explicitly assigned at the project, job template or workflow level.`}\n        globallyAvailable\n        organizationId={organizationId}\n        isDefaultEnvironment\n        fieldName=\"default_environment\"\n      />\n      <CredentialLookup\n        credentialTypeNamespace=\"galaxy_api_token\"\n        label={t`Galaxy Credentials`}\n        helperTextInvalid={galaxyCredentialsMeta.error}\n        isValid={!galaxyCredentialsMeta.touched || !galaxyCredentialsMeta.error}\n        onBlur={() => galaxyCredentialsHelpers.setTouched()}\n        onChange={handleCredentialUpdate}\n        value={galaxyCredentialsField.value}\n        multiple\n        isSelectedDraggable\n        fieldName=\"galaxy_credentials\"\n        modalDescription={\n          <>\n            <b>\n              <Trans>Selected</Trans>\n            </b>\n            <br />\n            <Trans>\n              Note: The order of these credentials sets precedence for the sync\n              and lookup of the content. Select more than one to enable drag.\n            </Trans>\n          </>\n        }\n      />\n    </>\n  );\n}\n\nfunction OrganizationForm({\n  organization,\n  onCancel,\n  onSubmit,\n  submitError,\n  defaultGalaxyCredential,\n  ...rest\n}) {\n  const [contentError, setContentError] = useState(null);\n  const [hasContentLoading, setHasContentLoading] = useState(true);\n  const [initialInstanceGroups, setInitialInstanceGroups] = useState([]);\n  const [instanceGroups, setInstanceGroups] = useState([]);\n\n  const handleCancel = () => {\n    onCancel();\n  };\n\n  const handleSubmit = (values) => {\n    if (\n      typeof values.max_hosts !== 'number' ||\n      values.max_hosts === 'undefined'\n    ) {\n      values.max_hosts = 0;\n    }\n    onSubmit(values, instanceGroups, initialInstanceGroups);\n  };\n\n  useEffect(() => {\n    (async () => {\n      const { id } = organization;\n      if (!id) {\n        setHasContentLoading(false);\n        return;\n      }\n      setContentError(null);\n      setHasContentLoading(true);\n      try {\n        const {\n          data: { results = [] },\n        } = await OrganizationsAPI.readInstanceGroups(id);\n        setInitialInstanceGroups(results);\n        setInstanceGroups(results);\n      } catch (error) {\n        setContentError(error);\n      } finally {\n        setHasContentLoading(false);\n      }\n    })();\n  }, [organization]);\n\n  if (contentError) {\n    return <ContentError error={contentError} />;\n  }\n\n  if (hasContentLoading) {\n    return <ContentLoading />;\n  }\n\n  return (\n    <Formik\n      initialValues={{\n        name: organization.name,\n        description: organization.description,\n        max_hosts: organization.max_hosts || '0',\n        galaxy_credentials:\n          organization.galaxy_credentials ||\n          (defaultGalaxyCredential ? [defaultGalaxyCredential] : []),\n        default_environment:\n          organization.summary_fields?.default_environment || null,\n      }}\n      onSubmit={handleSubmit}\n    >\n      {(formik) => (\n        <Form autoComplete=\"off\" onSubmit={formik.handleSubmit}>\n          <FormColumnLayout>\n            <OrganizationFormFields\n              instanceGroups={instanceGroups}\n              setInstanceGroups={setInstanceGroups}\n              organizationId={organization?.id || null}\n              {...rest}\n            />\n            <FormSubmitError error={submitError} />\n            <FormActionGroup\n              onCancel={handleCancel}\n              onSubmit={formik.handleSubmit}\n            />\n          </FormColumnLayout>\n        </Form>\n      )}\n    </Formik>\n  );\n}\n\nOrganizationForm.propTypes = {\n  defaultGalaxyCredential: PropTypes.shape(),\n  organization: PropTypes.shape(),\n  onSubmit: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired,\n  submitError: PropTypes.shape(),\n};\n\nOrganizationForm.defaultProps = {\n  defaultGalaxyCredential: null,\n  organization: {\n    id: '',\n    name: '',\n    description: '',\n    max_hosts: '0',\n    default_environment: '',\n  },\n  submitError: null,\n};\n\nexport { OrganizationForm as _OrganizationForm };\nexport default OrganizationForm;\n"]},"metadata":{},"sourceType":"module"}