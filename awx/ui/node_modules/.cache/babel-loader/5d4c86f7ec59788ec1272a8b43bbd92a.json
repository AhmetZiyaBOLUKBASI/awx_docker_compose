{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{i18n}from\"@lingui/core\";import React,{useCallback}from'react';import{useField,useFormikContext}from'formik';import getDocsBaseUrl from'util/getDocsBaseUrl';import{useConfig}from'contexts/Config';import CredentialLookup from'components/Lookup/CredentialLookup';import{required}from'util/validators';import{OptionsField,VerbosityField,EnabledVarField,EnabledValueField,HostFilterField,SourceVarsField}from'./SharedFields';import helpText from'../Inventory.helptext';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ControllerSubForm=function ControllerSubForm(_ref){var autoPopulateCredential=_ref.autoPopulateCredential;var _useFormikContext=useFormikContext(),setFieldValue=_useFormikContext.setFieldValue,setFieldTouched=_useFormikContext.setFieldTouched;var _useField=useField('credential'),_useField2=_slicedToArray(_useField,3),credentialField=_useField2[0],credentialMeta=_useField2[1],credentialHelpers=_useField2[2];var config=useConfig();var handleCredentialUpdate=useCallback(function(value){setFieldValue('credential',value);setFieldTouched('credential',true,false);},[setFieldValue,setFieldTouched]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CredentialLookup,{credentialTypeNamespace:\"controller\",label:/*i18n*/i18n._(\"Credential\"),helperTextInvalid:credentialMeta.error,isValid:!credentialMeta.touched||!credentialMeta.error,onBlur:function onBlur(){return credentialHelpers.setTouched();},onChange:handleCredentialUpdate,value:credentialField.value,required:true,autoPopulate:autoPopulateCredential,validate:required(/*i18n*/i18n._(\"Select a value for this field\"))}),/*#__PURE__*/_jsx(VerbosityField,{}),/*#__PURE__*/_jsx(HostFilterField,{}),/*#__PURE__*/_jsx(EnabledVarField,{}),/*#__PURE__*/_jsx(EnabledValueField,{}),/*#__PURE__*/_jsx(OptionsField,{}),/*#__PURE__*/_jsx(SourceVarsField,{popoverContent:helpText.sourceVars(getDocsBaseUrl(config),'controller')})]});};export default ControllerSubForm;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/Inventory/shared/InventorySourceSubForms/ControllerSubForm.js"],"names":["React","useCallback","useField","useFormikContext","getDocsBaseUrl","useConfig","CredentialLookup","required","OptionsField","VerbosityField","EnabledVarField","EnabledValueField","HostFilterField","SourceVarsField","helpText","ControllerSubForm","autoPopulateCredential","setFieldValue","setFieldTouched","credentialField","credentialMeta","credentialHelpers","config","handleCredentialUpdate","value","error","touched","setTouched","sourceVars"],"mappings":"sIAAA,MAAOA,CAAAA,KAAP,EAAgBC,WAAhB,KAAmC,OAAnC,CACA,OAASC,QAAT,CAAmBC,gBAAnB,KAA2C,QAA3C,CAGA,MAAOC,CAAAA,cAAP,KAA2B,qBAA3B,CACA,OAASC,SAAT,KAA0B,iBAA1B,CACA,MAAOC,CAAAA,gBAAP,KAA6B,oCAA7B,CACA,OAASC,QAAT,KAAyB,iBAAzB,CACA,OACEC,YADF,CAEEC,cAFF,CAGEC,eAHF,CAIEC,iBAJF,CAKEC,eALF,CAMEC,eANF,KAOO,gBAPP,CAQA,MAAOC,CAAAA,QAAP,KAAqB,uBAArB,C,6IAEA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,MAAgC,IAA7BC,CAAAA,sBAA6B,MAA7BA,sBAA6B,CACxD,sBAA2Cb,gBAAgB,EAA3D,CAAQc,aAAR,mBAAQA,aAAR,CAAuBC,eAAvB,mBAAuBA,eAAvB,CACA,cACEhB,QAAQ,CAAC,YAAD,CADV,wCAAOiB,eAAP,eAAwBC,cAAxB,eAAwCC,iBAAxC,eAEA,GAAMC,CAAAA,MAAM,CAAGjB,SAAS,EAAxB,CACA,GAAMkB,CAAAA,sBAAsB,CAAGtB,WAAW,CACxC,SAACuB,KAAD,CAAW,CACTP,aAAa,CAAC,YAAD,CAAeO,KAAf,CAAb,CACAN,eAAe,CAAC,YAAD,CAAe,IAAf,CAAqB,KAArB,CAAf,CACD,CAJuC,CAKxC,CAACD,aAAD,CAAgBC,eAAhB,CALwC,CAA1C,CAQA,mBACE,wCACE,KAAC,gBAAD,EACE,uBAAuB,CAAC,YAD1B,CAEE,KAAK,SAAE,oBAFT,CAGE,iBAAiB,CAAEE,cAAc,CAACK,KAHpC,CAIE,OAAO,CAAE,CAACL,cAAc,CAACM,OAAhB,EAA2B,CAACN,cAAc,CAACK,KAJtD,CAKE,MAAM,CAAE,wBAAMJ,CAAAA,iBAAiB,CAACM,UAAlB,EAAN,EALV,CAME,QAAQ,CAAEJ,sBANZ,CAOE,KAAK,CAAEJ,eAAe,CAACK,KAPzB,CAQE,QAAQ,KARV,CASE,YAAY,CAAER,sBAThB,CAUE,QAAQ,CAAET,QAAQ,SAAC,uCAAD,CAVpB,EADF,cAaE,KAAC,cAAD,IAbF,cAcE,KAAC,eAAD,IAdF,cAeE,KAAC,eAAD,IAfF,cAgBE,KAAC,iBAAD,IAhBF,cAiBE,KAAC,YAAD,IAjBF,cAkBE,KAAC,eAAD,EACE,cAAc,CAAEO,QAAQ,CAACc,UAAT,CACdxB,cAAc,CAACkB,MAAD,CADA,CAEd,YAFc,CADlB,EAlBF,GADF,CA2BD,CAxCD,CA0CA,cAAeP,CAAAA,iBAAf","sourcesContent":["import React, { useCallback } from 'react';\nimport { useField, useFormikContext } from 'formik';\n\nimport { t } from '@lingui/macro';\nimport getDocsBaseUrl from 'util/getDocsBaseUrl';\nimport { useConfig } from 'contexts/Config';\nimport CredentialLookup from 'components/Lookup/CredentialLookup';\nimport { required } from 'util/validators';\nimport {\n  OptionsField,\n  VerbosityField,\n  EnabledVarField,\n  EnabledValueField,\n  HostFilterField,\n  SourceVarsField,\n} from './SharedFields';\nimport helpText from '../Inventory.helptext';\n\nconst ControllerSubForm = ({ autoPopulateCredential }) => {\n  const { setFieldValue, setFieldTouched } = useFormikContext();\n  const [credentialField, credentialMeta, credentialHelpers] =\n    useField('credential');\n  const config = useConfig();\n  const handleCredentialUpdate = useCallback(\n    (value) => {\n      setFieldValue('credential', value);\n      setFieldTouched('credential', true, false);\n    },\n    [setFieldValue, setFieldTouched]\n  );\n\n  return (\n    <>\n      <CredentialLookup\n        credentialTypeNamespace=\"controller\"\n        label={t`Credential`}\n        helperTextInvalid={credentialMeta.error}\n        isValid={!credentialMeta.touched || !credentialMeta.error}\n        onBlur={() => credentialHelpers.setTouched()}\n        onChange={handleCredentialUpdate}\n        value={credentialField.value}\n        required\n        autoPopulate={autoPopulateCredential}\n        validate={required(t`Select a value for this field`)}\n      />\n      <VerbosityField />\n      <HostFilterField />\n      <EnabledVarField />\n      <EnabledValueField />\n      <OptionsField />\n      <SourceVarsField\n        popoverContent={helpText.sourceVars(\n          getDocsBaseUrl(config),\n          'controller'\n        )}\n      />\n    </>\n  );\n};\n\nexport default ControllerSubForm;\n"]},"metadata":{},"sourceType":"module"}