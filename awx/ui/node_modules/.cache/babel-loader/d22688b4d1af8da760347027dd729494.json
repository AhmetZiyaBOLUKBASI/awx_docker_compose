{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{i18n}from\"@lingui/core\";import React,{useState}from'react';import{Button,Modal}from'@patternfly/react-core';import{SearchPlusIcon}from'@patternfly/react-icons';import{formatDateString}from'util/dates';import{DetailList,Detail}from'components/DetailList';import{VariablesDetail}from'components/CodeEditor';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function ActivityStreamDetailButton(_ref){var _streamItem$summary_f,_setting$,_setting$2;var streamItem=_ref.streamItem,user=_ref.user,description=_ref.description;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1];var setting=streamItem===null||streamItem===void 0?void 0:(_streamItem$summary_f=streamItem.summary_fields)===null||_streamItem$summary_f===void 0?void 0:_streamItem$summary_f.setting;var changeRows=Math.max(Object.keys((streamItem===null||streamItem===void 0?void 0:streamItem.changes)||[]).length+2,6);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{ouiaId:\"\".concat(streamItem.id,\"-view-details-button\"),\"aria-label\":/*i18n*/i18n._(\"View event details\"),variant:\"plain\",component:\"button\",onClick:function onClick(){return setIsOpen(true);},children:/*#__PURE__*/_jsx(SearchPlusIcon,{})}),/*#__PURE__*/_jsx(Modal,{variant:\"large\",isOpen:isOpen,title:/*i18n*/i18n._(\"Event detail\"),\"aria-label\":/*i18n*/i18n._(\"Event detail modal\"),onClose:function onClose(){return setIsOpen(false);},children:/*#__PURE__*/_jsxs(DetailList,{gutter:\"sm\",children:[/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Time\"),value:formatDateString(streamItem.timestamp)}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Initiated by\"),value:user}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Setting category\"),value:setting&&((_setting$=setting[0])===null||_setting$===void 0?void 0:_setting$.category)}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Setting name\"),value:setting&&((_setting$2=setting[0])===null||_setting$2===void 0?void 0:_setting$2.name)}),/*#__PURE__*/_jsx(Detail,{fullWidth:true,label:/*i18n*/i18n._(\"Action\"),value:description}),(streamItem===null||streamItem===void 0?void 0:streamItem.changes)&&/*#__PURE__*/_jsx(VariablesDetail,{label:/*i18n*/i18n._(\"Changes\"),rows:changeRows,value:streamItem!==null&&streamItem!==void 0&&streamItem.changes?JSON.stringify(streamItem.changes):'',name:\"changes\",dataCy:\"activity-stream-detail-changes\"})]})})]});}export default ActivityStreamDetailButton;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/ActivityStream/ActivityStreamDetailButton.js"],"names":["React","useState","Button","Modal","SearchPlusIcon","formatDateString","DetailList","Detail","VariablesDetail","ActivityStreamDetailButton","streamItem","user","description","isOpen","setIsOpen","setting","summary_fields","changeRows","Math","max","Object","keys","changes","length","id","timestamp","category","name","JSON","stringify"],"mappings":"sIAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CAGA,OAASC,MAAT,CAAiBC,KAAjB,KAA8B,wBAA9B,CACA,OAASC,cAAT,KAA+B,yBAA/B,CAEA,OAASC,gBAAT,KAAiC,YAAjC,CAEA,OAASC,UAAT,CAAqBC,MAArB,KAAmC,uBAAnC,CACA,OAASC,eAAT,KAAgC,uBAAhC,C,6IAEA,QAASC,CAAAA,0BAAT,MAAuE,mDAAjCC,CAAAA,UAAiC,MAAjCA,UAAiC,CAArBC,IAAqB,MAArBA,IAAqB,CAAfC,WAAe,MAAfA,WAAe,CACrE,cAA4BX,QAAQ,CAAC,KAAD,CAApC,wCAAOY,MAAP,eAAeC,SAAf,eAEA,GAAMC,CAAAA,OAAO,CAAGL,UAAH,SAAGA,UAAH,wCAAGA,UAAU,CAAEM,cAAf,gDAAG,sBAA4BD,OAA5C,CACA,GAAME,CAAAA,UAAU,CAAGC,IAAI,CAACC,GAAL,CACjBC,MAAM,CAACC,IAAP,CAAY,CAAAX,UAAU,OAAV,EAAAA,UAAU,SAAV,QAAAA,UAAU,CAAEY,OAAZ,GAAuB,EAAnC,EAAuCC,MAAvC,CAAgD,CAD/B,CAEjB,CAFiB,CAAnB,CAKA,mBACE,wCACE,KAAC,MAAD,EACE,MAAM,WAAKb,UAAU,CAACc,EAAhB,wBADR,CAEE,qBAAY,4BAFd,CAGE,OAAO,CAAC,OAHV,CAIE,SAAS,CAAC,QAJZ,CAKE,OAAO,CAAE,yBAAMV,CAAAA,SAAS,CAAC,IAAD,CAAf,EALX,uBAOE,KAAC,cAAD,IAPF,EADF,cAUE,KAAC,KAAD,EACE,OAAO,CAAC,OADV,CAEE,MAAM,CAAED,MAFV,CAGE,KAAK,SAAE,sBAHT,CAIE,qBAAY,4BAJd,CAKE,OAAO,CAAE,yBAAMC,CAAAA,SAAS,CAAC,KAAD,CAAf,EALX,uBAOE,MAAC,UAAD,EAAY,MAAM,CAAC,IAAnB,wBACE,KAAC,MAAD,EACE,KAAK,SAAE,cADT,CAEE,KAAK,CAAET,gBAAgB,CAACK,UAAU,CAACe,SAAZ,CAFzB,EADF,cAKE,KAAC,MAAD,EAAQ,KAAK,SAAE,sBAAf,CAAgC,KAAK,CAAEd,IAAvC,EALF,cAME,KAAC,MAAD,EACE,KAAK,SAAE,0BADT,CAEE,KAAK,CAAEI,OAAO,cAAIA,OAAO,CAAC,CAAD,CAAX,oCAAI,UAAYW,QAAhB,CAFhB,EANF,cAUE,KAAC,MAAD,EAAQ,KAAK,SAAE,sBAAf,CAAgC,KAAK,CAAEX,OAAO,eAAIA,OAAO,CAAC,CAAD,CAAX,qCAAI,WAAYY,IAAhB,CAA9C,EAVF,cAWE,KAAC,MAAD,EAAQ,SAAS,KAAjB,CAAkB,KAAK,SAAE,gBAAzB,CAAoC,KAAK,CAAEf,WAA3C,EAXF,CAYG,CAAAF,UAAU,OAAV,EAAAA,UAAU,SAAV,QAAAA,UAAU,CAAEY,OAAZ,gBACC,KAAC,eAAD,EACE,KAAK,SAAE,iBADT,CAEE,IAAI,CAAEL,UAFR,CAGE,KAAK,CACHP,UAAU,OAAV,EAAAA,UAAU,SAAV,EAAAA,UAAU,CAAEY,OAAZ,CAAsBM,IAAI,CAACC,SAAL,CAAenB,UAAU,CAACY,OAA1B,CAAtB,CAA2D,EAJ/D,CAME,IAAI,CAAC,SANP,CAOE,MAAM,CAAC,gCAPT,EAbJ,GAPF,EAVF,GADF,CA6CD,CAED,cAAeb,CAAAA,0BAAf","sourcesContent":["import React, { useState } from 'react';\n\nimport { t } from '@lingui/macro';\nimport { Button, Modal } from '@patternfly/react-core';\nimport { SearchPlusIcon } from '@patternfly/react-icons';\n\nimport { formatDateString } from 'util/dates';\n\nimport { DetailList, Detail } from 'components/DetailList';\nimport { VariablesDetail } from 'components/CodeEditor';\n\nfunction ActivityStreamDetailButton({ streamItem, user, description }) {\n  const [isOpen, setIsOpen] = useState(false);\n\n  const setting = streamItem?.summary_fields?.setting;\n  const changeRows = Math.max(\n    Object.keys(streamItem?.changes || []).length + 2,\n    6\n  );\n\n  return (\n    <>\n      <Button\n        ouiaId={`${streamItem.id}-view-details-button`}\n        aria-label={t`View event details`}\n        variant=\"plain\"\n        component=\"button\"\n        onClick={() => setIsOpen(true)}\n      >\n        <SearchPlusIcon />\n      </Button>\n      <Modal\n        variant=\"large\"\n        isOpen={isOpen}\n        title={t`Event detail`}\n        aria-label={t`Event detail modal`}\n        onClose={() => setIsOpen(false)}\n      >\n        <DetailList gutter=\"sm\">\n          <Detail\n            label={t`Time`}\n            value={formatDateString(streamItem.timestamp)}\n          />\n          <Detail label={t`Initiated by`} value={user} />\n          <Detail\n            label={t`Setting category`}\n            value={setting && setting[0]?.category}\n          />\n          <Detail label={t`Setting name`} value={setting && setting[0]?.name} />\n          <Detail fullWidth label={t`Action`} value={description} />\n          {streamItem?.changes && (\n            <VariablesDetail\n              label={t`Changes`}\n              rows={changeRows}\n              value={\n                streamItem?.changes ? JSON.stringify(streamItem.changes) : ''\n              }\n              name=\"changes\"\n              dataCy=\"activity-stream-detail-changes\"\n            />\n          )}\n        </DetailList>\n      </Modal>\n    </>\n  );\n}\n\nexport default ActivityStreamDetailButton;\n"]},"metadata":{},"sourceType":"module"}