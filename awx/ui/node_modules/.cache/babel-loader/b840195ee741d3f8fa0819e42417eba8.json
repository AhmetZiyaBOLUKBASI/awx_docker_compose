{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useEffect,useCallback}from'react';import{Link,Redirect,Route,Switch,useLocation,useParams}from'react-router-dom';import{CaretLeftIcon}from'@patternfly/react-icons';import{Card,PageSection}from'@patternfly/react-core';import RoutedTabs from'components/RoutedTabs';import ContentError from'components/ContentError';import{TokensAPI}from'api';import useRequest from'hooks/useRequest';import UserTokenDetail from'../UserTokenDetail';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UserToken(_ref){var setBreadcrumb=_ref.setBreadcrumb,user=_ref.user;var location=useLocation();var _useParams=useParams(),id=_useParams.id,tokenId=_useParams.tokenId;var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return TokensAPI.readDetail(tokenId);case 2:response=_context.sent;setBreadcrumb(user,response.data);return _context.abrupt(\"return\",{token:response.data});case 5:case\"end\":return _context.stop();}}},_callee);})),[setBreadcrumb,user,tokenId]),{token:null}),isLoading=_useRequest.isLoading,error=_useRequest.error,fetchToken=_useRequest.request,token=_useRequest.result.token;useEffect(function(){fetchToken();},[fetchToken]);var tabsArray=[{name:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CaretLeftIcon,{}),/*i18n*/i18n._(\"Back to Tokens\")]}),link:\"/users/\".concat(id,\"/tokens\"),id:99},{name:/*i18n*/i18n._(\"Details\"),link:\"/users/\".concat(id,\"/tokens/\").concat(tokenId,\"/details\"),id:0}];var showCardHeader=true;if(location.pathname.endsWith('edit')){showCardHeader=false;}if(!isLoading&&error){return/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(ContentError,{error:error,children:error.response.status===404&&/*#__PURE__*/_jsxs(\"span\",{children:[/*i18n*/i18n._(\"Token not found.\"),' ',/*#__PURE__*/_jsx(Link,{to:\"/users/:id/tokens\",children:/*i18n*/i18n._(\"View all tokens.\")})]})})})});}return/*#__PURE__*/_jsxs(_Fragment,{children:[showCardHeader&&/*#__PURE__*/_jsx(RoutedTabs,{tabsArray:tabsArray}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Redirect,{from:\"/users/:id/tokens/:tokenId\",to:\"/users/:id/tokens/:tokenId/details\",exact:true}),token&&/*#__PURE__*/_jsx(Route,{path:\"/users/:id/tokens/:tokenId/details\",children:/*#__PURE__*/_jsx(UserTokenDetail,{token:token})}),/*#__PURE__*/_jsx(Route,{path:\"*\",children:!isLoading&&/*#__PURE__*/_jsx(ContentError,{isNotFound:true,children:id&&/*#__PURE__*/_jsx(Link,{to:\"/users/\".concat(id,\"/tokens\"),children:/*i18n*/i18n._(\"View Tokens\")})})},\"not-found\")]})]});}export default UserToken;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/User/UserToken/UserToken.js"],"names":["React","useEffect","useCallback","Link","Redirect","Route","Switch","useLocation","useParams","CaretLeftIcon","Card","PageSection","RoutedTabs","ContentError","TokensAPI","useRequest","UserTokenDetail","UserToken","setBreadcrumb","user","location","id","tokenId","readDetail","response","data","token","isLoading","error","fetchToken","request","result","tabsArray","name","link","showCardHeader","pathname","endsWith","status"],"mappings":"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","sourcesContent":["import React, { useEffect, useCallback } from 'react';\n\nimport { t } from '@lingui/macro';\nimport {\n  Link,\n  Redirect,\n  Route,\n  Switch,\n  useLocation,\n  useParams,\n} from 'react-router-dom';\nimport { CaretLeftIcon } from '@patternfly/react-icons';\nimport { Card, PageSection } from '@patternfly/react-core';\nimport RoutedTabs from 'components/RoutedTabs';\nimport ContentError from 'components/ContentError';\nimport { TokensAPI } from 'api';\nimport useRequest from 'hooks/useRequest';\nimport UserTokenDetail from '../UserTokenDetail';\n\nfunction UserToken({ setBreadcrumb, user }) {\n  const location = useLocation();\n  const { id, tokenId } = useParams();\n  const {\n    isLoading,\n    error,\n    request: fetchToken,\n    result: { token },\n  } = useRequest(\n    useCallback(async () => {\n      const response = await TokensAPI.readDetail(tokenId);\n      setBreadcrumb(user, response.data);\n      return {\n        token: response.data,\n      };\n    }, [setBreadcrumb, user, tokenId]),\n    { token: null }\n  );\n  useEffect(() => {\n    fetchToken();\n  }, [fetchToken]);\n\n  const tabsArray = [\n    {\n      name: (\n        <>\n          <CaretLeftIcon />\n          {t`Back to Tokens`}\n        </>\n      ),\n      link: `/users/${id}/tokens`,\n      id: 99,\n    },\n    {\n      name: t`Details`,\n      link: `/users/${id}/tokens/${tokenId}/details`,\n      id: 0,\n    },\n  ];\n\n  let showCardHeader = true;\n\n  if (location.pathname.endsWith('edit')) {\n    showCardHeader = false;\n  }\n\n  if (!isLoading && error) {\n    return (\n      <PageSection>\n        <Card>\n          <ContentError error={error}>\n            {error.response.status === 404 && (\n              <span>\n                {t`Token not found.`}{' '}\n                <Link to=\"/users/:id/tokens\">{t`View all tokens.`}</Link>\n              </span>\n            )}\n          </ContentError>\n        </Card>\n      </PageSection>\n    );\n  }\n\n  return (\n    <>\n      {showCardHeader && <RoutedTabs tabsArray={tabsArray} />}\n      <Switch>\n        <Redirect\n          from=\"/users/:id/tokens/:tokenId\"\n          to=\"/users/:id/tokens/:tokenId/details\"\n          exact\n        />\n        {token && (\n          <Route path=\"/users/:id/tokens/:tokenId/details\">\n            <UserTokenDetail token={token} />\n          </Route>\n        )}\n        <Route key=\"not-found\" path=\"*\">\n          {!isLoading && (\n            <ContentError isNotFound>\n              {id && <Link to={`/users/${id}/tokens`}>{t`View Tokens`}</Link>}\n            </ContentError>\n          )}\n        </Route>\n      </Switch>\n    </>\n  );\n}\n\nexport default UserToken;\n"]},"metadata":{},"sourceType":"module"}