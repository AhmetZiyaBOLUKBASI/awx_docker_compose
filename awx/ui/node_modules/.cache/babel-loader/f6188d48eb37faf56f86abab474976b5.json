{"ast":null,"code":"import{i18n}from\"@lingui/core\";import React from'react';import{Tr,Td}from'@patternfly/react-table';import{Link}from'react-router-dom';import{formatDateString}from'util/dates';import{ActionsTd,ActionItem}from'components/PaginatedTable';import ActivityStreamDetailButton from'./ActivityStreamDetailButton';import ActivityStreamDescription from'./ActivityStreamDescription';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ActivityStreamListItem(_ref){var streamItem=_ref.streamItem;var buildUser=function buildUser(item){var _item$summary_fields,_item$summary_fields$,_item$summary_fields2;var link;if(item!==null&&item!==void 0&&(_item$summary_fields=item.summary_fields)!==null&&_item$summary_fields!==void 0&&(_item$summary_fields$=_item$summary_fields.actor)!==null&&_item$summary_fields$!==void 0&&_item$summary_fields$.id){link=/*#__PURE__*/_jsx(Link,{to:\"/users/\".concat(item.summary_fields.actor.id,\"/details\"),children:item.summary_fields.actor.username});}else if(item!==null&&item!==void 0&&(_item$summary_fields2=item.summary_fields)!==null&&_item$summary_fields2!==void 0&&_item$summary_fields2.actor){link=/*i18n*/i18n._(\"{0} (deleted)\",{0:item.summary_fields.actor.username});}else{link=/*i18n*/i18n._(\"system\");}return link;};var labelId=\"check-action-\".concat(streamItem.id);var user=buildUser(streamItem);var description=/*#__PURE__*/_jsx(ActivityStreamDescription,{activity:streamItem});return/*#__PURE__*/_jsxs(Tr,{id:streamItem.id,ouiaId:streamItem.id,\"aria-labelledby\":labelId,children:[/*#__PURE__*/_jsx(Td,{}),/*#__PURE__*/_jsx(Td,{dataLabel:/*i18n*/i18n._(\"Time\"),children:streamItem.timestamp?formatDateString(streamItem.timestamp):''}),/*#__PURE__*/_jsx(Td,{dataLabel:/*i18n*/i18n._(\"Initiated By\"),children:user}),/*#__PURE__*/_jsx(Td,{id:labelId,dataLabel:/*i18n*/i18n._(\"Event\"),children:description}),/*#__PURE__*/_jsx(ActionsTd,{dataLabel:/*i18n*/i18n._(\"Actions\"),children:/*#__PURE__*/_jsx(ActionItem,{visible:true,tooltip:/*i18n*/i18n._(\"View event details\"),children:/*#__PURE__*/_jsx(ActivityStreamDetailButton,{streamItem:streamItem,user:user,description:description})})})]});}export default ActivityStreamListItem;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/ActivityStream/ActivityStreamListItem.js"],"names":["React","Tr","Td","Link","formatDateString","ActionsTd","ActionItem","ActivityStreamDetailButton","ActivityStreamDescription","ActivityStreamListItem","streamItem","buildUser","item","link","summary_fields","actor","id","username","labelId","user","description","timestamp"],"mappings":"+BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAGA,OAASC,EAAT,CAAaC,EAAb,KAAuB,yBAAvB,CAEA,OAASC,IAAT,KAAqB,kBAArB,CAEA,OAASC,gBAAT,KAAiC,YAAjC,CACA,OAASC,SAAT,CAAoBC,UAApB,KAAsC,2BAAtC,CAEA,MAAOC,CAAAA,0BAAP,KAAuC,8BAAvC,CACA,MAAOC,CAAAA,yBAAP,KAAsC,6BAAtC,C,wFAEA,QAASC,CAAAA,sBAAT,MAAgD,IAAdC,CAAAA,UAAc,MAAdA,UAAc,CAK9C,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,IAAD,CAAU,sEAC1B,GAAIC,CAAAA,IAAJ,CACA,GAAID,IAAJ,SAAIA,IAAJ,iCAAIA,IAAI,CAAEE,cAAV,gEAAI,qBAAsBC,KAA1B,0CAAI,sBAA6BC,EAAjC,CAAqC,CACnCH,IAAI,cACF,KAAC,IAAD,EAAM,EAAE,kBAAYD,IAAI,CAACE,cAAL,CAAoBC,KAApB,CAA0BC,EAAtC,YAAR,UACGJ,IAAI,CAACE,cAAL,CAAoBC,KAApB,CAA0BE,QAD7B,EADF,CAKD,CAND,IAMO,IAAIL,IAAJ,SAAIA,IAAJ,kCAAIA,IAAI,CAAEE,cAAV,0CAAI,sBAAsBC,KAA1B,CAAiC,CACtCF,IAAI,SAAG,0BAAID,IAAI,CAACE,cAAL,CAAoBC,KAApB,CAA0BE,QAA9B,EAAP,CACD,CAFM,IAEA,CACLJ,IAAI,SAAG,gBAAP,CACD,CACD,MAAOA,CAAAA,IAAP,CACD,CAdD,CAgBA,GAAMK,CAAAA,OAAO,wBAAmBR,UAAU,CAACM,EAA9B,CAAb,CACA,GAAMG,CAAAA,IAAI,CAAGR,SAAS,CAACD,UAAD,CAAtB,CACA,GAAMU,CAAAA,WAAW,cAAG,KAAC,yBAAD,EAA2B,QAAQ,CAAEV,UAArC,EAApB,CAEA,mBACE,MAAC,EAAD,EAAI,EAAE,CAAEA,UAAU,CAACM,EAAnB,CAAuB,MAAM,CAAEN,UAAU,CAACM,EAA1C,CAA8C,kBAAiBE,OAA/D,wBACE,KAAC,EAAD,IADF,cAEE,KAAC,EAAD,EAAI,SAAS,SAAE,cAAf,UACGR,UAAU,CAACW,SAAX,CAAuBjB,gBAAgB,CAACM,UAAU,CAACW,SAAZ,CAAvC,CAAgE,EADnE,EAFF,cAKE,KAAC,EAAD,EAAI,SAAS,SAAE,sBAAf,UAAiCF,IAAjC,EALF,cAME,KAAC,EAAD,EAAI,EAAE,CAAED,OAAR,CAAiB,SAAS,SAAE,eAA5B,UACGE,WADH,EANF,cASE,KAAC,SAAD,EAAW,SAAS,SAAE,iBAAtB,uBACE,KAAC,UAAD,EAAY,OAAO,KAAnB,CAAoB,OAAO,SAAE,4BAA7B,uBACE,KAAC,0BAAD,EACE,UAAU,CAAEV,UADd,CAEE,IAAI,CAAES,IAFR,CAGE,WAAW,CAAEC,WAHf,EADF,EADF,EATF,GADF,CAqBD,CACD,cAAeX,CAAAA,sBAAf","sourcesContent":["import React from 'react';\nimport { shape } from 'prop-types';\n\nimport { Tr, Td } from '@patternfly/react-table';\nimport { t } from '@lingui/macro';\nimport { Link } from 'react-router-dom';\n\nimport { formatDateString } from 'util/dates';\nimport { ActionsTd, ActionItem } from 'components/PaginatedTable';\n\nimport ActivityStreamDetailButton from './ActivityStreamDetailButton';\nimport ActivityStreamDescription from './ActivityStreamDescription';\n\nfunction ActivityStreamListItem({ streamItem }) {\n  ActivityStreamListItem.propTypes = {\n    streamItem: shape({}).isRequired,\n  };\n\n  const buildUser = (item) => {\n    let link;\n    if (item?.summary_fields?.actor?.id) {\n      link = (\n        <Link to={`/users/${item.summary_fields.actor.id}/details`}>\n          {item.summary_fields.actor.username}\n        </Link>\n      );\n    } else if (item?.summary_fields?.actor) {\n      link = t`${item.summary_fields.actor.username} (deleted)`;\n    } else {\n      link = t`system`;\n    }\n    return link;\n  };\n\n  const labelId = `check-action-${streamItem.id}`;\n  const user = buildUser(streamItem);\n  const description = <ActivityStreamDescription activity={streamItem} />;\n\n  return (\n    <Tr id={streamItem.id} ouiaId={streamItem.id} aria-labelledby={labelId}>\n      <Td />\n      <Td dataLabel={t`Time`}>\n        {streamItem.timestamp ? formatDateString(streamItem.timestamp) : ''}\n      </Td>\n      <Td dataLabel={t`Initiated By`}>{user}</Td>\n      <Td id={labelId} dataLabel={t`Event`}>\n        {description}\n      </Td>\n      <ActionsTd dataLabel={t`Actions`}>\n        <ActionItem visible tooltip={t`View event details`}>\n          <ActivityStreamDetailButton\n            streamItem={streamItem}\n            user={user}\n            description={description}\n          />\n        </ActionItem>\n      </ActionsTd>\n    </Tr>\n  );\n}\nexport default ActivityStreamListItem;\n"]},"metadata":{},"sourceType":"module"}