{"ast":null,"code":"import _styled3 from\"styled-components\";import _styled2 from\"styled-components\";import _styled from\"styled-components\";import{i18n}from\"@lingui/core\";import React,{useContext}from'react';import{Badge as PFBadge,Button,Title,Tooltip}from'@patternfly/react-core';import{BookIcon,CompassIcon,RocketIcon,TimesIcon,TrashAltIcon,WrenchIcon}from'@patternfly/react-icons';import styled from'styled-components';import{LaunchButton}from'components/LaunchButton';import{WorkflowDispatchContext,WorkflowStateContext}from'contexts/Workflow';import getDocsBaseUrl from'util/getDocsBaseUrl';import{useConfig}from'contexts/Config';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Badge=styled(PFBadge).withConfig({displayName:\"VisualizerToolbar__Badge\",componentId:\"h6nsd4-0\"})([\"align-items:center;display:flex;justify-content:center;margin-left:10px;\"]);var ActionButton=styled(Button).withConfig({displayName:\"VisualizerToolbar__ActionButton\",componentId:\"h6nsd4-1\"})([\"padding:6px 10px;margin:0px 6px;border:none;&:hover{background-color:#0066cc;color:white;}&.pf-m-active{background-color:#0066cc;color:white;}\"]);ActionButton.displayName='ActionButton';var _StyledDiv=styled(\"div\").withConfig({displayName:\"VisualizerToolbar___StyledDiv\",componentId:\"h6nsd4-2\"})([\"align-items:center;border-bottom:1px solid grey;display:flex;height:56px;padding:0px 20px;\"]);var _StyledDiv2=styled(\"div\").withConfig({displayName:\"VisualizerToolbar___StyledDiv2\",componentId:\"h6nsd4-3\"})([\"align-items:center;display:flex;flex:1;justify-content:flex-end\"]);var _StyledButton=styled(Button).withConfig({displayName:\"VisualizerToolbar___StyledButton\",componentId:\"h6nsd4-4\"})([\"margin:0 32px\"]);function VisualizerToolbar(_ref){var _template$summary_fie,_template$summary_fie2;var onClose=_ref.onClose,onSave=_ref.onSave,template=_ref.template,hasUnsavedChanges=_ref.hasUnsavedChanges,readOnly=_ref.readOnly;var dispatch=useContext(WorkflowDispatchContext);var _useContext=useContext(WorkflowStateContext),nodes=_useContext.nodes,showLegend=_useContext.showLegend,showTools=_useContext.showTools;var config=useConfig();var totalNodes=nodes.reduce(function(n,node){return n+!node.isDeleted;},0)-1;return/*#__PURE__*/_jsx(\"div\",{id:\"visualizer-toolbar\",children:/*#__PURE__*/_jsxs(_StyledDiv,{children:[/*#__PURE__*/_jsx(Title,{headingLevel:\"h2\",size:\"xl\",id:\"visualizer-toolbar-template-name\",children:template.name}),/*#__PURE__*/_jsxs(_StyledDiv2,{children:[/*#__PURE__*/_jsx(\"div\",{children:/*i18n*/i18n._(\"Total Nodes\")}),/*#__PURE__*/_jsx(Badge,{id:\"visualizer-total-nodes-badge\",isRead:true,children:totalNodes}),/*#__PURE__*/_jsx(Tooltip,{content:/*i18n*/i18n._(\"Toggle legend\"),position:\"bottom\",children:/*#__PURE__*/_jsx(ActionButton,{\"aria-label\":/*i18n*/i18n._(\"Toggle legend\"),id:\"visualizer-toggle-legend\",isActive:totalNodes>0&&showLegend,isDisabled:totalNodes===0,onClick:function onClick(){return dispatch({type:'TOGGLE_LEGEND'});},variant:\"plain\",children:/*#__PURE__*/_jsx(CompassIcon,{})})}),/*#__PURE__*/_jsx(Tooltip,{content:/*i18n*/i18n._(\"Toggle tools\"),position:\"bottom\",children:/*#__PURE__*/_jsx(ActionButton,{\"aria-label\":/*i18n*/i18n._(\"Toggle tools\"),id:\"visualizer-toggle-tools\",isActive:totalNodes>0&&showTools,isDisabled:totalNodes===0,onClick:function onClick(){return dispatch({type:'TOGGLE_TOOLS'});},variant:\"plain\",children:/*#__PURE__*/_jsx(WrenchIcon,{})})}),/*#__PURE__*/_jsx(Tooltip,{content:/*i18n*/i18n._(\"Workflow documentation\"),position:\"bottom\",children:/*#__PURE__*/_jsx(ActionButton,{\"aria-label\":/*i18n*/i18n._(\"Workflow documentation\"),id:\"visualizer-documentation\",variant:\"plain\",component:\"a\",target:\"_blank\",href:\"\".concat(getDocsBaseUrl(config),\"/html/userguide/workflow_templates.html#ug-wf-editor\"),children:/*#__PURE__*/_jsx(BookIcon,{})})}),((_template$summary_fie=template.summary_fields)===null||_template$summary_fie===void 0?void 0:(_template$summary_fie2=_template$summary_fie.user_capabilities)===null||_template$summary_fie2===void 0?void 0:_template$summary_fie2.start)&&/*#__PURE__*/_jsx(Tooltip,{content:/*i18n*/i18n._(\"Launch workflow\"),position:\"bottom\",children:/*#__PURE__*/_jsx(LaunchButton,{resource:template,\"aria-label\":/*i18n*/i18n._(\"Launch workflow\"),children:function children(_ref2){var handleLaunch=_ref2.handleLaunch,isLaunching=_ref2.isLaunching;return/*#__PURE__*/_jsx(ActionButton,{id:\"visualizer-launch\",variant:\"plain\",isDisabled:hasUnsavedChanges||totalNodes===0||isLaunching,onClick:handleLaunch,children:/*#__PURE__*/_jsx(RocketIcon,{})});}})}),!readOnly&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Tooltip,{content:/*i18n*/i18n._(\"Delete all nodes\"),position:\"bottom\",children:/*#__PURE__*/_jsx(ActionButton,{id:\"visualizer-delete-all\",\"aria-label\":/*i18n*/i18n._(\"Delete all nodes\"),isDisabled:totalNodes===0,onClick:function onClick(){return dispatch({type:'SET_SHOW_DELETE_ALL_NODES_MODAL',value:true});},variant:\"plain\",children:/*#__PURE__*/_jsx(TrashAltIcon,{})})}),/*#__PURE__*/_jsx(_StyledButton,{ouiaId:\"visualizer-save-button\",id:\"visualizer-save\",\"aria-label\":/*i18n*/i18n._(\"Save\"),variant:\"primary\",onClick:onSave,children:/*i18n*/i18n._(\"Save\")})]}),/*#__PURE__*/_jsx(Button,{ouiaId:\"visualizer-close-button\",id:\"visualizer-close\",\"aria-label\":/*i18n*/i18n._(\"Close\"),onClick:onClose,variant:\"plain\",children:/*#__PURE__*/_jsx(TimesIcon,{})})]})]})});}export default VisualizerToolbar;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/Template/WorkflowJobTemplateVisualizer/VisualizerToolbar.js"],"names":["React","useContext","Badge","PFBadge","Button","Title","Tooltip","BookIcon","CompassIcon","RocketIcon","TimesIcon","TrashAltIcon","WrenchIcon","styled","LaunchButton","WorkflowDispatchContext","WorkflowStateContext","getDocsBaseUrl","useConfig","ActionButton","displayName","VisualizerToolbar","onClose","onSave","template","hasUnsavedChanges","readOnly","dispatch","nodes","showLegend","showTools","config","totalNodes","reduce","n","node","isDeleted","name","type","summary_fields","user_capabilities","start","handleLaunch","isLaunching","value"],"mappings":"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","sourcesContent":["import 'styled-components/macro';\nimport React, { useContext } from 'react';\n\nimport { t } from '@lingui/macro';\nimport { bool, func, shape } from 'prop-types';\nimport {\n  Badge as PFBadge,\n  Button,\n  Title,\n  Tooltip,\n} from '@patternfly/react-core';\nimport {\n  BookIcon,\n  CompassIcon,\n  RocketIcon,\n  TimesIcon,\n  TrashAltIcon,\n  WrenchIcon,\n} from '@patternfly/react-icons';\nimport styled from 'styled-components';\nimport { LaunchButton } from 'components/LaunchButton';\nimport {\n  WorkflowDispatchContext,\n  WorkflowStateContext,\n} from 'contexts/Workflow';\nimport getDocsBaseUrl from 'util/getDocsBaseUrl';\nimport { useConfig } from 'contexts/Config';\n\nconst Badge = styled(PFBadge)`\n  align-items: center;\n  display: flex;\n  justify-content: center;\n  margin-left: 10px;\n`;\n\nconst ActionButton = styled(Button)`\n  padding: 6px 10px;\n  margin: 0px 6px;\n  border: none;\n  &:hover {\n    background-color: #0066cc;\n    color: white;\n  }\n\n  &.pf-m-active {\n    background-color: #0066cc;\n    color: white;\n  }\n`;\nActionButton.displayName = 'ActionButton';\n\nfunction VisualizerToolbar({\n  onClose,\n  onSave,\n  template,\n  hasUnsavedChanges,\n  readOnly,\n}) {\n  const dispatch = useContext(WorkflowDispatchContext);\n  const { nodes, showLegend, showTools } = useContext(WorkflowStateContext);\n  const config = useConfig();\n\n  const totalNodes = nodes.reduce((n, node) => n + !node.isDeleted, 0) - 1;\n\n  return (\n    <div id=\"visualizer-toolbar\">\n      <div css=\"align-items: center; border-bottom: 1px solid grey; display: flex; height: 56px; padding: 0px 20px;\">\n        <Title\n          headingLevel=\"h2\"\n          size=\"xl\"\n          id=\"visualizer-toolbar-template-name\"\n        >\n          {template.name}\n        </Title>\n        <div css=\"align-items: center; display: flex; flex: 1; justify-content: flex-end\">\n          <div>{t`Total Nodes`}</div>\n          <Badge id=\"visualizer-total-nodes-badge\" isRead>\n            {totalNodes}\n          </Badge>\n          <Tooltip content={t`Toggle legend`} position=\"bottom\">\n            <ActionButton\n              aria-label={t`Toggle legend`}\n              id=\"visualizer-toggle-legend\"\n              isActive={totalNodes > 0 && showLegend}\n              isDisabled={totalNodes === 0}\n              onClick={() => dispatch({ type: 'TOGGLE_LEGEND' })}\n              variant=\"plain\"\n            >\n              <CompassIcon />\n            </ActionButton>\n          </Tooltip>\n          <Tooltip content={t`Toggle tools`} position=\"bottom\">\n            <ActionButton\n              aria-label={t`Toggle tools`}\n              id=\"visualizer-toggle-tools\"\n              isActive={totalNodes > 0 && showTools}\n              isDisabled={totalNodes === 0}\n              onClick={() => dispatch({ type: 'TOGGLE_TOOLS' })}\n              variant=\"plain\"\n            >\n              <WrenchIcon />\n            </ActionButton>\n          </Tooltip>\n          <Tooltip content={t`Workflow documentation`} position=\"bottom\">\n            <ActionButton\n              aria-label={t`Workflow documentation`}\n              id=\"visualizer-documentation\"\n              variant=\"plain\"\n              component=\"a\"\n              target=\"_blank\"\n              href={`${getDocsBaseUrl(\n                config\n              )}/html/userguide/workflow_templates.html#ug-wf-editor`}\n            >\n              <BookIcon />\n            </ActionButton>\n          </Tooltip>\n          {template.summary_fields?.user_capabilities?.start && (\n            <Tooltip content={t`Launch workflow`} position=\"bottom\">\n              <LaunchButton resource={template} aria-label={t`Launch workflow`}>\n                {({ handleLaunch, isLaunching }) => (\n                  <ActionButton\n                    id=\"visualizer-launch\"\n                    variant=\"plain\"\n                    isDisabled={\n                      hasUnsavedChanges || totalNodes === 0 || isLaunching\n                    }\n                    onClick={handleLaunch}\n                  >\n                    <RocketIcon />\n                  </ActionButton>\n                )}\n              </LaunchButton>\n            </Tooltip>\n          )}\n          {!readOnly && (\n            <>\n              <Tooltip content={t`Delete all nodes`} position=\"bottom\">\n                <ActionButton\n                  id=\"visualizer-delete-all\"\n                  aria-label={t`Delete all nodes`}\n                  isDisabled={totalNodes === 0}\n                  onClick={() =>\n                    dispatch({\n                      type: 'SET_SHOW_DELETE_ALL_NODES_MODAL',\n                      value: true,\n                    })\n                  }\n                  variant=\"plain\"\n                >\n                  <TrashAltIcon />\n                </ActionButton>\n              </Tooltip>\n              <Button\n                ouiaId=\"visualizer-save-button\"\n                id=\"visualizer-save\"\n                css=\"margin: 0 32px\"\n                aria-label={t`Save`}\n                variant=\"primary\"\n                onClick={onSave}\n              >\n                {t`Save`}\n              </Button>\n            </>\n          )}\n          <Button\n            ouiaId=\"visualizer-close-button\"\n            id=\"visualizer-close\"\n            aria-label={t`Close`}\n            onClick={onClose}\n            variant=\"plain\"\n          >\n            <TimesIcon />\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nVisualizerToolbar.propTypes = {\n  onClose: func.isRequired,\n  onSave: func.isRequired,\n  template: shape().isRequired,\n  hasUnsavedChanges: bool.isRequired,\n  readOnly: bool.isRequired,\n};\n\nexport default VisualizerToolbar;\n"]},"metadata":{},"sourceType":"module"}