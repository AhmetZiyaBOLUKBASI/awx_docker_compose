{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useEffect,useCallback}from'react';import{Card,PageSection}from'@patternfly/react-core';import{CaretLeftIcon}from'@patternfly/react-icons';import{Link,Switch,Route,Redirect,useParams,useRouteMatch,useLocation}from'react-router-dom';import useRequest from'hooks/useRequest';import RoutedTabs from'components/RoutedTabs';import ContentError from'components/ContentError';import{WorkflowApprovalsAPI}from'api';import WorkflowApprovalDetail from'./WorkflowApprovalDetail';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function WorkflowApproval(_ref){var setBreadcrumb=_ref.setBreadcrumb;var _useParams=useParams(),workflowApprovalId=_useParams.id;var match=useRouteMatch();var location=useLocation();var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var detail;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return WorkflowApprovalsAPI.readDetail(workflowApprovalId);case 2:detail=_context.sent;setBreadcrumb(detail.data);return _context.abrupt(\"return\",{workflowApproval:detail.data});case 5:case\"end\":return _context.stop();}}},_callee);})),[workflowApprovalId,setBreadcrumb]),{workflowApproval:null}),workflowApproval=_useRequest.result.workflowApproval,isLoading=_useRequest.isLoading,error=_useRequest.error,fetchWorkflowApproval=_useRequest.request;useEffect(function(){fetchWorkflowApproval();},[fetchWorkflowApproval,location.pathname]);if(!isLoading&&error){return/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(ContentError,{error:error,children:error.response.status===404&&/*#__PURE__*/_jsxs(\"span\",{children:[/*i18n*/i18n._(\"Workflow Approval not found.\"),' ',/*#__PURE__*/_jsx(Link,{to:\"/workflow_approvals\",children:/*i18n*/i18n._(\"View all Workflow Approvals.\")})]})})})});}var tabs=[{name:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CaretLeftIcon,{}),/*i18n*/i18n._(\"Back to Workflow Approvals\")]}),link:\"/workflow_approvals\",isBackButton:true,id:99},{name:/*i18n*/i18n._(\"Details\"),link:\"\".concat(match.url,\"/details\"),id:0}];return/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(RoutedTabs,{tabsArray:tabs}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Redirect,{from:\"/workflow_approvals/:id\",to:\"/workflow_approvals/:id/details\",exact:true}),workflowApproval&&/*#__PURE__*/_jsx(Route,{path:\"/workflow_approvals/:id/details\",children:/*#__PURE__*/_jsx(WorkflowApprovalDetail,{fetchWorkflowApproval:fetchWorkflowApproval,workflowApproval:workflowApproval})}),/*#__PURE__*/_jsx(Route,{path:\"*\",children:!isLoading&&/*#__PURE__*/_jsx(ContentError,{isNotFound:true,children:match.params.id&&/*#__PURE__*/_jsx(Link,{to:\"/workflow_approvals/\".concat(match.params.id,\"/details\"),children:/*i18n*/i18n._(\"View Workflow Approval Details\")})})},\"not-found\")]})]})});}export default WorkflowApproval;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/WorkflowApproval/WorkflowApproval.js"],"names":["React","useEffect","useCallback","Card","PageSection","CaretLeftIcon","Link","Switch","Route","Redirect","useParams","useRouteMatch","useLocation","useRequest","RoutedTabs","ContentError","WorkflowApprovalsAPI","WorkflowApprovalDetail","WorkflowApproval","setBreadcrumb","workflowApprovalId","id","match","location","readDetail","detail","data","workflowApproval","result","isLoading","error","fetchWorkflowApproval","request","pathname","response","status","tabs","name","link","isBackButton","url","params"],"mappings":"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","sourcesContent":["import React, { useEffect, useCallback } from 'react';\nimport { t } from '@lingui/macro';\n\nimport { Card, PageSection } from '@patternfly/react-core';\nimport { CaretLeftIcon } from '@patternfly/react-icons';\nimport {\n  Link,\n  Switch,\n  Route,\n  Redirect,\n  useParams,\n  useRouteMatch,\n  useLocation,\n} from 'react-router-dom';\nimport useRequest from 'hooks/useRequest';\nimport RoutedTabs from 'components/RoutedTabs';\nimport ContentError from 'components/ContentError';\nimport { WorkflowApprovalsAPI } from 'api';\nimport WorkflowApprovalDetail from './WorkflowApprovalDetail';\n\nfunction WorkflowApproval({ setBreadcrumb }) {\n  const { id: workflowApprovalId } = useParams();\n  const match = useRouteMatch();\n  const location = useLocation();\n  const {\n    result: { workflowApproval },\n    isLoading,\n    error,\n    request: fetchWorkflowApproval,\n  } = useRequest(\n    useCallback(async () => {\n      const detail = await WorkflowApprovalsAPI.readDetail(workflowApprovalId);\n      setBreadcrumb(detail.data);\n      return {\n        workflowApproval: detail.data,\n      };\n    }, [workflowApprovalId, setBreadcrumb]),\n    { workflowApproval: null }\n  );\n\n  useEffect(() => {\n    fetchWorkflowApproval();\n  }, [fetchWorkflowApproval, location.pathname]);\n\n  if (!isLoading && error) {\n    return (\n      <PageSection>\n        <Card>\n          <ContentError error={error}>\n            {error.response.status === 404 && (\n              <span>\n                {t`Workflow Approval not found.`}{' '}\n                <Link to=\"/workflow_approvals\">\n                  {t`View all Workflow Approvals.`}\n                </Link>\n              </span>\n            )}\n          </ContentError>\n        </Card>\n      </PageSection>\n    );\n  }\n\n  const tabs = [\n    {\n      name: (\n        <>\n          <CaretLeftIcon />\n          {t`Back to Workflow Approvals`}\n        </>\n      ),\n      link: `/workflow_approvals`,\n      isBackButton: true,\n      id: 99,\n    },\n    {\n      name: t`Details`,\n      link: `${match.url}/details`,\n      id: 0,\n    },\n  ];\n  return (\n    <PageSection>\n      <Card>\n        <RoutedTabs tabsArray={tabs} />\n        <Switch>\n          <Redirect\n            from=\"/workflow_approvals/:id\"\n            to=\"/workflow_approvals/:id/details\"\n            exact\n          />\n          {workflowApproval && (\n            <Route path=\"/workflow_approvals/:id/details\">\n              <WorkflowApprovalDetail\n                fetchWorkflowApproval={fetchWorkflowApproval}\n                workflowApproval={workflowApproval}\n              />\n            </Route>\n          )}\n          <Route key=\"not-found\" path=\"*\">\n            {!isLoading && (\n              <ContentError isNotFound>\n                {match.params.id && (\n                  <Link to={`/workflow_approvals/${match.params.id}/details`}>\n                    {t`View Workflow Approval Details`}\n                  </Link>\n                )}\n              </ContentError>\n            )}\n          </Route>\n        </Switch>\n      </Card>\n    </PageSection>\n  );\n}\n\nexport default WorkflowApproval;\n"]},"metadata":{},"sourceType":"module"}