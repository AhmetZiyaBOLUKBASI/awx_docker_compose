{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import{i18n}from\"@lingui/core\";import React from'react';import{Link}from'react-router-dom';import{Button,Chip}from'@patternfly/react-core';import{Tr,Td,ExpandableRowContent}from'@patternfly/react-table';import{RocketIcon}from'@patternfly/react-icons';import styled from'styled-components';import{formatDateString}from'util/dates';import{isJobRunning}from'util/jobs';import getScheduleUrl from'util/getScheduleUrl';import{ActionsTd,ActionItem,TdBreakWord}from'../PaginatedTable';import{LaunchButton,ReLaunchDropDown}from'../LaunchButton';import StatusLabel from'../StatusLabel';import{DetailList,Detail,DeletedDetail,LaunchedByDetail}from'../DetailList';import ChipGroup from'../ChipGroup';import CredentialChip from'../CredentialChip';import ExecutionEnvironmentDetail from'../ExecutionEnvironmentDetail';import{JOB_TYPE_URL_SEGMENTS}from'../../constants';import JobCancelButton from'../JobCancelButton';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Dash=styled.span(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\"])));function JobListItem(_ref){var _job$summary_fields2,_job$summary_fields2$;var isExpanded=_ref.isExpanded,onExpand=_ref.onExpand,job=_ref.job,rowIndex=_ref.rowIndex,isSelected=_ref.isSelected,onSelect=_ref.onSelect,_ref$showTypeColumn=_ref.showTypeColumn,showTypeColumn=_ref$showTypeColumn===void 0?false:_ref$showTypeColumn,_ref$isSuperUser=_ref.isSuperUser,isSuperUser=_ref$isSuperUser===void 0?false:_ref$isSuperUser,inventorySourceLabels=_ref.inventorySourceLabels;var labelId=\"check-action-\".concat(job.id);var jobTypes={project_update:/*i18n*/i18n._(\"Source Control Update\"),inventory_update:/*i18n*/i18n._(\"Inventory Sync\"),job:job.job_type==='check'?/*i18n*/i18n._(\"Playbook Check\"):/*i18n*/i18n._(\"Playbook Run\"),ad_hoc_command:/*i18n*/i18n._(\"Command\"),system_job:/*i18n*/i18n._(\"Management Job\"),workflow_job:/*i18n*/i18n._(\"Workflow Job\")};var _job$summary_fields=job.summary_fields,credentials=_job$summary_fields.credentials,execution_environment=_job$summary_fields.execution_environment,inventory=_job$summary_fields.inventory,job_template=_job$summary_fields.job_template,labels=_job$summary_fields.labels,project=_job$summary_fields.project,schedule=_job$summary_fields.schedule,source_workflow_job=_job$summary_fields.source_workflow_job,workflow_job_template=_job$summary_fields.workflow_job_template;var jobSliceNumber=job.job_slice_number,jobSliceCount=job.job_slice_count,isSlicedJob=job.is_sliced_job;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Tr,{id:\"job-row-\".concat(job.id),ouiaId:\"job-row-\".concat(job.id),children:[/*#__PURE__*/_jsx(Td,{expand:{rowIndex:job.id,isExpanded:isExpanded,onToggle:onExpand}}),/*#__PURE__*/_jsx(Td,{select:{rowIndex:rowIndex,isSelected:isSelected,onSelect:onSelect},dataLabel:/*i18n*/i18n._(\"Select\")}),/*#__PURE__*/_jsx(TdBreakWord,{id:labelId,dataLabel:/*i18n*/i18n._(\"Name\"),children:/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(Link,{to:\"/jobs/\".concat(JOB_TYPE_URL_SEGMENTS[job.type],\"/\").concat(job.id),children:/*#__PURE__*/_jsxs(\"b\",{children:[job.id,\" \",/*#__PURE__*/_jsx(Dash,{children:\"\\u2014\"}),\" \",job.name]})})})}),/*#__PURE__*/_jsx(Td,{dataLabel:/*i18n*/i18n._(\"Status\"),children:job.status&&/*#__PURE__*/_jsx(StatusLabel,{status:job.status})}),showTypeColumn&&/*#__PURE__*/_jsx(Td,{dataLabel:/*i18n*/i18n._(\"Type\"),children:jobTypes[job.type]}),/*#__PURE__*/_jsx(Td,{dataLabel:/*i18n*/i18n._(\"Start Time\"),children:formatDateString(job.started)}),/*#__PURE__*/_jsx(Td,{dataLabel:/*i18n*/i18n._(\"Finish Time\"),children:job.finished?formatDateString(job.finished):''}),/*#__PURE__*/_jsxs(ActionsTd,{dataLabel:/*i18n*/i18n._(\"Actions\"),children:[/*#__PURE__*/_jsx(ActionItem,{visible:['pending','waiting','running'].includes(job.status)&&(job.type==='system_job'?isSuperUser:true),children:/*#__PURE__*/_jsx(JobCancelButton,{job:job,errorTitle:/*i18n*/i18n._(\"Job Cancel Error\"),title:/*i18n*/i18n._(\"Cancel {0}\",{0:job.name}),errorMessage:/*i18n*/i18n._(\"Failed to cancel {0}\",{0:job.name}),showIconButton:true})}),/*#__PURE__*/_jsx(ActionItem,{visible:job.type!=='system_job'&&((_job$summary_fields2=job.summary_fields)===null||_job$summary_fields2===void 0?void 0:(_job$summary_fields2$=_job$summary_fields2.user_capabilities)===null||_job$summary_fields2$===void 0?void 0:_job$summary_fields2$.start),tooltip:job.status==='failed'&&job.type==='job'?/*i18n*/i18n._(\"Relaunch using host parameters\"):/*i18n*/i18n._(\"Relaunch Job\"),children:job.status==='failed'&&job.type==='job'?/*#__PURE__*/_jsx(LaunchButton,{resource:job,children:function children(_ref2){var handleRelaunch=_ref2.handleRelaunch,isLaunching=_ref2.isLaunching;return/*#__PURE__*/_jsx(ReLaunchDropDown,{handleRelaunch:handleRelaunch,isLaunching:isLaunching,id:\"relaunch-job-\".concat(job.id)});}}):/*#__PURE__*/_jsx(LaunchButton,{resource:job,children:function children(_ref3){var handleRelaunch=_ref3.handleRelaunch,isLaunching=_ref3.isLaunching;return/*#__PURE__*/_jsx(Button,{ouiaId:\"\".concat(job.id,\"-relaunch-button\"),variant:\"plain\",onClick:function onClick(){return handleRelaunch();},\"aria-label\":/*i18n*/i18n._(\"Relaunch\"),isDisabled:isLaunching,children:/*#__PURE__*/_jsx(RocketIcon,{})});}})})]})]}),/*#__PURE__*/_jsxs(Tr,{isExpanded:isExpanded,id:\"expanded-job-row-\".concat(job.id),ouiaId:\"expanded-job-row-\".concat(job.id),children:[/*#__PURE__*/_jsx(Td,{colSpan:2}),/*#__PURE__*/_jsx(Td,{colSpan:showTypeColumn?6:5,children:/*#__PURE__*/_jsx(ExpandableRowContent,{children:/*#__PURE__*/_jsxs(DetailList,{children:[job.type==='inventory_update'&&/*#__PURE__*/_jsx(Detail,{dataCy:\"job-inventory-source-type\",label:/*i18n*/i18n._(\"Source\"),value:inventorySourceLabels===null||inventorySourceLabels===void 0?void 0:inventorySourceLabels.map(function(_ref4){var _ref5=_slicedToArray(_ref4,2),string=_ref5[0],label=_ref5[1];return string===job.source?label:null;}),isEmpty:(inventorySourceLabels===null||inventorySourceLabels===void 0?void 0:inventorySourceLabels.length)===0}),/*#__PURE__*/_jsx(LaunchedByDetail,{job:job}),job.launch_type==='scheduled'&&(schedule?/*#__PURE__*/_jsx(Detail,{dataCy:\"job-schedule\",label:/*i18n*/i18n._(\"Schedule\"),value:/*#__PURE__*/_jsx(Link,{to:getScheduleUrl(job),children:schedule.name})}):/*#__PURE__*/_jsx(DeletedDetail,{label:/*i18n*/i18n._(\"Schedule\")})),job_template&&/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Job Template\"),value:/*#__PURE__*/_jsx(Link,{to:\"/templates/job_template/\".concat(job_template.id),children:job_template.name})}),workflow_job_template&&/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Workflow Job Template\"),value:/*#__PURE__*/_jsx(Link,{to:\"/templates/workflow_job_template/\".concat(workflow_job_template.id),children:workflow_job_template.name})}),source_workflow_job&&/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Source Workflow Job\"),value:/*#__PURE__*/_jsxs(Link,{to:\"/jobs/workflow/\".concat(source_workflow_job.id),children:[source_workflow_job.id,\" - \",source_workflow_job.name]})}),inventory&&/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Inventory\"),value:/*#__PURE__*/_jsx(Link,{to:inventory.kind==='smart'?\"/inventories/smart_inventory/\".concat(inventory.id):\"/inventories/inventory/\".concat(inventory.id),children:inventory.name})}),project&&/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Project\"),value:/*#__PURE__*/_jsx(Link,{to:\"/projects/\".concat(project.id,\"/details\"),children:project.name}),dataCy:\"job-\".concat(job.id,\"-project\")}),job.type!=='workflow_job'&&!isJobRunning(job.status)&&job.status!=='canceled'&&/*#__PURE__*/_jsx(ExecutionEnvironmentDetail,{executionEnvironment:execution_environment,verifyMissingVirtualEnv:false,dataCy:\"execution-environment-detail-\".concat(job.id)}),credentials&&/*#__PURE__*/_jsx(Detail,{fullWidth:true,label:/*i18n*/i18n._(\"Credentials\"),dataCy:\"job-\".concat(job.id,\"-credentials\"),value:/*#__PURE__*/_jsx(ChipGroup,{numChips:5,totalChips:credentials.length,ouiaId:\"job-\".concat(job.id,\"-credential-chips\"),children:credentials.map(function(c){return/*#__PURE__*/_jsx(CredentialChip,{credential:c,isReadOnly:true,ouiaId:\"credential-\".concat(c.id,\"-chip\")},c.id);})}),isEmpty:credentials.length===0}),labels&&labels.count>0&&/*#__PURE__*/_jsx(Detail,{fullWidth:true,label:/*i18n*/i18n._(\"Labels\"),value:/*#__PURE__*/_jsx(ChipGroup,{numChips:5,totalChips:labels.results.length,ouiaId:\"job-\".concat(job.id,\"-label-chips\"),children:labels.results.map(function(l){return/*#__PURE__*/_jsx(Chip,{isReadOnly:true,ouiaId:\"label-\".concat(l.id,\"-chip\"),children:l.name},l.id);})})}),job.job_explanation&&/*#__PURE__*/_jsx(Detail,{fullWidth:true,label:/*i18n*/i18n._(\"Explanation\"),value:job.job_explanation}),typeof jobSliceNumber==='number'&&typeof jobSliceCount==='number'&&/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Job Slice\"),value:\"\".concat(jobSliceNumber,\"/\").concat(jobSliceCount)}),job.type==='workflow_job'&&isSlicedJob&&/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Job Slice Parent\"),value:/*i18n*/i18n._(\"True\")})]})})})]})]});}export{JobListItem as _JobListItem};export default JobListItem;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/components/JobList/JobListItem.js"],"names":["React","Link","Button","Chip","Tr","Td","ExpandableRowContent","RocketIcon","styled","formatDateString","isJobRunning","getScheduleUrl","ActionsTd","ActionItem","TdBreakWord","LaunchButton","ReLaunchDropDown","StatusLabel","DetailList","Detail","DeletedDetail","LaunchedByDetail","ChipGroup","CredentialChip","ExecutionEnvironmentDetail","JOB_TYPE_URL_SEGMENTS","JobCancelButton","Dash","span","JobListItem","isExpanded","onExpand","job","rowIndex","isSelected","onSelect","showTypeColumn","isSuperUser","inventorySourceLabels","labelId","id","jobTypes","project_update","inventory_update","job_type","ad_hoc_command","system_job","workflow_job","summary_fields","credentials","execution_environment","inventory","job_template","labels","project","schedule","source_workflow_job","workflow_job_template","jobSliceNumber","job_slice_number","jobSliceCount","job_slice_count","isSlicedJob","is_sliced_job","onToggle","type","name","status","started","finished","includes","user_capabilities","start","handleRelaunch","isLaunching","map","string","label","source","length","launch_type","kind","c","count","results","l","job_explanation","_JobListItem"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { t } from '@lingui/macro';\nimport { Button, Chip } from '@patternfly/react-core';\nimport { Tr, Td, ExpandableRowContent } from '@patternfly/react-table';\nimport { RocketIcon } from '@patternfly/react-icons';\nimport styled from 'styled-components';\nimport { formatDateString } from 'util/dates';\nimport { isJobRunning } from 'util/jobs';\nimport getScheduleUrl from 'util/getScheduleUrl';\nimport { ActionsTd, ActionItem, TdBreakWord } from '../PaginatedTable';\nimport { LaunchButton, ReLaunchDropDown } from '../LaunchButton';\nimport StatusLabel from '../StatusLabel';\nimport {\n  DetailList,\n  Detail,\n  DeletedDetail,\n  LaunchedByDetail,\n} from '../DetailList';\nimport ChipGroup from '../ChipGroup';\nimport CredentialChip from '../CredentialChip';\nimport ExecutionEnvironmentDetail from '../ExecutionEnvironmentDetail';\nimport { JOB_TYPE_URL_SEGMENTS } from '../../constants';\nimport JobCancelButton from '../JobCancelButton';\n\nconst Dash = styled.span``;\nfunction JobListItem({\n  isExpanded,\n  onExpand,\n  job,\n  rowIndex,\n  isSelected,\n  onSelect,\n  showTypeColumn = false,\n  isSuperUser = false,\n  inventorySourceLabels,\n}) {\n  const labelId = `check-action-${job.id}`;\n\n  const jobTypes = {\n    project_update: t`Source Control Update`,\n    inventory_update: t`Inventory Sync`,\n    job: job.job_type === 'check' ? t`Playbook Check` : t`Playbook Run`,\n    ad_hoc_command: t`Command`,\n    system_job: t`Management Job`,\n    workflow_job: t`Workflow Job`,\n  };\n\n  const {\n    credentials,\n    execution_environment,\n    inventory,\n    job_template,\n    labels,\n    project,\n    schedule,\n    source_workflow_job,\n    workflow_job_template,\n  } = job.summary_fields;\n\n  const {\n    job_slice_number: jobSliceNumber,\n    job_slice_count: jobSliceCount,\n    is_sliced_job: isSlicedJob,\n  } = job;\n\n  return (\n    <>\n      <Tr id={`job-row-${job.id}`} ouiaId={`job-row-${job.id}`}>\n        <Td\n          expand={{\n            rowIndex: job.id,\n            isExpanded,\n            onToggle: onExpand,\n          }}\n        />\n        <Td\n          select={{\n            rowIndex,\n            isSelected,\n            onSelect,\n          }}\n          dataLabel={t`Select`}\n        />\n        <TdBreakWord id={labelId} dataLabel={t`Name`}>\n          <span>\n            <Link to={`/jobs/${JOB_TYPE_URL_SEGMENTS[job.type]}/${job.id}`}>\n              <b>\n                {job.id} <Dash>&mdash;</Dash> {job.name}\n              </b>\n            </Link>\n          </span>\n        </TdBreakWord>\n        <Td dataLabel={t`Status`}>\n          {job.status && <StatusLabel status={job.status} />}\n        </Td>\n        {showTypeColumn && <Td dataLabel={t`Type`}>{jobTypes[job.type]}</Td>}\n        <Td dataLabel={t`Start Time`}>{formatDateString(job.started)}</Td>\n        <Td dataLabel={t`Finish Time`}>\n          {job.finished ? formatDateString(job.finished) : ''}\n        </Td>\n        <ActionsTd dataLabel={t`Actions`}>\n          <ActionItem\n            visible={\n              ['pending', 'waiting', 'running'].includes(job.status) &&\n              (job.type === 'system_job' ? isSuperUser : true)\n            }\n          >\n            <JobCancelButton\n              job={job}\n              errorTitle={t`Job Cancel Error`}\n              title={t`Cancel ${job.name}`}\n              errorMessage={t`Failed to cancel ${job.name}`}\n              showIconButton\n            />\n          </ActionItem>\n          <ActionItem\n            visible={\n              job.type !== 'system_job' &&\n              job.summary_fields?.user_capabilities?.start\n            }\n            tooltip={\n              job.status === 'failed' && job.type === 'job'\n                ? t`Relaunch using host parameters`\n                : t`Relaunch Job`\n            }\n          >\n            {job.status === 'failed' && job.type === 'job' ? (\n              <LaunchButton resource={job}>\n                {({ handleRelaunch, isLaunching }) => (\n                  <ReLaunchDropDown\n                    handleRelaunch={handleRelaunch}\n                    isLaunching={isLaunching}\n                    id={`relaunch-job-${job.id}`}\n                  />\n                )}\n              </LaunchButton>\n            ) : (\n              <LaunchButton resource={job}>\n                {({ handleRelaunch, isLaunching }) => (\n                  <Button\n                    ouiaId={`${job.id}-relaunch-button`}\n                    variant=\"plain\"\n                    onClick={() => handleRelaunch()}\n                    aria-label={t`Relaunch`}\n                    isDisabled={isLaunching}\n                  >\n                    <RocketIcon />\n                  </Button>\n                )}\n              </LaunchButton>\n            )}\n          </ActionItem>\n        </ActionsTd>\n      </Tr>\n      <Tr\n        isExpanded={isExpanded}\n        id={`expanded-job-row-${job.id}`}\n        ouiaId={`expanded-job-row-${job.id}`}\n      >\n        <Td colSpan={2} />\n        <Td colSpan={showTypeColumn ? 6 : 5}>\n          <ExpandableRowContent>\n            <DetailList>\n              {job.type === 'inventory_update' && (\n                <Detail\n                  dataCy=\"job-inventory-source-type\"\n                  label={t`Source`}\n                  value={inventorySourceLabels?.map(([string, label]) =>\n                    string === job.source ? label : null\n                  )}\n                  isEmpty={inventorySourceLabels?.length === 0}\n                />\n              )}\n              <LaunchedByDetail job={job} />\n              {job.launch_type === 'scheduled' &&\n                (schedule ? (\n                  <Detail\n                    dataCy=\"job-schedule\"\n                    label={t`Schedule`}\n                    value={\n                      <Link to={getScheduleUrl(job)}>{schedule.name}</Link>\n                    }\n                  />\n                ) : (\n                  <DeletedDetail label={t`Schedule`} />\n                ))}\n              {job_template && (\n                <Detail\n                  label={t`Job Template`}\n                  value={\n                    <Link to={`/templates/job_template/${job_template.id}`}>\n                      {job_template.name}\n                    </Link>\n                  }\n                />\n              )}\n              {workflow_job_template && (\n                <Detail\n                  label={t`Workflow Job Template`}\n                  value={\n                    <Link\n                      to={`/templates/workflow_job_template/${workflow_job_template.id}`}\n                    >\n                      {workflow_job_template.name}\n                    </Link>\n                  }\n                />\n              )}\n              {source_workflow_job && (\n                <Detail\n                  label={t`Source Workflow Job`}\n                  value={\n                    <Link to={`/jobs/workflow/${source_workflow_job.id}`}>\n                      {source_workflow_job.id} - {source_workflow_job.name}\n                    </Link>\n                  }\n                />\n              )}\n              {inventory && (\n                <Detail\n                  label={t`Inventory`}\n                  value={\n                    <Link\n                      to={\n                        inventory.kind === 'smart'\n                          ? `/inventories/smart_inventory/${inventory.id}`\n                          : `/inventories/inventory/${inventory.id}`\n                      }\n                    >\n                      {inventory.name}\n                    </Link>\n                  }\n                />\n              )}\n              {project && (\n                <Detail\n                  label={t`Project`}\n                  value={\n                    <Link to={`/projects/${project.id}/details`}>\n                      {project.name}\n                    </Link>\n                  }\n                  dataCy={`job-${job.id}-project`}\n                />\n              )}\n              {job.type !== 'workflow_job' &&\n                !isJobRunning(job.status) &&\n                job.status !== 'canceled' && (\n                  <ExecutionEnvironmentDetail\n                    executionEnvironment={execution_environment}\n                    verifyMissingVirtualEnv={false}\n                    dataCy={`execution-environment-detail-${job.id}`}\n                  />\n                )}\n              {credentials && (\n                <Detail\n                  fullWidth\n                  label={t`Credentials`}\n                  dataCy={`job-${job.id}-credentials`}\n                  value={\n                    <ChipGroup\n                      numChips={5}\n                      totalChips={credentials.length}\n                      ouiaId={`job-${job.id}-credential-chips`}\n                    >\n                      {credentials.map((c) => (\n                        <CredentialChip\n                          credential={c}\n                          isReadOnly\n                          key={c.id}\n                          ouiaId={`credential-${c.id}-chip`}\n                        />\n                      ))}\n                    </ChipGroup>\n                  }\n                  isEmpty={credentials.length === 0}\n                />\n              )}\n              {labels && labels.count > 0 && (\n                <Detail\n                  fullWidth\n                  label={t`Labels`}\n                  value={\n                    <ChipGroup\n                      numChips={5}\n                      totalChips={labels.results.length}\n                      ouiaId={`job-${job.id}-label-chips`}\n                    >\n                      {labels.results.map((l) => (\n                        <Chip\n                          key={l.id}\n                          isReadOnly\n                          ouiaId={`label-${l.id}-chip`}\n                        >\n                          {l.name}\n                        </Chip>\n                      ))}\n                    </ChipGroup>\n                  }\n                />\n              )}\n              {job.job_explanation && (\n                <Detail\n                  fullWidth\n                  label={t`Explanation`}\n                  value={job.job_explanation}\n                />\n              )}\n              {typeof jobSliceNumber === 'number' &&\n                typeof jobSliceCount === 'number' && (\n                  <Detail\n                    label={t`Job Slice`}\n                    value={`${jobSliceNumber}/${jobSliceCount}`}\n                  />\n                )}\n              {job.type === 'workflow_job' && isSlicedJob && (\n                <Detail label={t`Job Slice Parent`} value={t`True`} />\n              )}\n            </DetailList>\n          </ExpandableRowContent>\n        </Td>\n      </Tr>\n    </>\n  );\n}\n\nexport { JobListItem as _JobListItem };\nexport default JobListItem;\n"]},"metadata":{},"sourceType":"module"}