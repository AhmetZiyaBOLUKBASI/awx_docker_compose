{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useCallback,useEffect,useRef}from'react';import{Switch,Route,Redirect,Link,useLocation,useParams,useRouteMatch}from'react-router-dom';import{CaretLeftIcon}from'@patternfly/react-icons';import{Card,PageSection}from'@patternfly/react-core';import useRequest from'hooks/useRequest';import RoutedTabs from'components/RoutedTabs';import ContentError from'components/ContentError';import NotificationList from'components/NotificationList/NotificationList';import{ResourceAccessList}from'components/ResourceAccessList';import{OrganizationsAPI}from'api';import OrganizationDetail from'./OrganizationDetail';import OrganizationEdit from'./OrganizationEdit';import OrganizationTeams from'./OrganizationTeams';import OrganizationExecEnvList from'./OrganizationExecEnvList';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Organization(_ref){var setBreadcrumb=_ref.setBreadcrumb,me=_ref.me;var location=useLocation();var _useParams=useParams(),organizationId=_useParams.id;var match=useRouteMatch();var initialUpdate=useRef(true);var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$Promise$all,_yield$Promise$all2,data,credentialsRes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all([OrganizationsAPI.readDetail(organizationId),OrganizationsAPI.readGalaxyCredentials(organizationId)]);case 2:_yield$Promise$all=_context.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,2);data=_yield$Promise$all2[0].data;credentialsRes=_yield$Promise$all2[1];data.galaxy_credentials=credentialsRes.data.results;setBreadcrumb(data);return _context.abrupt(\"return\",{organization:data});case 9:case\"end\":return _context.stop();}}},_callee);})),[setBreadcrumb,organizationId]),{organization:null}),organization=_useRequest.result.organization,organizationLoading=_useRequest.isLoading,organizationError=_useRequest.error,loadOrganization=_useRequest.request;var _useRequest2=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _yield$Promise$all3,_yield$Promise$all4,notifAdminRes,auditorRes,adminRes;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Promise.all([OrganizationsAPI.read({page_size:1,role_level:'notification_admin_role'}),OrganizationsAPI.read({id:organizationId,role_level:'auditor_role'}),OrganizationsAPI.read({id:organizationId,role_level:'admin_role'})]);case 2:_yield$Promise$all3=_context2.sent;_yield$Promise$all4=_slicedToArray(_yield$Promise$all3,3);notifAdminRes=_yield$Promise$all4[0];auditorRes=_yield$Promise$all4[1];adminRes=_yield$Promise$all4[2];return _context2.abrupt(\"return\",{isNotifAdmin:notifAdminRes.data.results.length>0,isAuditorOfThisOrg:auditorRes.data.results.length>0,isAdminOfThisOrg:adminRes.data.results.length>0});case 8:case\"end\":return _context2.stop();}}},_callee2);})),[organizationId]),{isNotifAdmin:false,isAuditorOfThisOrg:false,isAdminOfThisOrg:false}),_useRequest2$result=_useRequest2.result,isNotifAdmin=_useRequest2$result.isNotifAdmin,isAuditorOfThisOrg=_useRequest2$result.isAuditorOfThisOrg,isAdminOfThisOrg=_useRequest2$result.isAdminOfThisOrg,rolesLoading=_useRequest2.isLoading,rolesError=_useRequest2.error,loadRoles=_useRequest2.request;useEffect(function(){loadOrganization();loadRoles();},[loadOrganization,loadRoles]);useEffect(function(){if(initialUpdate.current){initialUpdate.current=false;return;}if(location.pathname===\"/organizations/\".concat(organizationId,\"/details\")){loadOrganization();}},[loadOrganization,organizationId,location.pathname]);var canSeeNotificationsTab=me.is_system_auditor||isNotifAdmin||isAuditorOfThisOrg;var canToggleNotifications=isNotifAdmin&&(me.is_system_auditor||isAuditorOfThisOrg||isAdminOfThisOrg);var tabsArray=[{name:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CaretLeftIcon,{}),/*i18n*/i18n._(\"Back to Organizations\")]}),link:\"/organizations\",id:99,isBackButton:true},{name:/*i18n*/i18n._(\"Details\"),link:\"\".concat(match.url,\"/details\"),id:0},{name:/*i18n*/i18n._(\"Access\"),link:\"\".concat(match.url,\"/access\"),id:1},{name:/*i18n*/i18n._(\"Teams\"),link:\"\".concat(match.url,\"/teams\"),id:2},{name:/*i18n*/i18n._(\"Execution Environments\"),link:\"\".concat(match.url,\"/execution_environments\"),id:4}];if(canSeeNotificationsTab){tabsArray.push({name:/*i18n*/i18n._(\"Notifications\"),link:\"\".concat(match.url,\"/notifications\"),id:3});}var showCardHeader=true;if(location.pathname.endsWith('edit')){showCardHeader=false;}if(!organizationLoading&&organizationError){return/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(ContentError,{error:organizationError,children:organizationError.response.status===404&&/*#__PURE__*/_jsxs(\"span\",{children:[/*i18n*/i18n._(\"Organization not found.\"),' ',/*#__PURE__*/_jsx(Link,{to:\"/organizations\",children:/*i18n*/i18n._(\"View all Organizations.\")})]})})})});}if(!rolesLoading&&rolesError){return/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(ContentError,{error:rolesError})})});}return/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsxs(Card,{children:[showCardHeader&&/*#__PURE__*/_jsx(RoutedTabs,{tabsArray:tabsArray}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Redirect,{from:\"/organizations/:id\",to:\"/organizations/:id/details\",exact:true}),organization&&/*#__PURE__*/_jsx(Route,{path:\"/organizations/:id/edit\",children:/*#__PURE__*/_jsx(OrganizationEdit,{organization:organization})}),organization&&/*#__PURE__*/_jsx(Route,{path:\"/organizations/:id/details\",children:/*#__PURE__*/_jsx(OrganizationDetail,{organization:organization})}),organization&&/*#__PURE__*/_jsx(Route,{path:\"/organizations/:id/access\",children:/*#__PURE__*/_jsx(ResourceAccessList,{resource:organization,apiModel:OrganizationsAPI})}),/*#__PURE__*/_jsx(Route,{path:\"/organizations/:id/teams\",children:/*#__PURE__*/_jsx(OrganizationTeams,{id:Number(match.params.id)})}),canSeeNotificationsTab&&/*#__PURE__*/_jsx(Route,{path:\"/organizations/:id/notifications\",children:/*#__PURE__*/_jsx(NotificationList,{id:Number(match.params.id),canToggleNotifications:canToggleNotifications,apiModel:OrganizationsAPI,showApprovalsToggle:true})}),organization&&/*#__PURE__*/_jsx(Route,{path:\"/organizations/:id/execution_environments\",children:/*#__PURE__*/_jsx(OrganizationExecEnvList,{organization:organization})}),/*#__PURE__*/_jsx(Route,{path:\"*\",children:!organizationLoading&&!rolesLoading&&/*#__PURE__*/_jsx(ContentError,{isNotFound:true,children:match.params.id&&/*#__PURE__*/_jsx(Link,{to:\"/organizations/\".concat(match.params.id,\"/details\"),children:/*i18n*/i18n._(\"View Organization Details\")})})},\"not-found\"),\",\"]})]})});}export default Organization;export{Organization as _Organization};","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/Organization/Organization.js"],"names":["React","useCallback","useEffect","useRef","Switch","Route","Redirect","Link","useLocation","useParams","useRouteMatch","CaretLeftIcon","Card","PageSection","useRequest","RoutedTabs","ContentError","NotificationList","ResourceAccessList","OrganizationsAPI","OrganizationDetail","OrganizationEdit","OrganizationTeams","OrganizationExecEnvList","Organization","setBreadcrumb","me","location","organizationId","id","match","initialUpdate","Promise","all","readDetail","readGalaxyCredentials","data","credentialsRes","galaxy_credentials","results","organization","result","organizationLoading","isLoading","organizationError","error","loadOrganization","request","read","page_size","role_level","notifAdminRes","auditorRes","adminRes","isNotifAdmin","length","isAuditorOfThisOrg","isAdminOfThisOrg","rolesLoading","rolesError","loadRoles","current","pathname","canSeeNotificationsTab","is_system_auditor","canToggleNotifications","tabsArray","name","link","isBackButton","url","push","showCardHeader","endsWith","response","status","Number","params","_Organization"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useRef } from 'react';\n\nimport { t } from '@lingui/macro';\nimport {\n  Switch,\n  Route,\n  Redirect,\n  Link,\n  useLocation,\n  useParams,\n  useRouteMatch,\n} from 'react-router-dom';\nimport { CaretLeftIcon } from '@patternfly/react-icons';\nimport { Card, PageSection } from '@patternfly/react-core';\nimport useRequest from 'hooks/useRequest';\nimport RoutedTabs from 'components/RoutedTabs';\nimport ContentError from 'components/ContentError';\nimport NotificationList from 'components/NotificationList/NotificationList';\nimport { ResourceAccessList } from 'components/ResourceAccessList';\nimport { OrganizationsAPI } from 'api';\nimport OrganizationDetail from './OrganizationDetail';\nimport OrganizationEdit from './OrganizationEdit';\nimport OrganizationTeams from './OrganizationTeams';\nimport OrganizationExecEnvList from './OrganizationExecEnvList';\n\nfunction Organization({ setBreadcrumb, me }) {\n  const location = useLocation();\n  const { id: organizationId } = useParams();\n  const match = useRouteMatch();\n  const initialUpdate = useRef(true);\n\n  const {\n    result: { organization },\n    isLoading: organizationLoading,\n    error: organizationError,\n    request: loadOrganization,\n  } = useRequest(\n    useCallback(async () => {\n      const [{ data }, credentialsRes] = await Promise.all([\n        OrganizationsAPI.readDetail(organizationId),\n        OrganizationsAPI.readGalaxyCredentials(organizationId),\n      ]);\n      data.galaxy_credentials = credentialsRes.data.results;\n      setBreadcrumb(data);\n\n      return {\n        organization: data,\n      };\n    }, [setBreadcrumb, organizationId]),\n    {\n      organization: null,\n    }\n  );\n\n  const {\n    result: { isNotifAdmin, isAuditorOfThisOrg, isAdminOfThisOrg },\n    isLoading: rolesLoading,\n    error: rolesError,\n    request: loadRoles,\n  } = useRequest(\n    useCallback(async () => {\n      const [notifAdminRes, auditorRes, adminRes] = await Promise.all([\n        OrganizationsAPI.read({\n          page_size: 1,\n          role_level: 'notification_admin_role',\n        }),\n        OrganizationsAPI.read({\n          id: organizationId,\n          role_level: 'auditor_role',\n        }),\n        OrganizationsAPI.read({\n          id: organizationId,\n          role_level: 'admin_role',\n        }),\n      ]);\n\n      return {\n        isNotifAdmin: notifAdminRes.data.results.length > 0,\n        isAuditorOfThisOrg: auditorRes.data.results.length > 0,\n        isAdminOfThisOrg: adminRes.data.results.length > 0,\n      };\n    }, [organizationId]),\n    {\n      isNotifAdmin: false,\n      isAuditorOfThisOrg: false,\n      isAdminOfThisOrg: false,\n    }\n  );\n  useEffect(() => {\n    loadOrganization();\n    loadRoles();\n  }, [loadOrganization, loadRoles]);\n\n  useEffect(() => {\n    if (initialUpdate.current) {\n      initialUpdate.current = false;\n      return;\n    }\n\n    if (location.pathname === `/organizations/${organizationId}/details`) {\n      loadOrganization();\n    }\n  }, [loadOrganization, organizationId, location.pathname]);\n\n  const canSeeNotificationsTab =\n    me.is_system_auditor || isNotifAdmin || isAuditorOfThisOrg;\n  const canToggleNotifications =\n    isNotifAdmin &&\n    (me.is_system_auditor || isAuditorOfThisOrg || isAdminOfThisOrg);\n\n  const tabsArray = [\n    {\n      name: (\n        <>\n          <CaretLeftIcon />\n          {t`Back to Organizations`}\n        </>\n      ),\n      link: `/organizations`,\n      id: 99,\n      isBackButton: true,\n    },\n    { name: t`Details`, link: `${match.url}/details`, id: 0 },\n    { name: t`Access`, link: `${match.url}/access`, id: 1 },\n    { name: t`Teams`, link: `${match.url}/teams`, id: 2 },\n    {\n      name: t`Execution Environments`,\n      link: `${match.url}/execution_environments`,\n      id: 4,\n    },\n  ];\n\n  if (canSeeNotificationsTab) {\n    tabsArray.push({\n      name: t`Notifications`,\n      link: `${match.url}/notifications`,\n      id: 3,\n    });\n  }\n\n  let showCardHeader = true;\n\n  if (location.pathname.endsWith('edit')) {\n    showCardHeader = false;\n  }\n\n  if (!organizationLoading && organizationError) {\n    return (\n      <PageSection>\n        <Card>\n          <ContentError error={organizationError}>\n            {organizationError.response.status === 404 && (\n              <span>\n                {t`Organization not found.`}{' '}\n                <Link to=\"/organizations\">{t`View all Organizations.`}</Link>\n              </span>\n            )}\n          </ContentError>\n        </Card>\n      </PageSection>\n    );\n  }\n\n  if (!rolesLoading && rolesError) {\n    return (\n      <PageSection>\n        <Card>\n          <ContentError error={rolesError} />\n        </Card>\n      </PageSection>\n    );\n  }\n\n  return (\n    <PageSection>\n      <Card>\n        {showCardHeader && <RoutedTabs tabsArray={tabsArray} />}\n        <Switch>\n          <Redirect\n            from=\"/organizations/:id\"\n            to=\"/organizations/:id/details\"\n            exact\n          />\n          {organization && (\n            <Route path=\"/organizations/:id/edit\">\n              <OrganizationEdit organization={organization} />\n            </Route>\n          )}\n          {organization && (\n            <Route path=\"/organizations/:id/details\">\n              <OrganizationDetail organization={organization} />\n            </Route>\n          )}\n          {organization && (\n            <Route path=\"/organizations/:id/access\">\n              <ResourceAccessList\n                resource={organization}\n                apiModel={OrganizationsAPI}\n              />\n            </Route>\n          )}\n          <Route path=\"/organizations/:id/teams\">\n            <OrganizationTeams id={Number(match.params.id)} />\n          </Route>\n          {canSeeNotificationsTab && (\n            <Route path=\"/organizations/:id/notifications\">\n              <NotificationList\n                id={Number(match.params.id)}\n                canToggleNotifications={canToggleNotifications}\n                apiModel={OrganizationsAPI}\n                showApprovalsToggle\n              />\n            </Route>\n          )}\n          {organization && (\n            <Route path=\"/organizations/:id/execution_environments\">\n              <OrganizationExecEnvList organization={organization} />\n            </Route>\n          )}\n          <Route key=\"not-found\" path=\"*\">\n            {!organizationLoading && !rolesLoading && (\n              <ContentError isNotFound>\n                {match.params.id && (\n                  <Link to={`/organizations/${match.params.id}/details`}>\n                    {t`View Organization Details`}\n                  </Link>\n                )}\n              </ContentError>\n            )}\n          </Route>\n          ,\n        </Switch>\n      </Card>\n    </PageSection>\n  );\n}\n\nexport default Organization;\nexport { Organization as _Organization };\n"]},"metadata":{},"sourceType":"module"}