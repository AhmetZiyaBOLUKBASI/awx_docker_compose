{"ast":null,"code":"import{useEffect}from'react';import{useLocation,useHistory}from'react-router';import{PERSISTENT_FILTER_KEY}from'../../constants';export default function PersistentFilters(_ref){var pageKey=_ref.pageKey,children=_ref.children;var location=useLocation();var history=useHistory();useEffect(function(){if(!location.search.includes('restoreFilters=true')){return;}var filterString=sessionStorage.getItem(PERSISTENT_FILTER_KEY);var filter=filterString?JSON.parse(filterString):{qs:''};if(filter.pageKey===pageKey){history.replace(\"\".concat(location.pathname).concat(filter.qs));}else{history.replace(location.pathname);}},[history,location,pageKey]);useEffect(function(){var filter={pageKey:pageKey,qs:location.search};sessionStorage.setItem(PERSISTENT_FILTER_KEY,JSON.stringify(filter));},[location.search,pageKey]);return children;}","map":{"version":3,"sources":["/awx_devel/awx/ui/src/components/PersistentFilters/PersistentFilters.js"],"names":["useEffect","useLocation","useHistory","PERSISTENT_FILTER_KEY","PersistentFilters","pageKey","children","location","history","search","includes","filterString","sessionStorage","getItem","filter","JSON","parse","qs","replace","pathname","setItem","stringify"],"mappings":"AAAA,OAASA,SAAT,KAA0B,OAA1B,CACA,OAASC,WAAT,CAAsBC,UAAtB,KAAwC,cAAxC,CACA,OAASC,qBAAT,KAAsC,iBAAtC,CAEA,cAAe,SAASC,CAAAA,iBAAT,MAAkD,IAArBC,CAAAA,OAAqB,MAArBA,OAAqB,CAAZC,QAAY,MAAZA,QAAY,CAC/D,GAAMC,CAAAA,QAAQ,CAAGN,WAAW,EAA5B,CACA,GAAMO,CAAAA,OAAO,CAAGN,UAAU,EAA1B,CAEAF,SAAS,CAAC,UAAM,CACd,GAAI,CAACO,QAAQ,CAACE,MAAT,CAAgBC,QAAhB,CAAyB,qBAAzB,CAAL,CAAsD,CACpD,OACD,CAED,GAAMC,CAAAA,YAAY,CAAGC,cAAc,CAACC,OAAf,CAAuBV,qBAAvB,CAArB,CACA,GAAMW,CAAAA,MAAM,CAAGH,YAAY,CAAGI,IAAI,CAACC,KAAL,CAAWL,YAAX,CAAH,CAA8B,CAAEM,EAAE,CAAE,EAAN,CAAzD,CAEA,GAAIH,MAAM,CAACT,OAAP,GAAmBA,OAAvB,CAAgC,CAC9BG,OAAO,CAACU,OAAR,WAAmBX,QAAQ,CAACY,QAA5B,SAAuCL,MAAM,CAACG,EAA9C,GACD,CAFD,IAEO,CACLT,OAAO,CAACU,OAAR,CAAgBX,QAAQ,CAACY,QAAzB,EACD,CACF,CAbQ,CAaN,CAACX,OAAD,CAAUD,QAAV,CAAoBF,OAApB,CAbM,CAAT,CAeAL,SAAS,CAAC,UAAM,CACd,GAAMc,CAAAA,MAAM,CAAG,CACbT,OAAO,CAAPA,OADa,CAEbY,EAAE,CAAEV,QAAQ,CAACE,MAFA,CAAf,CAIAG,cAAc,CAACQ,OAAf,CAAuBjB,qBAAvB,CAA8CY,IAAI,CAACM,SAAL,CAAeP,MAAf,CAA9C,EACD,CANQ,CAMN,CAACP,QAAQ,CAACE,MAAV,CAAkBJ,OAAlB,CANM,CAAT,CAQA,MAAOC,CAAAA,QAAP,CACD","sourcesContent":["import { useEffect } from 'react';\nimport { useLocation, useHistory } from 'react-router';\nimport { PERSISTENT_FILTER_KEY } from '../../constants';\n\nexport default function PersistentFilters({ pageKey, children }) {\n  const location = useLocation();\n  const history = useHistory();\n\n  useEffect(() => {\n    if (!location.search.includes('restoreFilters=true')) {\n      return;\n    }\n\n    const filterString = sessionStorage.getItem(PERSISTENT_FILTER_KEY);\n    const filter = filterString ? JSON.parse(filterString) : { qs: '' };\n\n    if (filter.pageKey === pageKey) {\n      history.replace(`${location.pathname}${filter.qs}`);\n    } else {\n      history.replace(location.pathname);\n    }\n  }, [history, location, pageKey]);\n\n  useEffect(() => {\n    const filter = {\n      pageKey,\n      qs: location.search,\n    };\n    sessionStorage.setItem(PERSISTENT_FILTER_KEY, JSON.stringify(filter));\n  }, [location.search, pageKey]);\n\n  return children;\n}\n"]},"metadata":{},"sourceType":"module"}