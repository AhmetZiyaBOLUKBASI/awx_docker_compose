{"ast":null,"code":"import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _styled2 from\"styled-components\";import _styled from\"styled-components\";import React,{useContext,useEffect,useRef,useState}from'react';import*as d3 from'd3';import{WorkflowStateContext}from'contexts/Workflow';import{getScaleAndOffsetToFit,getTranslatePointsForZoom}from'components/Workflow/WorkflowUtils';import{WorkflowHelp,WorkflowLegend,WorkflowLinkHelp,WorkflowNodeHelp,WorkflowStartNode,WorkflowTools}from'components/Workflow';import WorkflowOutputLink from'./WorkflowOutputLink';import WorkflowOutputNode from'./WorkflowOutputNode';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var _StyledSvg=_styled(\"svg\").withConfig({displayName:\"WorkflowOutputGraph___StyledSvg\",componentId:\"sc-1w3fhkr-0\"})([\"display:flex;height:100%;background-color:#F6F6F6\"]);var _StyledDiv=_styled(\"div\").withConfig({displayName:\"WorkflowOutputGraph___StyledDiv\",componentId:\"sc-1w3fhkr-1\"})([\"position:absolute;top:75px;right:20px;display:flex\"]);function WorkflowOutputGraph(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),linkHelp=_useState2[0],setLinkHelp=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),nodeHelp=_useState4[0],setNodeHelp=_useState4[1];var _useState5=useState(100),_useState6=_slicedToArray(_useState5,2),zoomPercentage=_useState6[0],setZoomPercentage=_useState6[1];var svgRef=useRef(null);var gRef=useRef(null);var _useContext=useContext(WorkflowStateContext),links=_useContext.links,nodePositions=_useContext.nodePositions,nodes=_useContext.nodes,showLegend=_useContext.showLegend,showTools=_useContext.showTools;// This is the zoom function called by using the mousewheel/click and drag\nvar zoom=function zoom(event){var translation=[event.transform.x,event.transform.y];d3.select(gRef.current).attr('transform',\"translate(\".concat(translation,\") scale(\").concat(event.transform.k,\")\"));setZoomPercentage(event.transform.k*100);};var handlePan=function handlePan(direction){var transform=d3.zoomTransform(d3.select(svgRef.current).node());var xPos=transform.x,yPos=transform.y;var currentScale=transform.k;switch(direction){case'up':yPos-=50;break;case'down':yPos+=50;break;case'left':xPos-=50;break;case'right':xPos+=50;break;default:// Throw an error?\nbreak;}d3.select(svgRef.current).call(zoomRef.transform,d3.zoomIdentity.translate(xPos,yPos).scale(currentScale));};var handlePanToMiddle=function handlePanToMiddle(){var svgBoundingClientRect=svgRef.current.getBoundingClientRect();d3.select(svgRef.current).call(zoomRef.transform,d3.zoomIdentity.translate(0,svgBoundingClientRect.height/2-30).scale(1));setZoomPercentage(100);};var handleZoomChange=function handleZoomChange(newScale){var svgBoundingClientRect=svgRef.current.getBoundingClientRect();var currentScaleAndOffset=d3.zoomTransform(d3.select(svgRef.current).node());var _getTranslatePointsFo=getTranslatePointsForZoom(svgBoundingClientRect,currentScaleAndOffset,newScale),_getTranslatePointsFo2=_slicedToArray(_getTranslatePointsFo,2),translateX=_getTranslatePointsFo2[0],translateY=_getTranslatePointsFo2[1];d3.select(svgRef.current).call(zoomRef.transform,d3.zoomIdentity.translate(translateX,translateY).scale(newScale));setZoomPercentage(newScale*100);};var handleFitGraph=function handleFitGraph(){var _d3$zoomTransform=d3.zoomTransform(d3.select(svgRef.current).node()),currentScale=_d3$zoomTransform.k;var gBoundingClientRect=d3.select(gRef.current).node().getBoundingClientRect();var gBBoxDimensions=d3.select(gRef.current).node().getBBox();var svgBoundingClientRect=svgRef.current.getBoundingClientRect();var _getScaleAndOffsetToF=getScaleAndOffsetToFit(gBoundingClientRect,svgBoundingClientRect,gBBoxDimensions,currentScale),_getScaleAndOffsetToF2=_slicedToArray(_getScaleAndOffsetToF,2),scaleToFit=_getScaleAndOffsetToF2[0],yTranslate=_getScaleAndOffsetToF2[1];d3.select(svgRef.current).call(zoomRef.transform,d3.zoomIdentity.translate(0,yTranslate).scale(scaleToFit));setZoomPercentage(scaleToFit*100);};var zoomRef=d3.zoom().scaleExtent([0.1,2]).on('zoom',zoom);// Initialize the zoom\nuseEffect(function(){d3.select(svgRef.current).call(zoomRef);},[zoomRef]);// Attempt to zoom the graph to fit the available screen space\nuseEffect(function(){handleFitGraph();// We only want this to run once (when the component mounts)\n// Including handleFitGraph in the deps array will cause this to\n// run very frequently.\n// Discussion: https://github.com/facebook/create-react-app/issues/6880\n// and https://github.com/facebook/react/issues/15865 amongst others\n// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[(nodeHelp||linkHelp)&&/*#__PURE__*/_jsxs(WorkflowHelp,{children:[nodeHelp&&/*#__PURE__*/_jsx(WorkflowNodeHelp,{node:nodeHelp}),linkHelp&&/*#__PURE__*/_jsx(WorkflowLinkHelp,{link:linkHelp})]}),/*#__PURE__*/_jsx(_StyledSvg,{id:\"workflow-svg\",ref:svgRef,children:/*#__PURE__*/_jsx(\"g\",{id:\"workflow-g\",ref:gRef,children:nodePositions&&[/*#__PURE__*/_jsx(WorkflowStartNode,{showActionTooltip:false},\"start\"),links.map(function(link){return/*#__PURE__*/_jsx(WorkflowOutputLink,{link:link,mouseEnter:function mouseEnter(){return setLinkHelp(link);},mouseLeave:function mouseLeave(){return setLinkHelp(null);}},\"link-\".concat(link.source.id,\"-\").concat(link.target.id));}),nodes.map(function(node){if(node.id>1){return/*#__PURE__*/_jsx(WorkflowOutputNode,{mouseEnter:function mouseEnter(){return setNodeHelp(node);},mouseLeave:function mouseLeave(){return setNodeHelp(null);},node:node},\"node-\".concat(node.id));}return null;})]})}),/*#__PURE__*/_jsxs(_StyledDiv,{children:[showTools&&/*#__PURE__*/_jsx(WorkflowTools,{onFitGraph:handleFitGraph,onPan:handlePan,onPanToMiddle:handlePanToMiddle,onZoomChange:handleZoomChange,zoomPercentage:zoomPercentage}),showLegend&&/*#__PURE__*/_jsx(WorkflowLegend,{})]})]});}export default WorkflowOutputGraph;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/Job/WorkflowOutput/WorkflowOutputGraph.js"],"names":["React","useContext","useEffect","useRef","useState","d3","WorkflowStateContext","getScaleAndOffsetToFit","getTranslatePointsForZoom","WorkflowHelp","WorkflowLegend","WorkflowLinkHelp","WorkflowNodeHelp","WorkflowStartNode","WorkflowTools","WorkflowOutputLink","WorkflowOutputNode","WorkflowOutputGraph","linkHelp","setLinkHelp","nodeHelp","setNodeHelp","zoomPercentage","setZoomPercentage","svgRef","gRef","links","nodePositions","nodes","showLegend","showTools","zoom","event","translation","transform","x","y","select","current","attr","k","handlePan","direction","zoomTransform","node","xPos","yPos","currentScale","call","zoomRef","zoomIdentity","translate","scale","handlePanToMiddle","svgBoundingClientRect","getBoundingClientRect","height","handleZoomChange","newScale","currentScaleAndOffset","translateX","translateY","handleFitGraph","gBoundingClientRect","gBBoxDimensions","getBBox","scaleToFit","yTranslate","scaleExtent","on","map","link","source","id","target"],"mappings":"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","sourcesContent":["import 'styled-components/macro';\nimport React, { useContext, useEffect, useRef, useState } from 'react';\nimport * as d3 from 'd3';\nimport { WorkflowStateContext } from 'contexts/Workflow';\nimport {\n  getScaleAndOffsetToFit,\n  getTranslatePointsForZoom,\n} from 'components/Workflow/WorkflowUtils';\nimport {\n  WorkflowHelp,\n  WorkflowLegend,\n  WorkflowLinkHelp,\n  WorkflowNodeHelp,\n  WorkflowStartNode,\n  WorkflowTools,\n} from 'components/Workflow';\nimport WorkflowOutputLink from './WorkflowOutputLink';\nimport WorkflowOutputNode from './WorkflowOutputNode';\n\nfunction WorkflowOutputGraph() {\n  const [linkHelp, setLinkHelp] = useState();\n  const [nodeHelp, setNodeHelp] = useState();\n  const [zoomPercentage, setZoomPercentage] = useState(100);\n  const svgRef = useRef(null);\n  const gRef = useRef(null);\n\n  const { links, nodePositions, nodes, showLegend, showTools } =\n    useContext(WorkflowStateContext);\n\n  // This is the zoom function called by using the mousewheel/click and drag\n  const zoom = (event) => {\n    const translation = [event.transform.x, event.transform.y];\n    d3.select(gRef.current).attr(\n      'transform',\n      `translate(${translation}) scale(${event.transform.k})`\n    );\n    setZoomPercentage(event.transform.k * 100);\n  };\n\n  const handlePan = (direction) => {\n    const transform = d3.zoomTransform(d3.select(svgRef.current).node());\n    let { x: xPos, y: yPos } = transform;\n    const { k: currentScale } = transform;\n    switch (direction) {\n      case 'up':\n        yPos -= 50;\n        break;\n      case 'down':\n        yPos += 50;\n        break;\n      case 'left':\n        xPos -= 50;\n        break;\n      case 'right':\n        xPos += 50;\n        break;\n      default:\n        // Throw an error?\n        break;\n    }\n    d3.select(svgRef.current).call(\n      zoomRef.transform,\n      d3.zoomIdentity.translate(xPos, yPos).scale(currentScale)\n    );\n  };\n  const handlePanToMiddle = () => {\n    const svgBoundingClientRect = svgRef.current.getBoundingClientRect();\n    d3.select(svgRef.current).call(\n      zoomRef.transform,\n      d3.zoomIdentity\n        .translate(0, svgBoundingClientRect.height / 2 - 30)\n        .scale(1)\n    );\n    setZoomPercentage(100);\n  };\n\n  const handleZoomChange = (newScale) => {\n    const svgBoundingClientRect = svgRef.current.getBoundingClientRect();\n    const currentScaleAndOffset = d3.zoomTransform(\n      d3.select(svgRef.current).node()\n    );\n    const [translateX, translateY] = getTranslatePointsForZoom(\n      svgBoundingClientRect,\n      currentScaleAndOffset,\n      newScale\n    );\n    d3.select(svgRef.current).call(\n      zoomRef.transform,\n      d3.zoomIdentity.translate(translateX, translateY).scale(newScale)\n    );\n    setZoomPercentage(newScale * 100);\n  };\n  const handleFitGraph = () => {\n    const { k: currentScale } = d3.zoomTransform(\n      d3.select(svgRef.current).node()\n    );\n    const gBoundingClientRect = d3\n      .select(gRef.current)\n      .node()\n      .getBoundingClientRect();\n\n    const gBBoxDimensions = d3.select(gRef.current).node().getBBox();\n\n    const svgBoundingClientRect = svgRef.current.getBoundingClientRect();\n    const [scaleToFit, yTranslate] = getScaleAndOffsetToFit(\n      gBoundingClientRect,\n      svgBoundingClientRect,\n      gBBoxDimensions,\n      currentScale\n    );\n    d3.select(svgRef.current).call(\n      zoomRef.transform,\n      d3.zoomIdentity.translate(0, yTranslate).scale(scaleToFit)\n    );\n    setZoomPercentage(scaleToFit * 100);\n  };\n\n  const zoomRef = d3.zoom().scaleExtent([0.1, 2]).on('zoom', zoom);\n\n  // Initialize the zoom\n  useEffect(() => {\n    d3.select(svgRef.current).call(zoomRef);\n  }, [zoomRef]);\n  // Attempt to zoom the graph to fit the available screen space\n  useEffect(() => {\n    handleFitGraph();\n    // We only want this to run once (when the component mounts)\n    // Including handleFitGraph in the deps array will cause this to\n    // run very frequently.\n    // Discussion: https://github.com/facebook/create-react-app/issues/6880\n    // and https://github.com/facebook/react/issues/15865 amongst others\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return (\n    <>\n      {(nodeHelp || linkHelp) && (\n        <WorkflowHelp>\n          {nodeHelp && <WorkflowNodeHelp node={nodeHelp} />}\n          {linkHelp && <WorkflowLinkHelp link={linkHelp} />}\n        </WorkflowHelp>\n      )}\n      <svg\n        id=\"workflow-svg\"\n        ref={svgRef}\n        css=\"display: flex; height: 100%; background-color: #F6F6F6\"\n      >\n        <g id=\"workflow-g\" ref={gRef}>\n          {nodePositions && [\n            <WorkflowStartNode key=\"start\" showActionTooltip={false} />,\n            links.map((link) => (\n              <WorkflowOutputLink\n                key={`link-${link.source.id}-${link.target.id}`}\n                link={link}\n                mouseEnter={() => setLinkHelp(link)}\n                mouseLeave={() => setLinkHelp(null)}\n              />\n            )),\n            nodes.map((node) => {\n              if (node.id > 1) {\n                return (\n                  <WorkflowOutputNode\n                    key={`node-${node.id}`}\n                    mouseEnter={() => setNodeHelp(node)}\n                    mouseLeave={() => setNodeHelp(null)}\n                    node={node}\n                  />\n                );\n              }\n              return null;\n            }),\n          ]}\n        </g>\n      </svg>\n      <div css=\"position: absolute; top: 75px;right: 20px;display: flex\">\n        {showTools && (\n          <WorkflowTools\n            onFitGraph={handleFitGraph}\n            onPan={handlePan}\n            onPanToMiddle={handlePanToMiddle}\n            onZoomChange={handleZoomChange}\n            zoomPercentage={zoomPercentage}\n          />\n        )}\n        {showLegend && <WorkflowLegend />}\n      </div>\n    </>\n  );\n}\nexport default WorkflowOutputGraph;\n"]},"metadata":{},"sourceType":"module"}