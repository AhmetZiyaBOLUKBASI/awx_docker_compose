{"ast":null,"code":"import _objectWithoutProperties from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _excluded=[\"organization\"];import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from'react';import{useHistory}from'react-router-dom';import{Card,PageSection}from'@patternfly/react-core';import{CardBody}from'components/Card';import{OrganizationsAPI}from'api';import UserForm from'../shared/UserForm';import{jsx as _jsx}from\"react/jsx-runtime\";function UserAdd(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),formSubmitError=_useState2[0],setFormSubmitError=_useState2[1];var history=useHistory();var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values){var organization,userValues,_yield$OrganizationsA,id;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setFormSubmitError(null);organization=values.organization,userValues=_objectWithoutProperties(values,_excluded);_context.prev=2;_context.next=5;return OrganizationsAPI.createUser(organization.id,userValues);case 5:_yield$OrganizationsA=_context.sent;id=_yield$OrganizationsA.data.id;history.push(\"/users/\".concat(id,\"/details\"));_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);setFormSubmitError(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[2,10]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var handleCancel=function handleCancel(){history.push(\"/users\");};return/*#__PURE__*/_jsx(PageSection,{children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsx(UserForm,{handleCancel:handleCancel,handleSubmit:handleSubmit,submitError:formSubmitError})})})});}export default UserAdd;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/User/UserAdd/UserAdd.js"],"names":["React","useState","useHistory","Card","PageSection","CardBody","OrganizationsAPI","UserForm","UserAdd","formSubmitError","setFormSubmitError","history","handleSubmit","values","organization","userValues","createUser","id","data","push","handleCancel"],"mappings":"kdAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,IAAT,CAAeC,WAAf,KAAkC,wBAAlC,CACA,OAASC,QAAT,KAAyB,iBAAzB,CACA,OAASC,gBAAT,KAAiC,KAAjC,CACA,MAAOC,CAAAA,QAAP,KAAqB,oBAArB,C,2CAEA,QAASC,CAAAA,OAAT,EAAmB,CACjB,cAA8CP,QAAQ,CAAC,IAAD,CAAtD,wCAAOQ,eAAP,eAAwBC,kBAAxB,eACA,GAAMC,CAAAA,OAAO,CAAGT,UAAU,EAA1B,CAEA,GAAMU,CAAAA,YAAY,0FAAG,iBAAOC,MAAP,uKACnBH,kBAAkB,CAAC,IAAD,CAAlB,CACQI,YAFW,CAEqBD,MAFrB,CAEXC,YAFW,CAEMC,UAFN,0BAEqBF,MAFrB,kDAMPP,CAAAA,gBAAgB,CAACU,UAAjB,CAA4BF,YAAY,CAACG,EAAzC,CAA6CF,UAA7C,CANO,4CAKPE,EALO,uBAKfC,IALe,CAKPD,EALO,CAOjBN,OAAO,CAACQ,IAAR,kBAAuBF,EAAvB,cAPiB,iFASjBP,kBAAkB,aAAlB,CATiB,qEAAH,kBAAZE,CAAAA,YAAY,4CAAlB,CAaA,GAAMQ,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzBT,OAAO,CAACQ,IAAR,WACD,CAFD,CAIA,mBACE,KAAC,WAAD,wBACE,KAAC,IAAD,wBACE,KAAC,QAAD,wBACE,KAAC,QAAD,EACE,YAAY,CAAEC,YADhB,CAEE,YAAY,CAAER,YAFhB,CAGE,WAAW,CAAEH,eAHf,EADF,EADF,EADF,EADF,CAaD,CAED,cAAeD,CAAAA,OAAf","sourcesContent":["import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Card, PageSection } from '@patternfly/react-core';\nimport { CardBody } from 'components/Card';\nimport { OrganizationsAPI } from 'api';\nimport UserForm from '../shared/UserForm';\n\nfunction UserAdd() {\n  const [formSubmitError, setFormSubmitError] = useState(null);\n  const history = useHistory();\n\n  const handleSubmit = async (values) => {\n    setFormSubmitError(null);\n    const { organization, ...userValues } = values;\n    try {\n      const {\n        data: { id },\n      } = await OrganizationsAPI.createUser(organization.id, userValues);\n      history.push(`/users/${id}/details`);\n    } catch (error) {\n      setFormSubmitError(error);\n    }\n  };\n\n  const handleCancel = () => {\n    history.push(`/users`);\n  };\n\n  return (\n    <PageSection>\n      <Card>\n        <CardBody>\n          <UserForm\n            handleCancel={handleCancel}\n            handleSubmit={handleSubmit}\n            submitError={formSubmitError}\n          />\n        </CardBody>\n      </Card>\n    </PageSection>\n  );\n}\n\nexport default UserAdd;\n"]},"metadata":{},"sourceType":"module"}