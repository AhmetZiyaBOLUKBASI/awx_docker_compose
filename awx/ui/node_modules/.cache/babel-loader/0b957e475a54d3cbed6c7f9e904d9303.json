{"ast":null,"code":"import _toConsumableArray from \"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\n/* eslint-disable @typescript-eslint/consistent-type-definitions */\nimport * as React from 'react';\nimport { createPopper as defaultCreatePopper } from '../popper-core/popper';\nimport { useIsomorphicLayoutEffect } from '../../../../helpers/useIsomorphicLayout';\n\nvar isEqual = function isEqual(a, b) {\n  return JSON.stringify(a) === JSON.stringify(b);\n};\n/**\n * Simple ponyfill for Object.fromEntries\n */\n\n\nvar fromEntries = function fromEntries(entries) {\n  return entries.reduce(function (acc, _ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        key = _ref2[0],\n        value = _ref2[1];\n\n    acc[key] = value;\n    return acc;\n  }, {});\n};\n\nvar EMPTY_MODIFIERS = [];\nexport var usePopper = function usePopper(referenceElement, popperElement) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var prevOptions = React.useRef(null);\n  var optionsWithDefaults = {\n    onFirstUpdate: options.onFirstUpdate,\n    placement: options.placement || 'bottom',\n    strategy: options.strategy || 'absolute',\n    modifiers: options.modifiers || EMPTY_MODIFIERS\n  };\n\n  var _React$useState = React.useState({\n    styles: {\n      popper: {\n        position: optionsWithDefaults.strategy,\n        left: '0',\n        top: '0'\n      }\n    },\n    attributes: {}\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      state = _React$useState2[0],\n      setState = _React$useState2[1];\n\n  var updateStateModifier = React.useMemo(function () {\n    return {\n      name: 'updateState',\n      enabled: true,\n      phase: 'write',\n      // eslint-disable-next-line no-shadow\n      fn: function fn(_ref3) {\n        var state = _ref3.state;\n        var elements = Object.keys(state.elements);\n        setState({\n          styles: fromEntries(elements.map(function (element) {\n            return [element, state.styles[element] || {}];\n          })),\n          attributes: fromEntries(elements.map(function (element) {\n            return [element, state.attributes[element]];\n          }))\n        });\n      },\n      requires: ['computeStyles']\n    };\n  }, []);\n  var popperOptions = React.useMemo(function () {\n    var newOptions = {\n      onFirstUpdate: optionsWithDefaults.onFirstUpdate,\n      placement: optionsWithDefaults.placement,\n      strategy: optionsWithDefaults.strategy,\n      modifiers: [].concat(_toConsumableArray(optionsWithDefaults.modifiers), [updateStateModifier, {\n        name: 'applyStyles',\n        enabled: false\n      }])\n    };\n\n    if (isEqual(prevOptions.current, newOptions)) {\n      return prevOptions.current || newOptions;\n    } else {\n      prevOptions.current = newOptions;\n      return newOptions;\n    }\n  }, [optionsWithDefaults.onFirstUpdate, optionsWithDefaults.placement, optionsWithDefaults.strategy, optionsWithDefaults.modifiers, updateStateModifier]);\n  var popperInstanceRef = React.useRef();\n  useIsomorphicLayoutEffect(function () {\n    if (popperInstanceRef && popperInstanceRef.current) {\n      popperInstanceRef.current.setOptions(popperOptions);\n    }\n  }, [popperOptions]);\n  useIsomorphicLayoutEffect(function () {\n    if (referenceElement == null || popperElement == null) {\n      return;\n    }\n\n    var createPopper = options.createPopper || defaultCreatePopper;\n    var popperInstance = createPopper(referenceElement, popperElement, popperOptions);\n    popperInstanceRef.current = popperInstance;\n    return function () {\n      popperInstance.destroy();\n      popperInstanceRef.current = null;\n    };\n  }, [referenceElement, popperElement, options.createPopper]);\n  return {\n    state: popperInstanceRef.current ? popperInstanceRef.current.state : null,\n    styles: state.styles,\n    attributes: state.attributes,\n    update: popperInstanceRef.current ? popperInstanceRef.current.update : null,\n    forceUpdate: popperInstanceRef.current ? popperInstanceRef.current.forceUpdate : null\n  };\n};","map":{"version":3,"sources":["/awx_devel/awx/ui/node_modules/@patternfly/react-core/src/helpers/Popper/thirdparty/react-popper/usePopper.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/consistent-type-definitions */\n\nimport * as React from 'react';\nimport { createPopper as defaultCreatePopper, Options as PopperOptions, VirtualElement } from '../popper-core/popper';\nimport { useIsomorphicLayoutEffect } from '../../../../helpers/useIsomorphicLayout';\n\ntype $Shape<T extends object> = Partial<T>;\n\nconst isEqual = (a: any, b: any) => JSON.stringify(a) === JSON.stringify(b);\n\n/**\n * Simple ponyfill for Object.fromEntries\n */\nconst fromEntries = (entries: [string, any][]) =>\n  entries.reduce((acc: any, [key, value]) => {\n    acc[key] = value;\n    return acc;\n  }, {});\n\ntype Options = $Shape<\n  PopperOptions & {\n    createPopper: typeof defaultCreatePopper;\n  }\n>;\n\ntype State = {\n  styles: {\n    [key: string]: $Shape<CSSStyleDeclaration>;\n  };\n  attributes: {\n    [key: string]: {\n      [key: string]: string;\n    };\n  };\n};\n\nconst EMPTY_MODIFIERS: any = [];\n\nexport const usePopper = (\n  referenceElement: (Element | VirtualElement) | null | undefined,\n  popperElement: HTMLElement | null | undefined,\n  options: Options = {}\n) => {\n  const prevOptions = React.useRef<PopperOptions | null | undefined>(null);\n\n  const optionsWithDefaults = {\n    onFirstUpdate: options.onFirstUpdate,\n    placement: options.placement || 'bottom',\n    strategy: options.strategy || 'absolute',\n    modifiers: options.modifiers || EMPTY_MODIFIERS\n  };\n\n  const [state, setState] = React.useState<State>({\n    styles: {\n      popper: {\n        position: optionsWithDefaults.strategy,\n        left: '0',\n        top: '0'\n      }\n    },\n    attributes: {}\n  });\n\n  const updateStateModifier = React.useMemo(\n    () => ({\n      name: 'updateState',\n      enabled: true,\n      phase: 'write',\n      // eslint-disable-next-line no-shadow\n      fn: ({ state }: any) => {\n        const elements = Object.keys(state.elements);\n\n        setState({\n          styles: fromEntries(elements.map(element => [element, state.styles[element] || {}])),\n          attributes: fromEntries(elements.map(element => [element, state.attributes[element]]))\n        });\n      },\n      requires: ['computeStyles']\n    }),\n    []\n  );\n\n  const popperOptions = React.useMemo(() => {\n    const newOptions = {\n      onFirstUpdate: optionsWithDefaults.onFirstUpdate,\n      placement: optionsWithDefaults.placement,\n      strategy: optionsWithDefaults.strategy,\n      modifiers: [...optionsWithDefaults.modifiers, updateStateModifier, { name: 'applyStyles', enabled: false }]\n    };\n\n    if (isEqual(prevOptions.current, newOptions)) {\n      return prevOptions.current || newOptions;\n    } else {\n      prevOptions.current = newOptions;\n      return newOptions;\n    }\n  }, [\n    optionsWithDefaults.onFirstUpdate,\n    optionsWithDefaults.placement,\n    optionsWithDefaults.strategy,\n    optionsWithDefaults.modifiers,\n    updateStateModifier\n  ]);\n\n  const popperInstanceRef = React.useRef<any>();\n\n  useIsomorphicLayoutEffect(() => {\n    if (popperInstanceRef && popperInstanceRef.current) {\n      popperInstanceRef.current.setOptions(popperOptions);\n    }\n  }, [popperOptions]);\n\n  useIsomorphicLayoutEffect(() => {\n    if (referenceElement == null || popperElement == null) {\n      return;\n    }\n\n    const createPopper = options.createPopper || defaultCreatePopper;\n    const popperInstance = createPopper(referenceElement, popperElement, popperOptions);\n\n    popperInstanceRef.current = popperInstance;\n\n    return () => {\n      popperInstance.destroy();\n      popperInstanceRef.current = null;\n    };\n  }, [referenceElement, popperElement, options.createPopper]);\n\n  return {\n    state: popperInstanceRef.current ? popperInstanceRef.current.state : null,\n    styles: state.styles,\n    attributes: state.attributes,\n    update: popperInstanceRef.current ? popperInstanceRef.current.update : null,\n    forceUpdate: popperInstanceRef.current ? popperInstanceRef.current.forceUpdate : null\n  };\n};\n"]},"metadata":{},"sourceType":"module"}