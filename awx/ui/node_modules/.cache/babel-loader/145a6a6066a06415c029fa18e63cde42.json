{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _taggedTemplateLiteral from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import React,{useCallback}from'react';import{Link,useHistory}from'react-router-dom';import styled from'styled-components';import{Button}from'@patternfly/react-core';import AlertModal from'components/AlertModal';import{CardBody,CardActionsRow}from'components/Card';import ErrorDetail from'components/ErrorDetail';import DeleteButton from'components/DeleteButton';import{Detail,DetailList,UserDateDetail,DetailBadge}from'components/DetailList';import useRequest,{useDismissableError}from'hooks/useRequest';import{InstanceGroupsAPI}from'api';import{relatedResourceDeleteRequests}from'util/getRelatedResourceDeleteDetails';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Unavailable=styled.span(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  color: var(--pf-global--danger-color--200);\\n\"])));function InstanceGroupDetails(_ref){var instanceGroup=_ref.instanceGroup;var id=instanceGroup.id,name=instanceGroup.name;var history=useHistory();var _useRequest=useRequest(useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return InstanceGroupsAPI.destroy(id);case 2:history.push(\"/instance_groups\");case 3:case\"end\":return _context.stop();}}},_callee);})),[id,history])),deleteInstanceGroup=_useRequest.request,isLoading=_useRequest.isLoading,deleteError=_useRequest.error;var _useDismissableError=useDismissableError(deleteError),error=_useDismissableError.error,dismissError=_useDismissableError.dismissError;var deleteDetailsRequests=relatedResourceDeleteRequests.instanceGroup(instanceGroup);return/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsxs(DetailList,{children:[/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Name\"),value:instanceGroup.name,dataCy:\"instance-group-detail-name\"}),/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Type\"),value:instanceGroup.is_container_group?/*i18n*/i18n._(\"Container group\"):/*i18n*/i18n._(\"Instance group\"),dataCy:\"instance-group-type\"}),/*#__PURE__*/_jsx(DetailBadge,{label:/*i18n*/i18n._(\"Policy instance minimum\"),dataCy:\"instance-group-policy-instance-minimum\",helpText:/*i18n*/i18n._(\"Minimum number of instances that will be automatically\\nassigned to this group when new instances come online.\"),content:instanceGroup.policy_instance_minimum}),/*#__PURE__*/_jsx(DetailBadge,{label:/*i18n*/i18n._(\"Policy instance percentage\"),helpText:/*i18n*/i18n._(\"Minimum percentage of all instances that will be automatically\\nassigned to this group when new instances come online.\"),dataCy:\"instance-group-policy-instance-percentage\",content:\"\".concat(instanceGroup.policy_instance_percentage,\" %\")}),instanceGroup.capacity?/*#__PURE__*/_jsx(DetailBadge,{label:/*i18n*/i18n._(\"Used capacity\"),content:\"\".concat(Math.round(100-instanceGroup.percent_capacity_remaining),\" %\"),dataCy:\"instance-group-used-capacity\"}):/*#__PURE__*/_jsx(Detail,{label:/*i18n*/i18n._(\"Used capacity\"),value:/*#__PURE__*/_jsx(Unavailable,{children:/*i18n*/i18n._(\"Unavailable\")}),dataCy:\"instance-group-used-capacity\"}),/*#__PURE__*/_jsx(UserDateDetail,{label:/*i18n*/i18n._(\"Created\"),date:instanceGroup.created,user:instanceGroup.summary_fields.created_by}),/*#__PURE__*/_jsx(UserDateDetail,{label:/*i18n*/i18n._(\"Last Modified\"),date:instanceGroup.modified,user:instanceGroup.summary_fields.modified_by})]}),/*#__PURE__*/_jsxs(CardActionsRow,{children:[instanceGroup.summary_fields.user_capabilities&&instanceGroup.summary_fields.user_capabilities.edit&&/*#__PURE__*/_jsx(Button,{ouiaId:\"instance-group-detail-edit-button\",\"aria-label\":/*i18n*/i18n._(\"edit\"),component:Link,to:\"/instance_groups/\".concat(id,\"/edit\"),children:/*i18n*/i18n._(\"Edit\")}),instanceGroup.summary_fields.user_capabilities&&instanceGroup.summary_fields.user_capabilities.delete&&/*#__PURE__*/_jsx(DeleteButton,{ouiaId:\"instance-group-detail-delete-button\",name:name,modalTitle:/*i18n*/i18n._(\"Delete instance group\"),onConfirm:deleteInstanceGroup,isDisabled:isLoading,deleteDetailsRequests:deleteDetailsRequests,deleteMessage:/*i18n*/i18n._(\"This instance group is currently being by other resources. Are you sure you want to delete it?\"),children:/*i18n*/i18n._(\"Delete\")})]}),error&&/*#__PURE__*/_jsx(AlertModal,{isOpen:error,onClose:dismissError,title:/*i18n*/i18n._(\"Error\"),variant:\"error\",children:/*#__PURE__*/_jsx(ErrorDetail,{error:error})})]});}export default InstanceGroupDetails;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/InstanceGroup/InstanceGroupDetails/InstanceGroupDetails.js"],"names":["React","useCallback","Link","useHistory","styled","Button","AlertModal","CardBody","CardActionsRow","ErrorDetail","DeleteButton","Detail","DetailList","UserDateDetail","DetailBadge","useRequest","useDismissableError","InstanceGroupsAPI","relatedResourceDeleteRequests","Unavailable","span","InstanceGroupDetails","instanceGroup","id","name","history","destroy","push","deleteInstanceGroup","request","isLoading","deleteError","error","dismissError","deleteDetailsRequests","is_container_group","policy_instance_minimum","policy_instance_percentage","capacity","Math","round","percent_capacity_remaining","created","summary_fields","created_by","modified","modified_by","user_capabilities","edit","delete"],"mappings":"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","sourcesContent":["import React, { useCallback } from 'react';\n\nimport { t } from '@lingui/macro';\nimport { Link, useHistory } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { Button } from '@patternfly/react-core';\n\nimport AlertModal from 'components/AlertModal';\nimport { CardBody, CardActionsRow } from 'components/Card';\nimport ErrorDetail from 'components/ErrorDetail';\nimport DeleteButton from 'components/DeleteButton';\nimport {\n  Detail,\n  DetailList,\n  UserDateDetail,\n  DetailBadge,\n} from 'components/DetailList';\nimport useRequest, { useDismissableError } from 'hooks/useRequest';\nimport { InstanceGroupsAPI } from 'api';\nimport { relatedResourceDeleteRequests } from 'util/getRelatedResourceDeleteDetails';\n\nconst Unavailable = styled.span`\n  color: var(--pf-global--danger-color--200);\n`;\n\nfunction InstanceGroupDetails({ instanceGroup }) {\n  const { id, name } = instanceGroup;\n\n  const history = useHistory();\n\n  const {\n    request: deleteInstanceGroup,\n    isLoading,\n    error: deleteError,\n  } = useRequest(\n    useCallback(async () => {\n      await InstanceGroupsAPI.destroy(id);\n      history.push(`/instance_groups`);\n    }, [id, history])\n  );\n\n  const { error, dismissError } = useDismissableError(deleteError);\n  const deleteDetailsRequests =\n    relatedResourceDeleteRequests.instanceGroup(instanceGroup);\n  return (\n    <CardBody>\n      <DetailList>\n        <Detail\n          label={t`Name`}\n          value={instanceGroup.name}\n          dataCy=\"instance-group-detail-name\"\n        />\n        <Detail\n          label={t`Type`}\n          value={\n            instanceGroup.is_container_group\n              ? t`Container group`\n              : t`Instance group`\n          }\n          dataCy=\"instance-group-type\"\n        />\n        <DetailBadge\n          label={t`Policy instance minimum`}\n          dataCy=\"instance-group-policy-instance-minimum\"\n          helpText={t`Minimum number of instances that will be automatically\n          assigned to this group when new instances come online.`}\n          content={instanceGroup.policy_instance_minimum}\n        />\n        <DetailBadge\n          label={t`Policy instance percentage`}\n          helpText={t`Minimum percentage of all instances that will be automatically\n          assigned to this group when new instances come online.`}\n          dataCy=\"instance-group-policy-instance-percentage\"\n          content={`${instanceGroup.policy_instance_percentage} %`}\n        />\n        {instanceGroup.capacity ? (\n          <DetailBadge\n            label={t`Used capacity`}\n            content={`${Math.round(\n              100 - instanceGroup.percent_capacity_remaining\n            )} %`}\n            dataCy=\"instance-group-used-capacity\"\n          />\n        ) : (\n          <Detail\n            label={t`Used capacity`}\n            value={<Unavailable>{t`Unavailable`}</Unavailable>}\n            dataCy=\"instance-group-used-capacity\"\n          />\n        )}\n\n        <UserDateDetail\n          label={t`Created`}\n          date={instanceGroup.created}\n          user={instanceGroup.summary_fields.created_by}\n        />\n        <UserDateDetail\n          label={t`Last Modified`}\n          date={instanceGroup.modified}\n          user={instanceGroup.summary_fields.modified_by}\n        />\n      </DetailList>\n\n      <CardActionsRow>\n        {instanceGroup.summary_fields.user_capabilities &&\n          instanceGroup.summary_fields.user_capabilities.edit && (\n            <Button\n              ouiaId=\"instance-group-detail-edit-button\"\n              aria-label={t`edit`}\n              component={Link}\n              to={`/instance_groups/${id}/edit`}\n            >\n              {t`Edit`}\n            </Button>\n          )}\n        {instanceGroup.summary_fields.user_capabilities &&\n          instanceGroup.summary_fields.user_capabilities.delete && (\n            <DeleteButton\n              ouiaId=\"instance-group-detail-delete-button\"\n              name={name}\n              modalTitle={t`Delete instance group`}\n              onConfirm={deleteInstanceGroup}\n              isDisabled={isLoading}\n              deleteDetailsRequests={deleteDetailsRequests}\n              deleteMessage={t`This instance group is currently being by other resources. Are you sure you want to delete it?`}\n            >\n              {t`Delete`}\n            </DeleteButton>\n          )}\n      </CardActionsRow>\n      {error && (\n        <AlertModal\n          isOpen={error}\n          onClose={dismissError}\n          title={t`Error`}\n          variant=\"error\"\n        >\n          <ErrorDetail error={error} />\n        </AlertModal>\n      )}\n    </CardBody>\n  );\n}\n\nexport default InstanceGroupDetails;\n"]},"metadata":{},"sourceType":"module"}