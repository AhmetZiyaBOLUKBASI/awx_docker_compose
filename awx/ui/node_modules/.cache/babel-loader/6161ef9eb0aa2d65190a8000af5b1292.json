{"ast":null,"code":"import _objectSpread from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{i18n}from\"@lingui/core\";import React from'react';import{Tr,Td}from'@patternfly/react-table';import{Link}from'react-router-dom';import{WorkflowApproval}from'types';import{formatDateString}from'util/dates';import StatusLabel from'components/StatusLabel';import JobCancelButton from'components/JobCancelButton';import{ActionItem,ActionsTd}from'components/PaginatedTable';import{getPendingLabel,getStatus,getTooltip}from'../shared/WorkflowApprovalUtils';import WorkflowApprovalButton from'../shared/WorkflowApprovalButton';import WorkflowDenyButton from'../shared/WorkflowDenyButton';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function WorkflowApprovalListItem(_ref){var _workflowApproval$sum;var workflowApproval=_ref.workflowApproval,isSelected=_ref.isSelected,onSelect=_ref.onSelect,detailUrl=_ref.detailUrl,rowIndex=_ref.rowIndex;var hasBeenActedOn=workflowApproval.status==='successful'||workflowApproval.status==='failed'||workflowApproval.status==='canceled';var labelId=\"check-action-\".concat(workflowApproval.id);var workflowJob=workflowApproval===null||workflowApproval===void 0?void 0:(_workflowApproval$sum=workflowApproval.summary_fields)===null||_workflowApproval$sum===void 0?void 0:_workflowApproval$sum.source_workflow_job;var status=getStatus(workflowApproval);return/*#__PURE__*/_jsxs(Tr,{id:\"workflow-approval-row-\".concat(workflowApproval.id),children:[/*#__PURE__*/_jsx(Td,{select:{rowIndex:rowIndex,isSelected:isSelected,onSelect:onSelect},dataLabel:/*i18n*/i18n._(\"Selected\")}),/*#__PURE__*/_jsx(Td,{id:labelId,dataLabel:/*i18n*/i18n._(\"Name\"),children:/*#__PURE__*/_jsx(Link,{to:\"\".concat(detailUrl),children:workflowJob&&workflowJob!==null&&workflowJob!==void 0&&workflowJob.id?/*#__PURE__*/_jsx(\"b\",{children:\"\".concat(workflowJob===null||workflowJob===void 0?void 0:workflowJob.id,\" - \").concat(workflowApproval===null||workflowApproval===void 0?void 0:workflowApproval.name)}):/*#__PURE__*/_jsxs(\"b\",{children:[/*i18n*/i18n._(\"Deleted\"),\" \",\"- \".concat(workflowApproval===null||workflowApproval===void 0?void 0:workflowApproval.name)]})})}),/*#__PURE__*/_jsx(Td,{children:workflowJob&&workflowJob!==null&&workflowJob!==void 0&&workflowJob.id?/*#__PURE__*/_jsx(Link,{to:\"/jobs/workflow/\".concat(workflowJob===null||workflowJob===void 0?void 0:workflowJob.id),children:\"\".concat(workflowJob===null||workflowJob===void 0?void 0:workflowJob.id,\" - \").concat(workflowJob===null||workflowJob===void 0?void 0:workflowJob.name)}):/*i18n*/i18n._(\"Deleted\")}),/*#__PURE__*/_jsx(Td,{dataLabel:/*i18n*/i18n._(\"Started\"),children:formatDateString(workflowApproval.started)}),/*#__PURE__*/_jsx(Td,{dataLabel:/*i18n*/i18n._(\"Status\"),children:workflowApproval.status==='pending'?/*#__PURE__*/_jsx(StatusLabel,{status:workflowApproval.status,children:getPendingLabel(workflowApproval)}):/*#__PURE__*/_jsx(StatusLabel,{tooltipContent:getTooltip(workflowApproval),status:status})}),/*#__PURE__*/_jsxs(ActionsTd,{dataLabel:/*i18n*/i18n._(\"Actions\"),children:[/*#__PURE__*/_jsx(ActionItem,{visible:true,tooltip:hasBeenActedOn?/*i18n*/i18n._(\"This has already been acted on\"):/*i18n*/i18n._(\"Approve\"),children:/*#__PURE__*/_jsx(WorkflowApprovalButton,{workflowApproval:workflowApproval})}),/*#__PURE__*/_jsx(ActionItem,{visible:true,tooltip:hasBeenActedOn?/*i18n*/i18n._(\"This has already been acted on\"):/*i18n*/i18n._(\"Deny\"),children:/*#__PURE__*/_jsx(WorkflowDenyButton,{workflowApproval:workflowApproval})}),/*#__PURE__*/_jsx(ActionItem,{visible:true,children:/*#__PURE__*/_jsx(JobCancelButton,{title:/*i18n*/i18n._(\"Cancel Workflow\"),showIconButton:true,job:_objectSpread(_objectSpread({},workflowApproval.summary_fields.source_workflow_job),{},{type:'workflow_job'}),buttonText:/*i18n*/i18n._(\"Cancel Workflow\"),isDisabled:hasBeenActedOn,tooltip:hasBeenActedOn?/*i18n*/i18n._(\"This has already been acted on\"):/*i18n*/i18n._(\"Cancel\"),cancelationMessage:/*i18n*/i18n._(\"This will cancel all subsequent nodes in this workflow\")})})]})]});}export default WorkflowApprovalListItem;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/screens/WorkflowApproval/WorkflowApprovalList/WorkflowApprovalListItem.js"],"names":["React","Tr","Td","Link","WorkflowApproval","formatDateString","StatusLabel","JobCancelButton","ActionItem","ActionsTd","getPendingLabel","getStatus","getTooltip","WorkflowApprovalButton","WorkflowDenyButton","WorkflowApprovalListItem","workflowApproval","isSelected","onSelect","detailUrl","rowIndex","hasBeenActedOn","status","labelId","id","workflowJob","summary_fields","source_workflow_job","name","started","type"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { t } from '@lingui/macro';\nimport { string, bool, func } from 'prop-types';\nimport { Tr, Td } from '@patternfly/react-table';\nimport { Link } from 'react-router-dom';\nimport { WorkflowApproval } from 'types';\nimport { formatDateString } from 'util/dates';\nimport StatusLabel from 'components/StatusLabel';\nimport JobCancelButton from 'components/JobCancelButton';\nimport { ActionItem, ActionsTd } from 'components/PaginatedTable';\nimport {\n  getPendingLabel,\n  getStatus,\n  getTooltip,\n} from '../shared/WorkflowApprovalUtils';\nimport WorkflowApprovalButton from '../shared/WorkflowApprovalButton';\nimport WorkflowDenyButton from '../shared/WorkflowDenyButton';\n\nfunction WorkflowApprovalListItem({\n  workflowApproval,\n  isSelected,\n  onSelect,\n  detailUrl,\n  rowIndex,\n}) {\n  const hasBeenActedOn =\n    workflowApproval.status === 'successful' ||\n    workflowApproval.status === 'failed' ||\n    workflowApproval.status === 'canceled';\n  const labelId = `check-action-${workflowApproval.id}`;\n  const workflowJob = workflowApproval?.summary_fields?.source_workflow_job;\n  const status = getStatus(workflowApproval);\n  return (\n    <Tr id={`workflow-approval-row-${workflowApproval.id}`}>\n      <Td\n        select={{\n          rowIndex,\n          isSelected,\n          onSelect,\n        }}\n        dataLabel={t`Selected`}\n      />\n      <Td id={labelId} dataLabel={t`Name`}>\n        <Link to={`${detailUrl}`}>\n          {workflowJob && workflowJob?.id ? (\n            <b>{`${workflowJob?.id} - ${workflowApproval?.name}`}</b>\n          ) : (\n            <b>\n              {t`Deleted`} {`- ${workflowApproval?.name}`}\n            </b>\n          )}\n        </Link>\n      </Td>\n      <Td>\n        {workflowJob && workflowJob?.id ? (\n          <Link to={`/jobs/workflow/${workflowJob?.id}`}>\n            {`${workflowJob?.id} - ${workflowJob?.name}`}\n          </Link>\n        ) : (\n          t`Deleted`\n        )}\n      </Td>\n      <Td dataLabel={t`Started`}>\n        {formatDateString(workflowApproval.started)}\n      </Td>\n      <Td dataLabel={t`Status`}>\n        {workflowApproval.status === 'pending' ? (\n          <StatusLabel status={workflowApproval.status}>\n            {getPendingLabel(workflowApproval)}\n          </StatusLabel>\n        ) : (\n          <StatusLabel\n            tooltipContent={getTooltip(workflowApproval)}\n            status={status}\n          />\n        )}\n      </Td>\n      <ActionsTd dataLabel={t`Actions`}>\n        <ActionItem\n          visible\n          tooltip={\n            hasBeenActedOn ? t`This has already been acted on` : t`Approve`\n          }\n        >\n          <WorkflowApprovalButton workflowApproval={workflowApproval} />\n        </ActionItem>\n        <ActionItem\n          visible\n          tooltip={hasBeenActedOn ? t`This has already been acted on` : t`Deny`}\n        >\n          <WorkflowDenyButton workflowApproval={workflowApproval} />\n        </ActionItem>\n        <ActionItem visible>\n          <JobCancelButton\n            title={t`Cancel Workflow`}\n            showIconButton\n            job={{\n              ...workflowApproval.summary_fields.source_workflow_job,\n              type: 'workflow_job',\n            }}\n            buttonText={t`Cancel Workflow`}\n            isDisabled={hasBeenActedOn}\n            tooltip={\n              hasBeenActedOn ? t`This has already been acted on` : t`Cancel`\n            }\n            cancelationMessage={t`This will cancel all subsequent nodes in this workflow\n            `}\n          />\n        </ActionItem>\n      </ActionsTd>\n    </Tr>\n  );\n}\n\nWorkflowApprovalListItem.propTypes = {\n  workflowApproval: WorkflowApproval.isRequired,\n  detailUrl: string.isRequired,\n  isSelected: bool.isRequired,\n  onSelect: func.isRequired,\n};\n\nexport default WorkflowApprovalListItem;\n"]},"metadata":{},"sourceType":"module"}