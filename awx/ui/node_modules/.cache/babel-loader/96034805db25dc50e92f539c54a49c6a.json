{"ast":null,"code":"import _classCallCheck from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/createClass.js\";/* eslint-disable default-param-last */import axios from'axios';import{encodeQueryString}from'util/qs';import debounce from'util/debounce';import{SESSION_TIMEOUT_KEY}from'../constants';var updateStorage=debounce(function(key,val){window.localStorage.setItem(key,val);window.dispatchEvent(new Event('storage'));},500);var defaultHttp=axios.create({xsrfCookieName:'csrftoken',xsrfHeaderName:'X-CSRFToken',paramsSerializer:function paramsSerializer(params){return encodeQueryString(params);}});defaultHttp.interceptors.response.use(function(response){var timeout=response===null||response===void 0?void 0:response.headers['session-timeout'];if(timeout){var timeoutDate=new Date().getTime()+timeout*1000;updateStorage(SESSION_TIMEOUT_KEY,String(timeoutDate));}return response;});var Base=/*#__PURE__*/function(){function Base(){var http=arguments.length>0&&arguments[0]!==undefined?arguments[0]:defaultHttp;var baseURL=arguments.length>1?arguments[1]:undefined;_classCallCheck(this,Base);this.http=http;this.baseUrl=baseURL;}_createClass(Base,[{key:\"create\",value:function create(data){return this.http.post(this.baseUrl,data);}},{key:\"destroy\",value:function destroy(id){return this.http.delete(\"\".concat(this.baseUrl).concat(id,\"/\"));}},{key:\"read\",value:function read(params){return this.http.get(this.baseUrl,{params:params});}},{key:\"readDetail\",value:function readDetail(id){return this.http.get(\"\".concat(this.baseUrl).concat(id,\"/\"));}},{key:\"readOptions\",value:function readOptions(){return this.http.options(this.baseUrl);}},{key:\"replace\",value:function replace(id,data){return this.http.put(\"\".concat(this.baseUrl).concat(id,\"/\"),data);}},{key:\"update\",value:function update(id,data){return this.http.patch(\"\".concat(this.baseUrl).concat(id,\"/\"),data);}},{key:\"copy\",value:function copy(id,data){return this.http.post(\"\".concat(this.baseUrl).concat(id,\"/copy/\"),data);}}]);return Base;}();export default Base;","map":{"version":3,"sources":["/awx_devel/awx/ui/src/api/Base.js"],"names":["axios","encodeQueryString","debounce","SESSION_TIMEOUT_KEY","updateStorage","key","val","window","localStorage","setItem","dispatchEvent","Event","defaultHttp","create","xsrfCookieName","xsrfHeaderName","paramsSerializer","params","interceptors","response","use","timeout","headers","timeoutDate","Date","getTime","String","Base","http","baseURL","baseUrl","data","post","id","delete","get","options","put","patch"],"mappings":"4MAAA,uCACA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,iBAAT,KAAkC,SAAlC,CACA,MAAOC,CAAAA,QAAP,KAAqB,eAArB,CACA,OAASC,mBAAT,KAAoC,cAApC,CAEA,GAAMC,CAAAA,aAAa,CAAGF,QAAQ,CAAC,SAACG,GAAD,CAAMC,GAAN,CAAc,CAC3CC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4BJ,GAA5B,CAAiCC,GAAjC,EACAC,MAAM,CAACG,aAAP,CAAqB,GAAIC,CAAAA,KAAJ,CAAU,SAAV,CAArB,EACD,CAH6B,CAG3B,GAH2B,CAA9B,CAKA,GAAMC,CAAAA,WAAW,CAAGZ,KAAK,CAACa,MAAN,CAAa,CAC/BC,cAAc,CAAE,WADe,CAE/BC,cAAc,CAAE,aAFe,CAG/BC,gBAH+B,2BAGdC,MAHc,CAGN,CACvB,MAAOhB,CAAAA,iBAAiB,CAACgB,MAAD,CAAxB,CACD,CAL8B,CAAb,CAApB,CAQAL,WAAW,CAACM,YAAZ,CAAyBC,QAAzB,CAAkCC,GAAlC,CAAsC,SAACD,QAAD,CAAc,CAClD,GAAME,CAAAA,OAAO,CAAGF,QAAH,SAAGA,QAAH,iBAAGA,QAAQ,CAAEG,OAAV,CAAkB,iBAAlB,CAAhB,CACA,GAAID,OAAJ,CAAa,CACX,GAAME,CAAAA,WAAW,CAAG,GAAIC,CAAAA,IAAJ,GAAWC,OAAX,GAAuBJ,OAAO,CAAG,IAArD,CACAjB,aAAa,CAACD,mBAAD,CAAsBuB,MAAM,CAACH,WAAD,CAA5B,CAAb,CACD,CACD,MAAOJ,CAAAA,QAAP,CACD,CAPD,E,GASMQ,CAAAA,I,yBACJ,eAAyC,IAA7BC,CAAAA,IAA6B,2DAAtBhB,WAAsB,IAATiB,CAAAA,OAAS,sEACvC,KAAKD,IAAL,CAAYA,IAAZ,CACA,KAAKE,OAAL,CAAeD,OAAf,CACD,C,uCAED,gBAAOE,IAAP,CAAa,CACX,MAAO,MAAKH,IAAL,CAAUI,IAAV,CAAe,KAAKF,OAApB,CAA6BC,IAA7B,CAAP,CACD,C,uBAED,iBAAQE,EAAR,CAAY,CACV,MAAO,MAAKL,IAAL,CAAUM,MAAV,WAAoB,KAAKJ,OAAzB,SAAmCG,EAAnC,MAAP,CACD,C,oBAED,cAAKhB,MAAL,CAAa,CACX,MAAO,MAAKW,IAAL,CAAUO,GAAV,CAAc,KAAKL,OAAnB,CAA4B,CACjCb,MAAM,CAANA,MADiC,CAA5B,CAAP,CAGD,C,0BAED,oBAAWgB,EAAX,CAAe,CACb,MAAO,MAAKL,IAAL,CAAUO,GAAV,WAAiB,KAAKL,OAAtB,SAAgCG,EAAhC,MAAP,CACD,C,2BAED,sBAAc,CACZ,MAAO,MAAKL,IAAL,CAAUQ,OAAV,CAAkB,KAAKN,OAAvB,CAAP,CACD,C,uBAED,iBAAQG,EAAR,CAAYF,IAAZ,CAAkB,CAChB,MAAO,MAAKH,IAAL,CAAUS,GAAV,WAAiB,KAAKP,OAAtB,SAAgCG,EAAhC,MAAuCF,IAAvC,CAAP,CACD,C,sBAED,gBAAOE,EAAP,CAAWF,IAAX,CAAiB,CACf,MAAO,MAAKH,IAAL,CAAUU,KAAV,WAAmB,KAAKR,OAAxB,SAAkCG,EAAlC,MAAyCF,IAAzC,CAAP,CACD,C,oBAED,cAAKE,EAAL,CAASF,IAAT,CAAe,CACb,MAAO,MAAKH,IAAL,CAAUI,IAAV,WAAkB,KAAKF,OAAvB,SAAiCG,EAAjC,WAA6CF,IAA7C,CAAP,CACD,C,oBAGH,cAAeJ,CAAAA,IAAf","sourcesContent":["/* eslint-disable default-param-last */\nimport axios from 'axios';\nimport { encodeQueryString } from 'util/qs';\nimport debounce from 'util/debounce';\nimport { SESSION_TIMEOUT_KEY } from '../constants';\n\nconst updateStorage = debounce((key, val) => {\n  window.localStorage.setItem(key, val);\n  window.dispatchEvent(new Event('storage'));\n}, 500);\n\nconst defaultHttp = axios.create({\n  xsrfCookieName: 'csrftoken',\n  xsrfHeaderName: 'X-CSRFToken',\n  paramsSerializer(params) {\n    return encodeQueryString(params);\n  },\n});\n\ndefaultHttp.interceptors.response.use((response) => {\n  const timeout = response?.headers['session-timeout'];\n  if (timeout) {\n    const timeoutDate = new Date().getTime() + timeout * 1000;\n    updateStorage(SESSION_TIMEOUT_KEY, String(timeoutDate));\n  }\n  return response;\n});\n\nclass Base {\n  constructor(http = defaultHttp, baseURL) {\n    this.http = http;\n    this.baseUrl = baseURL;\n  }\n\n  create(data) {\n    return this.http.post(this.baseUrl, data);\n  }\n\n  destroy(id) {\n    return this.http.delete(`${this.baseUrl}${id}/`);\n  }\n\n  read(params) {\n    return this.http.get(this.baseUrl, {\n      params,\n    });\n  }\n\n  readDetail(id) {\n    return this.http.get(`${this.baseUrl}${id}/`);\n  }\n\n  readOptions() {\n    return this.http.options(this.baseUrl);\n  }\n\n  replace(id, data) {\n    return this.http.put(`${this.baseUrl}${id}/`, data);\n  }\n\n  update(id, data) {\n    return this.http.patch(`${this.baseUrl}${id}/`, data);\n  }\n\n  copy(id, data) {\n    return this.http.post(`${this.baseUrl}${id}/copy/`, data);\n  }\n}\n\nexport default Base;\n"]},"metadata":{},"sourceType":"module"}