{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { RRule } from './rrule';\nimport dateutil from './dateutil';\nimport { includes } from './helpers';\nimport { iterSet } from './iterset';\nimport { rrulestr } from './rrulestr';\nimport { optionsToString } from './optionstostring';\n\nfunction createGetterSetter(fieldName) {\n  var _this = this;\n\n  return function (field) {\n    if (field !== undefined) {\n      _this[\"_\".concat(fieldName)] = field;\n    }\n\n    if (_this[\"_\".concat(fieldName)] !== undefined) {\n      return _this[\"_\".concat(fieldName)];\n    }\n\n    for (var i = 0; i < _this._rrule.length; i++) {\n      var field_1 = _this._rrule[i].origOptions[fieldName];\n\n      if (field_1) {\n        return field_1;\n      }\n    }\n  };\n}\n\nvar RRuleSet =\n/** @class */\nfunction (_super) {\n  __extends(RRuleSet, _super);\n  /**\n   *\n   * @param {Boolean?} noCache\n   * The same stratagy as RRule on cache, default to false\n   * @constructor\n   */\n\n\n  function RRuleSet(noCache) {\n    if (noCache === void 0) {\n      noCache = false;\n    }\n\n    var _this = _super.call(this, {}, noCache) || this;\n\n    _this.dtstart = createGetterSetter.apply(_this, ['dtstart']);\n    _this.tzid = createGetterSetter.apply(_this, ['tzid']);\n    _this._rrule = [];\n    _this._rdate = [];\n    _this._exrule = [];\n    _this._exdate = [];\n    return _this;\n  }\n\n  RRuleSet.prototype._iter = function (iterResult) {\n    return iterSet(iterResult, this._rrule, this._exrule, this._rdate, this._exdate, this.tzid());\n  };\n  /**\n   * Adds an RRule to the set\n   *\n   * @param {RRule}\n   */\n\n\n  RRuleSet.prototype.rrule = function (rrule) {\n    _addRule(rrule, this._rrule);\n  };\n  /**\n   * Adds an EXRULE to the set\n   *\n   * @param {RRule}\n   */\n\n\n  RRuleSet.prototype.exrule = function (rrule) {\n    _addRule(rrule, this._exrule);\n  };\n  /**\n   * Adds an RDate to the set\n   *\n   * @param {Date}\n   */\n\n\n  RRuleSet.prototype.rdate = function (date) {\n    _addDate(date, this._rdate);\n  };\n  /**\n   * Adds an EXDATE to the set\n   *\n   * @param {Date}\n   */\n\n\n  RRuleSet.prototype.exdate = function (date) {\n    _addDate(date, this._exdate);\n  };\n  /**\n   * Get list of included rrules in this recurrence set.\n   *\n   * @return List of rrules\n   */\n\n\n  RRuleSet.prototype.rrules = function () {\n    return this._rrule.map(function (e) {\n      return rrulestr(e.toString());\n    });\n  };\n  /**\n   * Get list of excluded rrules in this recurrence set.\n   *\n   * @return List of exrules\n   */\n\n\n  RRuleSet.prototype.exrules = function () {\n    return this._exrule.map(function (e) {\n      return rrulestr(e.toString());\n    });\n  };\n  /**\n   * Get list of included datetimes in this recurrence set.\n   *\n   * @return List of rdates\n   */\n\n\n  RRuleSet.prototype.rdates = function () {\n    return this._rdate.map(function (e) {\n      return new Date(e.getTime());\n    });\n  };\n  /**\n   * Get list of included datetimes in this recurrence set.\n   *\n   * @return List of exdates\n   */\n\n\n  RRuleSet.prototype.exdates = function () {\n    return this._exdate.map(function (e) {\n      return new Date(e.getTime());\n    });\n  };\n\n  RRuleSet.prototype.valueOf = function () {\n    var result = [];\n\n    if (!this._rrule.length && this._dtstart) {\n      result = result.concat(optionsToString({\n        dtstart: this._dtstart\n      }));\n    }\n\n    this._rrule.forEach(function (rrule) {\n      result = result.concat(rrule.toString().split('\\n'));\n    });\n\n    this._exrule.forEach(function (exrule) {\n      result = result.concat(exrule.toString().split('\\n').map(function (line) {\n        return line.replace(/^RRULE:/, 'EXRULE:');\n      }).filter(function (line) {\n        return !/^DTSTART/.test(line);\n      }));\n    });\n\n    if (this._rdate.length) {\n      result.push(rdatesToString('RDATE', this._rdate, this.tzid()));\n    }\n\n    if (this._exdate.length) {\n      result.push(rdatesToString('EXDATE', this._exdate, this.tzid()));\n    }\n\n    return result;\n  };\n  /**\n   * to generate recurrence field such as:\n   * DTSTART:19970902T010000Z\n   * RRULE:FREQ=YEARLY;COUNT=2;BYDAY=TU\n   * RRULE:FREQ=YEARLY;COUNT=1;BYDAY=TH\n   */\n\n\n  RRuleSet.prototype.toString = function () {\n    return this.valueOf().join('\\n');\n  };\n  /**\n   * Create a new RRuleSet Object completely base on current instance\n   */\n\n\n  RRuleSet.prototype.clone = function () {\n    var rrs = new RRuleSet(!!this._cache);\n\n    this._rrule.forEach(function (rule) {\n      return rrs.rrule(rule.clone());\n    });\n\n    this._exrule.forEach(function (rule) {\n      return rrs.exrule(rule.clone());\n    });\n\n    this._rdate.forEach(function (date) {\n      return rrs.rdate(new Date(date.getTime()));\n    });\n\n    this._exdate.forEach(function (date) {\n      return rrs.exdate(new Date(date.getTime()));\n    });\n\n    return rrs;\n  };\n\n  return RRuleSet;\n}(RRule);\n\nexport { RRuleSet };\n\nfunction _addRule(rrule, collection) {\n  if (!(rrule instanceof RRule)) {\n    throw new TypeError(String(rrule) + ' is not RRule instance');\n  }\n\n  if (!includes(collection.map(String), String(rrule))) {\n    collection.push(rrule);\n  }\n}\n\nfunction _addDate(date, collection) {\n  if (!(date instanceof Date)) {\n    throw new TypeError(String(date) + ' is not Date instance');\n  }\n\n  if (!includes(collection.map(Number), Number(date))) {\n    collection.push(date);\n    dateutil.sort(collection);\n  }\n}\n\nfunction rdatesToString(param, rdates, tzid) {\n  var isUTC = !tzid || tzid.toUpperCase() === 'UTC';\n  var header = isUTC ? \"\".concat(param, \":\") : \"\".concat(param, \";TZID=\").concat(tzid, \":\");\n  var dateString = rdates.map(function (rdate) {\n    return dateutil.timeToUntilString(rdate.valueOf(), isUTC);\n  }).join(',');\n  return \"\".concat(header).concat(dateString);\n}","map":{"version":3,"sources":["../../src/rruleset.ts"],"names":[],"mappings":"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","sourcesContent":["import { __extends } from \"tslib\";\nimport { RRule } from './rrule';\nimport dateutil from './dateutil';\nimport { includes } from './helpers';\nimport { iterSet } from './iterset';\nimport { rrulestr } from './rrulestr';\nimport { optionsToString } from './optionstostring';\nfunction createGetterSetter(fieldName) {\n    var _this = this;\n    return function (field) {\n        if (field !== undefined) {\n            _this[\"_\".concat(fieldName)] = field;\n        }\n        if (_this[\"_\".concat(fieldName)] !== undefined) {\n            return _this[\"_\".concat(fieldName)];\n        }\n        for (var i = 0; i < _this._rrule.length; i++) {\n            var field_1 = _this._rrule[i].origOptions[fieldName];\n            if (field_1) {\n                return field_1;\n            }\n        }\n    };\n}\nvar RRuleSet = /** @class */ (function (_super) {\n    __extends(RRuleSet, _super);\n    /**\n     *\n     * @param {Boolean?} noCache\n     * The same stratagy as RRule on cache, default to false\n     * @constructor\n     */\n    function RRuleSet(noCache) {\n        if (noCache === void 0) { noCache = false; }\n        var _this = _super.call(this, {}, noCache) || this;\n        _this.dtstart = createGetterSetter.apply(_this, ['dtstart']);\n        _this.tzid = createGetterSetter.apply(_this, ['tzid']);\n        _this._rrule = [];\n        _this._rdate = [];\n        _this._exrule = [];\n        _this._exdate = [];\n        return _this;\n    }\n    RRuleSet.prototype._iter = function (iterResult) {\n        return iterSet(iterResult, this._rrule, this._exrule, this._rdate, this._exdate, this.tzid());\n    };\n    /**\n     * Adds an RRule to the set\n     *\n     * @param {RRule}\n     */\n    RRuleSet.prototype.rrule = function (rrule) {\n        _addRule(rrule, this._rrule);\n    };\n    /**\n     * Adds an EXRULE to the set\n     *\n     * @param {RRule}\n     */\n    RRuleSet.prototype.exrule = function (rrule) {\n        _addRule(rrule, this._exrule);\n    };\n    /**\n     * Adds an RDate to the set\n     *\n     * @param {Date}\n     */\n    RRuleSet.prototype.rdate = function (date) {\n        _addDate(date, this._rdate);\n    };\n    /**\n     * Adds an EXDATE to the set\n     *\n     * @param {Date}\n     */\n    RRuleSet.prototype.exdate = function (date) {\n        _addDate(date, this._exdate);\n    };\n    /**\n     * Get list of included rrules in this recurrence set.\n     *\n     * @return List of rrules\n     */\n    RRuleSet.prototype.rrules = function () {\n        return this._rrule.map(function (e) { return rrulestr(e.toString()); });\n    };\n    /**\n     * Get list of excluded rrules in this recurrence set.\n     *\n     * @return List of exrules\n     */\n    RRuleSet.prototype.exrules = function () {\n        return this._exrule.map(function (e) { return rrulestr(e.toString()); });\n    };\n    /**\n     * Get list of included datetimes in this recurrence set.\n     *\n     * @return List of rdates\n     */\n    RRuleSet.prototype.rdates = function () {\n        return this._rdate.map(function (e) { return new Date(e.getTime()); });\n    };\n    /**\n     * Get list of included datetimes in this recurrence set.\n     *\n     * @return List of exdates\n     */\n    RRuleSet.prototype.exdates = function () {\n        return this._exdate.map(function (e) { return new Date(e.getTime()); });\n    };\n    RRuleSet.prototype.valueOf = function () {\n        var result = [];\n        if (!this._rrule.length && this._dtstart) {\n            result = result.concat(optionsToString({ dtstart: this._dtstart }));\n        }\n        this._rrule.forEach(function (rrule) {\n            result = result.concat(rrule.toString().split('\\n'));\n        });\n        this._exrule.forEach(function (exrule) {\n            result = result.concat(exrule\n                .toString()\n                .split('\\n')\n                .map(function (line) { return line.replace(/^RRULE:/, 'EXRULE:'); })\n                .filter(function (line) { return !/^DTSTART/.test(line); }));\n        });\n        if (this._rdate.length) {\n            result.push(rdatesToString('RDATE', this._rdate, this.tzid()));\n        }\n        if (this._exdate.length) {\n            result.push(rdatesToString('EXDATE', this._exdate, this.tzid()));\n        }\n        return result;\n    };\n    /**\n     * to generate recurrence field such as:\n     * DTSTART:19970902T010000Z\n     * RRULE:FREQ=YEARLY;COUNT=2;BYDAY=TU\n     * RRULE:FREQ=YEARLY;COUNT=1;BYDAY=TH\n     */\n    RRuleSet.prototype.toString = function () {\n        return this.valueOf().join('\\n');\n    };\n    /**\n     * Create a new RRuleSet Object completely base on current instance\n     */\n    RRuleSet.prototype.clone = function () {\n        var rrs = new RRuleSet(!!this._cache);\n        this._rrule.forEach(function (rule) { return rrs.rrule(rule.clone()); });\n        this._exrule.forEach(function (rule) { return rrs.exrule(rule.clone()); });\n        this._rdate.forEach(function (date) { return rrs.rdate(new Date(date.getTime())); });\n        this._exdate.forEach(function (date) { return rrs.exdate(new Date(date.getTime())); });\n        return rrs;\n    };\n    return RRuleSet;\n}(RRule));\nexport { RRuleSet };\nfunction _addRule(rrule, collection) {\n    if (!(rrule instanceof RRule)) {\n        throw new TypeError(String(rrule) + ' is not RRule instance');\n    }\n    if (!includes(collection.map(String), String(rrule))) {\n        collection.push(rrule);\n    }\n}\nfunction _addDate(date, collection) {\n    if (!(date instanceof Date)) {\n        throw new TypeError(String(date) + ' is not Date instance');\n    }\n    if (!includes(collection.map(Number), Number(date))) {\n        collection.push(date);\n        dateutil.sort(collection);\n    }\n}\nfunction rdatesToString(param, rdates, tzid) {\n    var isUTC = !tzid || tzid.toUpperCase() === 'UTC';\n    var header = isUTC ? \"\".concat(param, \":\") : \"\".concat(param, \";TZID=\").concat(tzid, \":\");\n    var dateString = rdates\n        .map(function (rdate) { return dateutil.timeToUntilString(rdate.valueOf(), isUTC); })\n        .join(',');\n    return \"\".concat(header).concat(dateString);\n}\n"]},"metadata":{},"sourceType":"module"}