{"ast":null,"code":"import _asyncToGenerator from\"/awx_devel/awx/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/awx_devel/awx/ui/node_modules/@babel/runtime/regenerator/index.js\";import{i18n}from\"@lingui/core\";import{UnifiedJobTemplatesAPI,CredentialsAPI,InventoriesAPI,InventorySourcesAPI,JobTemplatesAPI,ProjectsAPI,WorkflowJobTemplateNodesAPI,WorkflowJobTemplatesAPI,CredentialInputSourcesAPI,TeamsAPI,NotificationTemplatesAPI,ExecutionEnvironmentsAPI,ApplicationsAPI,OrganizationsAPI}from'api';export function getRelatedResourceDeleteCounts(_x){return _getRelatedResourceDeleteCounts.apply(this,arguments);}function _getRelatedResourceDeleteCounts(){_getRelatedResourceDeleteCounts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(requests){var results,error,hasCount;return _regeneratorRuntime.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:results={};error=null;hasCount=false;_context16.prev=3;_context16.next=6;return Promise.all(requests.map(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(_ref3){var request,label,_yield$request,count;return _regeneratorRuntime.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:request=_ref3.request,label=_ref3.label;_context15.next=3;return request();case 3:_yield$request=_context15.sent;count=_yield$request.data.count;if(count>0){results[label]=count;hasCount=true;}case 6:case\"end\":return _context15.stop();}}},_callee15);}));return function(_x2){return _ref4.apply(this,arguments);};}()));case 6:_context16.next=11;break;case 8:_context16.prev=8;_context16.t0=_context16[\"catch\"](3);error=_context16.t0;case 11:return _context16.abrupt(\"return\",{results:hasCount&&results,error:error});case 12:case\"end\":return _context16.stop();}}},_callee16,null,[[3,8]]);}));return _getRelatedResourceDeleteCounts.apply(this,arguments);}export var relatedResourceDeleteRequests={credential:function credential(selected){return[{request:function request(){return JobTemplatesAPI.read({credentials:selected.id});},label:/*i18n*/i18n._(\"Job Templates\")},{request:function request(){return ProjectsAPI.read({credentials:selected.id});},label:/*i18n*/i18n._(\"Projects\")},{request:function request(){return InventorySourcesAPI.read({credentials__id:selected.id});},label:/*i18n*/i18n._(\"Inventory Sources\")},{request:function request(){return CredentialInputSourcesAPI.read({source_credential:selected.id});},label:/*i18n*/i18n._(\"Credential Input Sources\")},{request:function request(){return ExecutionEnvironmentsAPI.read({credential:selected.id});},label:/*i18n*/i18n._(\"Execution Environments\")}];},credentialType:function credentialType(selected){return[{request:function(){var _request=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",CredentialsAPI.read({credential_type__id:selected.id}));case 1:case\"end\":return _context.stop();}}},_callee);}));function request(){return _request.apply(this,arguments);}return request;}(),label:/*i18n*/i18n._(\"Credentials\")}];},inventory:function inventory(selected){return[{request:function(){var _request2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",JobTemplatesAPI.read({inventory:selected.id}));case 1:case\"end\":return _context2.stop();}}},_callee2);}));function request(){return _request2.apply(this,arguments);}return request;}(),label:/*i18n*/i18n._(\"Job Templates\")},{request:function request(){return WorkflowJobTemplatesAPI.read({inventory:selected.id});},label:/*i18n*/i18n._(\"Workflow Job Template\")}];},inventorySource:function inventorySource(inventorySourceId){return[{request:function(){var _request3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:return _context3.abrupt(\"return\",WorkflowJobTemplateNodesAPI.read({unified_job_template:inventorySourceId}));case 1:case\"end\":return _context3.stop();}}},_callee3);}));function request(){return _request3.apply(this,arguments);}return request;}(),label:/*i18n*/i18n._(\"Workflow Job Template Nodes\")},{request:function(){var _request4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:return _context4.abrupt(\"return\",InventorySourcesAPI.readGroups(inventorySourceId));case 1:case\"end\":return _context4.stop();}}},_callee4);}));function request(){return _request4.apply(this,arguments);}return request;}(),label:/*i18n*/i18n._(\"Groups\")},{request:function(){var _request5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:return _context5.abrupt(\"return\",InventorySourcesAPI.readHosts(inventorySourceId));case 1:case\"end\":return _context5.stop();}}},_callee5);}));function request(){return _request5.apply(this,arguments);}return request;}(),label:/*i18n*/i18n._(\"Hosts\")}];},project:function project(selected){return[{request:function request(){return JobTemplatesAPI.read({project:selected.id});},label:/*i18n*/i18n._(\"Job Templates\")},{request:function request(){return WorkflowJobTemplateNodesAPI.read({unified_job_template:selected.id});},label:/*i18n*/i18n._(\"Workflow Job Templates\")},{request:function request(){return InventorySourcesAPI.read({source_project:selected.id});},label:/*i18n*/i18n._(\"Inventory Sources\")}];},template:function template(selected){return[{request:function(){var _request6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:return _context6.abrupt(\"return\",WorkflowJobTemplateNodesAPI.read({unified_job_template:selected.id}));case 1:case\"end\":return _context6.stop();}}},_callee6);}));function request(){return _request6.apply(this,arguments);}return request;}(),label:[/*i18n*/i18n._(\"Workflow Job Template Nodes\")]}];},organization:function organization(selected){return[{request:function(){var _request7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:return _context7.abrupt(\"return\",CredentialsAPI.read({organization:selected.id}));case 1:case\"end\":return _context7.stop();}}},_callee7);}));function request(){return _request7.apply(this,arguments);}return request;}(),label:/*i18n*/i18n._(\"Credential\")},{request:function(){var _request8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:return _context8.abrupt(\"return\",TeamsAPI.read({organization:selected.id}));case 1:case\"end\":return _context8.stop();}}},_callee8);}));function request(){return _request8.apply(this,arguments);}return request;}(),label:/*i18n*/i18n._(\"Teams\")},{request:function(){var _request9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:return _context9.abrupt(\"return\",NotificationTemplatesAPI.read({organization:selected.id}));case 1:case\"end\":return _context9.stop();}}},_callee9);}));function request(){return _request9.apply(this,arguments);}return request;}(),label:/*i18n*/i18n._(\"Notification Templates\")},{request:function request(){return ExecutionEnvironmentsAPI.read({organization:selected.id});},label:/*i18n*/i18n._(\"Execution Environments\")},{request:function(){var _request10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(){return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:return _context10.abrupt(\"return\",ProjectsAPI.read({organization:selected.id}));case 1:case\"end\":return _context10.stop();}}},_callee10);}));function request(){return _request10.apply(this,arguments);}return request;}(),label:[/*i18n*/i18n._(\"Projects\")]},{request:function request(){return InventoriesAPI.read({organization:selected.id});},label:/*i18n*/i18n._(\"Inventories\")},{request:function request(){return ApplicationsAPI.read({organization:selected.id});},label:/*i18n*/i18n._(\"Applications\")}];},executionEnvironment:function executionEnvironment(selected){return[{request:function(){var _request11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(){return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:return _context11.abrupt(\"return\",UnifiedJobTemplatesAPI.read({execution_environment:selected.id}));case 1:case\"end\":return _context11.stop();}}},_callee11);}));function request(){return _request11.apply(this,arguments);}return request;}(),label:[/*i18n*/i18n._(\"Templates\")]},{request:function(){var _request12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(){return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:return _context12.abrupt(\"return\",ProjectsAPI.read({default_environment:selected.id}));case 1:case\"end\":return _context12.stop();}}},_callee12);}));function request(){return _request12.apply(this,arguments);}return request;}(),label:[/*i18n*/i18n._(\"Projects\")]},{request:function(){var _request13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(){return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:return _context13.abrupt(\"return\",OrganizationsAPI.read({default_environment:selected.id}));case 1:case\"end\":return _context13.stop();}}},_callee13);}));function request(){return _request13.apply(this,arguments);}return request;}(),label:[/*i18n*/i18n._(\"Organizations\")]},{request:function(){var _request14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(){var _yield$InventorySourc,results,responses,total;return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.prev=0;_context14.next=3;return InventorySourcesAPI.read({execution_environment:selected.id});case 3:_yield$InventorySourc=_context14.sent;results=_yield$InventorySourc.data.results;_context14.next=7;return Promise.all(results.map(function(result){return WorkflowJobTemplateNodesAPI.read({unified_job_template:result.id});}));case 7:responses=_context14.sent;total=responses.reduce(function(_ref,_ref2){var acc=_ref.data.count;var cur=_ref2.data.count;return acc+cur;},{data:{count:0}});return _context14.abrupt(\"return\",{data:{count:total}});case 12:_context14.prev=12;_context14.t0=_context14[\"catch\"](0);throw new Error(_context14.t0);case 15:case\"end\":return _context14.stop();}}},_callee14,null,[[0,12]]);}));function request(){return _request14.apply(this,arguments);}return request;}(),label:[/*i18n*/i18n._(\"Workflow Job Template Nodes\")]}];},instanceGroup:function instanceGroup(selected){return[{request:function request(){return OrganizationsAPI.read({instance_groups:selected.id});},label:/*i18n*/i18n._(\"Organizations\")},{request:function request(){return InventoriesAPI.read({instance_groups:selected.id});},label:/*i18n*/i18n._(\"Inventories\")},{request:function request(){return UnifiedJobTemplatesAPI.read({instance_groups:selected.id});},label:/*i18n*/i18n._(\"Templates\")}];}};","map":{"version":3,"sources":["/awx_devel/awx/ui/src/util/getRelatedResourceDeleteDetails.js"],"names":["UnifiedJobTemplatesAPI","CredentialsAPI","InventoriesAPI","InventorySourcesAPI","JobTemplatesAPI","ProjectsAPI","WorkflowJobTemplateNodesAPI","WorkflowJobTemplatesAPI","CredentialInputSourcesAPI","TeamsAPI","NotificationTemplatesAPI","ExecutionEnvironmentsAPI","ApplicationsAPI","OrganizationsAPI","getRelatedResourceDeleteCounts","requests","results","error","hasCount","Promise","all","map","request","label","count","data","relatedResourceDeleteRequests","credential","selected","read","credentials","id","credentials__id","source_credential","credentialType","credential_type__id","inventory","inventorySource","inventorySourceId","unified_job_template","readGroups","readHosts","project","source_project","template","organization","executionEnvironment","execution_environment","default_environment","result","responses","total","reduce","acc","cur","Error","instanceGroup","instance_groups"],"mappings":"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","sourcesContent":["import { t } from '@lingui/macro';\n\nimport {\n  UnifiedJobTemplatesAPI,\n  CredentialsAPI,\n  InventoriesAPI,\n  InventorySourcesAPI,\n  JobTemplatesAPI,\n  ProjectsAPI,\n  WorkflowJobTemplateNodesAPI,\n  WorkflowJobTemplatesAPI,\n  CredentialInputSourcesAPI,\n  TeamsAPI,\n  NotificationTemplatesAPI,\n  ExecutionEnvironmentsAPI,\n  ApplicationsAPI,\n  OrganizationsAPI,\n} from 'api';\n\nexport async function getRelatedResourceDeleteCounts(requests) {\n  const results = {};\n  let error = null;\n  let hasCount = false;\n\n  try {\n    await Promise.all(\n      requests.map(async ({ request, label }) => {\n        const {\n          data: { count },\n        } = await request();\n\n        if (count > 0) {\n          results[label] = count;\n          hasCount = true;\n        }\n      })\n    );\n  } catch (err) {\n    error = err;\n  }\n\n  return {\n    results: hasCount && results,\n    error,\n  };\n}\n\nexport const relatedResourceDeleteRequests = {\n  credential: (selected) => [\n    {\n      request: () =>\n        JobTemplatesAPI.read({\n          credentials: selected.id,\n        }),\n      label: t`Job Templates`,\n    },\n    {\n      request: () => ProjectsAPI.read({ credentials: selected.id }),\n      label: t`Projects`,\n    },\n    {\n      request: () =>\n        InventorySourcesAPI.read({\n          credentials__id: selected.id,\n        }),\n      label: t`Inventory Sources`,\n    },\n    {\n      request: () =>\n        CredentialInputSourcesAPI.read({\n          source_credential: selected.id,\n        }),\n      label: t`Credential Input Sources`,\n    },\n    {\n      request: () =>\n        ExecutionEnvironmentsAPI.read({\n          credential: selected.id,\n        }),\n      label: t`Execution Environments`,\n    },\n  ],\n\n  credentialType: (selected) => [\n    {\n      request: async () =>\n        CredentialsAPI.read({\n          credential_type__id: selected.id,\n        }),\n      label: t`Credentials`,\n    },\n  ],\n\n  inventory: (selected) => [\n    {\n      request: async () =>\n        JobTemplatesAPI.read({\n          inventory: selected.id,\n        }),\n      label: t`Job Templates`,\n    },\n    {\n      request: () => WorkflowJobTemplatesAPI.read({ inventory: selected.id }),\n      label: t`Workflow Job Template`,\n    },\n  ],\n\n  inventorySource: (inventorySourceId) => [\n    {\n      request: async () =>\n        WorkflowJobTemplateNodesAPI.read({\n          unified_job_template: inventorySourceId,\n        }),\n      label: t`Workflow Job Template Nodes`,\n    },\n    {\n      request: async () => InventorySourcesAPI.readGroups(inventorySourceId),\n      label: t`Groups`,\n    },\n    {\n      request: async () => InventorySourcesAPI.readHosts(inventorySourceId),\n      label: t`Hosts`,\n    },\n  ],\n\n  project: (selected) => [\n    {\n      request: () =>\n        JobTemplatesAPI.read({\n          project: selected.id,\n        }),\n      label: t`Job Templates`,\n    },\n    {\n      request: () =>\n        WorkflowJobTemplateNodesAPI.read({\n          unified_job_template: selected.id,\n        }),\n      label: t`Workflow Job Templates`,\n    },\n    {\n      request: () =>\n        InventorySourcesAPI.read({\n          source_project: selected.id,\n        }),\n      label: t`Inventory Sources`,\n    },\n  ],\n\n  template: (selected) => [\n    {\n      request: async () =>\n        WorkflowJobTemplateNodesAPI.read({\n          unified_job_template: selected.id,\n        }),\n      label: [t`Workflow Job Template Nodes`],\n    },\n  ],\n\n  organization: (selected) => [\n    {\n      request: async () =>\n        CredentialsAPI.read({\n          organization: selected.id,\n        }),\n      label: t`Credential`,\n    },\n    {\n      request: async () =>\n        TeamsAPI.read({\n          organization: selected.id,\n        }),\n      label: t`Teams`,\n    },\n    {\n      request: async () =>\n        NotificationTemplatesAPI.read({\n          organization: selected.id,\n        }),\n      label: t`Notification Templates`,\n    },\n    {\n      request: () =>\n        ExecutionEnvironmentsAPI.read({\n          organization: selected.id,\n        }),\n      label: t`Execution Environments`,\n    },\n    {\n      request: async () =>\n        ProjectsAPI.read({\n          organization: selected.id,\n        }),\n      label: [t`Projects`],\n    },\n    {\n      request: () =>\n        InventoriesAPI.read({\n          organization: selected.id,\n        }),\n      label: t`Inventories`,\n    },\n    {\n      request: () =>\n        ApplicationsAPI.read({\n          organization: selected.id,\n        }),\n      label: t`Applications`,\n    },\n  ],\n  executionEnvironment: (selected) => [\n    {\n      request: async () =>\n        UnifiedJobTemplatesAPI.read({\n          execution_environment: selected.id,\n        }),\n      label: [t`Templates`],\n    },\n    {\n      request: async () =>\n        ProjectsAPI.read({\n          default_environment: selected.id,\n        }),\n      label: [t`Projects`],\n    },\n    {\n      request: async () =>\n        OrganizationsAPI.read({\n          default_environment: selected.id,\n        }),\n      label: [t`Organizations`],\n    },\n    {\n      request: async () => {\n        try {\n          const {\n            data: { results },\n          } = await InventorySourcesAPI.read({\n            execution_environment: selected.id,\n          });\n\n          const responses = await Promise.all(\n            results.map((result) =>\n              WorkflowJobTemplateNodesAPI.read({\n                unified_job_template: result.id,\n              })\n            )\n          );\n\n          const total = responses.reduce(\n            ({ data: { count: acc } }, { data: { count: cur } }) => acc + cur,\n            { data: { count: 0 } }\n          );\n          return { data: { count: total } };\n        } catch (err) {\n          throw new Error(err);\n        }\n      },\n      label: [t`Workflow Job Template Nodes`],\n    },\n  ],\n  instanceGroup: (selected) => [\n    {\n      request: () => OrganizationsAPI.read({ instance_groups: selected.id }),\n      label: t`Organizations`,\n    },\n    {\n      request: () => InventoriesAPI.read({ instance_groups: selected.id }),\n      label: t`Inventories`,\n    },\n    {\n      request: () =>\n        UnifiedJobTemplatesAPI.read({ instance_groups: selected.id }),\n      label: t`Templates`,\n    },\n  ],\n};\n"]},"metadata":{},"sourceType":"module"}